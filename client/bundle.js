/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={771:(e,t,n)=>{var r=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;((e,t)=>{for(var n in(e=>{r(e,"__esModule",{value:!0})})(e),t)r(e,n,{get:t[n],enumerable:!0})})(t,{Atom:()=>tt,PointerProxy:()=>lt,Ticker:()=>at,getPointerParts:()=>Ee,isPointer:()=>Pe,isPrism:()=>Ae,iterateAndCountTicks:()=>ot,iterateOver:()=>st,pointer:()=>Me,pointerToPrism:()=>rt,prism:()=>Ye,val:()=>it});var u,d=Array.isArray,h="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,p="object"==typeof self&&self&&self.Object===Object&&self,f=h||p||Function("return this")(),m=f.Symbol,g=Object.prototype,v=g.hasOwnProperty,y=g.toString,b=m?m.toStringTag:void 0,x=Object.prototype.toString,_=m?m.toStringTag:void 0,w=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":_&&_ in Object(e)?function(e){var t=v.call(e,b),n=e[b];try{e[b]=void 0;var r=!0}catch(e){}var i=y.call(e);return r&&(t?e[b]=n:delete e[b]),i}(e):function(e){return x.call(e)}(e)},S=function(e){return null!=e&&"object"==typeof e},E=function(e){return"symbol"==typeof e||S(e)&&"[object Symbol]"==w(e)},k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,M=/^\w*$/,P=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},T=f["__core-js_shared__"],C=(u=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",A=Function.prototype.toString,I=/^\[object .+?Constructor\]$/,R=Function.prototype,O=Object.prototype,D=R.toString,L=O.hasOwnProperty,j=RegExp("^"+D.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),z=function(e){return!(!P(e)||(t=e,C&&C in t))&&(function(e){if(!P(e))return!1;var t=w(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)?j:I).test(function(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t},N=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return z(n)?n:void 0},B=N(Object,"create"),F=Object.prototype.hasOwnProperty,U=Object.prototype.hasOwnProperty;function V(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}V.prototype.clear=function(){this.__data__=B?B(null):{},this.size=0},V.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},V.prototype.get=function(e){var t=this.__data__;if(B){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return F.call(t,e)?t[e]:void 0},V.prototype.has=function(e){var t=this.__data__;return B?void 0!==t[e]:U.call(t,e)},V.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=B&&void 0===t?"__lodash_hash_undefined__":t,this};var H=V,W=function(e,t){for(var n=e.length;n--;)if((r=e[n][0])===(i=t)||r!=r&&i!=i)return n;var r,i;return-1},G=Array.prototype.splice;function $(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}$.prototype.clear=function(){this.__data__=[],this.size=0},$.prototype.delete=function(e){var t=this.__data__,n=W(t,e);return!(n<0||(n==t.length-1?t.pop():G.call(t,n,1),--this.size,0))},$.prototype.get=function(e){var t=this.__data__,n=W(t,e);return n<0?void 0:t[n][1]},$.prototype.has=function(e){return W(this.__data__,e)>-1},$.prototype.set=function(e,t){var n=this.__data__,r=W(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var q=$,K=N(f,"Map"),X=function(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map};function Y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Y.prototype.clear=function(){this.size=0,this.__data__={hash:new H,map:new(K||q),string:new H}},Y.prototype.delete=function(e){var t=X(this,e).delete(e);return this.size-=t?1:0,t},Y.prototype.get=function(e){return X(this,e).get(e)},Y.prototype.has=function(e){return X(this,e).has(e)},Y.prototype.set=function(e,t){var n=X(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var Z=Y,J="Expected a function";function Q(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(J);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Q.Cache||Z),n}Q.Cache=Z;var ee,te,ne,re,ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/\\(\\)?/g,ae=(ee=Q((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ie,(function(e,n,r,i){t.push(r?i.replace(oe,"$1"):n||e)})),t}),(function(e){return 500===te.size&&te.clear(),e})),te=ee.cache,ee),se=m?m.prototype:void 0,le=se?se.toString:void 0,ce=function e(t){if("string"==typeof t)return t;if(d(t))return function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(t,e)+"";if(E(t))return le?le.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n},ue=function(e,t){return d(e)?e:function(e,t){if(d(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!E(e))||M.test(e)||!k.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:ae(function(e){return null==e?"":ce(e)}(e))},de=function(e){if("string"==typeof e||E(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},he=function(e,t,n){var r=null==e?void 0:function(e,t){for(var n=0,r=(t=ue(t,e)).length;null!=e&&n<r;)e=e[de(t[n++])];return n&&n==r?e:void 0}(e,t);return void 0===r?n:r},pe=(ne=Object.getPrototypeOf,re=Object,function(e){return ne(re(e))}),fe=Function.prototype,me=Object.prototype,ge=fe.toString,ve=me.hasOwnProperty,ye=ge.call(Object),be=new WeakMap,xe=new WeakMap,_e=Symbol("pointerMeta"),we={get(e,t){if(t===_e)return be.get(e);let n=xe.get(e);n||(n=new Map,xe.set(e,n));const r=n.get(t);if(void 0!==r)return r;const i=be.get(e),o=ke({root:i.root,path:[...i.path,t]});return n.set(t,o),o}},Se=e=>e[_e],Ee=e=>{const{root:t,path:n}=Se(e);return{root:t,path:n}};function ke(e){var t;const n={root:e.root,path:null!=(t=e.path)?t:[]},r={};return be.set(r,n),new Proxy(r,we)}var Me=ke,Pe=e=>e&&!!Se(e),Te=(e,t,n)=>{if(0===t.length)return n(e);if(Array.isArray(e)){let[r,...i]=t;r=parseInt(String(r),10),isNaN(r)&&(r=0);const o=e[r],a=Te(o,i,n);if(o===a)return e;const s=[...e];return s.splice(r,1,a),s}if("object"==typeof e&&null!==e){const[u,...d]=t,h=e[u],p=Te(h,d,n);if(h===p)return e;return r=((e,t)=>{for(var n in t||(t={}))s.call(t,n)&&c(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&c(e,n,t[n]);return e})({},e),i(r,o({[u]:p}))}{const[e,...r]=t;return{[e]:Te(void 0,r,n)}}var r},Ce=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const e=this._head;if(e)return this._head=e.next,e.data}push(e){const t={next:this._head,data:e};this._head=t}};function Ae(e){return!(!e||!e.isPrism||!0!==e.isPrism)}function Ie(){const e=new Ce,t=()=>{};return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{e.push(t)},stopIgnoringDependencies:()=>{e.peek()!==t||e.pop()},reportResolutionStart:n=>{const r=e.peek();r&&r(n),e.push(t)},reportResolutionEnd:t=>{e.pop()},pushCollector:t=>{e.push(t)},popCollector:t=>{if(e.peek()!==t)throw new Error("Popped collector is not on top of the stack");e.pop()}}}var{startIgnoringDependencies:Re,stopIgnoringDependencies:Oe,reportResolutionEnd:De,reportResolutionStart:Le,pushCollector:je,popCollector:ze}=function(){const e="__dataverse_discoveryMechanism_sharedStack",t="undefined"!=typeof window?window:void 0!==n.g?n.g:{};if(t){const n=t[e];if(n&&"object"==typeof n&&"Dataverse_discoveryMechanism"===n.type)return n;{const n=Ie();return t[e]=n,n}}return Ie()}(),Ne=()=>{},Be={},Fe=class{constructor(e){this._hotHandle=e,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(e,t){let n=this._refs.get(e);if(void 0!==n)return n;{const n={current:t};return this._refs.set(e,n),n}}effect(e,t,n){let r=this.effects.get(e);void 0===r&&(r={cleanup:Ne,deps:void 0},this.effects.set(e,r)),We(r.deps,n)&&(r.cleanup(),Re(),r.cleanup=Ve(t,Ne).value,Oe(),r.deps=n)}memo(e,t,n){let r=this.memos.get(e);return void 0===r&&(r={cachedValue:null,deps:void 0},this.memos.set(e,r)),We(r.deps,n)&&(Re(),r.cachedValue=Ve(t,void 0).value,Oe(),r.deps=n),r.cachedValue}state(e,t){const{value:n,setValue:r}=this.memo("state/"+e,(()=>{const e={current:t};return{value:e,setValue:t=>{e.current=t,this._hotHandle.forceStale()}}}),[]);return[n.current,r]}sub(e){return this.subs[e]||(this.subs[e]=new Fe(this._hotHandle)),this.subs[e]}cleanupEffects(){for(const e of this.effects.values())Ve(e.cleanup,void 0);this.effects.clear()}source(e,t){return this.effect("$$source/blah",(()=>e((()=>{this._hotHandle.forceStale()}))),[e]),t()}};function Ue(e){for(const t of Object.values(e.subs))Ue(t);e.cleanupEffects()}function Ve(e,t){try{return{value:e(),ok:!0}}catch(e){return setTimeout((function(){throw e})),{value:t,ok:!1}}}var He=new Ce;function We(e,t){if(void 0===e||void 0===t)return!0;const n=e.length;if(n!==t.length)return!0;for(let r=0;r<n;r++)if(e[r]!==t[r])return!0;return!1}function Ge(e,t,n){const r=He.peek();if(!r)throw new Error("prism.memo() is called outside of a prism() call.");return r.memo(e,t,n)}var $e=e=>new class{constructor(e){this._fn=e,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(e,t,n=!1){const r=()=>{e.onThisOrNextTick(o)};let i=Be;const o=()=>{const e=this.getValue();e!==i&&(i=e,t(e))};return this._addDependent(r),n&&(i=this.getValue(),t(i)),()=>{this._removeDependent(r)}}onStale(e){const t=()=>e();return this._addDependent(t),()=>{this._removeDependent(t)}}keepHot(){return this.onStale((()=>{}))}_addDependent(e){this._state.hot||this._goHot(),this._state.handle.addDependent(e)}_goHot(){const e=new class{constructor(e,t){this._fn=e,this._prismInstance=t,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new Fe(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=e=>{this._possiblyStaleDeps.add(e),this._markAsStale()};for(const e of this._dependencies)e._addDependent(this._reactToDependencyGoingStale);Re(),this.getValue(),Oe()}get hasDependents(){return this._dependents.size>0}removeDependent(e){this._dependents.delete(e)}addDependent(e){this._dependents.add(e)}destroy(){for(const e of this._dependencies)e._removeDependent(this._reactToDependencyGoingStale);Ue(this._scope)}getValue(){if(!this._isFresh){const e=this._recalculate();this._lastValue=e,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let e;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let e=!1;Re();for(const t of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(t)!==t.getValue()){e=!0;break}if(Oe(),this._possiblyStaleDeps.clear(),!e)return this._lastValue}const t=new Set;this._cacheOfDendencyValues.clear();const n=e=>{t.add(e),this._addDependency(e)};je(n),He.push(this._scope);try{e=this._fn()}catch(e){console.error(e)}finally{He.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}ze(n);for(const e of this._dependencies)t.has(e)||this._removeDependency(e);this._dependencies=t,Re();for(const e of t)this._cacheOfDendencyValues.set(e,e.getValue());return Oe(),e}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const e of this._dependents)e(this._prismInstance)}}_addDependency(e){this._dependencies.has(e)||(this._dependencies.add(e),e._addDependent(this._reactToDependencyGoingStale))}_removeDependency(e){this._dependencies.has(e)&&(this._dependencies.delete(e),e._removeDependent(this._reactToDependencyGoingStale))}}(this._fn,this);this._state={hot:!0,handle:e}}_removeDependent(e){const t=this._state;if(!t.hot)return;const n=t.handle;n.removeDependent(e),n.hasDependents||(this._state={hot:!1,handle:void 0},n.destroy())}getValue(){Le(this);const e=this._state;let t;return t=e.hot?e.handle.getValue():function(e){const t=new qe;let n;He.push(t);try{n=e()}catch(e){console.error(e)}finally{He.pop()!==t&&console.warn("The Prism hook stack has slipped. This is a bug.")}return n}(this._fn),De(this),t}}(e),qe=class{effect(e,t,n){console.warn("prism.effect() does not run in cold prisms")}memo(e,t,n){return t()}state(e,t){return[t,()=>{}]}ref(e,t){return{current:t}}sub(e){return new qe}source(e,t){return t()}};$e.ref=function(e,t){const n=He.peek();if(!n)throw new Error("prism.ref() is called outside of a prism() call.");return n.ref(e,t)},$e.effect=function(e,t,n){const r=He.peek();if(!r)throw new Error("prism.effect() is called outside of a prism() call.");return r.effect(e,t,n)},$e.memo=Ge,$e.ensurePrism=function(){if(!He.peek())throw new Error("The parent function is called outside of a prism() call.")},$e.state=function(e,t){const n=He.peek();if(!n)throw new Error("prism.state() is called outside of a prism() call.");return n.state(e,t)},$e.scope=function(e,t){const n=He.peek();if(!n)throw new Error("prism.scope() is called outside of a prism() call.");const r=n.sub(e);He.push(r);const i=Ve(t,void 0).value;return He.pop(),i},$e.sub=function(e,t,n){return Ge(e,(()=>$e(t)),n).getValue()},$e.inPrism=function(){return!!He.peek()},$e.source=function(e,t){const n=He.peek();if(!n)throw new Error("prism.source() is called outside of a prism() call.");return n.source(e,t)};var Ke,Xe,Ye=$e;(Xe=Ke||(Ke={}))[Xe.Dict=0]="Dict",Xe[Xe.Array=1]="Array",Xe[Xe.Other=2]="Other";var Ze=e=>Array.isArray(e)?1:function(e){if(!S(e)||"[object Object]"!=w(e))return!1;var t=pe(e);if(null===t)return!0;var n=ve.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ge.call(n)==ye}(e)?0:2,Je=(e,t,n=Ze(e))=>0===n&&"string"==typeof t||1===n&&Qe(t)?e[t]:void 0,Qe=e=>{const t="number"==typeof e?e:parseInt(e,10);return!isNaN(t)&&t>=0&&t<1/0&&(0|t)===t},et=class{constructor(e,t){this._parent=e,this._path=t,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(e){this.identityChangeListeners.add(e)}removeIdentityChangeListener(e){this.identityChangeListeners.delete(e),this._checkForGC()}removeChild(e){this.children.delete(e),this._checkForGC()}getChild(e){return this.children.get(e)}getOrCreateChild(e){let t=this.children.get(e);return t||(t=t=new et(this,this._path.concat([e])),this.children.set(e,t)),t}_checkForGC(){var e,t;this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild((e=this._path,(t=null==e?0:e.length)?e[t-1]:void 0))}},tt=class{constructor(e){this.$$isPointerToPrismProvider=!0,this.pointer=Me({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(e,t)=>{const{path:n}=Ee(e),r=this._getOrCreateScopeForPath(n);return r.identityChangeListeners.add(t),()=>{r.identityChangeListeners.delete(t)}},this._currentState=e,this._rootScope=new et(void 0,[])}set(e){const t=this._currentState;this._currentState=e,this._checkUpdates(this._rootScope,t,e)}get(){return this._currentState}getByPointer(e){const t=Pe(e)?e:e(this.pointer),n=Ee(t).path;return this._getIn(n)}_getIn(e){return 0===e.length?this.get():he(this.get(),e)}reduce(e){this.set(e(this.get()))}reduceByPointer(e,t){const n=Pe(e)?e:e(this.pointer),r=Ee(n).path,i=function(e,t,n){return 0===t.length?n(e):Te(e,t,n)}(this.get(),r,t);this.set(i)}setByPointer(e,t){this.reduceByPointer(e,(()=>t))}_checkUpdates(e,t,n){if(t===n)return;for(const t of e.identityChangeListeners)t(n);if(0===e.children.size)return;const r=Ze(t),i=Ze(n);if(2!==r||r!==i)for(const[o,a]of e.children){const e=Je(t,o,r),s=Je(n,o,i);this._checkUpdates(a,e,s)}}_getOrCreateScopeForPath(e){let t=this._rootScope;for(const n of e)t=t.getOrCreateChild(n);return t}pointerToPrism(e){const{path:t}=Ee(e),n=t=>this._onPointerValueChange(e,t),r=()=>this._getIn(t);return Ye((()=>Ye.source(n,r)))}},nt=new WeakMap,rt=e=>{const t=Se(e);let n=nt.get(t);if(!n){const i=t.root;if("object"!=typeof(r=i)||null===r||!0!==r.$$isPointerToPrismProvider)throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");n=i.pointerToPrism(e),nt.set(t,n)}var r;return n},it=e=>Pe(e)?rt(e).getValue():Ae(e)?e.getValue():e;function*ot(e){let t;if(Pe(e))t=rt(e);else{if(!Ae(e))throw new Error("Only pointers and prisms are supported");t=e}let n=0;const r=t.onStale((()=>{n++}));try{for(;;){const e=n;n=0,yield{value:t.getValue(),ticks:e}}}finally{r()}}var at=class{constructor(e){this._conf=e,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(e){this._scheduledForThisOrNextTick.add(e),this._dormant&&this._goActive()}onNextTick(e){this._scheduledForNextTick.add(e),this._dormant&&this._goActive()}offThisOrNextTick(e){this._scheduledForThisOrNextTick.delete(e)}offNextTick(e){this._scheduledForNextTick.delete(e)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var e,t;this._dormant&&(this._dormant=!1,null==(t=null==(e=this._conf)?void 0:e.onActive)||t.call(e))}_goDormant(){var e,t;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,null==(t=null==(e=this._conf)?void 0:e.onDormant)||t.call(e))}tick(e=performance.now()){if(this.__ticks++,!this._dormant&&0===this._scheduledForNextTick.size&&0===this._scheduledForThisOrNextTick.size&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=180))this._goDormant();else{this._ticking=!0,this._timeAtCurrentTick=e;for(const e of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(e);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}}_tick(e){const t=this.time;if(e>10&&console.warn("_tick() recursing for 10 times"),e>100)throw new Error("Maximum recursion limit for _tick()");const n=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const e of n)e(t);if(this._scheduledForThisOrNextTick.size>0)return this._tick(e+1)}};function*st(e){let t;if(Pe(e))t=rt(e);else{if(!Ae(e))throw new Error("Only pointers and prisms are supported");t=e}const n=new at,r=t.onChange(n,(e=>{}));try{for(;;)n.tick(),yield t.getValue()}finally{r()}}var lt=class{constructor(e){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new tt(e),this.pointer=Me({root:this,path:[]})}setPointer(e){this._currentPointerBox.set(e)}pointerToPrism(e){const{path:t}=Se(e);return Ye((()=>{const e=this._currentPointerBox.prism.getValue(),n=t.reduce(((e,t)=>e[t]),e);return it(n)}))}}},654:(e,t,n)=>{var r,i,o;e=n.nmd(e);var a,s=Object.create,l=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,f=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&v(e,n,t[n]);if(p)for(var n of p(t))g.call(t,n)&&v(e,n,t[n]);return e},b=(e,t)=>c(e,d(t)),x=e=>l(e,"__esModule",{value:!0}),_=(e,t)=>{var n={};for(var r in e)m.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&p)for(var r of p(e))t.indexOf(r)<0&&g.call(e,r)&&(n[r]=e[r]);return n},w=(e,t)=>function(){return e&&(t=(0,e[Object.keys(e)[0]])(e=0)),t},S=(e,t)=>function(){return t||(0,e[Object.keys(e)[0]])((t={exports:{}}).exports,t),t.exports},E=(e,t)=>{for(var n in x(e),t)l(e,n,{get:t[n],enumerable:!0})},k=e=>((e,t,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of h(t))m.call(e,r)||"default"===r||l(e,r,{get:()=>t[r],enumerable:!(n=u(t,r))||n.enumerable});return e})(x(l(null!=e?s(f(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),M=(e,t,n)=>(v(e,"symbol"!=typeof t?t+"":t,n),n),P=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{s(n.next(e))}catch(e){i(e)}},a=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,a);s((n=n.apply(e,t)).next())}));function T(){return a}var C,A,I=w({"studio/src/getStudio.ts"(){}});function R(e,t,n=[]){if("object"==typeof e&&e){if(C(e)||A(e))return void t(e,n);for(const[r,i]of Object.entries(e))R(i,t,[...n,r])}else{if(null==e)return;t(e,n)}}var O,D,L,j,z,N,B,F=w({"shared/src/utils/forEachDeep.ts"(){C=e=>"object"==typeof e&&null!==e&&Object.hasOwnProperty.call(e,"type")&&"image"===e.type&&Object.hasOwnProperty.call(e,"id")&&"string"==typeof e.id&&""!==e.id,A=e=>"object"==typeof e&&null!==e&&Object.hasOwnProperty.call(e,"r")&&Object.hasOwnProperty.call(e,"g")&&Object.hasOwnProperty.call(e,"b")&&Object.hasOwnProperty.call(e,"a")&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b&&"number"==typeof e.a}});function U(e){return t=>"object"==typeof t&&!!t&&t.type===e}var V,H=w({"shared/src/instanceTypes.ts"(){O=U("Theatre_Project"),D=U("Theatre_Sheet"),L=U("Theatre_SheetTemplate"),j=U("Theatre_SheetObject"),z=U("Theatre_SheetObjectTemplate"),U("Theatre_Project_PublicAPI"),N=U("Theatre_Sheet_PublicAPI"),B=U("Theatre_SheetObject_PublicAPI")}}),W=S({"../node_modules/jiff/lib/lcs.js"(e){var t,n,r;function i(e,i,o,a,s,l){return i[s+a]===o[l+a]?{value:e[l+1][s+1].value,type:r}:e[l][s+1].value<e[l+1][s].value?{value:e[l][s+1].value+1,type:t}:{value:e[l+1][s].value+1,type:n}}e.compare=function(e,o){for(var a=e.length,s=o.length,l=function(e,t){for(var n=0,r=Math.min(e.length,t.length);n<r&&e[n]===t[n];)++n;return n}(e,o),c=l<a&&l<s?function(e,t){for(var n=e.length-1,r=t.length-1,i=Math.min(n,r),o=0;o<i&&e[n-o]===t[r-o];)++o;return o}(e,o):0,u=c+l-1,d=function(e,i){var o,a,s,l=[];for(s=l[i]=[],a=0;a<e;++a)s[a]={value:e-a,type:t};for(o=0;o<i;++o)l[o]=[],l[o][e]={value:i-o,type:n};return l[i][e]={value:0,type:r},l}(a-=u,s-=u),h=a-1;h>=0;--h)for(var p=s-1;p>=0;--p)d[p][h]=i(d,e,o,l,h,p);return{prefix:l,matrix:d,suffix:c}},e.reduce=function(e,i,o){var a,s,l,c,u=o.matrix,d=o.prefix;for(a=0;a<d;++a)i=e(i,r,a,a);for(l=a,d=u.length,a=0,s=0;a<d;)switch(i=e(i,c=u[a][s].type,a+l,s+l),c){case r:++a,++s;break;case t:++s;break;case n:++a}for(a+=l,s+=l,d=o.suffix,l=0;l<d;++l)i=e(i,r,a+l,s+l);return i},e.REMOVE=t=-1,e.ADD=n=1,e.EQUAL=r=0}}),G=S({"../node_modules/jiff/lib/array.js"(e){e.cons=function(e,t){var n=t.length,r=new Array(n+1);r[0]=e;for(var i=0;i<n;++i)r[i+1]=t[i];return r},e.tail=function(e){for(var t=e.length-1,n=new Array(t),r=0;r<t;++r)n[r]=e[r+1];return n},e.map=function(e,t){for(var n=new Array(t.length),r=0;r<t.length;++r)n[r]=e(t[r]);return n}}}),$=S({"../node_modules/jiff/lib/jsonPointerParse.js"(e,t){t.exports=function(e,t){var a,s,l,c;for(a=e.charAt(0)===r?1:0,s="",n.lastIndex=a;l=n.exec(e);)if(c=l[0],s+=e.slice(a,n.lastIndex-c.length),a=n.lastIndex,c===r){if(!1===t(s))return e;s=""}else s+=c===o?r:i;return t(s+=e.slice(a)),e};var n=/\/|~1|~0/g,r="/",i="~",o="~1"}}),q=S({"../node_modules/jiff/lib/jsonPointer.js"(e){var t=$();e.find=function(e,r,i,o){if("string"==typeof r){if(""===r)return{target:e,key:void 0};if(r===n)return{target:e,key:""};var a,s=e,l=void 0!==o;return t(r,(function(t){if(null==e)return s=null,!1;a=Array.isArray(e)?l?function(e,t,n,r){var i=t;if(i<0)throw new Error("array index out of bounds "+i);if(void 0!==r&&"function"==typeof e&&(i=e(t,n,r))<0)throw new Error("could not find patch context "+r);return i}(i,h(t),e,o):"-"===t?t:h(t):t,s=e,e=e[a]})),null===s?void 0:{target:s,key:a}}},e.join=function(e){return e.join(n)},e.absolute=function(e){return e[0]===n?e:n+e},e.parse=function(e){var n=[];return t(e,n.push.bind(n)),n},e.contains=function(e,t){return 0===t.indexOf(e)&&t[e.length]===n},e.encodeSegment=function(e){return e.replace(s,l).replace(r,i)},e.decodeSegment=function(e){return e.replace(o,n).replace(c,a)},e.parseArrayIndex=h,e.isValidArrayIndex=d;var n="/",r=/\//g,i="~1",o=/~1/g,a="~",s=/~/g,l="~0",c=/~0/g,u=/^(0|[1-9]\d*)$/;function d(e){return u.test(e)}function h(e){if(d(e))return+e;throw new SyntaxError("invalid array index "+e)}}}),K=S({"../node_modules/jiff/lib/clone.js"(e,t){t.exports=function e(t){return null==t||"object"!=typeof t?t:Array.isArray(t)?function(t){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=e(t[i]);return r}(t):function(t){for(var n,r=Object.keys(t),i={},o=0,a=r.length;o<a;++o)i[n=r[o]]=e(t[n]);return i}(t)}}}),X=S({"../node_modules/jiff/lib/deepEquals.js"(e,t){t.exports=function e(t,n){return t===n||(Array.isArray(t)&&Array.isArray(n)?function(t,n){if(t.length!==n.length)return!1;for(var r=0;r<t.length;++r)if(!e(t[r],n[r]))return!1;return!0}(t,n):"object"==typeof t&&"object"==typeof n&&function(t,n){if(null===t&&null!==n||null!==t&&null===n)return!1;var r=Object.keys(t),i=Object.keys(n);if(r.length!==i.length)return!1;for(var o,a=0;a<r.length;++a)if(!((o=r[a])in n)||!e(t[o],n[o]))return!1;return!0}(t,n))}}}),Y=S({"../node_modules/jiff/lib/commutePaths.js"(e,t){var n=q();function r(e,t,n,r,i){var o=t.length-1,a=+t[o],s=+r[o],l=r.slice();return a>s||("add"===e.op||"copy"===e.op?l[o]=Math.max(0,s-i):"remove"===e.op&&(l[o]=Math.max(0,s+i))),l}function i(e){return"remove"===e.op?{op:e.op,path:e.path}:"copy"===e.op||"move"===e.op?{op:e.op,path:e.path,from:e.from}:{op:e.op,path:e.path,value:e.value}}t.exports=function(e,t){var o=n.parse(e.path),a=n.parse(t.path),s=function(e,t){var n=e.length,r=t.length;if(0===n||0===r||n<2&&r<2)return[];for(var i=n===r?n-1:Math.min(n,r),o=0;o<i&&e[o]===t[o];)++o;return e.slice(0,o)}(o,a),l=function(e,t,r){return n.isValidArrayIndex(e[r])&&n.isValidArrayIndex(t[r])}(o,a,s.length),c=i(e),u=i(t);return 0!==s.length||l?l?function(e,t,i,o){return t.length===o.length?(a=e,l=i,c=o,d=(s=t).length-1,h=+s[d],p=+c[d],h<p?"add"===a.op||"copy"===a.op?((u=c.slice())[d]=Math.max(0,p-1),l.path=n.absolute(n.join(u))):"remove"===a.op&&((u=c.slice())[d]=p+1,l.path=n.absolute(n.join(u))):"add"===l.op||"copy"===l.op?((u=s.slice())[d]=h+1,a.path=n.absolute(n.join(u))):h>p&&"remove"===l.op&&((u=s.slice())[d]=Math.max(0,h-1),a.path=n.absolute(n.join(u))),[l,a]):(t.length>o.length?(t=r(i,o,0,t,-1),e.path=n.absolute(n.join(t))):(o=r(e,t,0,o,1),i.path=n.absolute(n.join(o))),[i,e]);var a,s,l,c,u,d,h,p}(c,o,u,a):function(e,t,n,r){if(e.path===n.path)throw new TypeError("cannot commute "+e.op+","+n.op+" with identical object paths");return[n,e]}(c,0,u):[u,c]}}}),Z=S({"../node_modules/jiff/lib/TestFailedError.js"(e,t){function n(e){Error.call(this),this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}t.exports=n,n.prototype=Object.create(Error.prototype),n.prototype.constructor=n}}),J=S({"../node_modules/jiff/lib/InvalidPatchOperationError.js"(e,t){function n(e){Error.call(this),this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}t.exports=n,n.prototype=Object.create(Error.prototype),n.prototype.constructor=n}}),Q=S({"../node_modules/jiff/lib/PatchNotInvertibleError.js"(e,t){function n(e){Error.call(this),this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}t.exports=n,n.prototype=Object.create(Error.prototype),n.prototype.constructor=n}}),ee=S({"../node_modules/jiff/lib/patches.js"(e){var t=q(),n=K(),r=X(),i=Y(),o=G(),a=Z(),s=J(),l=Q(),c=t.find,u=t.parseArrayIndex;function d(e,t){var n=e.target;if(Array.isArray(n))if("-"===e.key)n.push(t);else{if(e.key>n.length)throw new s("target of add outside of array bounds");n.splice(e.key,0,t)}else{if(!g(n))throw new s("target of add must be an object or array "+e.key);n[e.key]=t}}function h(e,t){if(e.path===t.path&&"remove"===t.op)throw new TypeError("Can't commute add,remove -> remove,add for same path");return i(e,t)}function p(e){var t,n=e.target;if(Array.isArray(n))return(t=n.splice(u(e.key),1))[0];if(g(n))return t=n[e.key],delete n[e.key],t;throw new s("target of remove must be an object or array")}function f(e){return void 0===e||null==e.target&&void 0!==e.key}function m(e){return void 0!==e.key&&void 0===e.target[e.key]}function g(e){return null!==e&&"object"==typeof e}e.test={apply:function(e,t,n){var i,o=c(e,t.path,n.findContext,t.context),s=o.target;if(i=Array.isArray(s)?s[u(o.key)]:void 0===o.key?o.target:o.target[o.key],!r(i,t.value))throw new a("test failed "+JSON.stringify(t));return e},inverse:function(e,t){return e.push(t),1},commute:function(e,t){if(e.path===t.path&&"remove"===t.op)throw new TypeError("Can't commute test,remove -> remove,test for same path");return"test"===t.op||"replace"===t.op?[t,e]:i(e,t)}},e.add={apply:function(e,t,r){var i=c(e,t.path,r.findContext,t.context);if(f(i))throw new s("path does not exist "+t.path);if(void 0===t.value)throw new s("missing value");var o=n(t.value);return void 0===i.key?o:(d(i,o),e)},inverse:function(e,t){var n=t.context;return void 0!==n&&(n={before:n.before,after:o.cons(t.value,n.after)}),e.push({op:"test",path:t.path,value:t.value,context:n}),e.push({op:"remove",path:t.path,context:n}),1},commute:h},e.remove={apply:function(e,t,n){var r=c(e,t.path,n.findContext,t.context);if(f(r)||void 0===r.target[r.key])throw new s("path does not exist "+t.path);return p(r),e},inverse:function(e,t,n,r){var i=r[n-1];if(void 0===i||"test"!==i.op||i.path!==t.path)throw new l("cannot invert remove w/o test");var a=i.context;return void 0!==a&&(a={before:a.before,after:o.tail(a.after)}),e.push({op:"add",path:i.path,value:i.value,context:a}),2},commute:function(e,t){return e.path===t.path&&"remove"===t.op?[t,e]:i(e,t)}},e.replace={apply:function(e,t,r){var i=c(e,t.path,r.findContext,t.context);if(f(i)||m(i))throw new s("path does not exist "+t.path);if(void 0===t.value)throw new s("missing value");var o=n(t.value);if(void 0===i.key)return o;var a=i.target;return Array.isArray(a)?a[u(i.key)]=o:a[i.key]=o,e},inverse:function(e,t,n,r){var i=r[n-1];if(void 0===i||"test"!==i.op||i.path!==t.path)throw new l("cannot invert replace w/o test");var a=i.context;return void 0!==a&&(a={before:a.before,after:o.cons(i.value,o.tail(a.after))}),e.push({op:"test",path:i.path,value:t.value}),e.push({op:"replace",path:i.path,value:i.value}),2},commute:function(e,t){if(e.path===t.path&&"remove"===t.op)throw new TypeError("Can't commute replace,remove -> remove,replace for same path");return"test"===t.op||"replace"===t.op?[t,e]:i(e,t)}},e.move={apply:function(e,n,r){if(t.contains(n.path,n.from))throw new s("move.from cannot be ancestor of move.path");return d(c(e,n.path,r.findContext,n.context),p(c(e,n.from,r.findContext,n.fromContext))),e},inverse:function(e,t){return e.push({op:"move",path:t.from,context:t.fromContext,from:t.path,fromContext:t.context}),1},commute:function(e,t){if(e.path===t.path&&"remove"===t.op)throw new TypeError("Can't commute move,remove -> move,replace for same path");return i(e,t)}},e.copy={apply:function(e,t,r){var i=c(e,t.path,r.findContext,t.context),o=c(e,t.from,r.findContext,t.fromContext);if(f(o)||m(o))throw new s("copy.from must exist");var a,l=o.target;return a=Array.isArray(l)?l[u(o.key)]:l[o.key],d(i,n(a)),e},inverse:function(e,t){throw new l("cannot invert "+t.op)},commute:h}}}),te=S({"../node_modules/jiff/lib/jsonPatch.js"(e){var t=ee(),n=K(),r=J();e.apply=function(e,t,r){return o(e,n(t),r)},e.applyInPlace=o,e.clone=n,e.isValidObject=a,e.defaultHash=function(e){return a(e)||function(e){return"[object Array]"===Object.prototype.toString.call(e)}(e)?JSON.stringify(e):e};var i={};function o(e,n,o){if(o||(o=i),!Array.isArray(e))return n;for(var a,s,l=0;l<e.length;++l){if(s=e[l],void 0===(a=t[s.op]))throw new r("invalid op "+JSON.stringify(s));n=a.apply(n,s,o)}return n}function a(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}}}),ne=S({"../node_modules/jiff/lib/inverse.js"(e,t){var n=ee();function r(e,t,r,i){var o=n[t.op];return void 0!==o&&"function"==typeof o.inverse?o.inverse(e,t,r,i):1}t.exports=function(e){var t,n,i=[];for(t=e.length-1;t>=0;t-=n)n=r(i,e[t],t,e);return i}}}),re=S({"../node_modules/jiff/jiff.js"(e){var t=W(),n=G(),r=te(),i=ne(),o=q().encodeSegment;e.diff=function(e,t,n){return l(e,t,"",function(e,t){return"object"==typeof e?{patch:t,hash:c(d,e.hash,s),makeContext:c(d,e.makeContext,u),invertible:!(!1===e.invertible)}:{patch:t,hash:c(d,e,s),makeContext:u,invertible:!0}}(n,[])).patch},e.patch=r.apply,e.patchInPlace=r.applyInPlace,e.inverse=i,e.clone=r.clone,e.InvalidPatchOperationError=J(),e.TestFailedError=Z(),e.PatchNotInvertibleError=Q();var a=r.isValidObject,s=r.defaultHash;function l(e,r,i,s){return Array.isArray(e)&&Array.isArray(r)?function(e,r,i,o){var a=n.map(o.hash,e),s=n.map(o.hash,r);return function(e,n,r,i,o){var a=0;return t.reduce((function(i,o,s,c){var u,d,h=i.patch,p=r+"/"+(c+a);return o===t.REMOVE?(u=h[h.length-1],d=i.makeContext(c,e),i.invertible&&h.push({op:"test",path:p,value:e[c],context:d}),void 0!==u&&"add"===u.op&&u.path===p?(u.op="replace",u.context=d):h.push({op:"remove",path:p,context:d}),a-=1):o===t.ADD?(h.push({op:"add",path:p,value:n[s],context:i.makeContext(c,e)}),a+=1):l(e[c],n[s],p,i),i}),i,o)}(e,r,i,o,t.compare(a,s))}(e,r,i,s):a(e)&&a(r)?function(e,t,n,r){var i,a,s=Object.keys(t),c=r.patch;for(i=s.length-1;i>=0;--i){a=s[i];var u=n+"/"+o(a);void 0!==e[a]?l(e[a],t[a],u,r):c.push({op:"add",path:u,value:t[a]})}for(i=(s=Object.keys(e)).length-1;i>=0;--i)if(void 0===t[a=s[i]]){var d=n+"/"+o(a);r.invertible&&c.push({op:"test",path:d,value:e[a]}),c.push({op:"remove",path:d})}return r}(e,r,i,s):function(e,t,n,r){return e!==t&&(r.invertible&&r.patch.push({op:"test",path:n,value:e}),r.patch.push({op:"replace",path:n,value:t})),r}(e,r,i,s)}function c(e,t,n){return e(t)?t:n}function u(){}function d(e){return"function"==typeof e}}}),ie=S({"../node_modules/json-touch-patch/lib/utils/pluck.js"(e,t){"use strict";t.exports=function(e,t){for(var n=0,r=t.length-1;n<r;n++){if(!e[t[n]])return null;e=e[t[n]]}return e}}}),oe=S({"../node_modules/json-touch-patch/lib/utils/toKeys.js"(e,t){"use strict";function n(e){return"~0"===e?"~":"/"}t.exports=function(e){var t=e.split("/");if(-1===e.indexOf("~"))return t;for(var r=0,i=t.length;r<i;r++)-1!==t[r].indexOf("~")&&(t[r]=t[r].replace(/~[01]/g,n));return t}}}),ae=S({"../node_modules/json-touch-patch/lib/get.js"(e,t){"use strict";var n=ie(),r=oe();t.exports=function(e,t){var i=r(t),o=i[i.length-1],a=n(e,i);return a?a[o]:void 0}}}),se=S({"../node_modules/json-touch-patch/lib/utils/deepEqual.js"(e,t){"use strict";t.exports=function e(t,n){if(t===n)return!0;if(!t||!n||"object"!=typeof t||"object"!=typeof n)return!1;if(t.length!==n.length)return!1;if(Array.isArray(t)){if(!Array.isArray(n))return!1;for(var r=0,i=t.length;r<i;r++)if(!e(t[r],n[r]))return!1;return!0}var o=Object.keys(t);if(o.length!==Object.keys(n).length)return!1;for(var a=0,s=o.length;a<s;a++){var l=o[a];if(!e(t[l],n[l]))return!1}return!0}}}),le=S({"../node_modules/json-touch-patch/lib/utils/toArrayIndex.js"(e,t){"use strict";t.exports=function(e,t){if("-"===t)return e.length;for(var n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);if(57<i||i<48)return 1/0}return+t}}}),ce=S({"../node_modules/json-touch-patch/lib/add.js"(e,t){"use strict";var n=se(),r=ie(),i=le(),o=oe();t.exports=function(e,t,a,s){if(void 0===a)return"[op:add] require value, but got undefined";var l=o(t),c=l[l.length-1],u=r(e,l);if(null===u)return"[op:add] path not found: "+t;if(Array.isArray(u)){var d=i(u,c);if(u.length<d)return"[op:add] invalid array index: "+t;s(e,l).splice(d,0,a)}else n(u[c],a)||(s(e,l)[c]=a)}}}),ue=S({"../node_modules/json-touch-patch/lib/remove.js"(e,t){"use strict";var n=ie(),r=le(),i=oe();t.exports=function(e,t,o){var a=i(t),s=a[a.length-1],l=n(e,a);if(null===l)return"[op:remove] path not found: "+t;if(Array.isArray(l)){var c=r(l,s);if(l.length<=c)return"[op:remove] invalid array index: "+t;o(e,a).splice(c,1)}else delete o(e,a)[s]}}}),de=S({"../node_modules/json-touch-patch/lib/replace.js"(e,t){"use strict";var n=se(),r=ie(),i=le(),o=oe();t.exports=function(e,t,a,s){if(void 0===a)return"[op:replace] require value, but got undefined";var l=o(t),c=l[l.length-1],u=r(e,l);if(null===u)return"[op:replace] path not found: "+t;if(Array.isArray(u)){var d=i(u,c);if(u.length<=d)return"[op:replace] invalid array index: "+t;n(u[d],a)||s(e,l).splice(d,1,a)}else n(u[c],a)||(s(e,l)[c]=a)}}}),he=S({"../node_modules/json-touch-patch/lib/move.js"(e,t){"use strict";var n=ce(),r=ie(),i=le(),o=oe();t.exports=function(e,t,a,s){if(a!==t){var l=o(t),c=l[l.length-1],u=r(e,l);if(null===u)return"[op:move] path not found: "+t;var d=void 0;if(Array.isArray(u)){var h=i(u,c);if(u.length<=h)return"[op:move] invalid array index: "+a;d=u[h],s(e,l).splice(h,1)}else d=u[c],delete s(e,l)[c];return n(e,a,d,s)}}}}),pe=S({"../node_modules/json-touch-patch/lib/copy.js"(e,t){"use strict";var n=ie(),r=oe(),i=ce();t.exports=function(e,t,o,a){var s=r(t),l=s[s.length-1],c=n(e,s);return null===c?"[op:copy] path not found: "+t:i(e,o,c[l],a)}}}),fe=S({"../node_modules/json-touch-patch/lib/test.js"(e,t){"use strict";var n=se(),r=ie(),i=oe();t.exports=function(e,t,o){var a=i(t),s=a[a.length-1],l=r(e,a);return null===l?"[op:test] path not found: "+t:n(l[s],o)?void 0:"[op:test] not matched: "+JSON.stringify(l[s])+" "+JSON.stringify(o)}}}),me=S({"../node_modules/json-touch-patch/lib/utils/shallowCopy.js"(e,t){"use strict";t.exports=function(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return n}for(var i=Object.keys(e),o={},a=0,s=i.length;a<s;a++){var l=i[a];o[l]=e[l]}return o}}}),ge=S({"../node_modules/json-touch-patch/lib/utils/createAPI.js"(e,t){"use strict";var n=ae(),r=ce(),i=ue(),o=de(),a=he(),s=pe(),l=fe(),c=se(),u=me(),d=oe();t.exports=function(e,t){return{get:function(t){return n(e,t)},add:function(n,i){return r(e,n,i,t)},remove:function(n){return i(e,n,t)},replace:function(n,r){return o(e,n,r,t)},move:function(n,r){return a(e,n,r,t)},copy:function(n,r){return s(e,n,r,t)},test:function(t,n){return l(e,t,n)},deepEqual:c,shallowCopy:u,toKeys:d}}}}),ve=S({"../node_modules/json-touch-patch/lib/utils/exit.js"(e,t){"use strict";t.exports=function(e,t,n,r){return r.error=n,r.partial?t[""]:e}}}),ye=S({"../node_modules/json-touch-patch/lib/utils/toBoolean.js"(e,t){"use strict";t.exports=function(e){return!!e}}}),be=S({"../node_modules/json-touch-patch/lib/utils/throwException.js"(e,t){"use strict";t.exports=function(e){if(e)throw new TypeError(e)}}}),xe=S({"../node_modules/json-touch-patch/lib/utils/pluckWithShallowCopy.js"(e,t){"use strict";var n=me();t.exports=function(e,t){for(var r=0,i=t.length-1;r<i;r++)e=e[t[r]]=n(e[t[r]]);return e}}}),_e=S({"../node_modules/json-touch-patch/lib/utils/pluckWithCachedShallowCopy.js"(e,t){"use strict";var n=me();function r(e,t,r){var i=e[t];return r.has(i)||(i=n(i),r.add(i)),i}t.exports=function(e,t,n){for(var i=0,o=t.length-1;i<o;i++)e=e[t[i]]=r(e,t[i],n);return e}}}),we=S({"../node_modules/json-touch-patch/lib/patch.js"(e,t){"use strict";var n=ge(),r=ve(),i=ye(),o=be(),a=xe(),s=_e(),l=ce(),c=ue(),u=de(),d=he(),h=pe(),p=fe(),f=Set||function(){var e=[];return e.has=function(e){return-1!==this.indexOf(e)},e.add=function(e){this.push(e)},e};t.exports=function(e,t,m){if(0===t.length)return e;for(var g,v,y=(m=m||{}).strict?o:i,b=1===t.length?a:(g=new f,function(e,t){return s(e,t,g)}),x={"":e},_=0,w=t.length;_<w;_++){var S=t[_];switch(S.op){case"add":if(y(l(x,""+S.path,S.value,b)))return r(e,x,S,m);break;case"remove":if(y(c(x,""+S.path,b)))return r(e,x,S,m);break;case"replace":if(y(u(x,""+S.path,S.value,b)))return r(e,x,S,m);break;case"move":if(y(d(x,""+S.from,""+S.path,b)))return r(e,x,S,m);break;case"copy":if(y(h(x,""+S.from,""+S.path,b)))return r(e,x,S,m);break;case"test":if(y(p(x,""+S.path,S.value)))return r(e,x,S,m);break;default:if(!m.custom||!m.custom[S.op])return y("[op:"+S.op+"] unknown"),r(e,x,S,m);if(v=v||n(x,b),y(m.custom[S.op](v,S,_,t)))return r(e,x,S,m)}}return x[""]}}}),Se=S({"../node_modules/json-touch-patch/lib/index.js"(e,t){t.exports=we()}});function Ee(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var ke,Me,Pe,Te,Ce,Ae,Ie=w({"../node_modules/lodash-es/last.js"(){V=Ee}});function Re(e){return function(t,n){return e(t,n())}}function Oe(e){return Object.freeze({audience:De(e,8)?"internal":De(e,16)?"dev":"public",category:De(e,4)?"troubleshooting":De(e,2)?"todo":"general",level:De(e,512)?512:De(e,256)?256:De(e,128)?128:64})}function De(e,t){return(e&t)===t}function Le(e,t){return(32==(32&t)||(16==(16&t)?e.dev:8==(8&t)&&e.internal))&&e.min<=t}function je(e=console,t={}){const n=b(y({},Ae),{includes:y({},Ae.includes)}),r={styled:Be.bind(n,e),noStyle:Fe.bind(n,e)},i=Ne.bind(n);function o(){return n.loggingConsoleStyle&&n.loggerConsoleStyle?r.styled:r.noStyle}return n.create=o(),{configureLogger(e){var t;"console"===e?(n.loggerConsoleStyle=Ae.loggerConsoleStyle,n.create=o()):"console"===e.type?(n.loggerConsoleStyle=null!=(t=e.style)?t:Ae.loggerConsoleStyle,n.create=o()):"keyed"===e.type?(n.creatExt=t=>e.keyed(t.names),n.create=i):"named"===e.type&&(n.creatExt=ze.bind(null,e.named),n.create=i)},configureLogging(e){var t,r,i,a,s;n.includes.dev=null!=(t=e.dev)?t:Ae.includes.dev,n.includes.internal=null!=(r=e.internal)?r:Ae.includes.internal,n.includes.min=null!=(i=e.min)?i:Ae.includes.min,n.include=null!=(a=e.include)?a:Ae.include,n.loggingConsoleStyle=null!=(s=e.consoleStyle)?s:Ae.loggingConsoleStyle,n.create=o()},getLogger:()=>n.create({names:[]})}}function ze(e,t){const n=[];for(let{name:e,key:r}of t.names)n.push(null==r?e:`${e} (${r})`);return e(n)}function Ne(e){const t=y(y({},this.includes),this.include(e)),n=this.filtered,r=this.named.bind(this,e),i=this.creatExt(e),o=Le(t,524),a=Le(t,522),s=Le(t,521),l=Le(t,529),c=Le(t,545),u=Le(t,265),d=Le(t,268),h=Le(t,273),p=Le(t,289),f=Le(t,137),m=Le(t,145),g=Le(t,73),v=Le(t,81),b=o?i.error.bind(i,Ce._hmm):n.bind(e,524),x=a?i.error.bind(i,Ce._todo):n.bind(e,522),_=s?i.error.bind(i,Ce._error):n.bind(e,521),w=l?i.error.bind(i,Ce.errorDev):n.bind(e,529),S=c?i.error.bind(i,Ce.errorPublic):n.bind(e,545),E=d?i.warn.bind(i,Ce._kapow):n.bind(e,268),k=u?i.warn.bind(i,Ce._warn):n.bind(e,265),M=h?i.warn.bind(i,Ce.warnDev):n.bind(e,273),P=p?i.warn.bind(i,Ce.warnPublic):n.bind(e,273),T=f?i.debug.bind(i,Ce._debug):n.bind(e,137),C=m?i.debug.bind(i,Ce.debugDev):n.bind(e,145),A=g?i.trace.bind(i,Ce._trace):n.bind(e,73),I=v?i.trace.bind(i,Ce.traceDev):n.bind(e,81),R={_hmm:b,_todo:x,_error:_,errorDev:w,errorPublic:S,_kapow:E,_warn:k,warnDev:M,warnPublic:P,_debug:T,debugDev:C,_trace:A,traceDev:I,lazy:{_hmm:o?Re(b):b,_todo:a?Re(x):x,_error:s?Re(_):_,errorDev:l?Re(w):w,errorPublic:c?Re(S):S,_kapow:d?Re(E):E,_warn:u?Re(k):k,warnDev:h?Re(M):M,warnPublic:p?Re(P):P,_debug:f?Re(T):T,debugDev:m?Re(C):C,_trace:g?Re(A):A,traceDev:v?Re(I):I},named:r,utilFor:{internal:()=>({debug:R._debug,error:R._error,warn:R._warn,trace:R._trace,named:(e,t)=>R.named(e,t).utilFor.internal()}),dev:()=>({debug:R.debugDev,error:R.errorDev,warn:R.warnDev,trace:R.traceDev,named:(e,t)=>R.named(e,t).utilFor.dev()}),public:()=>({error:R.errorPublic,warn:R.warnPublic,debug(e,t){R._warn(`(public "debug" filtered out) ${e}`,t)},trace(e,t){R._warn(`(public "trace" filtered out) ${e}`,t)},named:(e,t)=>R.named(e,t).utilFor.public()})}};return R}function Be(e,t){const n=y(y({},this.includes),this.include(t)),r=[];let i="";for(let e=0;e<t.names.length;e++){const{name:n,key:o}=t.names[e];if(i+=` %c${n}`,r.push(this.style.css(n)),null!=o){const e=`%c#${o}`;i+=e,r.push(this.style.css(e))}}const o=this.filtered,a=this.named.bind(this,t),s=[i,...r];return Ue(o,t,n,e,s,function(e){const t=e.slice(0);for(let e=1;e<t.length;e++)t[e]+=";background-color:#e0005a;padding:2px;color:white";return t}(s),a)}function Fe(e,t){const n=y(y({},this.includes),this.include(t));let r="";for(let e=0;e<t.names.length;e++){const{name:n,key:i}=t.names[e];r+=` ${n}`,null!=i&&(r+=`#${i}`)}const i=[r];return Ue(this.filtered,t,n,e,i,i,this.named.bind(this,t))}function Ue(e,t,n,r,i,o,a){const s=Le(n,524),l=Le(n,522),c=Le(n,521),u=Le(n,529),d=Le(n,545),h=Le(n,265),p=Le(n,268),f=Le(n,273),m=Le(n,289),g=Le(n,137),v=Le(n,145),y=Le(n,73),b=Le(n,81),x=s?r.error.bind(r,...i):e.bind(t,524),_=l?r.error.bind(r,...i):e.bind(t,522),w=c?r.error.bind(r,...i):e.bind(t,521),S=u?r.error.bind(r,...i):e.bind(t,529),E=d?r.error.bind(r,...i):e.bind(t,545),k=p?r.warn.bind(r,...o):e.bind(t,268),M=h?r.warn.bind(r,...i):e.bind(t,265),P=f?r.warn.bind(r,...i):e.bind(t,273),T=m?r.warn.bind(r,...i):e.bind(t,273),C=g?r.info.bind(r,...i):e.bind(t,137),A=v?r.info.bind(r,...i):e.bind(t,145),I=y?r.debug.bind(r,...i):e.bind(t,73),R=b?r.debug.bind(r,...i):e.bind(t,81),O={_hmm:x,_todo:_,_error:w,errorDev:S,errorPublic:E,_kapow:k,_warn:M,warnDev:P,warnPublic:T,_debug:C,debugDev:A,_trace:I,traceDev:R,lazy:{_hmm:s?Re(x):x,_todo:l?Re(_):_,_error:c?Re(w):w,errorDev:u?Re(S):S,errorPublic:d?Re(E):E,_kapow:p?Re(k):k,_warn:h?Re(M):M,warnDev:f?Re(P):P,warnPublic:m?Re(T):T,_debug:g?Re(C):C,debugDev:v?Re(A):A,_trace:y?Re(I):I,traceDev:b?Re(R):R},named:a,utilFor:{internal:()=>({debug:O._debug,error:O._error,warn:O._warn,trace:O._trace,named:(e,t)=>O.named(e,t).utilFor.internal()}),dev:()=>({debug:O.debugDev,error:O.errorDev,warn:O.warnDev,trace:O.traceDev,named:(e,t)=>O.named(e,t).utilFor.dev()}),public:()=>({error:O.errorPublic,warn:O.warnPublic,debug(e,t){O._warn(`(public "debug" filtered out) ${e}`,t)},trace(e,t){O._warn(`(public "trace" filtered out) ${e}`,t)},named:(e,t)=>O.named(e,t).utilFor.public()})}};return O}var Ve,He,We=w({"shared/src/_logger/logger.ts"(){var e,t,n,r;(e=ke||(ke={}))[e.GENERAL=1]="GENERAL",e[e.TODO=2]="TODO",e[e.TROUBLESHOOTING=4]="TROUBLESHOOTING",(t=Me||(Me={}))[t.INTERNAL=8]="INTERNAL",t[t.DEV=16]="DEV",t[t.PUBLIC=32]="PUBLIC",(n=Pe||(Pe={}))[n.TRACE=64]="TRACE",n[n.DEBUG=128]="DEBUG",n[n.WARN=256]="WARN",n[n.ERROR=512]="ERROR",(r=Te||(Te={}))[r.ERROR_PUBLIC=545]="ERROR_PUBLIC",r[r.ERROR_DEV=529]="ERROR_DEV",r[r._HMM=524]="_HMM",r[r._TODO=522]="_TODO",r[r._ERROR=521]="_ERROR",r[r.WARN_PUBLIC=289]="WARN_PUBLIC",r[r.WARN_DEV=273]="WARN_DEV",r[r._KAPOW=268]="_KAPOW",r[r._WARN=265]="_WARN",r[r.DEBUG_DEV=145]="DEBUG_DEV",r[r._DEBUG=137]="_DEBUG",r[r.TRACE_DEV=81]="TRACE_DEV",r[r._TRACE=73]="_TRACE",Ce={_hmm:Oe(524),_todo:Oe(522),_error:Oe(521),errorDev:Oe(529),errorPublic:Oe(545),_kapow:Oe(268),_warn:Oe(265),warnDev:Oe(273),warnPublic:Oe(289),_debug:Oe(137),debugDev:Oe(145),_trace:Oe(73),traceDev:Oe(81)},Ae={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(e,t,n){return this.create({names:[...e.names,{name:t,key:n}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(e){if(e.length<5)return e;const t=e.replace(this.collapseOnRE,"");return this.cssMemo.has(t)||this.cssMemo.set(t,this.css(e)),t},css(e){var t,n,r,i;const o=this.cssMemo.get(e);if(o)return o;let a=`color:${null!=(n=null==(t=this.color)?void 0:t.call(this,e))?n:`hsl(${(e.charCodeAt(0)+e.charCodeAt(e.length-1))%360}, 100%, 60%)`}`;return(null==(r=this.bold)?void 0:r.test(e))&&(a+=";font-weight:600"),(null==(i=this.italic)?void 0:i.test(e))&&(a+=";font-style:italic"),this.cssMemo.set(e,a),a}}}}}),Ge=w({"shared/src/logger.ts"(){We(),We(),(Ve=je(console,{_debug:function(){},_error:function(){}})).configureLogging({dev:!0,min:Pe.TRACE}),He=Ve.getLogger().named("Theatre.js (default logger)").utilFor.dev()}});function $e(e){const t=new WeakMap;return n=>(t.has(n)||t.set(n,e(n)),t.get(n))}var qe,Ke,Xe=w({"shared/src/utils/memoizeFn.ts"(){}});function Ye(e){var t;const n=[];for(;;){const r=n.length;let i=null==(t=e[0])?void 0:t[r];if(void 0===i)return n;for(const t of e)if(i!==t[r])return n;n.push(i)}}var Ze,Je,Qe,et,tt,nt,rt,it,ot,at,st,lt,ct=w({"shared/src/utils/addresses.ts"(){Xe(),qe=$e((e=>JSON.stringify(e))),Ke=e=>JSON.parse(e)}}),ut=w({"../node_modules/lodash-es/_freeGlobal.js"(){Ze="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,Je=Ze}}),dt=w({"../node_modules/lodash-es/_root.js"(){ut(),Qe="object"==typeof self&&self&&self.Object===Object&&self,et=Je||Qe||Function("return this")(),tt=et}}),ht=w({"../node_modules/lodash-es/_Symbol.js"(){dt(),nt=tt.Symbol,rt=nt}});function pt(e){var t=ot.call(e,st),n=e[st];try{e[st]=void 0;var r=!0}catch(e){}var i=at.call(e);return r&&(t?e[st]=n:delete e[st]),i}var ft,mt,gt,vt=w({"../node_modules/lodash-es/_getRawTag.js"(){ht(),it=Object.prototype,ot=it.hasOwnProperty,at=it.toString,st=rt?rt.toStringTag:void 0,lt=pt}});function yt(e){return mt.call(e)}var bt,xt,_t,wt,St=w({"../node_modules/lodash-es/_objectToString.js"(){ft=Object.prototype,mt=ft.toString,gt=yt}});function Et(e){return null==e?void 0===e?xt:bt:_t&&_t in Object(e)?lt(e):gt(e)}var kt,Mt=w({"../node_modules/lodash-es/_baseGetTag.js"(){ht(),vt(),St(),bt="[object Null]",xt="[object Undefined]",_t=rt?rt.toStringTag:void 0,wt=Et}});function Pt(e){return null!=e&&"object"==typeof e}var Tt,Ct,At=w({"../node_modules/lodash-es/isObjectLike.js"(){kt=Pt}});function It(e){return"symbol"==typeof e||kt(e)&&wt(e)==Tt}var Rt,Ot=w({"../node_modules/lodash-es/isSymbol.js"(){Mt(),At(),Tt="[object Symbol]",Ct=It}});function Dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Lt,jt,zt,Nt,Bt,Ft,Ut=w({"../node_modules/lodash-es/_arrayMap.js"(){Rt=Dt}}),Vt=w({"../node_modules/lodash-es/isArray.js"(){Lt=Array.isArray,jt=Lt}});function Ht(e){if("string"==typeof e)return e;if(jt(e))return Rt(e,Ht)+"";if(Ct(e))return Bt?Bt.call(e):"";var t=e+"";return"0"==t&&1/e==-zt?"-0":t}var Wt,Gt,$t=w({"../node_modules/lodash-es/_baseToString.js"(){ht(),Ut(),Vt(),Ot(),zt=1/0,Nt=rt?rt.prototype:void 0,Bt=Nt?Nt.toString:void 0,Ft=Ht}});function qt(e){for(var t=e.length;t--&&Wt.test(e.charAt(t)););return t}var Kt,Xt,Yt=w({"../node_modules/lodash-es/_trimmedEndIndex.js"(){Wt=/\s/,Gt=qt}});function Zt(e){return e?e.slice(0,Gt(e)+1).replace(Kt,""):e}var Jt,Qt=w({"../node_modules/lodash-es/_baseTrim.js"(){Yt(),Kt=/^\s+/,Xt=Zt}});function en(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var tn,nn,rn,on,an,sn,ln=w({"../node_modules/lodash-es/isObject.js"(){Jt=en}});function cn(e){if("number"==typeof e)return e;if(Ct(e))return tn;if(Jt(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Jt(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var n=rn.test(e);return n||on.test(e)?an(e.slice(2),n?2:8):nn.test(e)?tn:+e}var un,dn,hn,pn=w({"../node_modules/lodash-es/toNumber.js"(){Qt(),ln(),Ot(),tn=NaN,nn=/^[-+]0x[0-9a-f]+$/i,rn=/^0b[01]+$/i,on=/^0o[0-7]+$/i,an=parseInt,sn=cn}});function fn(e){return e?(e=sn(e))===un||e===-un?(e<0?-1:1)*dn:e==e?e:0:0===e?e:0}var mn,gn=w({"../node_modules/lodash-es/toFinite.js"(){pn(),un=1/0,dn=17976931348623157e292,hn=fn}});function vn(e){var t=hn(e),n=t%1;return t==t?n?t-n:t:0}var yn,bn=w({"../node_modules/lodash-es/toInteger.js"(){gn(),mn=vn}});function xn(e){return e}var _n,wn,Sn,En,kn,Mn=w({"../node_modules/lodash-es/identity.js"(){yn=xn}});function Pn(e){if(!Jt(e))return!1;var t=wt(e);return t==wn||t==Sn||t==_n||t==En}var Tn,Cn,An,In,Rn=w({"../node_modules/lodash-es/isFunction.js"(){Mt(),ln(),_n="[object AsyncFunction]",wn="[object Function]",Sn="[object GeneratorFunction]",En="[object Proxy]",kn=Pn}}),On=w({"../node_modules/lodash-es/_coreJsData.js"(){dt(),Tn=tt["__core-js_shared__"],Cn=Tn}});function Dn(e){return!!An&&An in e}var Ln,jn,zn,Nn=w({"../node_modules/lodash-es/_isMasked.js"(){var e;On(),e=/[^.]+$/.exec(Cn&&Cn.keys&&Cn.keys.IE_PROTO||""),An=e?"Symbol(src)_1."+e:"",In=Dn}});function Bn(e){if(null!=e){try{return jn.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Fn,Un,Vn,Hn,Wn,Gn,$n,qn,Kn=w({"../node_modules/lodash-es/_toSource.js"(){Ln=Function.prototype,jn=Ln.toString,zn=Bn}});function Xn(e){return!(!Jt(e)||In(e))&&(kn(e)?$n:Un).test(zn(e))}var Yn,Zn=w({"../node_modules/lodash-es/_baseIsNative.js"(){Rn(),Nn(),ln(),Kn(),Fn=/[\\^$.*+?()[\]{}|]/g,Un=/^\[object .+?Constructor\]$/,Vn=Function.prototype,Hn=Object.prototype,Wn=Vn.toString,Gn=Hn.hasOwnProperty,$n=RegExp("^"+Wn.call(Gn).replace(Fn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qn=Xn}});function Jn(e,t){return null==e?void 0:e[t]}var Qn,er=w({"../node_modules/lodash-es/_getValue.js"(){Yn=Jn}});function tr(e,t){var n=Yn(e,t);return qn(n)?n:void 0}var nr,rr,ir,or=w({"../node_modules/lodash-es/_getNative.js"(){Zn(),er(),Qn=tr}}),ar=w({"../node_modules/lodash-es/_WeakMap.js"(){or(),dt(),nr=Qn(tt,"WeakMap"),rr=nr}});function sr(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var lr,cr=w({"../node_modules/lodash-es/_apply.js"(){ir=sr}});function ur(){}var dr,hr=w({"../node_modules/lodash-es/noop.js"(){lr=ur}});function pr(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var fr,mr,gr,vr,yr=w({"../node_modules/lodash-es/_copyArray.js"(){dr=pr}});function br(e){var t=0,n=0;return function(){var r=gr(),i=mr-(r-n);if(n=r,i>0){if(++t>=fr)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var xr,_r=w({"../node_modules/lodash-es/_shortOut.js"(){fr=800,mr=16,gr=Date.now,vr=br}});function wr(e){return function(){return e}}var Sr,Er,kr,Mr,Pr,Tr,Cr=w({"../node_modules/lodash-es/constant.js"(){xr=wr}}),Ar=w({"../node_modules/lodash-es/_defineProperty.js"(){or(),Sr=function(){try{var e=Qn(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Er=Sr}}),Ir=w({"../node_modules/lodash-es/_baseSetToString.js"(){Cr(),Ar(),Mn(),kr=Er?function(e,t){return Er(e,"toString",{configurable:!0,enumerable:!1,value:xr(t),writable:!0})}:yn}}),Rr=w({"../node_modules/lodash-es/_setToString.js"(){Ir(),_r(),Mr=vr(kr),Pr=Mr}});function Or(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var Dr,Lr=w({"../node_modules/lodash-es/_baseFindIndex.js"(){Tr=Or}});function jr(e){return e!=e}var zr,Nr=w({"../node_modules/lodash-es/_baseIsNaN.js"(){Dr=jr}});function Br(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var Fr,Ur=w({"../node_modules/lodash-es/_strictIndexOf.js"(){zr=Br}});function Vr(e,t,n){return t==t?zr(e,t,n):Tr(e,Dr,n)}var Hr,Wr=w({"../node_modules/lodash-es/_baseIndexOf.js"(){Lr(),Nr(),Ur(),Fr=Vr}});function Gr(e,t){return!(null==e||!e.length)&&Fr(e,t,0)>-1}var $r,qr,Kr,Xr=w({"../node_modules/lodash-es/_arrayIncludes.js"(){Wr(),Hr=Gr}});function Yr(e,t){var n=typeof e;return!!(t=null==t?$r:t)&&("number"==n||"symbol"!=n&&qr.test(e))&&e>-1&&e%1==0&&e<t}var Zr,Jr=w({"../node_modules/lodash-es/_isIndex.js"(){$r=9007199254740991,qr=/^(?:0|[1-9]\d*)$/,Kr=Yr}});function Qr(e,t,n){"__proto__"==t&&Er?Er(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var ei,ti=w({"../node_modules/lodash-es/_baseAssignValue.js"(){Ar(),Zr=Qr}});function ni(e,t){return e===t||e!=e&&t!=t}var ri,ii,oi,ai=w({"../node_modules/lodash-es/eq.js"(){ei=ni}});function si(e,t,n){var r=e[t];ii.call(e,t)&&ei(r,n)&&(void 0!==n||t in e)||Zr(e,t,n)}var li,ci,ui=w({"../node_modules/lodash-es/_assignValue.js"(){ti(),ai(),ri=Object.prototype,ii=ri.hasOwnProperty,oi=si}});function di(e,t,n){return t=li(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=li(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),ir(e,this,s)}}var hi,pi=w({"../node_modules/lodash-es/_overRest.js"(){cr(),li=Math.max,ci=di}});function fi(e,t){return Pr(ci(e,t,yn),e+"")}var mi,gi,vi=w({"../node_modules/lodash-es/_baseRest.js"(){Mn(),pi(),Rr(),hi=fi}});function yi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=mi}var bi,xi=w({"../node_modules/lodash-es/isLength.js"(){mi=9007199254740991,gi=yi}});function _i(e){return null!=e&&gi(e.length)&&!kn(e)}var wi,Si=w({"../node_modules/lodash-es/isArrayLike.js"(){Rn(),xi(),bi=_i}});function Ei(e,t,n){if(!Jt(n))return!1;var r=typeof t;return!!("number"==r?bi(n)&&Kr(t,n.length):"string"==r&&t in n)&&ei(n[t],e)}var ki,Mi,Pi=w({"../node_modules/lodash-es/_isIterateeCall.js"(){ai(),Si(),Jr(),ln(),wi=Ei}});function Ti(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ki)}var Ci,Ai=w({"../node_modules/lodash-es/_isPrototype.js"(){ki=Object.prototype,Mi=Ti}});function Ii(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Ri,Oi,Di=w({"../node_modules/lodash-es/_baseTimes.js"(){Ci=Ii}});function Li(e){return kt(e)&&wt(e)==Ri}var ji,zi,Ni,Bi,Fi,Ui,Vi=w({"../node_modules/lodash-es/_baseIsArguments.js"(){Mt(),At(),Ri="[object Arguments]",Oi=Li}}),Hi=w({"../node_modules/lodash-es/isArguments.js"(){Vi(),At(),ji=Object.prototype,zi=ji.hasOwnProperty,Ni=ji.propertyIsEnumerable,Bi=Oi(function(){return arguments}())?Oi:function(e){return kt(e)&&zi.call(e,"callee")&&!Ni.call(e,"callee")},Fi=Bi}});function Wi(){return!1}var Gi,$i,qi,Ki,Xi,Yi,Zi,Ji,Qi=w({"../node_modules/lodash-es/stubFalse.js"(){Ui=Wi}}),eo=w({"../node_modules/lodash-es/isBuffer.js"(){dt(),Qi(),Gi=t&&!t.nodeType&&t,$i=Gi&&e&&!e.nodeType&&e,qi=$i&&$i.exports===Gi,Ki=qi?tt.Buffer:void 0,Xi=Ki?Ki.isBuffer:void 0,Yi=Xi||Ui}});function to(e){return kt(e)&&gi(e.length)&&!!Zi[wt(e)]}var no,ro=w({"../node_modules/lodash-es/_baseIsTypedArray.js"(){Mt(),xi(),At(),(Zi={})["[object Float32Array]"]=Zi["[object Float64Array]"]=Zi["[object Int8Array]"]=Zi["[object Int16Array]"]=Zi["[object Int32Array]"]=Zi["[object Uint8Array]"]=Zi["[object Uint8ClampedArray]"]=Zi["[object Uint16Array]"]=Zi["[object Uint32Array]"]=!0,Zi["[object Arguments]"]=Zi["[object Array]"]=Zi["[object ArrayBuffer]"]=Zi["[object Boolean]"]=Zi["[object DataView]"]=Zi["[object Date]"]=Zi["[object Error]"]=Zi["[object Function]"]=Zi["[object Map]"]=Zi["[object Number]"]=Zi["[object Object]"]=Zi["[object RegExp]"]=Zi["[object Set]"]=Zi["[object String]"]=Zi["[object WeakMap]"]=!1,Ji=to}});function io(e){return function(t){return e(t)}}var oo,ao,so,lo,co,uo,ho,po,fo,mo,go,vo,yo=w({"../node_modules/lodash-es/_baseUnary.js"(){no=io}}),bo=w({"../node_modules/lodash-es/_nodeUtil.js"(){ut(),oo=t&&!t.nodeType&&t,ao=oo&&e&&!e.nodeType&&e,so=ao&&ao.exports===oo,lo=so&&Je.process,co=function(){try{return ao&&ao.require&&ao.require("util").types||lo&&lo.binding&&lo.binding("util")}catch(e){}}(),uo=co}}),xo=w({"../node_modules/lodash-es/isTypedArray.js"(){ro(),yo(),bo(),ho=uo&&uo.isTypedArray,po=ho?no(ho):Ji,fo=po}});function _o(e,t){var n=jt(e),r=!n&&Fi(e),i=!n&&!r&&Yi(e),o=!n&&!r&&!i&&fo(e),a=n||r||i||o,s=a?Ci(e.length,String):[],l=s.length;for(var c in e)!t&&!go.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Kr(c,l))||s.push(c);return s}var wo,So=w({"../node_modules/lodash-es/_arrayLikeKeys.js"(){Di(),Hi(),Vt(),eo(),Jr(),xo(),mo=Object.prototype,go=mo.hasOwnProperty,vo=_o}});function Eo(e,t){return function(n){return e(t(n))}}var ko,Mo,Po,To,Co,Ao=w({"../node_modules/lodash-es/_overArg.js"(){wo=Eo}}),Io=w({"../node_modules/lodash-es/_nativeKeys.js"(){Ao(),ko=wo(Object.keys,Object),Mo=ko}});function Ro(e){if(!Mi(e))return Mo(e);var t=[];for(var n in Object(e))To.call(e,n)&&"constructor"!=n&&t.push(n);return t}var Oo,Do=w({"../node_modules/lodash-es/_baseKeys.js"(){Ai(),Io(),Po=Object.prototype,To=Po.hasOwnProperty,Co=Ro}});function Lo(e){return bi(e)?vo(e):Co(e)}var jo,zo,No,Bo=w({"../node_modules/lodash-es/keys.js"(){So(),Do(),Si(),Oo=Lo}});function Fo(e,t){if(jt(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ct(e))||zo.test(e)||!jo.test(e)||null!=t&&e in Object(t)}var Uo,Vo,Ho,Wo=w({"../node_modules/lodash-es/_isKey.js"(){Vt(),Ot(),jo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zo=/^\w*$/,No=Fo}}),Go=w({"../node_modules/lodash-es/_nativeCreate.js"(){or(),Uo=Qn(Object,"create"),Vo=Uo}});function $o(){this.__data__=Vo?Vo(null):{},this.size=0}var qo,Ko=w({"../node_modules/lodash-es/_hashClear.js"(){Go(),Ho=$o}});function Xo(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Yo,Zo,Jo,Qo,ea=w({"../node_modules/lodash-es/_hashDelete.js"(){qo=Xo}});function ta(e){var t=this.__data__;if(Vo){var n=t[e];return n===Yo?void 0:n}return Jo.call(t,e)?t[e]:void 0}var na,ra,ia,oa=w({"../node_modules/lodash-es/_hashGet.js"(){Go(),Yo="__lodash_hash_undefined__",Zo=Object.prototype,Jo=Zo.hasOwnProperty,Qo=ta}});function aa(e){var t=this.__data__;return Vo?void 0!==t[e]:ra.call(t,e)}var sa,la,ca=w({"../node_modules/lodash-es/_hashHas.js"(){Go(),na=Object.prototype,ra=na.hasOwnProperty,ia=aa}});function ua(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Vo&&void 0===t?sa:t,this}var da,ha=w({"../node_modules/lodash-es/_hashSet.js"(){Go(),sa="__lodash_hash_undefined__",la=ua}});function pa(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var fa,ma=w({"../node_modules/lodash-es/_Hash.js"(){Ko(),ea(),oa(),ca(),ha(),pa.prototype.clear=Ho,pa.prototype.delete=qo,pa.prototype.get=Qo,pa.prototype.has=ia,pa.prototype.set=la,da=pa}});function ga(){this.__data__=[],this.size=0}var va,ya=w({"../node_modules/lodash-es/_listCacheClear.js"(){fa=ga}});function ba(e,t){for(var n=e.length;n--;)if(ei(e[n][0],t))return n;return-1}var xa,_a,wa,Sa=w({"../node_modules/lodash-es/_assocIndexOf.js"(){ai(),va=ba}});function Ea(e){var t=this.__data__,n=va(t,e);return!(n<0||(n==t.length-1?t.pop():_a.call(t,n,1),--this.size,0))}var ka,Ma=w({"../node_modules/lodash-es/_listCacheDelete.js"(){Sa(),xa=Array.prototype,_a=xa.splice,wa=Ea}});function Pa(e){var t=this.__data__,n=va(t,e);return n<0?void 0:t[n][1]}var Ta,Ca=w({"../node_modules/lodash-es/_listCacheGet.js"(){Sa(),ka=Pa}});function Aa(e){return va(this.__data__,e)>-1}var Ia,Ra=w({"../node_modules/lodash-es/_listCacheHas.js"(){Sa(),Ta=Aa}});function Oa(e,t){var n=this.__data__,r=va(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Da,La=w({"../node_modules/lodash-es/_listCacheSet.js"(){Sa(),Ia=Oa}});function ja(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var za,Na,Ba,Fa=w({"../node_modules/lodash-es/_ListCache.js"(){ya(),Ma(),Ca(),Ra(),La(),ja.prototype.clear=fa,ja.prototype.delete=wa,ja.prototype.get=ka,ja.prototype.has=Ta,ja.prototype.set=Ia,Da=ja}}),Ua=w({"../node_modules/lodash-es/_Map.js"(){or(),dt(),za=Qn(tt,"Map"),Na=za}});function Va(){this.size=0,this.__data__={hash:new da,map:new(Na||Da),string:new da}}var Ha,Wa=w({"../node_modules/lodash-es/_mapCacheClear.js"(){ma(),Fa(),Ua(),Ba=Va}});function Ga(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var $a,qa=w({"../node_modules/lodash-es/_isKeyable.js"(){Ha=Ga}});function Ka(e,t){var n=e.__data__;return Ha(t)?n["string"==typeof t?"string":"hash"]:n.map}var Xa,Ya=w({"../node_modules/lodash-es/_getMapData.js"(){qa(),$a=Ka}});function Za(e){var t=$a(this,e).delete(e);return this.size-=t?1:0,t}var Ja,Qa=w({"../node_modules/lodash-es/_mapCacheDelete.js"(){Ya(),Xa=Za}});function es(e){return $a(this,e).get(e)}var ts,ns=w({"../node_modules/lodash-es/_mapCacheGet.js"(){Ya(),Ja=es}});function rs(e){return $a(this,e).has(e)}var is,os=w({"../node_modules/lodash-es/_mapCacheHas.js"(){Ya(),ts=rs}});function as(e,t){var n=$a(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var ss,ls=w({"../node_modules/lodash-es/_mapCacheSet.js"(){Ya(),is=as}});function cs(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var us,ds,hs=w({"../node_modules/lodash-es/_MapCache.js"(){Wa(),Qa(),ns(),os(),ls(),cs.prototype.clear=Ba,cs.prototype.delete=Xa,cs.prototype.get=Ja,cs.prototype.has=ts,cs.prototype.set=is,ss=cs}});function ps(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(us);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ps.Cache||ss),n}var fs,ms,gs=w({"../node_modules/lodash-es/memoize.js"(){hs(),us="Expected a function",ps.Cache=ss,ds=ps}});function vs(e){var t=ds(e,(function(e){return n.size===fs&&n.clear(),e})),n=t.cache;return t}var ys,bs,xs,_s,ws,Ss=w({"../node_modules/lodash-es/_memoizeCapped.js"(){gs(),fs=500,ms=vs}}),Es=w({"../node_modules/lodash-es/_stringToPath.js"(){Ss(),ys=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bs=/\\(\\)?/g,xs=ms((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ys,(function(e,n,r,i){t.push(r?i.replace(bs,"$1"):n||e)})),t})),_s=xs}});function ks(e){return null==e?"":Ft(e)}var Ms,Ps=w({"../node_modules/lodash-es/toString.js"(){$t(),ws=ks}});function Ts(e,t){return jt(e)?e:No(e,t)?[e]:_s(ws(e))}var Cs,As,Is=w({"../node_modules/lodash-es/_castPath.js"(){Vt(),Wo(),Es(),Ps(),Ms=Ts}});function Rs(e){if("string"==typeof e||Ct(e))return e;var t=e+"";return"0"==t&&1/e==-Cs?"-0":t}var Os,Ds=w({"../node_modules/lodash-es/_toKey.js"(){Ot(),Cs=1/0,As=Rs}});function Ls(e,t){for(var n=0,r=(t=Ms(t,e)).length;null!=e&&n<r;)e=e[As(t[n++])];return n&&n==r?e:void 0}var js,zs=w({"../node_modules/lodash-es/_baseGet.js"(){Is(),Ds(),Os=Ls}});function Ns(e,t,n){var r=null==e?void 0:Os(e,t);return void 0===r?n:r}var Bs,Fs=w({"../node_modules/lodash-es/get.js"(){zs(),js=Ns}});function Us(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Vs,Hs,Ws=w({"../node_modules/lodash-es/_arrayPush.js"(){Bs=Us}});function Gs(e){return jt(e)||Fi(e)||!!(Vs&&e&&e[Vs])}var $s,qs=w({"../node_modules/lodash-es/_isFlattenable.js"(){ht(),Hi(),Vt(),Vs=rt?rt.isConcatSpreadable:void 0,Hs=Gs}});function Ks(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Hs),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?Ks(s,t-1,n,r,i):Bs(i,s):r||(i[i.length]=s)}return i}var Xs,Ys,Zs,Js,Qs,el,tl,nl,rl,il=w({"../node_modules/lodash-es/_baseFlatten.js"(){Ws(),qs(),$s=Ks}}),ol=w({"../node_modules/lodash-es/_getPrototype.js"(){Ao(),Xs=wo(Object.getPrototypeOf,Object),Ys=Xs}});function al(e){if(!kt(e)||wt(e)!=Zs)return!1;var t=Ys(e);if(null===t)return!0;var n=tl.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&el.call(n)==nl}var sl,ll,cl,ul=w({"../node_modules/lodash-es/isPlainObject.js"(){Mt(),ol(),At(),Zs="[object Object]",Js=Function.prototype,Qs=Object.prototype,el=Js.toString,tl=Qs.hasOwnProperty,nl=el.call(Object),rl=al}});function dl(e){var t=Math[e];return function(e,n){if(e=sn(e),(n=null==n?0:ll(mn(n),292))&&sl(e)){var r=(ws(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));return+((r=(ws(i)+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var hl,pl=w({"../node_modules/lodash-es/_createRound.js"(){dt(),bn(),pn(),Ps(),sl=tt.isFinite,ll=Math.min,cl=dl}});function fl(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}var ml,gl=w({"../node_modules/lodash-es/_baseClamp.js"(){hl=fl}});function vl(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=sn(n))==n?n:0),void 0!==t&&(t=(t=sn(t))==t?t:0),hl(sn(e),t,n)}var yl,bl=w({"../node_modules/lodash-es/clamp.js"(){gl(),pn(),ml=vl}});function xl(){this.__data__=new Da,this.size=0}var _l,wl=w({"../node_modules/lodash-es/_stackClear.js"(){Fa(),yl=xl}});function Sl(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var El,kl=w({"../node_modules/lodash-es/_stackDelete.js"(){_l=Sl}});function Ml(e){return this.__data__.get(e)}var Pl,Tl=w({"../node_modules/lodash-es/_stackGet.js"(){El=Ml}});function Cl(e){return this.__data__.has(e)}var Al,Il,Rl=w({"../node_modules/lodash-es/_stackHas.js"(){Pl=Cl}});function Ol(e,t){var n=this.__data__;if(n instanceof Da){var r=n.__data__;if(!Na||r.length<Al-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ss(r)}return n.set(e,t),this.size=n.size,this}var Dl,Ll=w({"../node_modules/lodash-es/_stackSet.js"(){Fa(),Ua(),hs(),Al=200,Il=Ol}});function jl(e){var t=this.__data__=new Da(e);this.size=t.size}var zl,Nl=w({"../node_modules/lodash-es/_Stack.js"(){Fa(),wl(),kl(),Tl(),Rl(),Ll(),jl.prototype.clear=yl,jl.prototype.delete=_l,jl.prototype.get=El,jl.prototype.has=Pl,jl.prototype.set=Il,Dl=jl}});function Bl(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}var Fl,Ul=w({"../node_modules/lodash-es/_arrayFilter.js"(){zl=Bl}});function Vl(){return[]}var Hl,Wl,Gl,$l,ql,Kl=w({"../node_modules/lodash-es/stubArray.js"(){Fl=Vl}}),Xl=w({"../node_modules/lodash-es/_getSymbols.js"(){Ul(),Kl(),Hl=Object.prototype,Wl=Hl.propertyIsEnumerable,Gl=Object.getOwnPropertySymbols,$l=Gl?function(e){return null==e?[]:(e=Object(e),zl(Gl(e),(function(t){return Wl.call(e,t)})))}:Fl}});function Yl(e,t,n){var r=t(e);return jt(e)?r:Bs(r,n(e))}var Zl,Jl=w({"../node_modules/lodash-es/_baseGetAllKeys.js"(){Ws(),Vt(),ql=Yl}});function Ql(e){return ql(e,Oo,$l)}var ec,tc,nc,rc,ic,oc,ac,sc,lc,cc,uc,dc,hc,pc,fc,mc,gc,vc,yc,bc,xc,_c,wc=w({"../node_modules/lodash-es/_getAllKeys.js"(){Jl(),Xl(),Bo(),Zl=Ql}}),Sc=w({"../node_modules/lodash-es/_DataView.js"(){or(),dt(),ec=Qn(tt,"DataView"),tc=ec}}),Ec=w({"../node_modules/lodash-es/_Promise.js"(){or(),dt(),nc=Qn(tt,"Promise"),rc=nc}}),kc=w({"../node_modules/lodash-es/_Set.js"(){or(),dt(),ic=Qn(tt,"Set"),oc=ic}}),Mc=w({"../node_modules/lodash-es/_getTag.js"(){Sc(),Ua(),Ec(),kc(),ar(),Mt(),Kn(),ac="[object Map]",sc="[object Promise]",lc="[object Set]",cc="[object WeakMap]",uc="[object DataView]",dc=zn(tc),hc=zn(Na),pc=zn(rc),fc=zn(oc),mc=zn(rr),gc=wt,(tc&&gc(new tc(new ArrayBuffer(1)))!=uc||Na&&gc(new Na)!=ac||rc&&gc(rc.resolve())!=sc||oc&&gc(new oc)!=lc||rr&&gc(new rr)!=cc)&&(gc=function(e){var t=wt(e),n="[object Object]"==t?e.constructor:void 0,r=n?zn(n):"";if(r)switch(r){case dc:return uc;case hc:return ac;case pc:return sc;case fc:return lc;case mc:return cc}return t}),vc=gc}}),Pc=w({"../node_modules/lodash-es/_Uint8Array.js"(){dt(),yc=tt.Uint8Array,bc=yc}});function Tc(e){return this.__data__.set(e,xc),this}var Cc,Ac=w({"../node_modules/lodash-es/_setCacheAdd.js"(){xc="__lodash_hash_undefined__",_c=Tc}});function Ic(e){return this.__data__.has(e)}var Rc,Oc=w({"../node_modules/lodash-es/_setCacheHas.js"(){Cc=Ic}});function Dc(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ss;++t<n;)this.add(e[t])}var Lc,jc=w({"../node_modules/lodash-es/_SetCache.js"(){hs(),Ac(),Oc(),Dc.prototype.add=Dc.prototype.push=_c,Dc.prototype.has=Cc,Rc=Dc}});function zc(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Nc,Bc=w({"../node_modules/lodash-es/_arraySome.js"(){Lc=zc}});function Fc(e,t){return e.has(t)}var Uc,Vc,Hc,Wc=w({"../node_modules/lodash-es/_cacheHas.js"(){Nc=Fc}});function Gc(e,t,n,r,i,o){var a=n&Uc,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=n&Vc?new Rc:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var f=e[d],m=t[d];if(r)var g=a?r(m,f,d,t,e,o):r(f,m,d,e,t,o);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!Lc(t,(function(e,t){if(!Nc(p,t)&&(f===e||i(f,e,n,r,o)))return p.push(t)}))){h=!1;break}}else if(f!==m&&!i(f,m,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}var $c,qc=w({"../node_modules/lodash-es/_equalArrays.js"(){jc(),Bc(),Wc(),Uc=1,Vc=2,Hc=Gc}});function Kc(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}var Xc,Yc=w({"../node_modules/lodash-es/_mapToArray.js"(){$c=Kc}});function Zc(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Jc,Qc,eu,tu,nu,ru,iu,ou,au,su,lu,cu,uu,du,hu,pu,fu=w({"../node_modules/lodash-es/_setToArray.js"(){Xc=Zc}});function mu(e,t,n,r,i,o,a){switch(n){case uu:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case cu:return!(e.byteLength!=t.byteLength||!o(new bc(e),new bc(t)));case eu:case tu:case iu:return ei(+e,+t);case nu:return e.name==t.name&&e.message==t.message;case ou:case su:return e==t+"";case ru:var s=$c;case au:var l=r&Jc;if(s||(s=Xc),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=Qc,a.set(e,t);var u=Hc(s(e),s(t),r,i,o,a);return a.delete(e),u;case lu:if(hu)return hu.call(e)==hu.call(t)}return!1}var gu,vu,yu,bu,xu=w({"../node_modules/lodash-es/_equalByTag.js"(){ht(),Pc(),ai(),qc(),Yc(),fu(),Jc=1,Qc=2,eu="[object Boolean]",tu="[object Date]",nu="[object Error]",ru="[object Map]",iu="[object Number]",ou="[object RegExp]",au="[object Set]",su="[object String]",lu="[object Symbol]",cu="[object ArrayBuffer]",uu="[object DataView]",du=rt?rt.prototype:void 0,hu=du?du.valueOf:void 0,pu=mu}});function _u(e,t,n,r,i,o){var a=n&gu,s=Zl(e),l=s.length;if(l!=Zl(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:yu.call(t,u)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);for(var f=a;++c<l;){var m=e[u=s[c]],g=t[u];if(r)var v=a?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(e),o.delete(t),p}var wu,Su,Eu,ku,Mu,Pu,Tu,Cu=w({"../node_modules/lodash-es/_equalObjects.js"(){wc(),gu=1,vu=Object.prototype,yu=vu.hasOwnProperty,bu=_u}});function Au(e,t,n,r,i,o){var a=jt(e),s=jt(t),l=a?Eu:vc(e),c=s?Eu:vc(t),u=(l=l==Su?ku:l)==ku,d=(c=c==Su?ku:c)==ku,h=l==c;if(h&&Yi(e)){if(!Yi(t))return!1;a=!0,u=!1}if(h&&!u)return o||(o=new Dl),a||fo(e)?Hc(e,t,n,r,i,o):pu(e,t,l,n,r,i,o);if(!(n&wu)){var p=u&&Pu.call(e,"__wrapped__"),f=d&&Pu.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,g=f?t.value():t;return o||(o=new Dl),i(m,g,n,r,o)}}return!!h&&(o||(o=new Dl),bu(e,t,n,r,i,o))}var Iu,Ru=w({"../node_modules/lodash-es/_baseIsEqualDeep.js"(){Nl(),qc(),xu(),Cu(),Mc(),Vt(),eo(),xo(),wu=1,Su="[object Arguments]",Eu="[object Array]",ku="[object Object]",Mu=Object.prototype,Pu=Mu.hasOwnProperty,Tu=Au}});function Ou(e,t,n,r,i){return e===t||(null==e||null==t||!kt(e)&&!kt(t)?e!=e&&t!=t:Tu(e,t,n,r,Ou,i))}var Du,Lu,ju,zu=w({"../node_modules/lodash-es/_baseIsEqual.js"(){Ru(),At(),Iu=Ou}});function Nu(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new Dl;if(r)var h=r(c,u,l,e,t,d);if(!(void 0===h?Iu(u,c,Du|Lu,r,d):h))return!1}}return!0}var Bu,Fu=w({"../node_modules/lodash-es/_baseIsMatch.js"(){Nl(),zu(),Du=1,Lu=2,ju=Nu}});function Uu(e){return e==e&&!Jt(e)}var Vu,Hu=w({"../node_modules/lodash-es/_isStrictComparable.js"(){ln(),Bu=Uu}});function Wu(e){for(var t=Oo(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Bu(i)]}return t}var Gu,$u=w({"../node_modules/lodash-es/_getMatchData.js"(){Hu(),Bo(),Vu=Wu}});function qu(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}var Ku,Xu=w({"../node_modules/lodash-es/_matchesStrictComparable.js"(){Gu=qu}});function Yu(e){var t=Vu(e);return 1==t.length&&t[0][2]?Gu(t[0][0],t[0][1]):function(n){return n===e||ju(n,e,t)}}var Zu,Ju=w({"../node_modules/lodash-es/_baseMatches.js"(){Fu(),$u(),Xu(),Ku=Yu}});function Qu(e,t){return null!=e&&t in Object(e)}var ed,td=w({"../node_modules/lodash-es/_baseHasIn.js"(){Zu=Qu}});function nd(e,t,n){for(var r=-1,i=(t=Ms(t,e)).length,o=!1;++r<i;){var a=As(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&gi(i)&&Kr(a,i)&&(jt(e)||Fi(e))}var rd,id=w({"../node_modules/lodash-es/_hasPath.js"(){Is(),Hi(),Vt(),Jr(),xi(),Ds(),ed=nd}});function od(e,t){return null!=e&&ed(e,t,Zu)}var ad,sd,ld,cd=w({"../node_modules/lodash-es/hasIn.js"(){td(),id(),rd=od}});function ud(e,t){return No(e)&&Bu(t)?Gu(As(e),t):function(n){var r=js(n,e);return void 0===r&&r===t?rd(n,e):Iu(t,r,ad|sd)}}var dd,hd=w({"../node_modules/lodash-es/_baseMatchesProperty.js"(){zu(),Fs(),cd(),Wo(),Hu(),Xu(),Ds(),ad=1,sd=2,ld=ud}});function pd(e){return function(t){return null==t?void 0:t[e]}}var fd,md=w({"../node_modules/lodash-es/_baseProperty.js"(){dd=pd}});function gd(e){return function(t){return Os(t,e)}}var vd,yd=w({"../node_modules/lodash-es/_basePropertyDeep.js"(){zs(),fd=gd}});function bd(e){return No(e)?dd(As(e)):fd(e)}var xd,_d=w({"../node_modules/lodash-es/property.js"(){md(),yd(),Wo(),Ds(),vd=bd}});function wd(e){return"function"==typeof e?e:null==e?yn:"object"==typeof e?jt(e)?ld(e[0],e[1]):Ku(e):vd(e)}var Sd,Ed=w({"../node_modules/lodash-es/_baseIteratee.js"(){Ju(),hd(),Mn(),Vt(),_d(),xd=wd}});function kd(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}var Md,Pd=w({"../node_modules/lodash-es/_arrayAggregator.js"(){Sd=kd}});function Td(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}var Cd,Ad,Id,Rd=w({"../node_modules/lodash-es/_createBaseFor.js"(){Md=Td}}),Od=w({"../node_modules/lodash-es/_baseFor.js"(){Rd(),Cd=Md(),Ad=Cd}});function Dd(e,t){return e&&Ad(e,t,Oo)}var Ld,jd=w({"../node_modules/lodash-es/_baseForOwn.js"(){Od(),Bo(),Id=Dd}});function zd(e,t){return function(n,r){if(null==n)return n;if(!bi(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}var Nd,Bd,Fd,Ud=w({"../node_modules/lodash-es/_createBaseEach.js"(){Si(),Ld=zd}}),Vd=w({"../node_modules/lodash-es/_baseEach.js"(){jd(),Ud(),Nd=Ld(Id),Bd=Nd}});function Hd(e,t,n,r){return Bd(e,(function(e,i,o){t(r,e,n(e),o)})),r}var Wd,Gd=w({"../node_modules/lodash-es/_baseAggregator.js"(){Vd(),Fd=Hd}});function $d(e,t){return function(n,r){var i=jt(n)?Sd:Fd,o=t?t():{};return i(n,e,xd(r,2),o)}}var qd,Kd,Xd,Yd,Zd,Jd=w({"../node_modules/lodash-es/_createAggregator.js"(){Pd(),Gd(),Ed(),Vt(),Wd=$d}}),Qd=w({"../node_modules/lodash-es/now.js"(){dt(),qd=function(){return tt.Date.now()}}});function eh(e,t,n){var r,i,o,a,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(Kd);function p(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function f(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=o}function m(){var e=qd();if(f(e))return g(e);s=setTimeout(m,function(e){var n=t-(e-l);return d?Yd(n,o-(e-c)):n}(e))}function g(e){return s=void 0,h&&r?p(e):(r=i=void 0,a)}function v(){var e=qd(),n=f(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),u?p(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(m,t),p(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=sn(t)||0,Jt(n)&&(u=!!n.leading,o=(d="maxWait"in n)?Xd(sn(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),v.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},v.flush=function(){return void 0===s?a:g(qd())},v}var th,nh=w({"../node_modules/lodash-es/debounce.js"(){ln(),Qd(),pn(),Kd="Expected a function",Xd=Math.max,Yd=Math.min,Zd=eh}});function rh(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var ih,oh,ah=w({"../node_modules/lodash-es/_arrayIncludesWith.js"(){th=rh}});function sh(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:mn(n);return i<0&&(i=ih(r+i,0)),Tr(e,xd(t,3),i)}var lh,ch,uh,dh=w({"../node_modules/lodash-es/findIndex.js"(){Lr(),Ed(),bn(),ih=Math.max,oh=sh}});function hh(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=mn(n),i=n<0?lh(r+i,0):ch(i,r-1)),Tr(e,xd(t,3),i,!0)}var ph,fh=w({"../node_modules/lodash-es/findLastIndex.js"(){Lr(),Ed(),bn(),lh=Math.max,ch=Math.min,uh=hh}});function mh(e,t){var n=-1,r=bi(e)?Array(e.length):[];return Bd(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}var gh,vh,yh,bh=w({"../node_modules/lodash-es/_baseMap.js"(){Vd(),Si(),ph=mh}});function xh(e,t,n){return e>=vh(t,n)&&e<gh(t,n)}var _h,wh=w({"../node_modules/lodash-es/_baseInRange.js"(){gh=Math.max,vh=Math.min,yh=xh}});function Sh(e,t,n){return t=hn(t),void 0===n?(n=t,t=0):n=hn(n),e=sn(e),yh(e,t,n)}var Eh,kh=w({"../node_modules/lodash-es/inRange.js"(){wh(),gn(),pn(),_h=Sh}});function Mh(e){return"number"==typeof e&&e==mn(e)}var Ph,Th,Ch,Ah=w({"../node_modules/lodash-es/isInteger.js"(){bn(),Eh=Mh}}),Ih=w({"../node_modules/lodash-es/keyBy.js"(){ti(),Jd(),Ph=Wd((function(e,t,n){Zr(e,n,t)})),Th=Ph}});function Rh(e,t){var n={};return t=xd(t,3),Id(e,(function(e,r,i){Zr(n,r,t(e,r,i))})),n}var Oh,Dh=w({"../node_modules/lodash-es/mapValues.js"(){ti(),jd(),Ed(),Ch=Rh}});function Lh(e,t,n,r){if(!Jt(e))return e;for(var i=-1,o=(t=Ms(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=As(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=Jt(u)?u:Kr(t[i+1])?[]:{})}oi(s,l,c),s=s[l]}return e}var jh,zh=w({"../node_modules/lodash-es/_baseSet.js"(){ui(),Is(),Jr(),ln(),Ds(),Oh=Lh}});function Nh(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Bh,Fh=w({"../node_modules/lodash-es/_baseSortBy.js"(){jh=Nh}});function Uh(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Ct(e),a=void 0!==t,s=null===t,l=t==t,c=Ct(t);if(!s&&!c&&!o&&e>t||o&&a&&l&&!s&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}var Vh,Hh=w({"../node_modules/lodash-es/_compareAscending.js"(){Ot(),Bh=Uh}});function Wh(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=Bh(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}var Gh,$h=w({"../node_modules/lodash-es/_compareMultiple.js"(){Hh(),Vh=Wh}});function qh(e,t,n){t=t.length?Rt(t,(function(e){return jt(e)?function(t){return Os(t,1===e.length?e[0]:e)}:e})):[yn];var r=-1;t=Rt(t,no(xd));var i=ph(e,(function(e,n,i){return{criteria:Rt(t,(function(t){return t(e)})),index:++r,value:e}}));return jh(i,(function(e,t){return Vh(e,t,n)}))}var Kh,Xh=w({"../node_modules/lodash-es/_baseOrderBy.js"(){Ut(),zs(),Ed(),bh(),Fh(),yo(),$h(),Mn(),Vt(),Gh=qh}});function Yh(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}var Zh,Jh,Qh,ep=w({"../node_modules/lodash-es/_baseIndexOfWith.js"(){Kh=Yh}});function tp(e,t,n,r){var i=r?Kh:Fr,o=-1,a=t.length,s=e;for(e===t&&(t=dr(t)),n&&(s=Rt(e,no(n)));++o<a;)for(var l=0,c=t[o],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==e&&Jh.call(s,l,1),Jh.call(e,l,1);return e}var np,rp=w({"../node_modules/lodash-es/_basePullAll.js"(){Ut(),Wr(),ep(),yo(),yr(),Zh=Array.prototype,Jh=Zh.splice,Qh=tp}});function ip(e,t){return e&&e.length&&t&&t.length?Qh(e,t):e}var op,ap,sp,lp,cp,up=w({"../node_modules/lodash-es/pullAll.js"(){rp(),np=ip}}),dp=w({"../node_modules/lodash-es/pull.js"(){vi(),up(),op=hi(np),ap=op}}),hp=w({"../node_modules/lodash-es/round.js"(){pl(),sp=cl("round"),lp=sp}});function pp(e,t,n){return null==e?e:Oh(e,t,n)}var fp,mp,gp,vp,yp,bp,xp=w({"../node_modules/lodash-es/set.js"(){zh(),cp=pp}}),_p=w({"../node_modules/lodash-es/sortBy.js"(){il(),Xh(),vi(),Pi(),fp=hi((function(e,t){if(null==e)return[];var n=t.length;return n>1&&wi(e,t[0],t[1])?t=[]:n>2&&wi(t[0],t[1],t[2])&&(t=[t[0]]),Gh(e,$s(t,1),[])})),mp=fp}}),wp=w({"../node_modules/lodash-es/_createSet.js"(){kc(),hr(),fu(),gp=oc&&1/Xc(new oc([,-0]))[1]==1/0?function(e){return new oc(e)}:lr,vp=gp}});function Sp(e,t,n){var r=-1,i=Hr,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=th;else if(o>=yp){var c=t?null:vp(e);if(c)return Xc(c);a=!1,i=Nc,l=new Rc}else l=t?[]:s;e:for(;++r<o;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,a&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(u)}else i(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s}var Ep,kp=w({"../node_modules/lodash-es/_baseUniq.js"(){jc(),Xr(),ah(),Wc(),wp(),fu(),yp=200,bp=Sp}});function Mp(e){return e&&e.length?bp(e):[]}var Pp=w({"../node_modules/lodash-es/uniq.js"(){kp(),Ep=Mp}}),Tp=w({"../node_modules/lodash-es/lodash.js"(){bl(),nh(),dh(),kh(),Ah(),ul(),Ie(),Dh(),gs(),hp(),Pp()}});function Cp(e){return JSON.stringify(Ap(e))}function Ap(e){return rl(e)?Object.keys(e).sort().reduce(((t,n)=>(t[n]=Ap(e[n]),t)),{}):Array.isArray(e)?e.map(Ap):e}var Ip,Rp,Op=w({"shared/src/utils/stableJsonStringify.ts"(){Tp()}}),Dp=w({"../node_modules/nanoid/non-secure/index.js"(){Ip=(e=21)=>{let t="",n=e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t}}});function Lp(){return Ip(10)}var jp=w({"shared/src/utils/ids.ts"(){Op(),Dp(),Rp={forSheet:()=>"sheet",forSheetObject:e=>Cp({o:e.address.objectKey}),forSheetObjectProp:(e,t)=>Cp({o:e.address.objectKey,p:t}),forTrackKeyframe:(e,t,n)=>Cp({o:e.address.objectKey,t,k:n}),forSheetObjectAggregateKeyframe:(e,t)=>Rp.forCompoundPropAggregateKeyframe(e,[],t),forSheetAggregateKeyframe:(e,t)=>Cp({o:e.address.sheetId,pos:t}),forCompoundPropAggregateKeyframe:(e,t,n)=>Cp({o:e.address.objectKey,p:t,pos:n})}}});function zp(e,t){return 0===t.length?e:js(e,t)}var Np,Bp,Fp,Up,Vp,Hp,Wp,Gp,$p,qp,Kp,Xp,Yp,Zp,Jp=w({"shared/src/utils/getDeep.ts"(){Fs()}}),Qp=S({"../node_modules/queue-microtask/index.js"(e,t){var r;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:n.g):e=>(r||(r=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))}}),ef=S({"../node_modules/object-assign/index.js"(e,t){"use strict";var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var o,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))r.call(o,c)&&(s[c]=o[c]);if(n){a=n(o);for(var u=0;u<a.length;u++)i.call(o,a[u])&&(s[a[u]]=o[a[u]])}}return s}}}),tf=S({"../node_modules/react/cjs/react.development.js"(e){"use strict";!function(){var t=ef(),n=60103,r=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var i=60109,o=60110,a=60112;e.Suspense=60113;var s=60120,l=60115,c=60116,u=60121,d=60122,h=60117,p=60129,f=60131;if("function"==typeof Symbol&&Symbol.for){var m=Symbol.for;n=m("react.element"),r=m("react.portal"),e.Fragment=m("react.fragment"),e.StrictMode=m("react.strict_mode"),e.Profiler=m("react.profiler"),i=m("react.provider"),o=m("react.context"),a=m("react.forward_ref"),e.Suspense=m("react.suspense"),s=m("react.suspense_list"),l=m("react.memo"),c=m("react.lazy"),u=m("react.block"),d=m("react.server.block"),h=m("react.fundamental"),m("react.scope"),m("react.opaque.id"),p=m("react.debug_trace_mode"),m("react.offscreen"),f=m("react.legacy_hidden")}var g="function"==typeof Symbol&&Symbol.iterator,v="@@iterator";function y(e){if(null===e||"object"!=typeof e)return null;var t=g&&e[g]||e[v];return"function"==typeof t?t:null}var b={current:null},x={current:null},_={},w=null;function S(e){w=e}_.setExtraStackFrame=function(e){w=e},_.getCurrentStack=null,_.getStackAddendum=function(){var e="";w&&(e+=w);var t=_.getCurrentStack;return t&&(e+=t()||""),e};var E={ReactCurrentDispatcher:b,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:t};function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];P("warn",e,n)}function M(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];P("error",e,n)}function P(e,t,n){var r=E.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]));var i=n.map((function(e){return""+e}));i.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,i)}E.ReactDebugCurrentFrame=_;var T={};function C(e,t){var n=e.constructor,r=n&&(n.displayName||n.name)||"ReactClass",i=r+"."+t;T[i]||(M("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",t,r),T[i]=!0)}var A={isMounted:function(e){return!1},enqueueForceUpdate:function(e,t,n){C(e,"forceUpdate")},enqueueReplaceState:function(e,t,n,r){C(e,"replaceState")},enqueueSetState:function(e,t,n,r){C(e,"setState")}},I={};function R(e,t,n){this.props=e,this.context=t,this.refs=I,this.updater=n||A}Object.freeze(I),R.prototype.isReactComponent={},R.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},R.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};var O={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},D=function(e,t){Object.defineProperty(R.prototype,e,{get:function(){k("%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1])}})};for(var L in O)O.hasOwnProperty(L)&&D(L,O[L]);function j(){}function z(e,t,n){this.props=e,this.context=t,this.refs=I,this.updater=n||A}j.prototype=R.prototype;var N=z.prototype=new j;function B(e){return e.displayName||"Context"}function F(t){if(null==t)return null;if("number"==typeof t.tag&&M("Received an unexpected object in getComponentName(). This is likely a bug in React. Please file an issue."),"function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case e.Fragment:return"Fragment";case r:return"Portal";case e.Profiler:return"Profiler";case e.StrictMode:return"StrictMode";case e.Suspense:return"Suspense";case s:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case o:return B(t)+".Consumer";case i:return B(t._context)+".Provider";case a:return p=t,m="ForwardRef",g=(f=t.render).displayName||f.name||"",p.displayName||(""!==g?m+"("+g+")":m);case l:return F(t.type);case u:return F(t._render);case c:var n=t,d=n._payload,h=n._init;try{return F(h(d))}catch(e){return null}}var p,f,m,g;return null}N.constructor=z,t(N,R.prototype),N.isPureReactComponent=!0;var U,V,H,W=Object.prototype.hasOwnProperty,G={key:!0,ref:!0,__self:!0,__source:!0};function $(e){if(W.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}function q(e){if(W.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}H={};var K=function(e,t,r,i,o,a,s){var l={$$typeof:n,type:e,key:t,ref:r,props:s,_owner:a,_store:{}};return Object.defineProperty(l._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,"_self",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(l,"_source",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.freeze&&(Object.freeze(l.props),Object.freeze(l)),l};function X(e,t,n){var r,i={},o=null,a=null,s=null,l=null;if(null!=t)for(r in $(t)&&(a=t.ref,function(e){if("string"==typeof e.ref&&x.current&&e.__self&&x.current.stateNode!==e.__self){var t=F(x.current.type);H[t]||(M('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',t,e.ref),H[t]=!0)}}(t)),q(t)&&(o=""+t.key),s=void 0===t.__self?null:t.__self,l=void 0===t.__source?null:t.__source,t)W.call(t,r)&&!G.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(c>1){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];Object.freeze&&Object.freeze(u),i.children=u}if(e&&e.defaultProps){var h=e.defaultProps;for(r in h)void 0===i[r]&&(i[r]=h[r])}if(o||a){var p="function"==typeof e?e.displayName||e.name||"Unknown":e;o&&function(e,t){var n=function(){U||(U=!0,M("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}(i,p),a&&function(e,t){var n=function(){V||(V=!0,M("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}(i,p)}return K(e,o,a,s,l,x.current,i)}function Y(e,n,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i,o,a=t({},e.props),s=e.key,l=e.ref,c=e._self,u=e._source,d=e._owner;if(null!=n)for(i in $(n)&&(l=n.ref,d=x.current),q(n)&&(s=""+n.key),e.type&&e.type.defaultProps&&(o=e.type.defaultProps),n)W.call(n,i)&&!G.hasOwnProperty(i)&&(void 0===n[i]&&void 0!==o?a[i]=o[i]:a[i]=n[i]);var h=arguments.length-2;if(1===h)a.children=r;else if(h>1){for(var p=Array(h),f=0;f<h;f++)p[f]=arguments[f+2];a.children=p}return K(e.type,s,l,c,u,d,a)}function Z(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var J=".",Q=":",ee=!1,te=/\/+/g;function ne(e){return e.replace(te,"$&/")}function re(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function ie(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,c,u,d=!1;if(null===e)d=!0;else switch(s){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case n:case r:d=!0}}if(d){var h=e,p=a(h),f=""===o?J+re(h,0):o;if(Array.isArray(p)){var m="";null!=f&&(m=ne(f)+"/"),ie(p,t,m,"",(function(e){return e}))}else null!=p&&(Z(p)&&(l=p,c=i+(!p.key||h&&h.key===p.key?"":ne(""+p.key)+"/")+f,p=K(l.type,c,l.ref,l._self,l._source,l._owner,l.props)),t.push(p));return 1}var g=0,v=""===o?J:o+Q;if(Array.isArray(e))for(var b=0;b<e.length;b++)g+=ie(u=e[b],t,i,v+re(u,b),a);else{var x=y(e);if("function"==typeof x){var _=e;x===_.entries&&(ee||k("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),ee=!0);for(var w,S=x.call(_),E=0;!(w=S.next()).done;)g+=ie(u=w.value,t,i,v+re(u,E++),a)}else if("object"===s){var M=""+e;throw Error("Objects are not valid as a React child (found: "+("[object Object]"===M?"object with keys {"+Object.keys(e).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}}return g}function oe(e,t,n){if(null==e)return e;var r=[],i=0;return ie(e,r,"","",(function(e){return t.call(n,e,i++)})),r}var ae=-1,se=0,le=1,ce=2;function ue(e){if(e._status===ae){var t=(0,e._result)(),n=e;n._status=se,n._result=t,t.then((function(t){if(e._status===se){var n=t.default;void 0===n&&M("lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))",t);var r=e;r._status=le,r._result=n}}),(function(t){if(e._status===se){var n=e;n._status=ce,n._result=t}}))}if(e._status===le)return e._result;throw e._result}var de=!1;function he(t){return"string"==typeof t||"function"==typeof t||!(t!==e.Fragment&&t!==e.Profiler&&t!==p&&t!==e.StrictMode&&t!==e.Suspense&&t!==s&&t!==f&&!de)||"object"==typeof t&&null!==t&&(t.$$typeof===c||t.$$typeof===l||t.$$typeof===i||t.$$typeof===o||t.$$typeof===a||t.$$typeof===h||t.$$typeof===u||t[0]===d)}function pe(){var e=b.current;if(null===e)throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.");return e}var fe,me,ge,ve,ye,be,xe,_e=0;function we(){}we.__reactDisabledLog=!0;var Se,Ee=E.ReactCurrentDispatcher;function ke(e,t,n){if(void 0===Se)try{throw Error()}catch(e){var r=e.stack.trim().match(/\n( *(at )?)/);Se=r&&r[1]||""}return"\n"+Se+e}var Me,Pe=!1,Te="function"==typeof WeakMap?WeakMap:Map;function Ce(e,n){if(!e||Pe)return"";var r,i=Me.get(e);if(void 0!==i)return i;Pe=!0;var o,a=Error.prepareStackTrace;Error.prepareStackTrace=void 0,o=Ee.current,Ee.current=null,function(){if(0===_e){fe=console.log,me=console.info,ge=console.warn,ve=console.error,ye=console.group,be=console.groupCollapsed,xe=console.groupEnd;var e={configurable:!0,enumerable:!0,value:we,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}_e++}();try{if(n){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(s,[])}catch(e){r=e}Reflect.construct(e,[],s)}else{try{s.call()}catch(e){r=e}e.call(s.prototype)}}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var l=t.stack.split("\n"),c=r.stack.split("\n"),u=l.length-1,d=c.length-1;u>=1&&d>=0&&l[u]!==c[d];)d--;for(;u>=1&&d>=0;u--,d--)if(l[u]!==c[d]){if(1!==u||1!==d)do{if(u--,--d<0||l[u]!==c[d]){var h="\n"+l[u].replace(" at new "," at ");return"function"==typeof e&&Me.set(e,h),h}}while(u>=1&&d>=0);break}}}finally{Pe=!1,Ee.current=o,function(){if(0==--_e){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:t({},e,{value:fe}),info:t({},e,{value:me}),warn:t({},e,{value:ge}),error:t({},e,{value:ve}),group:t({},e,{value:ye}),groupCollapsed:t({},e,{value:be}),groupEnd:t({},e,{value:xe})})}_e<0&&M("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=a}var p=e?e.displayName||e.name:"",f=p?ke(p):"";return"function"==typeof e&&Me.set(e,f),f}function Ae(e,t,n){return Ce(e,!1)}function Ie(t,n,r){if(null==t)return"";if("function"==typeof t)return Ce(t,!(!(i=t.prototype)||!i.isReactComponent));var i;if("string"==typeof t)return ke(t);switch(t){case e.Suspense:return ke("Suspense");case s:return ke("SuspenseList")}if("object"==typeof t)switch(t.$$typeof){case a:return Ae(t.render);case l:return Ie(t.type,n,r);case u:return Ae(t._render);case c:var o=t,d=o._payload,h=o._init;try{return Ie(h(d),n,r)}catch(e){}}return""}Me=new Te;var Re,Oe={},De=E.ReactDebugCurrentFrame;function Le(e){if(e){var t=e._owner,n=Ie(e.type,e._source,t?t.type:null);De.setExtraStackFrame(n)}else De.setExtraStackFrame(null)}function je(e){if(e){var t=e._owner;S(Ie(e.type,e._source,t?t.type:null))}else S(null)}function ze(){if(x.current){var e=F(x.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}Re=!1;var Ne={};function Be(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=ze();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!Ne[n]){Ne[n]=!0;var r="";e&&e._owner&&e._owner!==x.current&&(r=" It was passed a child from "+F(e._owner.type)+"."),je(e),M('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,r),je(null)}}}function Fe(e,t){if("object"==typeof e)if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];Z(r)&&Be(r,t)}else if(Z(e))e._store&&(e._store.validated=!0);else if(e){var i=y(e);if("function"==typeof i&&i!==e.entries)for(var o,a=i.call(e);!(o=a.next()).done;)Z(o.value)&&Be(o.value,t)}}function Ue(e){var t,n=e.type;if(null!=n&&"string"!=typeof n){if("function"==typeof n)t=n.propTypes;else{if("object"!=typeof n||n.$$typeof!==a&&n.$$typeof!==l)return;t=n.propTypes}if(t){var r=F(n);!function(e,t,n,r,i){var o=Function.call.bind(Object.prototype.hasOwnProperty);for(var a in e)if(o(e,a)){var s=void 0;try{if("function"!=typeof e[a]){var l=Error((r||"React class")+": "+n+" type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[a]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw l.name="Invariant Violation",l}s=e[a](t,a,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){s=e}!s||s instanceof Error||(Le(i),M("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,a,typeof s),Le(null)),s instanceof Error&&!(s.message in Oe)&&(Oe[s.message]=!0,Le(i),M("Failed %s type: %s",n,s.message),Le(null))}}(t,e.props,"prop",r,e)}else void 0===n.PropTypes||Re||(Re=!0,M("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",F(n)||"Unknown"));"function"!=typeof n.getDefaultProps||n.getDefaultProps.isReactClassApproved||M("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ve(t,r,i){var o,a,s=he(t);if(!s){var l,c="";(void 0===t||"object"==typeof t&&null!==t&&0===Object.keys(t).length)&&(c+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),c+=(null!=(o=r)&&void 0!==(a=o.__source)?"\n\nCheck your code at "+a.fileName.replace(/^.*[\\\/]/,"")+":"+a.lineNumber+".":"")||ze(),null===t?l="null":Array.isArray(t)?l="array":void 0!==t&&t.$$typeof===n?(l="<"+(F(t.type)||"Unknown")+" />",c=" Did you accidentally export a JSX literal instead of a component?"):l=typeof t,M("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",l,c)}var u=X.apply(this,arguments);if(null==u)return u;if(s)for(var d=2;d<arguments.length;d++)Fe(arguments[d],t);return t===e.Fragment?function(e){for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){je(e),M("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",r),je(null);break}}null!==e.ref&&(je(e),M("Invalid attribute `ref` supplied to `React.Fragment`."),je(null))}(u):Ue(u),u}var He=!1;try{var We=Object.freeze({});new Map([[We,null]]),new Set([We])}catch(e){}var Ge=Ve,$e={map:oe,forEach:function(e,t,n){oe(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return oe(e,(function(){t++})),t},toArray:function(e){return oe(e,(function(e){return e}))||[]},only:function(e){if(!Z(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};e.Children=$e,e.Component=R,e.PureComponent=z,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E,e.cloneElement=function(e,t,n){for(var r=Y.apply(this,arguments),i=2;i<arguments.length;i++)Fe(arguments[i],r.type);return Ue(r),r},e.createContext=function(e,t){void 0===t?t=null:null!==t&&"function"!=typeof t&&M("createContext: Expected the optional second argument to be a function. Instead received: %s",t);var n={$$typeof:o,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null};n.Provider={$$typeof:i,_context:n};var r=!1,a=!1,s=!1,l={$$typeof:o,_context:n,_calculateChangedBits:n._calculateChangedBits};return Object.defineProperties(l,{Provider:{get:function(){return a||(a=!0,M("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),n.Provider},set:function(e){n.Provider=e}},_currentValue:{get:function(){return n._currentValue},set:function(e){n._currentValue=e}},_currentValue2:{get:function(){return n._currentValue2},set:function(e){n._currentValue2=e}},_threadCount:{get:function(){return n._threadCount},set:function(e){n._threadCount=e}},Consumer:{get:function(){return r||(r=!0,M("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),n.Consumer}},displayName:{get:function(){return n.displayName},set:function(e){s||(k("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",e),s=!0)}}}),n.Consumer=l,n._currentRenderer=null,n._currentRenderer2=null,n},e.createElement=Ge,e.createFactory=function(e){var t=Ve.bind(null,e);return t.type=e,He||(He=!0,k("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(t,"type",{enumerable:!1,get:function(){return k("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:e}),e}}),t},e.createRef=function(){var e={current:null};return Object.seal(e),e},e.forwardRef=function(e){null!=e&&e.$$typeof===l?M("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):"function"!=typeof e?M("forwardRef requires a render function but was given %s.",null===e?"null":typeof e):0!==e.length&&2!==e.length&&M("forwardRef render functions accept exactly two parameters: props and ref. %s",1===e.length?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),null!=e&&(null==e.defaultProps&&null==e.propTypes||M("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?"));var t,n={$$typeof:a,render:e};return Object.defineProperty(n,"displayName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n,null==e.displayName&&(e.displayName=n)}}),n},e.isValidElement=Z,e.lazy=function(e){var t,n,r={$$typeof:c,_payload:{_status:-1,_result:e},_init:ue};return Object.defineProperties(r,{defaultProps:{configurable:!0,get:function(){return t},set:function(e){M("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),t=e,Object.defineProperty(r,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return n},set:function(e){M("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),n=e,Object.defineProperty(r,"propTypes",{enumerable:!0})}}}),r},e.memo=function(e,t){he(e)||M("memo: The first argument must be a component. Instead received: %s",null===e?"null":typeof e);var n,r={$$typeof:l,type:e,compare:void 0===t?null:t};return Object.defineProperty(r,"displayName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(t){n=t,null==e.displayName&&(e.displayName=t)}}),r},e.useCallback=function(e,t){return pe().useCallback(e,t)},e.useContext=function(e,t){var n=pe();if(void 0!==t&&M("useContext() second argument is reserved for future use in React. Passing it is not supported. You passed: %s.%s",t,"number"==typeof t&&Array.isArray(arguments[2])?"\n\nDid you call array.map(useContext)? Calling Hooks inside a loop is not supported. Learn more at https://reactjs.org/link/rules-of-hooks":""),void 0!==e._context){var r=e._context;r.Consumer===e?M("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):r.Provider===e&&M("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return n.useContext(e,t)},e.useDebugValue=function(e,t){return pe().useDebugValue(e,t)},e.useEffect=function(e,t){return pe().useEffect(e,t)},e.useImperativeHandle=function(e,t,n){return pe().useImperativeHandle(e,t,n)},e.useLayoutEffect=function(e,t){return pe().useLayoutEffect(e,t)},e.useMemo=function(e,t){return pe().useMemo(e,t)},e.useReducer=function(e,t,n){return pe().useReducer(e,t,n)},e.useRef=function(e){return pe().useRef(e)},e.useState=function(e){return pe().useState(e)},e.version="17.0.2"}()}}),nf=S({"../node_modules/react/index.js"(e,t){"use strict";t.exports=tf()}}),rf=S({"../node_modules/scheduler/cjs/scheduler.development.js"(e){"use strict";!function(){var t,n,r,i,o=!1,a=!1;if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,d=null,h=function(){if(null!==u)try{var t=e.unstable_now();u(!0,t),u=null}catch(e){throw setTimeout(h,0),e}};t=function(e){null!==u?setTimeout(t,0,e):(u=e,setTimeout(h,0))},n=function(e,t){d=setTimeout(e,t)},r=function(){clearTimeout(d)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var m=window.requestAnimationFrame,g=window.cancelAnimationFrame;"function"!=typeof m&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,b=-1,x=5,_=0;e.unstable_shouldYield=function(){return e.unstable_now()>=_},i=function(){},e.unstable_forceFrameRate=function(e){e<0||e>125?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=e>0?Math.floor(1e3/e):5};var w=new MessageChannel,S=w.port2;w.port1.onmessage=function(){if(null!==y){var t=e.unstable_now();_=t+x;try{y(!0,t)?S.postMessage(null):(v=!1,y=null)}catch(e){throw S.postMessage(null),e}}else v=!1},t=function(e){y=e,v||(v=!0,S.postMessage(null))},n=function(t,n){b=p((function(){t(e.unstable_now())}),n)},r=function(){f(b),b=-1}}function E(e,t){var n=e.length;e.push(t),function(e,t,n){for(var r=n;;){var i=r-1>>>1,o=e[i];if(!(void 0!==o&&P(o,t)>0))return;e[i]=t,e[r]=o,r=i}}(e,t,n)}function k(e){var t=e[0];return void 0===t?null:t}function M(e){var t=e[0];if(void 0!==t){var n=e.pop();return n!==t&&(e[0]=n,function(e,t,n){for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&P(a,t)<0)void 0!==l&&P(l,a)<0?(e[r]=l,e[s]=t,r=s):(e[r]=a,e[o]=t,r=o);else{if(!(void 0!==l&&P(l,t)<0))return;e[r]=l,e[s]=t,r=s}}}(e,n)),t}return null}function P(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],C=[],A=1,I=null,R=3,O=!1,D=!1,L=!1;function j(e){for(var t=k(C);null!==t;){if(null===t.callback)M(C);else{if(!(t.startTime<=e))return;M(C),t.sortIndex=t.expirationTime,E(T,t)}t=k(C)}}function z(e){if(L=!1,j(e),!D)if(null!==k(T))D=!0,t(N);else{var r=k(C);null!==r&&n(z,r.startTime-e)}}function N(t,n){D=!1,L&&(L=!1,r()),O=!0;var i=R;try{if(!a)return B(t,n);try{return B(t,n)}catch(t){throw null!==I&&(e.unstable_now(),I.isQueued=!1),t}}finally{I=null,R=i,O=!1}}function B(t,r){var i=r;for(j(i),I=k(T);null!==I&&!o&&(!(I.expirationTime>i)||t&&!e.unstable_shouldYield());){var a=I.callback;if("function"==typeof a){I.callback=null,R=I.priorityLevel;var s=a(I.expirationTime<=i);i=e.unstable_now(),"function"==typeof s?I.callback=s:I===k(T)&&M(T),j(i)}else M(T);I=k(T)}if(null!==I)return!0;var l=k(C);return null!==l&&n(z,l.startTime-i),!1}var F=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){D||O||(D=!0,t(N))},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return k(T)},e.unstable_next=function(e){var t;switch(R){case 1:case 2:case 3:t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=F,e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},e.unstable_scheduleCallback=function(i,o,a){var s,l,c=e.unstable_now();if("object"==typeof a&&null!==a){var u=a.delay;s="number"==typeof u&&u>0?c+u:c}else s=c;switch(i){case 1:l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}var d=s+l,h={id:A++,callback:o,priorityLevel:i,startTime:s,expirationTime:d,sortIndex:-1};return s>c?(h.sortIndex=s,E(C,h),null===k(T)&&h===k(C)&&(L?r():L=!0,n(z,s-c))):(h.sortIndex=d,E(T,h),D||O||(D=!0,t(N))),h},e.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}}()}}),of=S({"../node_modules/scheduler/index.js"(e,t){"use strict";t.exports=rf()}}),af=S({"../node_modules/scheduler/cjs/scheduler-tracing.development.js"(e){"use strict";!function(){var t=0,n=0,r=0;e.__interactionsRef=null,e.__subscriberRef=null,e.__interactionsRef={current:new Set},e.__subscriberRef={current:null};var i=null;function o(e){var t=!1,n=null;if(i.forEach((function(r){try{r.onInteractionTraced(e)}catch(e){t||(t=!0,n=e)}})),t)throw n}function a(e){var t=!1,n=null;if(i.forEach((function(r){try{r.onInteractionScheduledWorkCompleted(e)}catch(e){t||(t=!0,n=e)}})),t)throw n}function s(e,t){var n=!1,r=null;if(i.forEach((function(i){try{i.onWorkScheduled(e,t)}catch(e){n||(n=!0,r=e)}})),n)throw r}function l(e,t){var n=!1,r=null;if(i.forEach((function(i){try{i.onWorkStarted(e,t)}catch(e){n||(n=!0,r=e)}})),n)throw r}function c(e,t){var n=!1,r=null;if(i.forEach((function(i){try{i.onWorkStopped(e,t)}catch(e){n||(n=!0,r=e)}})),n)throw r}function u(e,t){var n=!1,r=null;if(i.forEach((function(i){try{i.onWorkCanceled(e,t)}catch(e){n||(n=!0,r=e)}})),n)throw r}i=new Set,e.unstable_clear=function(t){var n=e.__interactionsRef.current;e.__interactionsRef.current=new Set;try{return t()}finally{e.__interactionsRef.current=n}},e.unstable_getCurrent=function(){return e.__interactionsRef.current},e.unstable_getThreadID=function(){return++r},e.unstable_subscribe=function(t){i.add(t),1===i.size&&(e.__subscriberRef.current={onInteractionScheduledWorkCompleted:a,onInteractionTraced:o,onWorkCanceled:u,onWorkScheduled:s,onWorkStarted:l,onWorkStopped:c})},e.unstable_trace=function(r,i,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,s={__count:1,id:n++,name:r,timestamp:i},l=e.__interactionsRef.current,c=new Set(l);c.add(s),e.__interactionsRef.current=c;var u,d=e.__subscriberRef.current;try{null!==d&&d.onInteractionTraced(s)}finally{try{null!==d&&d.onWorkStarted(c,a)}finally{try{u=o()}finally{e.__interactionsRef.current=l;try{null!==d&&d.onWorkStopped(c,a)}finally{s.__count--,null!==d&&0===s.__count&&d.onInteractionScheduledWorkCompleted(s)}}}}return u},e.unstable_unsubscribe=function(t){i.delete(t),0===i.size&&(e.__subscriberRef.current=null)},e.unstable_wrap=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=e.__interactionsRef.current,o=e.__subscriberRef.current;null!==o&&o.onWorkScheduled(i,r),i.forEach((function(e){e.__count++}));var a=!1;function s(){var t=e.__interactionsRef.current;e.__interactionsRef.current=i,o=e.__subscriberRef.current;try{var s;try{null!==o&&o.onWorkStarted(i,r)}finally{try{s=n.apply(void 0,arguments)}finally{e.__interactionsRef.current=t,null!==o&&o.onWorkStopped(i,r)}}return s}finally{a||(a=!0,i.forEach((function(e){e.__count--,null!==o&&0===e.__count&&o.onInteractionScheduledWorkCompleted(e)})))}}return s.cancel=function(){o=e.__subscriberRef.current;try{null!==o&&o.onWorkCanceled(i,r)}finally{i.forEach((function(e){e.__count--,o&&0===e.__count&&o.onInteractionScheduledWorkCompleted(e)}))}},s}}()}}),sf=S({"../node_modules/scheduler/tracing.js"(e,t){"use strict";t.exports=af()}}),lf=S({"../node_modules/react-dom/cjs/react-dom.development.js"(e){"use strict";!function(){var t=nf(),n=ef(),r=of(),i=sf(),o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];l("warn",e,n)}function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];l("error",e,n)}function l(e,t,n){var r=o.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]));var i=n.map((function(e){return""+e}));i.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,i)}if(!t)throw Error("ReactDOM was loaded before React. Make sure you load the React package before loading ReactDOM.");var c=0,u=1,d=2,h=3,p=4,f=5,m=6,g=7,v=8,y=9,b=10,x=11,_=12,w=13,S=14,E=15,k=16,M=17,P=18,T=19,C=20,A=21,I=22,R=23,O=24,D=!0,L=!1,j=!1,z=!1,N=new Set,B={},F={};function U(e,t){V(e,t),V(e+"Capture",t)}function V(e,t){B[e]&&s("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",e),B[e]=t;var n=e.toLowerCase();F[n]=e,"onDoubleClick"===e&&(F.ondblclick=e);for(var r=0;r<t.length;r++)N.add(t[r])}var H=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),W=0,G=2,$=3,q=4,K=5,X=6,Y=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Z=Y+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",J="data-reactroot",Q=new RegExp("^["+Y+"]["+Z+"]*$"),ee=Object.prototype.hasOwnProperty,te={},ne={};function re(e){return!!ee.call(ne,e)||!ee.call(te,e)&&(Q.test(e)?(ne[e]=!0,!0):(te[e]=!0,s("Invalid attribute name: `%s`",e),!1))}function ie(e,t,n){return null!==t?t.type===W:!n&&e.length>2&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])}function oe(e,t,n,r){if(null!==n&&n.type===W)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(r)return!1;if(null!==n)return!n.acceptsBooleans;var i=e.toLowerCase().slice(0,5);return"data-"!==i&&"aria-"!==i;default:return!1}}function ae(e,t,n,r){if(null==t)return!0;if(oe(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case $:return!t;case q:return!1===t;case K:return isNaN(t);case X:return isNaN(t)||t<1}return!1}function se(e){return ce.hasOwnProperty(e)?ce[e]:null}function le(e,t,n,r,i,o,a){this.acceptsBooleans=t===G||t===$||t===q,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ce={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach((function(e){ce[e]=new le(e,W,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0],n=e[1];ce[t]=new le(t,1,!1,n,null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ce[e]=new le(e,G,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ce[e]=new le(e,G,!1,e,null,!1,!1)})),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach((function(e){ce[e]=new le(e,$,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ce[e]=new le(e,$,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){ce[e]=new le(e,q,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){ce[e]=new le(e,X,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){ce[e]=new le(e,K,!1,e.toLowerCase(),null,!1,!1)}));var ue=/[\-\:]([a-z])/g,de=function(e){return e[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach((function(e){var t=e.replace(ue,de);ce[t]=new le(t,1,!1,e,null,!1,!1)})),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach((function(e){var t=e.replace(ue,de);ce[t]=new le(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ue,de);ce[t]=new le(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){ce[e]=new le(e,1,!1,e.toLowerCase(),null,!1,!1)})),ce.xlinkHref=new le("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){ce[e]=new le(e,1,!1,e.toLowerCase(),null,!0,!0)}));var he=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,pe=!1;function fe(e){!pe&&he.test(e)&&(pe=!0,s("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(e)))}function me(e,t,n,r){if(r.mustUseProperty)return e[r.propertyName];r.sanitizeURL&&fe(""+n);var i=r.attributeName,o=null;if(r.type===q){if(e.hasAttribute(i)){var a=e.getAttribute(i);return""===a||(ae(t,n,r,!1)?a:a===""+n?n:a)}}else if(e.hasAttribute(i)){if(ae(t,n,r,!1))return e.getAttribute(i);if(r.type===$)return n;o=e.getAttribute(i)}return ae(t,n,r,!1)?null===o?n:o:o===""+n?n:o}function ge(e,t,n){if(re(t)){if(function(e){return null!==e&&"object"==typeof e&&e.$$typeof===Ie}(n))return n;if(!e.hasAttribute(t))return void 0===n?void 0:null;var r=e.getAttribute(t);return r===""+n?n:r}}function ve(e,t,n,r){var i=se(t);if(!ie(t,i,r))if(ae(t,n,i,r)&&(n=null),r||null===i){if(re(t)){var o=t;null===n?e.removeAttribute(o):e.setAttribute(o,""+n)}}else if(i.mustUseProperty){var a=i.propertyName;if(null===n){var s=i.type;e[a]=s!==$&&""}else e[a]=n}else{var l=i.attributeName,c=i.attributeNamespace;if(null===n)e.removeAttribute(l);else{var u,d=i.type;d===$||d===q&&!0===n?u="":(u=""+n,i.sanitizeURL&&fe(u.toString())),c?e.setAttributeNS(c,l,u):e.setAttribute(l,u)}}}var ye=60103,be=60106,xe=60107,_e=60108,we=60114,Se=60109,Ee=60110,ke=60112,Me=60113,Pe=60120,Te=60115,Ce=60116,Ae=60121,Ie=60128,Re=60129,Oe=60130,De=60131;if("function"==typeof Symbol&&Symbol.for){var Le=Symbol.for;ye=Le("react.element"),be=Le("react.portal"),xe=Le("react.fragment"),_e=Le("react.strict_mode"),we=Le("react.profiler"),Se=Le("react.provider"),Ee=Le("react.context"),ke=Le("react.forward_ref"),Me=Le("react.suspense"),Pe=Le("react.suspense_list"),Te=Le("react.memo"),Ce=Le("react.lazy"),Ae=Le("react.block"),Le("react.server.block"),Le("react.fundamental"),Le("react.scope"),Ie=Le("react.opaque.id"),Re=Le("react.debug_trace_mode"),Oe=Le("react.offscreen"),De=Le("react.legacy_hidden")}var je="function"==typeof Symbol&&Symbol.iterator,ze="@@iterator";function Ne(e){if(null===e||"object"!=typeof e)return null;var t=je&&e[je]||e[ze];return"function"==typeof t?t:null}var Be,Fe,Ue,Ve,He,We,Ge,$e=0;function qe(){}function Ke(){if(0===$e){Be=console.log,Fe=console.info,Ue=console.warn,Ve=console.error,He=console.group,We=console.groupCollapsed,Ge=console.groupEnd;var e={configurable:!0,enumerable:!0,value:qe,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}$e++}function Xe(){if(0==--$e){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:n({},e,{value:Be}),info:n({},e,{value:Fe}),warn:n({},e,{value:Ue}),error:n({},e,{value:Ve}),group:n({},e,{value:He}),groupCollapsed:n({},e,{value:We}),groupEnd:n({},e,{value:Ge})})}$e<0&&s("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}qe.__reactDisabledLog=!0;var Ye,Ze=o.ReactCurrentDispatcher;function Je(e,t,n){if(void 0===Ye)try{throw Error()}catch(e){var r=e.stack.trim().match(/\n( *(at )?)/);Ye=r&&r[1]||""}return"\n"+Ye+e}var Qe,et=!1,tt="function"==typeof WeakMap?WeakMap:Map;function nt(e,t){if(!e||et)return"";var n,r=Qe.get(e);if(void 0!==r)return r;et=!0;var i,o=Error.prepareStackTrace;Error.prepareStackTrace=void 0,i=Ze.current,Ze.current=null,Ke();try{if(t){var a=function(){throw Error()};if(Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(e){n=e}Reflect.construct(e,[],a)}else{try{a.call()}catch(e){n=e}e.call(a.prototype)}}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var s=t.stack.split("\n"),l=n.stack.split("\n"),c=s.length-1,u=l.length-1;c>=1&&u>=0&&s[c]!==l[u];)u--;for(;c>=1&&u>=0;c--,u--)if(s[c]!==l[u]){if(1!==c||1!==u)do{if(c--,--u<0||s[c]!==l[u]){var d="\n"+s[c].replace(" at new "," at ");return"function"==typeof e&&Qe.set(e,d),d}}while(c>=1&&u>=0);break}}}finally{et=!1,Ze.current=i,Xe(),Error.prepareStackTrace=o}var h=e?e.displayName||e.name:"",p=h?Je(h):"";return"function"==typeof e&&Qe.set(e,p),p}function rt(e,t,n){return nt(e,!1)}function it(e,t,n){if(null==e)return"";if("function"==typeof e)return nt(e,!(!(r=e.prototype)||!r.isReactComponent));var r;if("string"==typeof e)return Je(e);switch(e){case Me:return Je("Suspense");case Pe:return Je("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case ke:return rt(e.render);case Te:return it(e.type,t,n);case Ae:return rt(e._render);case Ce:var i=e,o=i._payload,a=i._init;try{return it(a(o),t,n)}catch(e){}}return""}function ot(e){switch(e._debugOwner&&e._debugOwner.type,e._debugSource,e.tag){case f:return Je(e.type);case k:return Je("Lazy");case w:return Je("Suspense");case T:return Je("SuspenseList");case c:case d:case E:return rt(e.type);case x:return rt(e.type.render);case I:return rt(e.type._render);case u:return nt(e.type,!0);default:return""}}function at(e){try{var t="",n=e;do{t+=ot(n),n=n.return}while(n);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function st(e){return e.displayName||"Context"}function lt(e){if(null==e)return null;if("number"==typeof e.tag&&s("Received an unexpected object in getComponentName(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case xe:return"Fragment";case be:return"Portal";case we:return"Profiler";case _e:return"StrictMode";case Me:return"Suspense";case Pe:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ee:return st(e)+".Consumer";case Se:return st(e._context)+".Provider";case ke:return i=e,a="ForwardRef",l=(o=e.render).displayName||o.name||"",i.displayName||(""!==l?a+"("+l+")":a);case Te:return lt(e.type);case Ae:return lt(e._render);case Ce:var t=e,n=t._payload,r=t._init;try{return lt(r(n))}catch(e){return null}}var i,o,a,l;return null}Qe=new tt;var ct=o.ReactDebugCurrentFrame,ut=null,dt=!1;function ht(){if(null===ut)return null;var e=ut._debugOwner;return null!=e?lt(e.type):null}function pt(){return null===ut?"":at(ut)}function ft(){ct.getCurrentStack=null,ut=null,dt=!1}function mt(e){ct.getCurrentStack=pt,ut=e,dt=!1}function gt(e){dt=e}function vt(e){return""+e}function yt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}var bt={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function xt(e,t){bt[t.type]||t.onChange||t.onInput||t.readOnly||t.disabled||null==t.value||s("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),t.onChange||t.readOnly||t.disabled||null==t.checked||s("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function _t(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function wt(e){return e._valueTracker}function St(e){wt(e)||(e._valueTracker=function(e){var t=_t(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable});var a={getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){!function(e){e._valueTracker=null}(e),delete e[t]}};return a}}(e))}function Et(e){if(!e)return!1;var t=wt(e);if(!t)return!0;var n=t.getValue(),r=function(e){var t="";return e?t=_t(e)?e.checked?"true":"false":e.value:t}(e);return r!==n&&(t.setValue(r),!0)}function kt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var Mt=!1,Pt=!1,Tt=!1,Ct=!1;function At(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}function It(e,t){var r=e,i=t.checked;return n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:r._wrapperState.initialChecked})}function Rt(e,t){xt(0,t),void 0===t.checked||void 0===t.defaultChecked||Pt||(s("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",ht()||"A component",t.type),Pt=!0),void 0===t.value||void 0===t.defaultValue||Mt||(s("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",ht()||"A component",t.type),Mt=!0);var n=e,r=null==t.defaultValue?"":t.defaultValue;n._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:yt(null!=t.value?t.value:r),controlled:At(t)}}function Ot(e,t){var n=e,r=t.checked;null!=r&&ve(n,"checked",r,!1)}function Dt(e,t){var n=e,r=At(t);n._wrapperState.controlled||!r||Ct||(s("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Ct=!0),!n._wrapperState.controlled||r||Tt||(s("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Tt=!0),Ot(e,t);var i=yt(t.value),o=t.type;if(null!=i)"number"===o?(0===i&&""===n.value||n.value!=i)&&(n.value=vt(i)):n.value!==vt(i)&&(n.value=vt(i));else if("submit"===o||"reset"===o)return void n.removeAttribute("value");t.hasOwnProperty("value")?jt(n,t.type,i):t.hasOwnProperty("defaultValue")&&jt(n,t.type,yt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(n.defaultChecked=!!t.defaultChecked)}function Lt(e,t,n){var r=e;if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;var o=vt(r._wrapperState.initialValue);n||o!==r.value&&(r.value=o),r.defaultValue=o}var a=r.name;""!==a&&(r.name=""),r.defaultChecked=!r.defaultChecked,r.defaultChecked=!!r._wrapperState.initialChecked,""!==a&&(r.name=a)}function jt(e,t,n){"number"===t&&kt(e.ownerDocument)===e||(null==n?e.defaultValue=vt(e._wrapperState.initialValue):e.defaultValue!==vt(n)&&(e.defaultValue=vt(n)))}var zt,Nt=!1,Bt=!1;function Ft(e,n){"object"==typeof n.children&&null!==n.children&&t.Children.forEach(n.children,(function(e){null!=e&&"string"!=typeof e&&"number"!=typeof e&&"string"==typeof e.type&&(Bt||(Bt=!0,s("Only strings and numbers are supported as <option> children.")))})),null==n.selected||Nt||(s("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),Nt=!0)}function Ut(e,r){var i=n({children:void 0},r),o=function(e){var n="";return t.Children.forEach(e,(function(e){null!=e&&(n+=e)})),n}(r.children);return o&&(i.children=o),i}function Vt(){var e=ht();return e?"\n\nCheck the render method of `"+e+"`.":""}zt=!1;var Ht=["value","defaultValue"];function Wt(e,t,n,r){var i=e.options;if(t){for(var o=n,a={},s=0;s<o.length;s++)a["$"+o[s]]=!0;for(var l=0;l<i.length;l++){var c=a.hasOwnProperty("$"+i[l].value);i[l].selected!==c&&(i[l].selected=c),c&&r&&(i[l].defaultSelected=!0)}}else{for(var u=vt(yt(n)),d=null,h=0;h<i.length;h++){if(i[h].value===u)return i[h].selected=!0,void(r&&(i[h].defaultSelected=!0));null!==d||i[h].disabled||(d=i[h])}null!==d&&(d.selected=!0)}}function Gt(e,t){return n({},t,{value:void 0})}function $t(e,t){var n=e;!function(e){xt(0,e);for(var t=0;t<Ht.length;t++){var n=Ht[t];if(null!=e[n]){var r=Array.isArray(e[n]);e.multiple&&!r?s("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",n,Vt()):!e.multiple&&r&&s("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",n,Vt())}}}(t),n._wrapperState={wasMultiple:!!t.multiple},void 0===t.value||void 0===t.defaultValue||zt||(s("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),zt=!0)}var qt=!1;function Kt(e,t){var r=e;if(null!=t.dangerouslySetInnerHTML)throw Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");return n({},t,{value:void 0,defaultValue:void 0,children:vt(r._wrapperState.initialValue)})}function Xt(e,t){var n=e;xt(0,t),void 0===t.value||void 0===t.defaultValue||qt||(s("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",ht()||"A component"),qt=!0);var r=t.value;if(null==r){var i=t.children,o=t.defaultValue;if(null!=i){if(s("Use the `defaultValue` or `value` props instead of setting children on <textarea>."),null!=o)throw Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(Array.isArray(i)){if(!(i.length<=1))throw Error("<textarea> can only have at most one child.");i=i[0]}o=i}null==o&&(o=""),r=o}n._wrapperState={initialValue:yt(r)}}function Yt(e,t){var n=e,r=yt(t.value),i=yt(t.defaultValue);if(null!=r){var o=vt(r);o!==n.value&&(n.value=o),null==t.defaultValue&&n.defaultValue!==o&&(n.defaultValue=o)}null!=i&&(n.defaultValue=vt(i))}function Zt(e,t){var n=e,r=n.textContent;r===n._wrapperState.initialValue&&""!==r&&null!==r&&(n.value=r)}var Jt="http://www.w3.org/1999/xhtml",Qt="http://www.w3.org/1998/Math/MathML",en="http://www.w3.org/2000/svg",tn={html:Jt,mathml:Qt,svg:en};function nn(e){switch(e){case"svg":return en;case"math":return Qt;default:return Jt}}function rn(e,t){return null==e||e===Jt?nn(t):e===en&&"foreignObject"===t?Jt:e}var on,an,sn=(an=function(e,t){if(e.namespaceURI!==tn.svg||"innerHTML"in e)e.innerHTML=t;else{(on=on||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>";for(var n=on.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return an(e,t)}))}:an),ln=1,cn=3,un=8,dn=9,hn=11,pn=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===cn)return void(n.nodeValue=t)}e.textContent=t},fn={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},mn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gn=["Webkit","ms","Moz","O"];function vn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||mn.hasOwnProperty(e)&&mn[e]?(""+t).trim():t+"px"}Object.keys(mn).forEach((function(e){gn.forEach((function(t){mn[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=mn[e]}))}));var yn=/([A-Z])/g,bn=/^ms-/,xn=/^(?:webkit|moz|o)[A-Z]/,_n=/^-ms-/,wn=/-(.)/g,Sn=/;\s*$/,En={},kn={},Mn=!1,Pn=!1,Tn=function(e,t){e.indexOf("-")>-1?function(e){En.hasOwnProperty(e)&&En[e]||(En[e]=!0,s("Unsupported style property %s. Did you mean %s?",e,e.replace(_n,"ms-").replace(wn,(function(e,t){return t.toUpperCase()}))))}(e):xn.test(e)?function(e){En.hasOwnProperty(e)&&En[e]||(En[e]=!0,s("Unsupported vendor-prefixed style property %s. Did you mean %s?",e,e.charAt(0).toUpperCase()+e.slice(1)))}(e):Sn.test(t)&&function(e,t){kn.hasOwnProperty(t)&&kn[t]||(kn[t]=!0,s('Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',e,t.replace(Sn,"")))}(e,t),"number"==typeof t&&(isNaN(t)?function(e,t){Mn||(Mn=!0,s("`NaN` is an invalid value for the `%s` css style property.",e))}(e):isFinite(t)||function(e,t){Pn||(Pn=!0,s("`Infinity` is an invalid value for the `%s` css style property.",e))}(e))};function Cn(e){var t="",n="";for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(null!=i){var o=0===r.indexOf("--");t+=n+(o?r:r.replace(yn,"-$1").toLowerCase().replace(bn,"-ms-"))+":",t+=vn(r,i,o),n=";"}}return t||null}function An(e,t){var n=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--");i||Tn(r,t[r]);var o=vn(r,t[r],i);"float"===r&&(r="cssFloat"),i?n.setProperty(r,o):n[r]=o}}function In(e){var t={};for(var n in e)for(var r=fn[n]||[n],i=0;i<r.length;i++)t[r[i]]=n;return t}var Rn=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),On="__html";function Dn(e,t){if(t){if(Rn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(e+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if("object"!=typeof t.dangerouslySetInnerHTML||!(On in t.dangerouslySetInnerHTML))throw Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!t.suppressContentEditableWarning&&t.contentEditable&&null!=t.children&&s("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),null!=t.style&&"object"!=typeof t.style)throw Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function Ln(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jn={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},zn={"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},Nn={},Bn=new RegExp("^(aria)-["+Z+"]*$"),Fn=new RegExp("^(aria)[A-Z]["+Z+"]*$"),Un=Object.prototype.hasOwnProperty;function Vn(e,t){if(Un.call(Nn,t)&&Nn[t])return!0;if(Fn.test(t)){var n="aria-"+t.slice(4).toLowerCase(),r=zn.hasOwnProperty(n)?n:null;if(null==r)return s("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",t),Nn[t]=!0,!0;if(t!==r)return s("Invalid ARIA attribute `%s`. Did you mean `%s`?",t,r),Nn[t]=!0,!0}if(Bn.test(t)){var i=t.toLowerCase(),o=zn.hasOwnProperty(i)?i:null;if(null==o)return Nn[t]=!0,!1;if(t!==o)return s("Unknown ARIA attribute `%s`. Did you mean `%s`?",t,o),Nn[t]=!0,!0}return!0}var Hn,Wn=!1,Gn={},$n=Object.prototype.hasOwnProperty,qn=/^on./,Kn=/^on[^A-Z]/,Xn=new RegExp("^(aria)-["+Z+"]*$"),Yn=new RegExp("^(aria)[A-Z]["+Z+"]*$");Hn=function(e,t,n,r){if($n.call(Gn,t)&&Gn[t])return!0;var i=t.toLowerCase();if("onfocusin"===i||"onfocusout"===i)return s("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),Gn[t]=!0,!0;if(null!=r){var o=r.registrationNameDependencies,a=r.possibleRegistrationNames;if(o.hasOwnProperty(t))return!0;var l=a.hasOwnProperty(i)?a[i]:null;if(null!=l)return s("Invalid event handler property `%s`. Did you mean `%s`?",t,l),Gn[t]=!0,!0;if(qn.test(t))return s("Unknown event handler property `%s`. It will be ignored.",t),Gn[t]=!0,!0}else if(qn.test(t))return Kn.test(t)&&s("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",t),Gn[t]=!0,!0;if(Xn.test(t)||Yn.test(t))return!0;if("innerhtml"===i)return s("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),Gn[t]=!0,!0;if("aria"===i)return s("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),Gn[t]=!0,!0;if("is"===i&&null!=n&&"string"!=typeof n)return s("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof n),Gn[t]=!0,!0;if("number"==typeof n&&isNaN(n))return s("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",t),Gn[t]=!0,!0;var c=se(t),u=null!==c&&c.type===W;if(jn.hasOwnProperty(i)){var d=jn[i];if(d!==t)return s("Invalid DOM property `%s`. Did you mean `%s`?",t,d),Gn[t]=!0,!0}else if(!u&&t!==i)return s("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",t,i),Gn[t]=!0,!0;return"boolean"==typeof n&&oe(t,n,c,!1)?(n?s('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',n,t,t,n,t):s('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',n,t,t,n,t,t,t),Gn[t]=!0,!0):!!u||(oe(t,n,c,!1)?(Gn[t]=!0,!1):("false"!==n&&"true"!==n||null===c||c.type!==$||(s("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",n,t,"false"===n?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',t,n),Gn[t]=!0),!0))};var Zn=1,Jn=2,Qn=4,er=16,tr=Zn|Jn|Qn;function nr(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===cn?t.parentNode:t}var rr=null,ir=null,or=null;function ar(e){var t=xc(e);if(t){if("function"!=typeof rr)throw Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var n=t.stateNode;if(n){var r=wc(n);rr(t.stateNode,t.type,r)}}}function sr(e){ir?or?or.push(e):or=[e]:ir=e}function lr(){if(ir){var e=ir,t=or;if(ir=null,or=null,ar(e),t)for(var n=0;n<t.length;n++)ar(t[n])}}var cr=function(e,t){return e(t)},ur=function(e,t,n,r,i){return e(t,n,r,i)},dr=function(){},hr=cr,pr=!1,fr=!1;function mr(){(null!==ir||null!==or)&&(dr(),lr())}function gr(e,t){var n=e.stateNode;if(null===n)return null;var r=wc(n);if(null===r)return null;var i=r[t];if(function(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!(!n.disabled||(r=t,"button"!==r&&"input"!==r&&"select"!==r&&"textarea"!==r));default:return!1}var r}(t,e.type,r))return null;if(i&&"function"!=typeof i)throw Error("Expected `"+t+"` listener to be a function, instead got a value of `"+typeof i+"` type.");return i}var vr=!1;if(H)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){vr=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch(e){vr=!1}function br(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var xr=br;if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var _r=document.createElement("react");xr=function(e,t,n,r,i,o,a,s,l){if("undefined"==typeof document)throw Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var c=document.createEvent("Event"),u=!1,d=!0,h=window.event,p=Object.getOwnPropertyDescriptor(window,"event");function f(){_r.removeEventListener(_,v,!1),void 0!==window.event&&window.hasOwnProperty("event")&&(window.event=h)}var m,g=Array.prototype.slice.call(arguments,3);function v(){u=!0,f(),t.apply(n,g),d=!1}var y=!1,b=!1;function x(e){if(m=e.error,y=!0,null===m&&0===e.colno&&0===e.lineno&&(b=!0),e.defaultPrevented&&null!=m&&"object"==typeof m)try{m._suppressLogging=!0}catch(e){}}var _="react-"+(e||"invokeguardedcallback");if(window.addEventListener("error",x),_r.addEventListener(_,v,!1),c.initEvent(_,!1,!1),_r.dispatchEvent(c),p&&Object.defineProperty(window,"event",p),u&&d&&(y?b&&(m=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):m=new Error("An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the \"Pause on exceptions\" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue."),this.onError(m)),window.removeEventListener("error",x),!u)return f(),br.apply(this,arguments)}}var wr=xr,Sr=!1,Er=null,kr=!1,Mr=null,Pr={onError:function(e){Sr=!0,Er=e}};function Tr(e,t,n,r,i,o,a,s,l){Sr=!1,Er=null,wr.apply(Pr,arguments)}function Cr(){return Sr}function Ar(){if(Sr){var e=Er;return Sr=!1,Er=null,e}throw Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function Ir(e){return e._reactInternals}var Rr,Or,Dr,Lr,jr=0,zr=1,Nr=2,Br=4,Fr=6,Ur=8,Vr=16,Hr=32,Wr=64,Gr=128,$r=256,qr=512,Kr=8192,Xr=1024,Yr=1028,Zr=932,Jr=2047,Qr=2048,ei=4096,ti=16384,ni=o.ReactCurrentOwner;function ri(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{var r=t;do{((t=r).flags&(Nr|Xr))!==jr&&(n=t.return),r=t.return}while(r)}return t.tag===h?n:null}function ii(e){if(e.tag===w){var t=e.memoizedState;if(null===t){var n=e.alternate;null!==n&&(t=n.memoizedState)}if(null!==t)return t.dehydrated}return null}function oi(e){return e.tag===h?e.stateNode.containerInfo:null}function ai(e){if(ri(e)!==e)throw Error("Unable to find node on an unmounted component.")}function si(e){var t=e.alternate;if(!t){var n=ri(e);if(null===n)throw Error("Unable to find node on an unmounted component.");return n!==e?null:e}for(var r=e,i=t;;){var o=r.return;if(null===o)break;var a=o.alternate;if(null===a){var s=o.return;if(null!==s){r=i=s;continue}break}if(o.child===a.child){for(var l=o.child;l;){if(l===r)return ai(o),e;if(l===i)return ai(o),t;l=l.sibling}throw Error("Unable to find node on an unmounted component.")}if(r.return!==i.return)r=o,i=a;else{for(var c=!1,u=o.child;u;){if(u===r){c=!0,r=o,i=a;break}if(u===i){c=!0,i=o,r=a;break}u=u.sibling}if(!c){for(u=a.child;u;){if(u===r){c=!0,r=a,i=o;break}if(u===i){c=!0,i=a,r=o;break}u=u.sibling}if(!c)throw Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(r.alternate!==i)throw Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(r.tag!==h)throw Error("Unable to find node on an unmounted component.");return r.stateNode.current===r?e:t}function li(e){var t=si(e);if(!t)return null;for(var n=t;;){if(n.tag===f||n.tag===m)return n;if(n.child)n.child.return=n,n=n.child;else{if(n===t)return null;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}function ci(e,t){for(var n=t,r=e.alternate;null!==n;){if(n===e||n===r)return!0;n=n.return}return!1}var ui=!1,di=[],hi=null,pi=null,fi=null,mi=new Map,gi=new Map,vi=[],yi=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function bi(e){return yi.indexOf(e)>-1}function xi(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:n|er,nativeEvent:i,targetContainers:[r]}}function _i(e,t,n,r,i){var o=xi(e,t,n,r,i);di.push(o)}function wi(e,t){switch(e){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":var n=t.pointerId;mi.delete(n);break;case"gotpointercapture":case"lostpointercapture":var r=t.pointerId;gi.delete(r)}}function Si(e,t,n,r,i,o){if(null===e||e.nativeEvent!==o){var a=xi(t,n,r,i,o);if(null!==t){var s=xc(t);null!==s&&Or(s)}return a}e.eventSystemFlags|=r;var l=e.targetContainers;return null!==i&&-1===l.indexOf(i)&&l.push(i),e}function Ei(e){var t=bc(e.target);if(null!==t){var n=ri(t);if(null!==n){var i=n.tag;if(i===w){var o=ii(n);if(null!==o)return e.blockedOn=o,void Lr(e.lanePriority,(function(){r.unstable_runWithPriority(e.priority,(function(){Dr(n)}))}))}else if(i===h&&n.stateNode.hydrate)return void(e.blockedOn=oi(n))}}e.blockedOn=null}function ki(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;t.length>0;){var n=t[0],r=da(e.domEventName,e.eventSystemFlags,n,e.nativeEvent);if(null!==r){var i=xc(r);return null!==i&&Or(i),e.blockedOn=r,!1}t.shift()}return!0}function Mi(e,t,n){ki(e)&&n.delete(t)}function Pi(){for(ui=!1;di.length>0;){var e=di[0];if(null!==e.blockedOn){var t=xc(e.blockedOn);null!==t&&Rr(t);break}for(var n=e.targetContainers;n.length>0;){var r=n[0],i=da(e.domEventName,e.eventSystemFlags,r,e.nativeEvent);if(null!==i){e.blockedOn=i;break}n.shift()}null===e.blockedOn&&di.shift()}null!==hi&&ki(hi)&&(hi=null),null!==pi&&ki(pi)&&(pi=null),null!==fi&&ki(fi)&&(fi=null),mi.forEach(Mi),gi.forEach(Mi)}function Ti(e,t){e.blockedOn===t&&(e.blockedOn=null,ui||(ui=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Pi)))}function Ci(e){if(di.length>0){Ti(di[0],e);for(var t=1;t<di.length;t++){var n=di[t];n.blockedOn===e&&(n.blockedOn=null)}}null!==hi&&Ti(hi,e),null!==pi&&Ti(pi,e),null!==fi&&Ti(fi,e);var r=function(t){return Ti(t,e)};mi.forEach(r),gi.forEach(r);for(var i=0;i<vi.length;i++){var o=vi[i];o.blockedOn===e&&(o.blockedOn=null)}for(;vi.length>0;){var a=vi[0];if(null!==a.blockedOn)break;Ei(a),null===a.blockedOn&&vi.shift()}}var Ai=0,Ii=1,Ri=2;function Oi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Di={animationend:Oi("Animation","AnimationEnd"),animationiteration:Oi("Animation","AnimationIteration"),animationstart:Oi("Animation","AnimationStart"),transitionend:Oi("Transition","TransitionEnd")},Li={},ji={};function zi(e){if(Li[e])return Li[e];if(!Di[e])return e;var t=Di[e];for(var n in t)if(t.hasOwnProperty(n)&&n in ji)return Li[e]=t[n];return e}H&&(ji=document.createElement("div").style,"AnimationEvent"in window||(delete Di.animationend.animation,delete Di.animationiteration.animation,delete Di.animationstart.animation),"TransitionEvent"in window||delete Di.transitionend.transition);var Ni=zi("animationend"),Bi=zi("animationiteration"),Fi=zi("animationstart"),Ui=zi("transitionend"),Vi=new Map,Hi=new Map,Wi=["abort","abort",Ni,"animationEnd",Bi,"animationIteration",Fi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ui,"transitionEnd","waiting","waiting"];function Gi(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));Hi.set(r,t),Vi.set(r,o),U(o,[r])}}var $i=r.unstable_now;if(null==i.__interactionsRef||null==i.__interactionsRef.current)throw Error("It is not supported to run the profiling version of a renderer (for example, `react-dom/profiling`) without also replacing the `scheduler/tracing` module with `scheduler/tracing-profiling`. Your bundler might have a setting for aliasing both modules. Learn more at https://reactjs.org/link/profiling");var qi=99,Ki=98,Xi=97,Yi=96,Zi=95,Ji=90,Qi=($i(),15),eo=14,to=13,no=12,ro=11,io=10,oo=9,ao=8,so=7,lo=6,co=5,uo=4,ho=3,po=2,fo=1,mo=0,go=31,vo=0,yo=0,bo=1,xo=2,_o=4,wo=24,So=32,Eo=192,ko=256,Mo=3584,Po=4096,To=4186112,Co=62914560,Ao=33554432,Io=67108864,Ro=134217727,Oo=134217728,Do=805306368,Lo=1073741824,jo=-1,zo=ao;function No(e){if((bo&e)!==vo)return zo=Qi,bo;if((xo&e)!==vo)return zo=eo,xo;if((_o&e)!==vo)return zo=to,_o;var t=wo&e;if(t!==vo)return zo=no,t;if((e&So)!==vo)return zo=ro,So;var n=Eo&e;if(n!==vo)return zo=io,n;if((e&ko)!==vo)return zo=oo,ko;var r=Mo&e;if(r!==vo)return zo=ao,r;if((e&Po)!==vo)return zo=so,Po;var i=To&e;if(i!==vo)return zo=lo,i;var o=Co&e;if(o!==vo)return zo=co,o;if(e&Io)return zo=uo,Io;if((e&Oo)!==vo)return zo=ho,Oo;var a=Do&e;return a!==vo?(zo=po,a):(Lo&e)!==vo?(zo=fo,Lo):(s("Should have found matching lanes. This is a bug in React."),zo=ao,e)}function Bo(e,t){var n=e.pendingLanes;if(n===vo)return zo=mo,vo;var r=vo,i=mo,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(o!==vo)r=o,i=zo=Qi;else{var l=n&Ro;if(l!==vo){var c=l&~a;if(c!==vo)r=No(c),i=zo;else{var u=l&s;u!==vo&&(r=No(u),i=zo)}}else{var d=n&~a;d!==vo?(r=No(d),i=zo):s!==vo&&(r=No(s),i=zo)}}if(r===vo)return vo;if(r=n&function(e){return(function(e){var t=31-ta(e);return t<0?vo:1<<t}(e)<<1)-1}(r),t!==vo&&t!==r&&(t&a)===vo){if(No(t),i<=zo)return t;zo=i}var h=e.entangledLanes;if(h!==vo)for(var p=e.entanglements,f=r&h;f>0;){var m=$o(f),g=1<<m;r|=p[m],f&=~g}return r}function Fo(e,t){return No(e),zo>=io?t+250:zo>=lo?t+5e3:jo}function Uo(e){var t=e.pendingLanes&~Lo;return t!==vo?t:t&Lo?Lo:vo}function Vo(e){return(e&Ro)!==vo}function Ho(e){return(e&Co)===e}function Wo(e,t){switch(e){case mo:break;case Qi:return bo;case eo:return xo;case no:var n=Go(wo&~t);return n===yo?Wo(io,t):n;case io:var r=Go(Eo&~t);return r===yo?Wo(ao,t):r;case ao:var i=Go(Mo&~t);return i===yo&&(i=Go(To&~t))===yo&&(i=Go(Mo)),i;case lo:case co:break;case po:var o=Go(Do&~t);return o===yo&&(o=Go(Do)),o}throw Error("Invalid update priority: "+e+". This is a bug in React.")}function Go(e){return function(e){return e&-e}(e)}function $o(e){return 31-ta(e)}function qo(e,t){return(e&t)!==vo}function Ko(e,t){return(e&t)===t}function Xo(e,t){return e|t}function Yo(e,t){return e&~t}function Zo(e){for(var t=[],n=0;n<go;n++)t.push(e);return t}function Jo(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,e.eventTimes[$o(t)]=n}function Qo(e,t,n){e.pingedLanes|=e.suspendedLanes&t}function ea(e,t){e.mutableReadLanes|=t&e.pendingLanes}var ta=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(na(e)/ra|0)|0},na=Math.log,ra=Math.LN2,ia=r.unstable_UserBlockingPriority,oa=r.unstable_runWithPriority,aa=!0;function sa(e){aa=!!e}function la(e,t,n,r){r.timeStamp,pr||dr(),function(e,t,n,r,i){var o=pr;pr=!0;try{return ur(e,t,n,r,i)}finally{(pr=o)||mr()}}(ua,e,t,n,r)}function ca(e,t,n,r){oa(ia,ua.bind(null,e,t,n,r))}function ua(e,t,n,r){var i;if(aa)if((i=0==(t&Qn))&&di.length>0&&bi(e))_i(null,e,t,n,r);else{var o=da(e,t,n,r);if(null!==o){if(i){if(bi(e))return void _i(o,e,t,n,r);if(function(e,t,n,r,i){switch(t){case"focusin":return hi=Si(hi,e,t,n,r,i),!0;case"dragenter":return pi=Si(pi,e,t,n,r,i),!0;case"mouseover":return fi=Si(fi,e,t,n,r,i),!0;case"pointerover":var o=i,a=o.pointerId;return mi.set(a,Si(mi.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":var s=i,l=s.pointerId;return gi.set(l,Si(gi.get(l)||null,e,t,n,r,s)),!0}return!1}(o,e,t,n,r))return;wi(e,r)}Js(e,t,r,null,n)}else i&&wi(e,r)}}function da(e,t,n,r){var i=bc(nr(r));if(null!==i){var o=ri(i);if(null===o)i=null;else{var a=o.tag;if(a===w){var s=ii(o);if(null!==s)return s;i=null}else if(a===h){if(o.stateNode.hydrate)return oi(o);i=null}else o!==i&&(i=null)}}return Js(e,t,r,i,n),null}var ha=null,pa=null,fa=null;function ma(){if(fa)return fa;var e,t,n=pa,r=n.length,i=ga(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);var s=t>1?1-t:void 0;return fa=i.slice(e,s)}function ga(){return"value"in ha?ha.value:ha.textContent}function va(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,10===t&&(t=13),t>=32||13===t?t:0}function ya(){return!0}function ba(){return!1}function xa(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)if(e.hasOwnProperty(a)){var s=e[a];this[a]=s?s(i):i[a]}var l=null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue;return this.isDefaultPrevented=l?ya:ba,this.isPropagationStopped=ba,this}return n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ya)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ya)},persist:function(){},isPersistent:ya}),t}var _a,wa,Sa,Ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ka=xa(Ea),Ma=n({},Ea,{view:0,detail:0}),Pa=xa(Ma),Ta=n({},Ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fa,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(function(e){e!==Sa&&(Sa&&"mousemove"===e.type?(_a=e.screenX-Sa.screenX,wa=e.screenY-Sa.screenY):(_a=0,wa=0),Sa=e)}(e),_a)},movementY:function(e){return"movementY"in e?e.movementY:wa}}),Ca=xa(Ta),Aa=xa(n({},Ta,{dataTransfer:0})),Ia=xa(n({},Ma,{relatedTarget:0})),Ra=xa(n({},Ea,{animationName:0,elapsedTime:0,pseudoElement:0})),Oa=xa(n({},Ea,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),Da=xa(n({},Ea,{data:0})),La=Da,ja={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},za={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Na={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ba(e){var t=this.nativeEvent;if(t.getModifierState)return t.getModifierState(e);var n=Na[e];return!!n&&!!t[n]}function Fa(e){return Ba}var Ua=xa(n({},Ma,{key:function(e){if(e.key){var t=ja[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=va(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?za[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fa,charCode:function(e){return"keypress"===e.type?va(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?va(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Va=xa(n({},Ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ha=xa(n({},Ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fa})),Wa=xa(n({},Ea,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ga=xa(n({},Ta,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),$a=[9,13,27,32],qa=229,Ka=H&&"CompositionEvent"in window,Xa=null;H&&"documentMode"in document&&(Xa=document.documentMode);var Ya=H&&"TextEvent"in window&&!Xa,Za=H&&(!Ka||Xa&&Xa>8&&Xa<=11),Ja=32,Qa=String.fromCharCode(Ja),es=!1;function ts(e,t){switch(e){case"keyup":return-1!==$a.indexOf(t.keyCode);case"keydown":return t.keyCode!==qa;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ns(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function rs(e){return"ko"===e.locale}var is=!1;function os(e,t,n,r,i){var o;if(!(o=Ya?function(e,t){switch(e){case"compositionend":return ns(t);case"keypress":return t.which!==Ja?null:(es=!0,Qa);case"textInput":var n=t.data;return n===Qa&&es?null:n;default:return null}}(t,r):function(e,t){if(is){if("compositionend"===e||!Ka&&ts(e,t)){var n=ma();return ha=null,pa=null,fa=null,is=!1,n}return null}switch(e){case"paste":default:return null;case"keypress":if(!function(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}(t)){if(t.char&&t.char.length>1)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Za&&!rs(t)?null:t.data}}(t,r)))return null;var a=el(n,"onBeforeInput");if(a.length>0){var s=new La("onBeforeInput","beforeinput",null,r,i);e.push({event:s,listeners:a}),s.data=o}}var as={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ss(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!as[e.type]:"textarea"===t}function ls(e,t,n,r){sr(r);var i=el(t,"onChange");if(i.length>0){var o=new ka("onChange","change",null,n,r);e.push({event:o,listeners:i})}}var cs=null,us=null;function ds(e){Gs(e,0)}function hs(e){if(Et(_c(e)))return e}function ps(e,t){if("change"===e)return t}var fs=!1;function ms(){cs&&(cs.detachEvent("onpropertychange",gs),cs=null,us=null)}function gs(e){"value"===e.propertyName&&hs(us)&&function(e){var t=[];ls(t,us,e,nr(e)),function(e,t){if(pr)return e(t);pr=!0;try{return cr(e,t)}finally{pr=!1,mr()}}(ds,t)}(e)}function vs(e,t,n){"focusin"===e?(ms(),function(e,t){us=t,(cs=e).attachEvent("onpropertychange",gs)}(t,n)):"focusout"===e&&ms()}function ys(e,t){if("selectionchange"===e||"keyup"===e||"keydown"===e)return hs(us)}function bs(e,t){if("click"===e)return hs(t)}function xs(e,t){if("input"===e||"change"===e)return hs(t)}H&&(fs=function(e){if(!H)return!1;var t="oninput",n=t in document;if(!n){var r=document.createElement("div");r.setAttribute(t,"return;"),n="function"==typeof r[t]}return n}()&&(!document.documentMode||document.documentMode>9));var _s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ws=Object.prototype.hasOwnProperty;function Ss(e,t){if(_s(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!ws.call(t,n[i])||!_s(e[n[i]],t[n[i]]))return!1;return!0}function Es(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ks(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function Ms(e,t){for(var n=Es(e),r=0,i=0;n;){if(n.nodeType===cn){if(i=r+n.textContent.length,r<=t&&i>=t)return{node:n,offset:t-r};r=i}n=Es(ks(n))}}function Ps(e){return e&&e.nodeType===cn}function Ts(e,t){return!(!e||!t)&&(e===t||!Ps(e)&&(Ps(t)?Ts(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Cs(e){return e&&e.ownerDocument&&Ts(e.ownerDocument.documentElement,e)}function As(e){try{return"string"==typeof e.contentWindow.location.href}catch(e){return!1}}function Is(){for(var e=window,t=kt();t instanceof e.HTMLIFrameElement;){if(!As(t))return t;t=kt((e=t.contentWindow).document)}return t}function Rs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Os(e){return("selectionStart"in e?{start:e.selectionStart,end:e.selectionEnd}:function(e){var t=e.ownerDocument,n=t&&t.defaultView||window,r=n.getSelection&&n.getSelection();if(!r||0===r.rangeCount)return null;var i=r.anchorNode,o=r.anchorOffset,a=r.focusNode,s=r.focusOffset;try{i.nodeType,a.nodeType}catch(e){return null}return function(e,t,n,r,i){var o=0,a=-1,s=-1,l=0,c=0,u=e,d=null;e:for(;;){for(var h=null;u!==t||0!==n&&u.nodeType!==cn||(a=o+n),u!==r||0!==i&&u.nodeType!==cn||(s=o+i),u.nodeType===cn&&(o+=u.nodeValue.length),null!==(h=u.firstChild);)d=u,u=h;for(;;){if(u===e)break e;if(d===t&&++l===n&&(a=o),d===r&&++c===i&&(s=o),null!==(h=u.nextSibling))break;d=(u=d).parentNode}u=h}return-1===a||-1===s?null:{start:a,end:s}}(e,i,o,a,s)}(e))||{start:0,end:0}}var Ds=H&&"documentMode"in document&&document.documentMode<=11,Ls=null,js=null,zs=null,Ns=!1;function Bs(e,t,n){var r,i=(r=n).window===r?r.document:r.nodeType===dn?r:r.ownerDocument;if(!Ns&&null!=Ls&&Ls===kt(i)){var o=function(e){if("selectionStart"in e&&Rs(e))return{start:e.selectionStart,end:e.selectionEnd};var t=(e.ownerDocument&&e.ownerDocument.defaultView||window).getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}(Ls);if(!zs||!Ss(zs,o)){zs=o;var a=el(js,"onSelect");if(a.length>0){var s=new ka("onSelect","select",null,t,n);e.push({event:s,listeners:a}),s.target=Ls}}}}function Fs(e,t,n,r,i,o,a){(function(e,t,n,r,i,o,a){var s=Vi.get(t);if(void 0!==s){var l=ka,c=t;switch(t){case"keypress":if(0===va(r))return;case"keydown":case"keyup":l=Ua;break;case"focusin":c="focus",l=Ia;break;case"focusout":c="blur",l=Ia;break;case"beforeblur":case"afterblur":l=Ia;break;case"click":if(2===r.button)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=Ca;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Aa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ha;break;case Ni:case Bi:case Fi:l=Ra;break;case Ui:l=Wa;break;case"scroll":l=Pa;break;case"wheel":l=Ga;break;case"copy":case"cut":case"paste":l=Oa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Va}var u=0!=(o&Qn),d=!u&&"scroll"===t,h=function(e,t,n,r,i){for(var o=r?null!==t?t+"Capture":null:t,a=[],s=e,l=null;null!==s;){var c=s,u=c.stateNode;if(c.tag===f&&null!==u&&(l=u,null!==o)){var d=gr(s,o);null!=d&&a.push(Qs(s,d,l))}if(i)break;s=s.return}return a}(n,s,r.type,u,d);if(h.length>0){var p=new l(s,c,null,r,i);e.push({event:p,listeners:h})}}})(e,t,n,r,i,o),0==(o&tr)&&(function(e,t,n,r,i,o,a){var s="mouseover"===t||"pointerover"===t,l="mouseout"===t||"pointerout"===t;if(s&&0==(o&er)){var c=r.relatedTarget||r.fromElement;if(c&&(bc(c)||yc(c)))return}if(l||s){var u,d,h;if(i.window===i)u=i;else{var p=i.ownerDocument;u=p?p.defaultView||p.parentWindow:window}if(l){var g=r.relatedTarget||r.toElement;d=n,null!==(h=g?bc(g):null)&&(h!==ri(h)||h.tag!==f&&h.tag!==m)&&(h=null)}else d=null,h=n;if(d!==h){var v=Ca,y="onMouseLeave",b="onMouseEnter",x="mouse";"pointerout"!==t&&"pointerover"!==t||(v=Va,y="onPointerLeave",b="onPointerEnter",x="pointer");var _=null==d?u:_c(d),w=null==h?u:_c(h),S=new v(y,x+"leave",d,r,i);S.target=_,S.relatedTarget=w;var E=null;if(bc(i)===n){var k=new v(b,x+"enter",h,r,i);k.target=w,k.relatedTarget=_,E=k}!function(e,t,n,r,i){var o=r&&i?function(e,t){for(var n=e,r=t,i=0,o=n;o;o=tl(o))i++;for(var a=0,s=r;s;s=tl(s))a++;for(;i-a>0;)n=tl(n),i--;for(;a-i>0;)r=tl(r),a--;for(var l=i;l--;){if(n===r||null!==r&&n===r.alternate)return n;n=tl(n),r=tl(r)}return null}(r,i):null;null!==r&&nl(e,t,r,o,!1),null!==i&&null!==n&&nl(e,n,i,o,!0)}(e,S,E,d,h)}}}(e,t,n,r,i,o),function(e,t,n,r,i,o,a){var s,l,c,u,d,h,p=n?_c(n):window;if("select"===(u=(c=p).nodeName&&c.nodeName.toLowerCase())||"input"===u&&"file"===c.type?s=ps:ss(p)?fs?s=xs:(s=ys,l=vs):function(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}(p)&&(s=bs),s){var f=s(t,n);if(f)return void ls(e,f,r,i)}l&&l(t,p,n),"focusout"===t&&(h=(d=p)._wrapperState)&&h.controlled&&"number"===d.type&&jt(d,"number",d.value)}(e,t,n,r,i),function(e,t,n,r,i,o,a){var s=n?_c(n):window;switch(t){case"focusin":(ss(s)||"true"===s.contentEditable)&&(Ls=s,js=n,zs=null);break;case"focusout":Ls=null,js=null,zs=null;break;case"mousedown":Ns=!0;break;case"contextmenu":case"mouseup":case"dragend":Ns=!1,Bs(e,r,i);break;case"selectionchange":if(Ds)break;case"keydown":case"keyup":Bs(e,r,i)}}(e,t,n,r,i),function(e,t,n,r,i,o,a){(function(e,t,n,r,i){var o,a;if(Ka?o=function(e){switch(e){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}(t):is?ts(t,r)&&(o="onCompositionEnd"):function(e,t){return"keydown"===e&&t.keyCode===qa}(t,r)&&(o="onCompositionStart"),!o)return null;Za&&!rs(r)&&(is||"onCompositionStart"!==o?"onCompositionEnd"===o&&is&&(a=ma()):is=function(e){return ha=e,pa=ga(),!0}(i));var s=el(n,o);if(s.length>0){var l=new Da(o,t,null,r,i);if(e.push({event:l,listeners:s}),a)l.data=a;else{var c=ns(r);null!==c&&(l.data=c)}}})(e,t,n,r,i),os(e,t,n,r,i)}(e,t,n,r,i))}Gi(["cancel","cancel","click","click","close","close","contextmenu","contextMenu","copy","copy","cut","cut","auxclick","auxClick","dblclick","doubleClick","dragend","dragEnd","dragstart","dragStart","drop","drop","focusin","focus","focusout","blur","input","input","invalid","invalid","keydown","keyDown","keypress","keyPress","keyup","keyUp","mousedown","mouseDown","mouseup","mouseUp","paste","paste","pause","pause","play","play","pointercancel","pointerCancel","pointerdown","pointerDown","pointerup","pointerUp","ratechange","rateChange","reset","reset","seeked","seeked","submit","submit","touchcancel","touchCancel","touchend","touchEnd","touchstart","touchStart","volumechange","volumeChange"],Ai),Gi(["drag","drag","dragenter","dragEnter","dragexit","dragExit","dragleave","dragLeave","dragover","dragOver","mousemove","mouseMove","mouseout","mouseOut","mouseover","mouseOver","pointermove","pointerMove","pointerout","pointerOut","pointerover","pointerOver","scroll","scroll","toggle","toggle","touchmove","touchMove","wheel","wheel"],Ii),Gi(Wi,Ri),function(e,t){for(var n=0;n<e.length;n++)Hi.set(e[n],t)}(["change","selectionchange","textInput","compositionstart","compositionend","compositionupdate"],Ai),V("onMouseEnter",["mouseout","mouseover"]),V("onMouseLeave",["mouseout","mouseover"]),V("onPointerEnter",["pointerout","pointerover"]),V("onPointerLeave",["pointerout","pointerover"]),U("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"]),U("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"]),U("onBeforeInput",["compositionend","keypress","textInput","paste"]),U("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),U("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),U("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"]);var Us=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],Vs=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(Us));function Hs(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,l){if(Tr.apply(this,arguments),Sr){var c=Ar();kr||(kr=!0,Mr=c)}}(r,t,void 0,e),e.currentTarget=null}function Ws(e,t,n){var r;if(n)for(var i=t.length-1;i>=0;i--){var o=t[i],a=o.instance,s=o.currentTarget,l=o.listener;if(a!==r&&e.isPropagationStopped())return;Hs(e,l,s),r=a}else for(var c=0;c<t.length;c++){var u=t[c],d=u.instance,h=u.currentTarget,p=u.listener;if(d!==r&&e.isPropagationStopped())return;Hs(e,p,h),r=d}}function Gs(e,t){for(var n=0!=(t&Qn),r=0;r<e.length;r++){var i=e[r];Ws(i.event,i.listeners,n)}!function(){if(kr){var e=Mr;throw kr=!1,Mr=null,e}}()}function $s(e,t){var n=Ec(t),r=rl(e,!1);n.has(r)||(Ys(t,e,Jn,!1),n.add(r))}var qs="_reactListening"+Math.random().toString(36).slice(2);function Ks(e){e[qs]||(e[qs]=!0,N.forEach((function(t){Vs.has(t)||Xs(t,!1,e,null),Xs(t,!0,e,null)})))}function Xs(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&n.nodeType!==dn&&(o=n.ownerDocument),null!==r&&!t&&Vs.has(e)){if("scroll"!==e)return;i|=Jn,o=r}var a=Ec(o),s=rl(e,t);a.has(s)||(t&&(i|=Qn),Ys(o,e,i,t),a.add(s))}function Ys(e,t,n,r,i){var o=function(e,t,n){var r,i=function(e){var t=Hi.get(e);return void 0===t?Ri:t}(t);switch(i){case Ai:r=la;break;case Ii:r=ca;break;default:r=ua}return r.bind(null,t,n,e)}(e,t,n),a=void 0;vr&&("touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0)),r?void 0!==a?function(e,t,n,r){e.addEventListener(t,n,{capture:!0,passive:r})}(e,t,o,a):function(e,t,n){e.addEventListener(t,n,!0)}(e,t,o):void 0!==a?function(e,t,n,r){e.addEventListener(t,n,{passive:r})}(e,t,o,a):function(e,t,n){e.addEventListener(t,n,!1)}(e,t,o)}function Zs(e,t){return e===t||e.nodeType===un&&e.parentNode===t}function Js(e,t,n,r,i){var o=r;if(0==(t&Zn)&&0==(t&Jn)){var a=i;if(null!==r){var s=r;e:for(;;){if(null===s)return;var l=s.tag;if(l===h||l===p){var c=s.stateNode.containerInfo;if(Zs(c,a))break;if(l===p)for(var u=s.return;null!==u;){var d=u.tag;if((d===h||d===p)&&Zs(u.stateNode.containerInfo,a))return;u=u.return}for(;null!==c;){var g=bc(c);if(null===g)return;var v=g.tag;if(v===f||v===m){s=o=g;continue e}c=c.parentNode}}s=s.return}}}!function(e,t,n){if(fr)return e();fr=!0;try{return hr(e,t,n)}finally{fr=!1,mr()}}((function(){return function(e,t,n,r,i){var o=[];Fs(o,e,r,n,nr(n),t),Gs(o,t)}(e,t,n,o)}))}function Qs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function el(e,t){for(var n=t+"Capture",r=[],i=e;null!==i;){var o=i,a=o.stateNode;if(o.tag===f&&null!==a){var s=a,l=gr(i,n);null!=l&&r.unshift(Qs(i,l,s));var c=gr(i,t);null!=c&&r.push(Qs(i,c,s))}i=i.return}return r}function tl(e){if(null===e)return null;do{e=e.return}while(e&&e.tag!==f);return e||null}function nl(e,t,n,r,i){for(var o=t._reactName,a=[],s=n;null!==s&&s!==r;){var l=s,c=l.alternate,u=l.stateNode,d=l.tag;if(null!==c&&c===r)break;if(d===f&&null!==u){var h=u;if(i){var p=gr(s,o);null!=p&&a.unshift(Qs(s,p,h))}else if(!i){var m=gr(s,o);null!=m&&a.push(Qs(s,m,h))}}s=s.return}0!==a.length&&e.push({event:t,listeners:a})}function rl(e,t){return e+"__"+(t?"capture":"bubble")}var il,ol,al,sl,ll,cl,ul,dl,hl,pl,fl=!1,ml="dangerouslySetInnerHTML",gl="suppressContentEditableWarning",vl="suppressHydrationWarning",yl="autoFocus",bl="children",xl="style",_l="__html",wl=tn.html;il={dialog:!0,webview:!0},al=function(e,t){(function(e,t){Ln(e,t)||function(e,t){var n=[];for(var r in t)Vn(0,r)||n.push(r);var i=n.map((function(e){return"`"+e+"`"})).join(", ");1===n.length?s("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",i,e):n.length>1&&s("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",i,e)}(e,t)})(e,t),function(e,t){"input"!==e&&"textarea"!==e&&"select"!==e||null==t||null!==t.value||Wn||(Wn=!0,"select"===e&&t.multiple?s("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",e):s("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",e))}(e,t),function(e,t,n){Ln(e,t)||function(e,t,n){var r=[];for(var i in t)Hn(0,i,t[i],n)||r.push(i);var o=r.map((function(e){return"`"+e+"`"})).join(", ");1===r.length?s("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",o,e):r.length>1&&s("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",o,e)}(e,t,n)}(e,t,{registrationNameDependencies:B,possibleRegistrationNames:F})},dl=H&&!document.documentMode;var Sl=/\r\n?/g,El=/\u0000|\uFFFD/g;function kl(e){return e.nodeType===dn?e:e.ownerDocument}function Ml(){}function Pl(e){e.onclick=Ml}function Tl(e,t){sl(e.nodeValue,t)}function Cl(e,t){fl||(fl=!0,s("Did not expect server HTML to contain a <%s> in <%s>.",t.nodeName.toLowerCase(),e.nodeName.toLowerCase()))}function Al(e,t){fl||(fl=!0,s('Did not expect server HTML to contain the text node "%s" in <%s>.',t.nodeValue,e.nodeName.toLowerCase()))}function Il(e,t,n){fl||(fl=!0,s("Expected server HTML to contain a matching <%s> in <%s>.",t,e.nodeName.toLowerCase()))}function Rl(e,t){""!==t&&(fl||(fl=!0,s('Expected server HTML to contain a matching text node for "%s" in <%s>.',t,e.nodeName.toLowerCase())))}hl=function(e){return("string"==typeof e?e:""+e).replace(Sl,"\n").replace(El,"")},sl=function(e,t){if(!fl){var n=hl(t),r=hl(e);r!==n&&(fl=!0,s('Text content did not match. Server: "%s" Client: "%s"',r,n))}},ll=function(e,t,n){if(!fl){var r=hl(n),i=hl(t);i!==r&&(fl=!0,s("Prop `%s` did not match. Server: %s Client: %s",e,JSON.stringify(i),JSON.stringify(r)))}},cl=function(e){if(!fl){fl=!0;var t=[];e.forEach((function(e){t.push(e)})),s("Extra attributes from the server: %s",t)}},ul=function(e,t){!1===t?s("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",e,e,e):s("Expected `%s` listener to be a function, instead got a value of `%s` type.",e,typeof t)},pl=function(e,t){var n=e.namespaceURI===wl?e.ownerDocument.createElement(e.tagName):e.ownerDocument.createElementNS(e.namespaceURI,e.tagName);return n.innerHTML=t,n.innerHTML};var Ol=function(){},Dl=function(){},Ll=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],jl=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],zl=jl.concat(["button"]),Nl=["dd","dt","li","option","optgroup","p","rp","rt"],Bl={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};Dl=function(e,t){var r=n({},e||Bl),i={tag:t};return-1!==jl.indexOf(t)&&(r.aTagInScope=null,r.buttonTagInScope=null,r.nobrTagInScope=null),-1!==zl.indexOf(t)&&(r.pTagInButtonScope=null),-1!==Ll.indexOf(t)&&"address"!==t&&"div"!==t&&"p"!==t&&(r.listItemTagAutoclosing=null,r.dlItemTagAutoclosing=null),r.current=i,"form"===t&&(r.formTag=i),"a"===t&&(r.aTagInScope=i),"button"===t&&(r.buttonTagInScope=i),"nobr"===t&&(r.nobrTagInScope=i),"p"===t&&(r.pTagInButtonScope=i),"li"===t&&(r.listItemTagAutoclosing=i),"dd"!==t&&"dt"!==t||(r.dlItemTagAutoclosing=i),r};var Fl,Ul={};Ol=function(e,t,n){var r=(n=n||Bl).current,i=r&&r.tag;null!=t&&(null!=e&&s("validateDOMNesting: when childText is passed, childTag should be null"),e="#text");var o=function(e,t){switch(t){case"select":return"option"===e||"optgroup"===e||"#text"===e;case"optgroup":return"option"===e||"#text"===e;case"option":return"#text"===e;case"tr":return"th"===e||"td"===e||"style"===e||"script"===e||"template"===e;case"tbody":case"thead":case"tfoot":return"tr"===e||"style"===e||"script"===e||"template"===e;case"colgroup":return"col"===e||"template"===e;case"table":return"caption"===e||"colgroup"===e||"tbody"===e||"tfoot"===e||"thead"===e||"style"===e||"script"===e||"template"===e;case"head":return"base"===e||"basefont"===e||"bgsound"===e||"link"===e||"meta"===e||"title"===e||"noscript"===e||"noframes"===e||"style"===e||"script"===e||"template"===e;case"html":return"head"===e||"body"===e||"frameset"===e;case"frameset":return"frame"===e;case"#document":return"html"===e}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t;case"rp":case"rt":return-1===Nl.indexOf(t);case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==t}return!0}(e,i)?null:r,a=o?null:function(e,t){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t.pTagInButtonScope;case"form":return t.formTag||t.pTagInButtonScope;case"li":return t.listItemTagAutoclosing;case"dd":case"dt":return t.dlItemTagAutoclosing;case"button":return t.buttonTagInScope;case"a":return t.aTagInScope;case"nobr":return t.nobrTagInScope}return null}(e,n),l=o||a;if(l){var c=l.tag,u=!!o+"|"+e+"|"+c;if(!Ul[u]){Ul[u]=!0;var d=e,h="";if("#text"===e?/\S/.test(t)?d="Text nodes":(d="Whitespace text nodes",h=" Make sure you don't have any extra whitespace between tags on each line of your source code."):d="<"+e+">",o){var p="";"table"===c&&"tr"===e&&(p+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),s("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",d,c,h,p)}else s("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",d,c)}}},Fl="suppressHydrationWarning";var Vl="$",Hl="/$",Wl="$?",Gl="$!",$l="style",ql=null,Kl=null;function Xl(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Yl(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Zl="function"==typeof setTimeout?setTimeout:void 0,Jl="function"==typeof clearTimeout?clearTimeout:void 0,Ql=-1;function ec(e){pn(e,"")}function tc(e,t){e.removeChild(t)}function nc(e){var t=e.style;"function"==typeof t.setProperty?t.setProperty("display","none","important"):t.display="none"}function rc(e,t){var n=t[$l],r=null!=n&&n.hasOwnProperty("display")?n.display:null;e.style.display=vn("display",r)}function ic(e){if(e.nodeType===ln)e.textContent="";else if(e.nodeType===dn){var t=e.body;null!=t&&(t.textContent="")}}function oc(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(t===ln||t===cn)break}return e}function ac(e){return oc(e.nextSibling)}function sc(e){return oc(e.firstChild)}function lc(e){for(var t=e.previousSibling,n=0;t;){if(t.nodeType===un){var r=t.data;if(r===Vl||r===Gl||r===Wl){if(0===n)return t;n--}else r===Hl&&n++}t=t.previousSibling}return null}var cc=0;function uc(e){var t="r:"+(cc++).toString(36);return{toString:function(){return e(),t},valueOf:function(){return e(),t}}}var dc=Math.random().toString(36).slice(2),hc="__reactFiber$"+dc,pc="__reactProps$"+dc,fc="__reactContainer$"+dc,mc="__reactEvents$"+dc;function gc(e,t){t[hc]=e}function vc(e){e[fc]=null}function yc(e){return!!e[fc]}function bc(e){var t=e[hc];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fc]||n[hc]){var r=t.alternate;if(null!==t.child||null!==r&&null!==r.child)for(var i=lc(e);null!==i;){var o=i[hc];if(o)return o;i=lc(i)}return t}n=(e=n).parentNode}return null}function xc(e){var t=e[hc]||e[fc];return!t||t.tag!==f&&t.tag!==m&&t.tag!==w&&t.tag!==h?null:t}function _c(e){if(e.tag===f||e.tag===m)return e.stateNode;throw Error("getNodeFromInstance: Invalid argument.")}function wc(e){return e[pc]||null}function Sc(e,t){e[pc]=t}function Ec(e){var t=e[mc];return void 0===t&&(t=e[mc]=new Set),t}var kc={},Mc=o.ReactDebugCurrentFrame;function Pc(e){if(e){var t=e._owner,n=it(e.type,e._source,t?t.type:null);Mc.setExtraStackFrame(n)}else Mc.setExtraStackFrame(null)}function Tc(e,t,n,r,i){var o=Function.call.bind(Object.prototype.hasOwnProperty);for(var a in e)if(o(e,a)){var l=void 0;try{if("function"!=typeof e[a]){var c=Error((r||"React class")+": "+n+" type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[a]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw c.name="Invariant Violation",c}l=e[a](t,a,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){l=e}!l||l instanceof Error||(Pc(i),s("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,a,typeof l),Pc(null)),l instanceof Error&&!(l.message in kc)&&(kc[l.message]=!0,Pc(i),s("Failed %s type: %s",n,l.message),Pc(null))}}var Cc,Ac=[];Cc=[];var Ic,Rc=-1;function Oc(e){return{current:e}}function Dc(e,t){Rc<0?s("Unexpected pop."):(t!==Cc[Rc]&&s("Unexpected Fiber popped."),e.current=Ac[Rc],Ac[Rc]=null,Cc[Rc]=null,Rc--)}function Lc(e,t,n){Rc++,Ac[Rc]=e.current,Cc[Rc]=n,e.current=t}Ic={};var jc={};Object.freeze(jc);var zc=Oc(jc),Nc=Oc(!1),Bc=jc;function Fc(e,t,n){return n&&Wc(t)?Bc:zc.current}function Uc(e,t,n){var r=e.stateNode;r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=n}function Vc(e,t){var n=e.type,r=n.contextTypes;if(!r)return jc;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={};for(var a in r)o[a]=t[a];return Tc(r,o,"context",lt(n)||"Unknown"),i&&Uc(e,t,o),o}function Hc(){return Nc.current}function Wc(e){return null!=e.childContextTypes}function Gc(e){Dc(Nc,e),Dc(zc,e)}function $c(e){Dc(Nc,e),Dc(zc,e)}function qc(e,t,n){if(zc.current!==jc)throw Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");Lc(zc,t,e),Lc(Nc,n,e)}function Kc(e,t,r){var i=e.stateNode,o=t.childContextTypes;if("function"!=typeof i.getChildContext){var a=lt(t)||"Unknown";return Ic[a]||(Ic[a]=!0,s("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",a,a)),r}var l=i.getChildContext();for(var c in l)if(!(c in o))throw Error((lt(t)||"Unknown")+'.getChildContext(): key "'+c+'" is not defined in childContextTypes.');return Tc(o,l,"child context",lt(t)||"Unknown"),n({},r,l)}function Xc(e){var t=e.stateNode,n=t&&t.__reactInternalMemoizedMergedChildContext||jc;return Bc=zc.current,Lc(zc,n,e),Lc(Nc,Nc.current,e),!0}function Yc(e,t,n){var r=e.stateNode;if(!r)throw Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(n){var i=Kc(e,t,Bc);r.__reactInternalMemoizedMergedChildContext=i,Dc(Nc,e),Dc(zc,e),Lc(zc,i,e),Lc(Nc,n,e)}else Dc(Nc,e),Lc(Nc,n,e)}var Zc=0,Jc=1,Qc=2,eu=null,tu=null,nu=!1,ru="undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__,iu=r.unstable_runWithPriority,ou=r.unstable_scheduleCallback,au=r.unstable_cancelCallback,su=r.unstable_shouldYield,lu=r.unstable_requestPaint,cu=r.unstable_now,uu=r.unstable_getCurrentPriorityLevel,du=r.unstable_ImmediatePriority,hu=r.unstable_UserBlockingPriority,pu=r.unstable_NormalPriority,fu=r.unstable_LowPriority,mu=r.unstable_IdlePriority;if(null==i.__interactionsRef||null==i.__interactionsRef.current)throw Error("It is not supported to run the profiling version of a renderer (for example, `react-dom/profiling`) without also replacing the `scheduler/tracing` module with `scheduler/tracing-profiling`. Your bundler might have a setting for aliasing both modules. Learn more at https://reactjs.org/link/profiling");var gu={},vu=99,yu=98,bu=97,xu=96,_u=95,wu=90,Su=su,Eu=void 0!==lu?lu:function(){},ku=null,Mu=null,Pu=!1,Tu=cu(),Cu=Tu<1e4?cu:function(){return cu()-Tu};function Au(){switch(uu()){case du:return vu;case hu:return yu;case pu:return bu;case fu:return xu;case mu:return _u;default:throw Error("Unknown priority level.")}}function Iu(e){switch(e){case vu:return du;case yu:return hu;case bu:return pu;case xu:return fu;case _u:return mu;default:throw Error("Unknown priority level.")}}function Ru(e,t){var n=Iu(e);return iu(n,t)}function Ou(e,t,n){var r=Iu(e);return ou(r,t,n)}function Du(e){e!==gu&&au(e)}function Lu(){if(null!==Mu){var e=Mu;Mu=null,au(e)}ju()}function ju(){if(!Pu&&null!==ku){Pu=!0;var e=0;try{var t=ku;Ru(vu,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ku=null}catch(t){throw null!==ku&&(ku=ku.slice(e+1)),ou(du,Lu),t}finally{Pu=!1}}}var zu="17.0.2",Nu=0,Bu=1,Fu=2,Uu=4,Vu=8,Hu=16,Wu=o.ReactCurrentBatchConfig,Gu=0,$u={recordUnsafeLifecycleWarnings:function(e,t){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(e,t){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}},qu=function(e){var t=[];return e.forEach((function(e){t.push(e)})),t.sort().join(", ")},Ku=[],Xu=[],Yu=[],Zu=[],Ju=[],Qu=[],ed=new Set;$u.recordUnsafeLifecycleWarnings=function(e,t){ed.has(e.type)||("function"==typeof t.componentWillMount&&!0!==t.componentWillMount.__suppressDeprecationWarning&&Ku.push(e),e.mode&Bu&&"function"==typeof t.UNSAFE_componentWillMount&&Xu.push(e),"function"==typeof t.componentWillReceiveProps&&!0!==t.componentWillReceiveProps.__suppressDeprecationWarning&&Yu.push(e),e.mode&Bu&&"function"==typeof t.UNSAFE_componentWillReceiveProps&&Zu.push(e),"function"==typeof t.componentWillUpdate&&!0!==t.componentWillUpdate.__suppressDeprecationWarning&&Ju.push(e),e.mode&Bu&&"function"==typeof t.UNSAFE_componentWillUpdate&&Qu.push(e))},$u.flushPendingUnsafeLifecycleWarnings=function(){var e=new Set;Ku.length>0&&(Ku.forEach((function(t){e.add(lt(t.type)||"Component"),ed.add(t.type)})),Ku=[]);var t=new Set;Xu.length>0&&(Xu.forEach((function(e){t.add(lt(e.type)||"Component"),ed.add(e.type)})),Xu=[]);var n=new Set;Yu.length>0&&(Yu.forEach((function(e){n.add(lt(e.type)||"Component"),ed.add(e.type)})),Yu=[]);var r=new Set;Zu.length>0&&(Zu.forEach((function(e){r.add(lt(e.type)||"Component"),ed.add(e.type)})),Zu=[]);var i=new Set;Ju.length>0&&(Ju.forEach((function(e){i.add(lt(e.type)||"Component"),ed.add(e.type)})),Ju=[]);var o=new Set;Qu.length>0&&(Qu.forEach((function(e){o.add(lt(e.type)||"Component"),ed.add(e.type)})),Qu=[]),t.size>0&&s("Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move code with side effects to componentDidMount, and set initial state in the constructor.\n\nPlease update the following components: %s",qu(t)),r.size>0&&s("Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state\n\nPlease update the following components: %s",qu(r)),o.size>0&&s("Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n\nPlease update the following components: %s",qu(o)),e.size>0&&a("componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move code with side effects to componentDidMount, and set initial state in the constructor.\n* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",qu(e)),n.size>0&&a("componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state\n* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",qu(n)),i.size>0&&a("componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",qu(i))};var td=new Map,nd=new Set;function rd(e,t){if(e&&e.defaultProps){var r=n({},t),i=e.defaultProps;for(var o in i)void 0===r[o]&&(r[o]=i[o]);return r}return t}$u.recordLegacyContextWarning=function(e,t){var n=function(e){for(var t=null,n=e;null!==n;)n.mode&Bu&&(t=n),n=n.return;return t}(e);if(null!==n){if(!nd.has(e.type)){var r=td.get(n);(null!=e.type.contextTypes||null!=e.type.childContextTypes||null!==t&&"function"==typeof t.getChildContext)&&(void 0===r&&(r=[],td.set(n,r)),r.push(e))}}else s("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.")},$u.flushLegacyContextWarning=function(){td.forEach((function(e,t){if(0!==e.length){var n=e[0],r=new Set;e.forEach((function(e){r.add(lt(e.type)||"Component"),nd.add(e.type)}));var i=qu(r);try{mt(n),s("Legacy context API has been detected within a strict-mode tree.\n\nThe old API will be supported in all 16.x releases, but applications using it should migrate to the new version.\n\nPlease update the following components: %s\n\nLearn more about this warning here: https://reactjs.org/link/legacy-context",i)}finally{ft()}}}))},$u.discardPendingWarnings=function(){Ku=[],Xu=[],Yu=[],Zu=[],Ju=[],Qu=[],td=new Map};var id,od=1073741823,ad=Oc(null);id={};var sd=null,ld=null,cd=null,ud=!1;function dd(){sd=null,ld=null,cd=null,ud=!1}function hd(){ud=!0}function pd(){ud=!1}function fd(e,t){var n=e.type._context;Lc(ad,n._currentValue,e),n._currentValue=t,void 0!==n._currentRenderer&&null!==n._currentRenderer&&n._currentRenderer!==id&&s("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),n._currentRenderer=id}function md(e){var t=ad.current;Dc(ad,e),e.type._context._currentValue=t}function gd(e,t){for(var n=e;null!==n;){var r=n.alternate;if(Ko(n.childLanes,t)){if(null===r||Ko(r.childLanes,t))break;r.childLanes=Xo(r.childLanes,t)}else n.childLanes=Xo(n.childLanes,t),null!==r&&(r.childLanes=Xo(r.childLanes,t));n=n.return}}function vd(e,t){sd=e,ld=null,cd=null;var n=e.dependencies;null!==n&&null!==n.firstContext&&(qo(n.lanes,t)&&Pm(),n.firstContext=null)}function yd(e,t){if(ud&&s("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo()."),cd===e);else if(!1===t||0===t);else{var n;"number"!=typeof t||t===od?(cd=e,n=od):n=t;var r={context:e,observedBits:n,next:null};if(null===ld){if(null===sd)throw Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");ld=r,sd.dependencies={lanes:vo,firstContext:r,responders:null}}else ld=ld.next=r}return e._currentValue}var bd,xd,_d=0,wd=1,Sd=2,Ed=3,kd=!1;function Md(e){var t={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null};e.updateQueue=t}function Pd(e,t){var n=t.updateQueue,r=e.updateQueue;if(n===r){var i={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects};t.updateQueue=i}}function Td(e,t){return{eventTime:e,lane:t,tag:_d,payload:null,callback:null,next:null}}function Cd(e,t){var n=e.updateQueue;if(null!==n){var r=n.shared,i=r.pending;null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,xd!==r||bd||(s("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),bd=!0)}}function Ad(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r){var i=r.updateQueue;if(n===i){var o=null,a=null,s=n.firstBaseUpdate;if(null!==s){var l=s;do{var c={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};null===a?o=a=c:(a.next=c,a=c),l=l.next}while(null!==l);null===a?o=a=t:(a.next=t,a=t)}else o=a=t;return n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}}var u=n.lastBaseUpdate;null===u?n.firstBaseUpdate=t:u.next=t,n.lastBaseUpdate=t}function Id(e,t,r,i,o,a){switch(r.tag){case wd:var s=r.payload;if("function"==typeof s){hd();var l=s.call(a,i,o);if(e.mode&Bu){Ke();try{s.call(a,i,o)}finally{Xe()}}return pd(),l}return s;case Ed:e.flags=e.flags&~ei|Wr;case _d:var c,u=r.payload;if("function"==typeof u){if(hd(),c=u.call(a,i,o),e.mode&Bu){Ke();try{u.call(a,i,o)}finally{Xe()}}pd()}else c=u;return null==c?i:n({},i,c);case Sd:return kd=!0,i}return i}function Rd(e,t,n,r){var i=e.updateQueue;kd=!1,xd=i.shared;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;if(null!==u){var d=u.updateQueue,h=d.lastBaseUpdate;h!==a&&(null===h?d.firstBaseUpdate=c:h.next=c,d.lastBaseUpdate=l)}}if(null!==o){for(var p=i.baseState,f=vo,m=null,g=null,v=null,y=o;;){var b=y.lane,x=y.eventTime;if(Ko(r,b)){if(null!==v){var _={eventTime:x,lane:yo,tag:y.tag,payload:y.payload,callback:y.callback,next:null};v=v.next=_}if(p=Id(e,0,y,p,t,n),null!==y.callback){e.flags|=Hr;var w=i.effects;null===w?i.effects=[y]:w.push(y)}}else{var S={eventTime:x,lane:b,tag:y.tag,payload:y.payload,callback:y.callback,next:null};null===v?(g=v=S,m=p):v=v.next=S,f=Xo(f,b)}if(null===(y=y.next)){if(null===(s=i.shared.pending))break;var E=s,k=E.next;E.next=null,y=k,i.lastBaseUpdate=E,i.shared.pending=null}}null===v&&(m=p),i.baseState=m,i.firstBaseUpdate=g,i.lastBaseUpdate=v,Nv(f),e.lanes=f,e.memoizedState=p}xd=null}function Od(e,t){if("function"!=typeof e)throw Error("Invalid argument passed as callback. Expected a function. Instead received: "+e);e.call(t)}function Dd(){kd=!1}function Ld(){return kd}function jd(e,t,n){var r=t.effects;if(t.effects=null,null!==r)for(var i=0;i<r.length;i++){var o=r[i],a=o.callback;null!==a&&(o.callback=null,Od(a,n))}}bd=!1,xd=null;var zd,Nd,Bd,Fd,Ud,Vd,Hd,Wd,Gd,$d,qd={},Kd=Array.isArray,Xd=(new t.Component).refs;zd=new Set,Nd=new Set,Bd=new Set,Fd=new Set,Wd=new Set,Ud=new Set,Gd=new Set,$d=new Set;var Yd=new Set;function Zd(e,t,r,i){var o=e.memoizedState;if(e.mode&Bu){Ke();try{r(i,o)}finally{Xe()}}var a=r(i,o);Vd(t,a);var s=null==a?o:n({},o,a);e.memoizedState=s,e.lanes===vo&&(e.updateQueue.baseState=s)}Hd=function(e,t){if(null!==e&&"function"!=typeof e){var n=t+"_"+e;Yd.has(n)||(Yd.add(n),s("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,e))}},Vd=function(e,t){if(void 0===t){var n=lt(e)||"Component";Ud.has(n)||(Ud.add(n),s("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",n))}},Object.defineProperty(qd,"_processChildContext",{enumerable:!1,value:function(){throw Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(qd);var Jd,Qd,eh,th,nh,rh={isMounted:function(e){var t=ni.current;if(null!==t&&t.tag===u){var n=t,r=n.stateNode;r._warnedAboutRefsInRender||s("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",lt(n.type)||"A component"),r._warnedAboutRefsInRender=!0}var i=Ir(e);return!!i&&ri(i)===i},enqueueSetState:function(e,t,n){var r=Ir(e),i=bv(),o=xv(r),a=Td(i,o);a.payload=t,null!=n&&(Hd(n,"setState"),a.callback=n),Cd(r,a),_v(r,o,i)},enqueueReplaceState:function(e,t,n){var r=Ir(e),i=bv(),o=xv(r),a=Td(i,o);a.tag=wd,a.payload=t,null!=n&&(Hd(n,"replaceState"),a.callback=n),Cd(r,a),_v(r,o,i)},enqueueForceUpdate:function(e,t){var n=Ir(e),r=bv(),i=xv(n),o=Td(r,i);o.tag=Sd,null!=t&&(Hd(t,"forceUpdate"),o.callback=t),Cd(n,o),_v(n,i,r)}};function ih(e,t,n,r,i,o,a){var l=e.stateNode;if("function"==typeof l.shouldComponentUpdate){if(e.mode&Bu){Ke();try{l.shouldComponentUpdate(r,o,a)}finally{Xe()}}var c=l.shouldComponentUpdate(r,o,a);return void 0===c&&s("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",lt(t)||"Component"),c}return!(t.prototype&&t.prototype.isPureReactComponent&&Ss(n,r)&&Ss(i,o))}function oh(e,t){var n;t.updater=rh,e.stateNode=t,n=e,t._reactInternals=n,t._reactInternalInstance=qd}function ah(e,t,n){var r=!1,i=jc,o=jc,a=t.contextType;if("contextType"in t&&null!==a&&(void 0===a||a.$$typeof!==Ee||void 0!==a._context)&&!$d.has(t)){$d.add(t);var l;l=void 0===a?" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":"object"!=typeof a?" However, it is set to a "+typeof a+".":a.$$typeof===Se?" Did you accidentally pass the Context.Provider instead?":void 0!==a._context?" Did you accidentally pass the Context.Consumer instead?":" However, it is set to an object with keys {"+Object.keys(a).join(", ")+"}.",s("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",lt(t)||"Component",l)}"object"==typeof a&&null!==a?o=yd(a):(i=Fc(0,t,!0),o=(r=null!=t.contextTypes)?Vc(e,i):jc);if(e.mode&Bu){Ke();try{new t(n,o)}finally{Xe()}}var c=new t(n,o),u=e.memoizedState=null!==c.state&&void 0!==c.state?c.state:null;if(oh(e,c),"function"==typeof t.getDerivedStateFromProps&&null===u){var d=lt(t)||"Component";Nd.has(d)||(Nd.add(d),s("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",d,null===c.state?"null":"undefined",d))}if("function"==typeof t.getDerivedStateFromProps||"function"==typeof c.getSnapshotBeforeUpdate){var h=null,p=null,f=null;if("function"==typeof c.componentWillMount&&!0!==c.componentWillMount.__suppressDeprecationWarning?h="componentWillMount":"function"==typeof c.UNSAFE_componentWillMount&&(h="UNSAFE_componentWillMount"),"function"==typeof c.componentWillReceiveProps&&!0!==c.componentWillReceiveProps.__suppressDeprecationWarning?p="componentWillReceiveProps":"function"==typeof c.UNSAFE_componentWillReceiveProps&&(p="UNSAFE_componentWillReceiveProps"),"function"==typeof c.componentWillUpdate&&!0!==c.componentWillUpdate.__suppressDeprecationWarning?f="componentWillUpdate":"function"==typeof c.UNSAFE_componentWillUpdate&&(f="UNSAFE_componentWillUpdate"),null!==h||null!==p||null!==f){var m=lt(t)||"Component",g="function"==typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";Fd.has(m)||(Fd.add(m),s("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n%s uses %s but also contains the following legacy lifecycles:%s%s%s\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://reactjs.org/link/unsafe-component-lifecycles",m,g,null!==h?"\n  "+h:"",null!==p?"\n  "+p:"",null!==f?"\n  "+f:""))}}return r&&Uc(e,i,o),c}function sh(e,t,n,r){var i=t.state;if("function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==i){var o=lt(e.type)||"Component";zd.has(o)||(zd.add(o),s("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",o)),rh.enqueueReplaceState(t,t.state,null)}}function lh(e,t,n,r){!function(e,t,n){var r=e.stateNode,i=lt(t)||"Component";r.render||(t.prototype&&"function"==typeof t.prototype.render?s("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",i):s("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",i)),!r.getInitialState||r.getInitialState.isReactClassApproved||r.state||s("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",i),r.getDefaultProps&&!r.getDefaultProps.isReactClassApproved&&s("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",i),r.propTypes&&s("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",i),r.contextType&&s("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",i),r.contextTypes&&s("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",i),t.contextType&&t.contextTypes&&!Gd.has(t)&&(Gd.add(t),s("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",i)),"function"==typeof r.componentShouldUpdate&&s("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",i),t.prototype&&t.prototype.isPureReactComponent&&void 0!==r.shouldComponentUpdate&&s("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",lt(t)||"A pure component"),"function"==typeof r.componentDidUnmount&&s("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",i),"function"==typeof r.componentDidReceiveProps&&s("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",i),"function"==typeof r.componentWillRecieveProps&&s("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",i),"function"==typeof r.UNSAFE_componentWillRecieveProps&&s("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",i);var o=r.props!==n;void 0!==r.props&&o&&s("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",i,i),r.defaultProps&&s("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",i,i),"function"!=typeof r.getSnapshotBeforeUpdate||"function"==typeof r.componentDidUpdate||Bd.has(t)||(Bd.add(t),s("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",lt(t))),"function"==typeof r.getDerivedStateFromProps&&s("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",i),"function"==typeof r.getDerivedStateFromError&&s("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",i),"function"==typeof t.getSnapshotBeforeUpdate&&s("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",i);var a=r.state;a&&("object"!=typeof a||Kd(a))&&s("%s.state: must be set to an object or null",i),"function"==typeof r.getChildContext&&"object"!=typeof t.childContextTypes&&s("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",i)}(e,t,n);var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Xd,Md(e);var o=t.contextType;if("object"==typeof o&&null!==o)i.context=yd(o);else{var a=Fc(0,t,!0);i.context=Vc(e,a)}if(i.state===n){var l=lt(t)||"Component";Wd.has(l)||(Wd.add(l),s("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",l))}e.mode&Bu&&$u.recordLegacyContextWarning(e,i),$u.recordUnsafeLifecycleWarnings(e,i),Rd(e,n,i,r),i.state=e.memoizedState;var c=t.getDerivedStateFromProps;"function"==typeof c&&(Zd(e,t,c,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(function(e,t){var n=t.state;"function"==typeof t.componentWillMount&&t.componentWillMount(),"function"==typeof t.UNSAFE_componentWillMount&&t.UNSAFE_componentWillMount(),n!==t.state&&(s("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",lt(e.type)||"Component"),rh.enqueueReplaceState(t,t.state,null))}(e,i),Rd(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=Br)}var ch=function(e,t){};Jd=!1,Qd=!1,eh={},th={},nh={},ch=function(e,t){if(null!==e&&"object"==typeof e&&e._store&&!e._store.validated&&null==e.key){if("object"!=typeof e._store)throw Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");e._store.validated=!0;var n=lt(t.type)||"Component";th[n]||(th[n]=!0,s('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};var uh=Array.isArray;function dh(e,t,n){var r=n.ref;if(null!==r&&"function"!=typeof r&&"object"!=typeof r){if((e.mode&Bu||z)&&(!n._owner||!n._self||n._owner.stateNode===n._self)){var i=lt(e.type)||"Component";eh[i]||(s('A string ref, "%s", has been found within a strict mode tree. String refs are a source of potential bugs and should be avoided. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',r),eh[i]=!0)}if(n._owner){var o,a=n._owner;if(a){var l=a;if(l.tag!==u)throw Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");o=l.stateNode}if(!o)throw Error("Missing owner for string ref "+r+". This error is likely caused by a bug in React. Please file an issue.");var c=""+r;if(null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===c)return t.ref;var d=function(e){var t=o.refs;t===Xd&&(t=o.refs={}),null===e?delete t[c]:t[c]=e};return d._stringRef=c,d}if("string"!=typeof r)throw Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!n._owner)throw Error("Element ref was specified as a string ("+r+") but no owner was set. This could happen for one of the following reasons:\n1. You may be adding a ref to a function component\n2. You may be adding a ref to a component that was not created inside a component's render method\n3. You have multiple copies of React loaded\nSee https://reactjs.org/link/refs-must-have-owner for more information.")}return r}function hh(e,t){if("textarea"!==e.type)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}function ph(e){var t=lt(e.type)||"Component";nh[t]||(nh[t]=!0,s("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it."))}function fh(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=Ur}}function n(n,r){if(!e)return null;for(var i=r;null!==i;)t(n,i),i=i.sibling;return null}function r(e,t){for(var n=new Map,r=t;null!==r;)null!==r.key?n.set(r.key,r):n.set(r.index,r),r=r.sibling;return n}function i(e,t){var n=Wy(e,t);return n.index=0,n.sibling=null,n}function o(t,n,r){if(t.index=r,!e)return n;var i=t.alternate;if(null!==i){var o=i.index;return o<n?(t.flags=Nr,n):o}return t.flags=Nr,n}function a(t){return e&&null===t.alternate&&(t.flags=Nr),t}function l(e,t,n,r){if(null===t||t.tag!==m){var o=Yy(n,e.mode,r);return o.return=e,o}var a=i(t,n);return a.return=e,a}function d(e,t,n,r){if(null!==t&&(t.elementType===n.type||Ry(t,n))){var o=i(t,n.props);return o.ref=dh(e,t,n),o.return=e,o._debugSource=n._source,o._debugOwner=n._owner,o}var a=qy(n,e.mode,r);return a.ref=dh(e,t,n),a.return=e,a}function h(e,t,n,r){if(null===t||t.tag!==p||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation){var o=Zy(n,e.mode,r);return o.return=e,o}var a=i(t,n.children||[]);return a.return=e,a}function f(e,t,n,r,o){if(null===t||t.tag!==g){var a=Ky(n,e.mode,r,o);return a.return=e,a}var s=i(t,n);return s.return=e,s}function v(e,t,n){if("string"==typeof t||"number"==typeof t){var r=Yy(""+t,e.mode,n);return r.return=e,r}if("object"==typeof t&&null!==t){switch(t.$$typeof){case ye:var i=qy(t,e.mode,n);return i.ref=dh(e,null,t),i.return=e,i;case be:var o=Zy(t,e.mode,n);return o.return=e,o}if(uh(t)||Ne(t)){var a=Ky(t,e.mode,n,null);return a.return=e,a}hh(e,t)}return"function"==typeof t&&ph(e),null}function y(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ye:return n.key===i?n.type===xe?f(e,t,n.props.children,r,i):d(e,t,n,r):null;case be:return n.key===i?h(e,t,n,r):null}if(uh(n)||Ne(n))return null!==i?null:f(e,t,n,r,null);hh(e,n)}return"function"==typeof n&&ph(e),null}function b(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ye:var o=e.get(null===r.key?n:r.key)||null;return r.type===xe?f(t,o,r.props.children,i,r.key):d(t,o,r,i);case be:return h(t,e.get(null===r.key?n:r.key)||null,r,i)}if(uh(r)||Ne(r))return f(t,e.get(n)||null,r,i,null);hh(t,r)}return"function"==typeof r&&ph(t),null}function _(e,t,n){if("object"!=typeof e||null===e)return t;switch(e.$$typeof){case ye:case be:ch(e,n);var r=e.key;if("string"!=typeof r)break;if(null===t){(t=new Set).add(r);break}if(!t.has(r)){t.add(r);break}s("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted  the behavior is unsupported and could change in a future version.",r)}return t}return function(l,d,h,f){var w="object"==typeof h&&null!==h&&h.type===xe&&null===h.key;w&&(h=h.props.children);var S="object"==typeof h&&null!==h;if(S)switch(h.$$typeof){case ye:return a(function(e,r,o,a){for(var s=o.key,l=r;null!==l;){if(l.key===s){if(l.tag===g){if(o.type===xe){n(e,l.sibling);var c=i(l,o.props.children);return c.return=e,c._debugSource=o._source,c._debugOwner=o._owner,c}}else if(l.elementType===o.type||Ry(l,o)){n(e,l.sibling);var u=i(l,o.props);return u.ref=dh(e,l,o),u.return=e,u._debugSource=o._source,u._debugOwner=o._owner,u}n(e,l);break}t(e,l),l=l.sibling}if(o.type===xe){var d=Ky(o.props.children,e.mode,a,o.key);return d.return=e,d}var h=qy(o,e.mode,a);return h.ref=dh(e,r,o),h.return=e,h}(l,d,h,f));case be:return a(function(e,r,o,a){for(var s=o.key,l=r;null!==l;){if(l.key===s){if(l.tag===p&&l.stateNode.containerInfo===o.containerInfo&&l.stateNode.implementation===o.implementation){n(e,l.sibling);var c=i(l,o.children||[]);return c.return=e,c}n(e,l);break}t(e,l),l=l.sibling}var u=Zy(o,e.mode,a);return u.return=e,u}(l,d,h,f))}if("string"==typeof h||"number"==typeof h)return a(function(e,t,r,o){if(null!==t&&t.tag===m){n(e,t.sibling);var a=i(t,r);return a.return=e,a}n(e,t);var s=Yy(r,e.mode,o);return s.return=e,s}(l,d,""+h,f));if(uh(h))return function(i,a,s,l){for(var c=null,u=0;u<s.length;u++)c=_(s[u],c,i);for(var d=null,h=null,p=a,f=0,m=0,g=null;null!==p&&m<s.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var x=y(i,p,s[m],l);if(null===x){null===p&&(p=g);break}e&&p&&null===x.alternate&&t(i,p),f=o(x,f,m),null===h?d=x:h.sibling=x,h=x,p=g}if(m===s.length)return n(i,p),d;if(null===p){for(;m<s.length;m++){var w=v(i,s[m],l);null!==w&&(f=o(w,f,m),null===h?d=w:h.sibling=w,h=w)}return d}for(var S=r(0,p);m<s.length;m++){var E=b(S,i,m,s[m],l);null!==E&&(e&&null!==E.alternate&&S.delete(null===E.key?m:E.key),f=o(E,f,m),null===h?d=E:h.sibling=E,h=E)}return e&&S.forEach((function(e){return t(i,e)})),d}(l,d,h,f);if(Ne(h))return function(i,a,l,c){var u=Ne(l);if("function"!=typeof u)throw Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");"function"==typeof Symbol&&"Generator"===l[Symbol.toStringTag]&&(Qd||s("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),Qd=!0),l.entries===u&&(Jd||s("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Jd=!0);var d=u.call(l);if(d)for(var h=null,p=d.next();!p.done;p=d.next())h=_(p.value,h,i);var f=u.call(l);if(null==f)throw Error("An iterable object provided no iterator.");for(var m=null,g=null,x=a,w=0,S=0,E=null,k=f.next();null!==x&&!k.done;S++,k=f.next()){x.index>S?(E=x,x=null):E=x.sibling;var M=y(i,x,k.value,c);if(null===M){null===x&&(x=E);break}e&&x&&null===M.alternate&&t(i,x),w=o(M,w,S),null===g?m=M:g.sibling=M,g=M,x=E}if(k.done)return n(i,x),m;if(null===x){for(;!k.done;S++,k=f.next()){var P=v(i,k.value,c);null!==P&&(w=o(P,w,S),null===g?m=P:g.sibling=P,g=P)}return m}for(var T=r(0,x);!k.done;S++,k=f.next()){var C=b(T,i,S,k.value,c);null!==C&&(e&&null!==C.alternate&&T.delete(null===C.key?S:C.key),w=o(C,w,S),null===g?m=C:g.sibling=C,g=C)}return e&&T.forEach((function(e){return t(i,e)})),m}(l,d,h,f);if(S&&hh(l,h),"function"==typeof h&&ph(l),void 0===h&&!w)switch(l.tag){case u:if(l.stateNode.render._isMockFunction)break;case I:case c:case x:case E:throw Error((lt(l.type)||"Component")+"(...): Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.")}return n(l,d)}}var mh=fh(!0),gh=fh(!1);function vh(e,t){for(var n=e.child;null!==n;)Gy(n,t),n=n.sibling}var yh={},bh=Oc(yh),xh=Oc(yh),_h=Oc(yh);function wh(e){if(e===yh)throw Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return e}function Sh(){return wh(_h.current)}function Eh(e,t){Lc(_h,t,e),Lc(xh,e,e),Lc(bh,yh,e);var n=function(e){var t,n,r=e.nodeType;switch(r){case dn:case hn:t=r===dn?"#document":"#fragment";var i=e.documentElement;n=i?i.namespaceURI:rn(null,"");break;default:var o=r===un?e.parentNode:e;n=rn(o.namespaceURI||null,t=o.tagName)}var a=t.toLowerCase();return{namespace:n,ancestorInfo:Dl(null,a)}}(t);Dc(bh,e),Lc(bh,n,e)}function kh(e){Dc(bh,e),Dc(xh,e),Dc(_h,e)}function Mh(){return wh(bh.current)}function Ph(e){wh(_h.current);var t,n,r,i=wh(bh.current),o=(t=i,n=e.type,{namespace:rn((r=t).namespace,n),ancestorInfo:Dl(r.ancestorInfo,n)});i!==o&&(Lc(xh,e,e),Lc(bh,o,e))}function Th(e){xh.current===e&&(Dc(bh,e),Dc(xh,e))}var Ch=1,Ah=1,Ih=2,Rh=Oc(0);function Oh(e,t){return 0!=(e&t)}function Dh(e){return e&Ch}function Lh(e,t){return e&Ch|t}function jh(e,t){Lc(Rh,t,e)}function zh(e){Dc(Rh,e)}function Nh(e,t){var n=e.memoizedState;if(null!==n)return null!==n.dehydrated;var r=e.memoizedProps;return void 0!==r.fallback&&(!0!==r.unstable_avoidThisFallback||!t)}function Bh(e){for(var t=e;null!==t;){if(t.tag===w){var n=t.memoizedState;if(null!==n){var r=n.dehydrated;if(null===r||r.data===Wl||r.data===Gl)return t}}else if(t.tag===T&&void 0!==t.memoizedProps.revealOrder){if((t.flags&Wr)!==jr)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)return null;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fh=0,Uh=1,Vh=2,Hh=4,Wh=null,Gh=null,$h=!1;function qh(e,t){switch(e.tag){case h:!function(e,t){t.nodeType===ln?Cl(e,t):t.nodeType===un||Al(e,t)}(e.stateNode.containerInfo,t);break;case f:!function(e,t,n,r){!0!==t[Fl]&&(r.nodeType===ln?Cl(n,r):r.nodeType===un||Al(n,r))}(e.type,e.memoizedProps,e.stateNode,t)}var n,r=((n=Vy(f,null,null,Nu)).elementType="DELETED",n.type="DELETED",n);r.stateNode=t,r.return=e,r.flags=Ur,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Kh(e,t){switch(t.flags=t.flags&~Xr|Nr,e.tag){case h:var n=e.stateNode.containerInfo;switch(t.tag){case f:var r=t.type;t.pendingProps,function(e,t,n){Il(e,t)}(n,r);break;case m:!function(e,t){Rl(e,t)}(n,t.pendingProps)}break;case f:e.type;var i=e.memoizedProps,o=e.stateNode;switch(t.tag){case f:var a=t.type;t.pendingProps,function(e,t,n,r,i){!0!==t[Fl]&&Il(n,r)}(0,i,o,a);break;case m:!function(e,t,n,r){!0!==t[Fl]&&Rl(n,r)}(0,i,o,t.pendingProps);break;case w:!function(e,t,n){t[Fl]}(0,i)}break;default:return}}function Xh(e,t){switch(e.tag){case f:var n=e.type,r=(e.pendingProps,function(e,t,n){return e.nodeType!==ln||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e}(t,n));return null!==r&&(e.stateNode=r,!0);case m:var i=function(e,t){return""===t||e.nodeType!==cn?null:e}(t,e.pendingProps);return null!==i&&(e.stateNode=i,!0);default:return!1}}function Yh(e){if($h){var t=Gh;if(!t)return Kh(Wh,e),$h=!1,void(Wh=e);var n=t;if(!Xh(e,t)){if(!(t=ac(n))||!Xh(e,t))return Kh(Wh,e),$h=!1,void(Wh=e);qh(Wh,n)}Wh=e,Gh=sc(t)}}function Zh(e){for(var t=e.return;null!==t&&t.tag!==f&&t.tag!==h&&t.tag!==w;)t=t.return;Wh=t}function Jh(e){if(e!==Wh)return!1;if(!$h)return Zh(e),$h=!0,!1;var t=e.type;if(e.tag!==f||"head"!==t&&"body"!==t&&!Yl(t,e.memoizedProps))for(var n=Gh;n;)qh(e,n),n=ac(n);return Zh(e),Gh=e.tag===w?function(e){var t=e.memoizedState,n=null!==t?t.dehydrated:null;if(!n)throw Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return function(e){for(var t=e.nextSibling,n=0;t;){if(t.nodeType===un){var r=t.data;if(r===Hl){if(0===n)return ac(t);n--}else r!==Vl&&r!==Gl&&r!==Wl||n++}t=t.nextSibling}return null}(n)}(e):Wh?ac(e.stateNode):null,!0}function Qh(){Wh=null,Gh=null,$h=!1}function ep(){return $h}var tp,np=[];function rp(){for(var e=0;e<np.length;e++)np[e]._workInProgressVersionPrimary=null;np.length=0}function ip(e,t){e._workInProgressVersionPrimary=t,np.push(e)}tp={};var op,ap,sp=o.ReactCurrentDispatcher,lp=o.ReactCurrentBatchConfig;ap={},op=new Set;var cp=vo,up=null,dp=null,hp=null,pp=!1,fp=!1,mp=25,gp=null,vp=null,yp=-1,bp=!1;function xp(){var e=gp;null===vp?vp=[e]:vp.push(e)}function _p(){var e=gp;null!==vp&&(yp++,vp[yp]!==e&&function(e){var t=lt(up.type);if(!op.has(t)&&(op.add(t),null!==vp)){for(var n="",r=0;r<=yp;r++){for(var i=vp[r],o=r===yp?e:i,a=r+1+". "+i;a.length<30;)a+=" ";n+=a+=o+"\n"}s("React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks\n\n   Previous render            Next render\n   ------------------------------------------------------\n%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n",t,n)}}(e))}function wp(e){null==e||Array.isArray(e)||s("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",gp,typeof e)}function Sp(){throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.")}function Ep(e,t){if(bp)return!1;if(null===t)return s("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",gp),!1;e.length!==t.length&&s("The final argument passed to %s changed size between renders. The order and size of this array must remain constant.\n\nPrevious: %s\nIncoming: %s",gp,"["+t.join(", ")+"]","["+e.join(", ")+"]");for(var n=0;n<t.length&&n<e.length;n++)if(!_s(e[n],t[n]))return!1;return!0}function kp(e,t,n,r,i,o){cp=o,up=t,vp=null!==e?e._debugHookTypes:null,yp=-1,bp=null!==e&&e.type!==t.type,t.memoizedState=null,t.updateQueue=null,t.lanes=vo,null!==e&&null!==e.memoizedState?sp.current=kf:sp.current=null!==vp?Ef:Sf;var a=n(r,i);if(fp){var s=0;do{if(fp=!1,!(s<mp))throw Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");s+=1,bp=!1,dp=null,hp=null,t.updateQueue=null,yp=-1,sp.current=Mf,a=n(r,i)}while(fp)}sp.current=wf,t._debugHookTypes=vp;var l=null!==dp&&null!==dp.next;if(cp=vo,up=null,dp=null,hp=null,gp=null,vp=null,yp=-1,pp=!1,l)throw Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return a}function Mp(e,t,n){t.updateQueue=e.updateQueue,t.flags&=~(qr|Br),e.lanes=Yo(e.lanes,n)}function Pp(){if(sp.current=wf,pp){for(var e=up.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}pp=!1}cp=vo,up=null,dp=null,hp=null,vp=null,yp=-1,gp=null,gf=!1,fp=!1}function Tp(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===hp?up.memoizedState=hp=e:hp=hp.next=e,hp}function Cp(){var e,t;if(null===dp){var n=up.alternate;e=null!==n?n.memoizedState:null}else e=dp.next;if(null!==(t=null===hp?up.memoizedState:hp.next))t=(hp=t).next,dp=e;else{if(null===e)throw Error("Rendered more hooks than during the previous render.");var r={memoizedState:(dp=e).memoizedState,baseState:dp.baseState,baseQueue:dp.baseQueue,queue:dp.queue,next:null};null===hp?up.memoizedState=hp=r:hp=hp.next=r}return hp}function Ap(e,t){return"function"==typeof t?t(e):t}function Ip(e,t,n){var r,i=Tp();r=void 0!==n?n(t):t,i.memoizedState=i.baseState=r;var o=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},a=o.dispatch=_f.bind(null,up,o);return[i.memoizedState,a]}function Rp(e,t,n){var r=Cp(),i=r.queue;if(null===i)throw Error("Should have a queue. This is likely a bug in React. Please file an issue.");i.lastRenderedReducer=e;var o=dp,a=o.baseQueue,l=i.pending;if(null!==l){if(null!==a){var c=a.next,u=l.next;a.next=u,l.next=c}o.baseQueue!==a&&s("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),o.baseQueue=a=l,i.pending=null}if(null!==a){var d=a.next,h=o.baseState,p=null,f=null,m=null,g=d;do{var v=g.lane;if(Ko(cp,v)){if(null!==m){var y={lane:yo,action:g.action,eagerReducer:g.eagerReducer,eagerState:g.eagerState,next:null};m=m.next=y}h=g.eagerReducer===e?g.eagerState:e(h,g.action)}else{var b={lane:v,action:g.action,eagerReducer:g.eagerReducer,eagerState:g.eagerState,next:null};null===m?(f=m=b,p=h):m=m.next=b,up.lanes=Xo(up.lanes,v),Nv(v)}g=g.next}while(null!==g&&g!==d);null===m?p=h:m.next=f,_s(h,r.memoizedState)||Pm(),r.memoizedState=h,r.baseState=p,r.baseQueue=m,i.lastRenderedState=h}var x=i.dispatch;return[r.memoizedState,x]}function Op(e,t,n){var r=Cp(),i=r.queue;if(null===i)throw Error("Should have a queue. This is likely a bug in React. Please file an issue.");i.lastRenderedReducer=e;var o=i.dispatch,a=i.pending,s=r.memoizedState;if(null!==a){i.pending=null;var l=a.next,c=l;do{s=e(s,c.action),c=c.next}while(c!==l);_s(s,r.memoizedState)||Pm(),r.memoizedState=s,null===r.baseQueue&&(r.baseState=s),i.lastRenderedState=s}return[s,o]}function Dp(e,t,n){var r;null==(r=t)._currentPrimaryRenderer?r._currentPrimaryRenderer=tp:r._currentPrimaryRenderer!==tp&&s("Detected multiple renderers concurrently rendering the same mutable source. This is currently unsupported.");var i=(0,t._getVersion)(t._source),o=!1,a=function(e){return e._workInProgressVersionPrimary}(t);if(null!==a?o=a===i:(o=Ko(cp,e.mutableReadLanes))&&ip(t,i),o){var l=n(t._source);return"function"==typeof l&&s("Mutable source should not return a function as the snapshot value. Functions may close over mutable values and cause tearing."),l}throw function(e){np.push(e)}(t),Error("Cannot read from mutable source during the current render without tearing. This is a bug in React. Please file an issue.")}function Lp(e,t,n,r){var i=Rg;if(null===i)throw Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");var o=t._getVersion,a=o(t._source),l=sp.current,c=l.useState((function(){return Dp(i,t,n)})),u=c[0],d=c[1],h=u,p=hp,f=e.memoizedState,m=f.refs,g=m.getSnapshot,v=f.source,y=f.subscribe,b=up;if(e.memoizedState={refs:m,source:t,subscribe:r},l.useEffect((function(){m.getSnapshot=n,m.setSnapshot=d;var e=o(t._source);if(!_s(a,e)){var r=n(t._source);if("function"==typeof r&&s("Mutable source should not return a function as the snapshot value. Functions may close over mutable values and cause tearing."),!_s(h,r)){d(r);var l=xv(b);ea(i,l)}!function(e,t){e.entangledLanes|=t;for(var n=e.entanglements,r=t;r>0;){var i=$o(r),o=1<<i;n[i]|=t,r&=~o}}(i,i.mutableReadLanes)}}),[n,t,r]),l.useEffect((function(){var e=r(t._source,(function(){var e=m.getSnapshot,n=m.setSnapshot;try{n(e(t._source));var r=xv(b);ea(i,r)}catch(e){n((function(){throw e}))}}));return"function"!=typeof e&&s("Mutable source subscribe function must return an unsubscribe function."),e}),[t,r]),!_s(g,n)||!_s(v,t)||!_s(y,r)){var x={pending:null,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:h};x.dispatch=d=_f.bind(null,up,x),p.queue=x,p.baseQueue=null,h=Dp(i,t,n),p.memoizedState=p.baseState=h}return h}function jp(e,t,n){var r=Tp();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Lp(r,e,t,n)}function zp(e,t,n){return Lp(Cp(),e,t,n)}function Np(e){var t=Tp();"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e;var n=t.queue={pending:null,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:e},r=n.dispatch=_f.bind(null,up,n);return[t.memoizedState,r]}function Bp(e){return Rp(Ap)}function Fp(e){return Op(Ap)}function Up(e,t,n,r){var i={tag:e,create:t,destroy:n,deps:r,next:null},o=up.updateQueue;if(null===o)o={lastEffect:null},up.updateQueue=o,o.lastEffect=i.next=i;else{var a=o.lastEffect;if(null===a)o.lastEffect=i.next=i;else{var s=a.next;a.next=i,i.next=s,o.lastEffect=i}}return i}function Vp(e){var t=Tp(),n={current:e};return Object.seal(n),t.memoizedState=n,n}function Hp(e){return Cp().memoizedState}function Wp(e,t,n,r){var i=Tp(),o=void 0===r?null:r;up.flags|=e,i.memoizedState=Up(Uh|t,n,void 0,o)}function Gp(e,t,n,r){var i=Cp(),o=void 0===r?null:r,a=void 0;if(null!==dp){var s=dp.memoizedState;if(a=s.destroy,null!==o&&Ep(o,s.deps))return void Up(t,n,a,o)}up.flags|=e,i.memoizedState=Up(Uh|t,n,a,o)}function $p(e,t){return"undefined"!=typeof jest&&my(up),Wp(Br|qr,Hh,e,t)}function qp(e,t){return"undefined"!=typeof jest&&my(up),Gp(Br|qr,Hh,e,t)}function Kp(e,t){return Wp(Br,Vh,e,t)}function Xp(e,t){return Gp(Br,Vh,e,t)}function Yp(e,t){if("function"==typeof t){var n=t,r=e();return n(r),function(){n(null)}}if(null!=t){var i=t;i.hasOwnProperty("current")||s("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(i).join(", ")+"}");var o=e();return i.current=o,function(){i.current=null}}}function Zp(e,t,n){"function"!=typeof t&&s("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",null!==t?typeof t:"null");var r=null!=n?n.concat([e]):null;return Wp(Br,Vh,Yp.bind(null,t,e),r)}function Jp(e,t,n){"function"!=typeof t&&s("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",null!==t?typeof t:"null");var r=null!=n?n.concat([e]):null;return Gp(Br,Vh,Yp.bind(null,t,e),r)}var Qp=function(e,t){};function tf(e,t){var n=void 0===t?null:t;return Tp().memoizedState=[e,n],e}function rf(e,t){var n=Cp(),r=void 0===t?null:t,i=n.memoizedState;return null!==i&&null!==r&&Ep(r,i[1])?i[0]:(n.memoizedState=[e,r],e)}function af(e,t){var n=Tp(),r=void 0===t?null:t,i=e();return n.memoizedState=[i,r],i}function lf(e,t){var n=Cp(),r=void 0===t?null:t,i=n.memoizedState;if(null!==i&&null!==r&&Ep(r,i[1]))return i[0];var o=e();return n.memoizedState=[o,r],o}function cf(e){var t=Np(e),n=t[0],r=t[1];return $p((function(){var t=lp.transition;lp.transition=1;try{r(e)}finally{lp.transition=t}}),[e]),n}function uf(e){var t=Bp(),n=t[0],r=t[1];return qp((function(){var t=lp.transition;lp.transition=1;try{r(e)}finally{lp.transition=t}}),[e]),n}function df(e){var t=Fp(),n=t[0],r=t[1];return qp((function(){var t=lp.transition;lp.transition=1;try{r(e)}finally{lp.transition=t}}),[e]),n}function hf(e,t){var n=Au();Ru(n<yu?yu:n,(function(){e(!0)})),Ru(n>bu?bu:n,(function(){var n=lp.transition;lp.transition=1;try{e(!1),t()}finally{lp.transition=n}}))}function pf(){var e=Np(!1),t=e[0],n=e[1],r=hf.bind(null,n);return Vp(r),[r,t]}function ff(){var e=Bp()[0];return[Hp().current,e]}function mf(){var e=Fp()[0];return[Hp().current,e]}var gf=!1;function vf(e){var t=lt(e.type)||"Unknown";dt&&!ap[t]&&(s("The object passed back from useOpaqueIdentifier is meant to be passed through to attributes only. Do not read the value directly."),ap[t]=!0)}function yf(){var e=uc.bind(null,vf.bind(null,up));if(ep()){var t=!1,n=up,r={$$typeof:Ie,toString:o=function(){throw t||(t=!0,gf=!0,i(e()),gf=!1,vf(n)),Error("The object passed back from useOpaqueIdentifier is meant to be passed through to attributes only. Do not read the value directly.")},valueOf:o},i=Np(r)[1];return(up.mode&Fu)===Nu&&(up.flags|=Br|qr,Up(Uh|Hh,(function(){i(e())}),void 0,null)),r}var o,a=e();return Np(a),a}function bf(){return Bp()[0]}function xf(){return Fp()[0]}function _f(e,t,n){"function"==typeof arguments[3]&&s("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var r=bv(),i=xv(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o;var l=e.alternate;if(e===up||null!==l&&l===up)fp=pp=!0;else{if(e.lanes===vo&&(null===l||l.lanes===vo)){var c=t.lastRenderedReducer;if(null!==c){var u;u=sp.current,sp.current=Tf;try{var d=t.lastRenderedState,h=c(d,n);if(o.eagerReducer=c,o.eagerState=h,_s(h,d))return}catch(e){}finally{sp.current=u}}}"undefined"!=typeof jest&&(fy(e),gy(e)),_v(e,i,r)}}var wf={readContext:yd,useCallback:Sp,useContext:Sp,useEffect:Sp,useImperativeHandle:Sp,useLayoutEffect:Sp,useMemo:Sp,useReducer:Sp,useRef:Sp,useState:Sp,useDebugValue:Sp,useDeferredValue:Sp,useTransition:Sp,useMutableSource:Sp,useOpaqueIdentifier:Sp,unstable_isNewReconciler:j},Sf=null,Ef=null,kf=null,Mf=null,Pf=null,Tf=null,Cf=null,Af=function(){s("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},If=function(){s("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};Sf={readContext:function(e,t){return yd(e,t)},useCallback:function(e,t){return gp="useCallback",xp(),wp(t),tf(e,t)},useContext:function(e,t){return gp="useContext",xp(),yd(e,t)},useEffect:function(e,t){return gp="useEffect",xp(),wp(t),$p(e,t)},useImperativeHandle:function(e,t,n){return gp="useImperativeHandle",xp(),wp(n),Zp(e,t,n)},useLayoutEffect:function(e,t){return gp="useLayoutEffect",xp(),wp(t),Kp(e,t)},useMemo:function(e,t){gp="useMemo",xp(),wp(t);var n=sp.current;sp.current=Pf;try{return af(e,t)}finally{sp.current=n}},useReducer:function(e,t,n){gp="useReducer",xp();var r=sp.current;sp.current=Pf;try{return Ip(e,t,n)}finally{sp.current=r}},useRef:function(e){return gp="useRef",xp(),Vp(e)},useState:function(e){gp="useState",xp();var t=sp.current;sp.current=Pf;try{return Np(e)}finally{sp.current=t}},useDebugValue:function(e,t){gp="useDebugValue",xp()},useDeferredValue:function(e){return gp="useDeferredValue",xp(),cf(e)},useTransition:function(){return gp="useTransition",xp(),pf()},useMutableSource:function(e,t,n){return gp="useMutableSource",xp(),jp(e,t,n)},useOpaqueIdentifier:function(){return gp="useOpaqueIdentifier",xp(),yf()},unstable_isNewReconciler:j},Ef={readContext:function(e,t){return yd(e,t)},useCallback:function(e,t){return gp="useCallback",_p(),tf(e,t)},useContext:function(e,t){return gp="useContext",_p(),yd(e,t)},useEffect:function(e,t){return gp="useEffect",_p(),$p(e,t)},useImperativeHandle:function(e,t,n){return gp="useImperativeHandle",_p(),Zp(e,t,n)},useLayoutEffect:function(e,t){return gp="useLayoutEffect",_p(),Kp(e,t)},useMemo:function(e,t){gp="useMemo",_p();var n=sp.current;sp.current=Pf;try{return af(e,t)}finally{sp.current=n}},useReducer:function(e,t,n){gp="useReducer",_p();var r=sp.current;sp.current=Pf;try{return Ip(e,t,n)}finally{sp.current=r}},useRef:function(e){return gp="useRef",_p(),Vp(e)},useState:function(e){gp="useState",_p();var t=sp.current;sp.current=Pf;try{return Np(e)}finally{sp.current=t}},useDebugValue:function(e,t){gp="useDebugValue",_p()},useDeferredValue:function(e){return gp="useDeferredValue",_p(),cf(e)},useTransition:function(){return gp="useTransition",_p(),pf()},useMutableSource:function(e,t,n){return gp="useMutableSource",_p(),jp(e,t,n)},useOpaqueIdentifier:function(){return gp="useOpaqueIdentifier",_p(),yf()},unstable_isNewReconciler:j},kf={readContext:function(e,t){return yd(e,t)},useCallback:function(e,t){return gp="useCallback",_p(),rf(e,t)},useContext:function(e,t){return gp="useContext",_p(),yd(e,t)},useEffect:function(e,t){return gp="useEffect",_p(),qp(e,t)},useImperativeHandle:function(e,t,n){return gp="useImperativeHandle",_p(),Jp(e,t,n)},useLayoutEffect:function(e,t){return gp="useLayoutEffect",_p(),Xp(e,t)},useMemo:function(e,t){gp="useMemo",_p();var n=sp.current;sp.current=Tf;try{return lf(e,t)}finally{sp.current=n}},useReducer:function(e,t,n){gp="useReducer",_p();var r=sp.current;sp.current=Tf;try{return Rp(e)}finally{sp.current=r}},useRef:function(e){return gp="useRef",_p(),Hp()},useState:function(e){gp="useState",_p();var t=sp.current;sp.current=Tf;try{return Bp()}finally{sp.current=t}},useDebugValue:function(e,t){return gp="useDebugValue",_p(),Qp()},useDeferredValue:function(e){return gp="useDeferredValue",_p(),uf(e)},useTransition:function(){return gp="useTransition",_p(),ff()},useMutableSource:function(e,t,n){return gp="useMutableSource",_p(),zp(e,t,n)},useOpaqueIdentifier:function(){return gp="useOpaqueIdentifier",_p(),bf()},unstable_isNewReconciler:j},Mf={readContext:function(e,t){return yd(e,t)},useCallback:function(e,t){return gp="useCallback",_p(),rf(e,t)},useContext:function(e,t){return gp="useContext",_p(),yd(e,t)},useEffect:function(e,t){return gp="useEffect",_p(),qp(e,t)},useImperativeHandle:function(e,t,n){return gp="useImperativeHandle",_p(),Jp(e,t,n)},useLayoutEffect:function(e,t){return gp="useLayoutEffect",_p(),Xp(e,t)},useMemo:function(e,t){gp="useMemo",_p();var n=sp.current;sp.current=Cf;try{return lf(e,t)}finally{sp.current=n}},useReducer:function(e,t,n){gp="useReducer",_p();var r=sp.current;sp.current=Cf;try{return Op(e)}finally{sp.current=r}},useRef:function(e){return gp="useRef",_p(),Hp()},useState:function(e){gp="useState",_p();var t=sp.current;sp.current=Cf;try{return Fp()}finally{sp.current=t}},useDebugValue:function(e,t){return gp="useDebugValue",_p(),Qp()},useDeferredValue:function(e){return gp="useDeferredValue",_p(),df(e)},useTransition:function(){return gp="useTransition",_p(),mf()},useMutableSource:function(e,t,n){return gp="useMutableSource",_p(),zp(e,t,n)},useOpaqueIdentifier:function(){return gp="useOpaqueIdentifier",_p(),xf()},unstable_isNewReconciler:j},Pf={readContext:function(e,t){return Af(),yd(e,t)},useCallback:function(e,t){return gp="useCallback",If(),xp(),tf(e,t)},useContext:function(e,t){return gp="useContext",If(),xp(),yd(e,t)},useEffect:function(e,t){return gp="useEffect",If(),xp(),$p(e,t)},useImperativeHandle:function(e,t,n){return gp="useImperativeHandle",If(),xp(),Zp(e,t,n)},useLayoutEffect:function(e,t){return gp="useLayoutEffect",If(),xp(),Kp(e,t)},useMemo:function(e,t){gp="useMemo",If(),xp();var n=sp.current;sp.current=Pf;try{return af(e,t)}finally{sp.current=n}},useReducer:function(e,t,n){gp="useReducer",If(),xp();var r=sp.current;sp.current=Pf;try{return Ip(e,t,n)}finally{sp.current=r}},useRef:function(e){return gp="useRef",If(),xp(),Vp(e)},useState:function(e){gp="useState",If(),xp();var t=sp.current;sp.current=Pf;try{return Np(e)}finally{sp.current=t}},useDebugValue:function(e,t){gp="useDebugValue",If(),xp()},useDeferredValue:function(e){return gp="useDeferredValue",If(),xp(),cf(e)},useTransition:function(){return gp="useTransition",If(),xp(),pf()},useMutableSource:function(e,t,n){return gp="useMutableSource",If(),xp(),jp(e,t,n)},useOpaqueIdentifier:function(){return gp="useOpaqueIdentifier",If(),xp(),yf()},unstable_isNewReconciler:j},Tf={readContext:function(e,t){return Af(),yd(e,t)},useCallback:function(e,t){return gp="useCallback",If(),_p(),rf(e,t)},useContext:function(e,t){return gp="useContext",If(),_p(),yd(e,t)},useEffect:function(e,t){return gp="useEffect",If(),_p(),qp(e,t)},useImperativeHandle:function(e,t,n){return gp="useImperativeHandle",If(),_p(),Jp(e,t,n)},useLayoutEffect:function(e,t){return gp="useLayoutEffect",If(),_p(),Xp(e,t)},useMemo:function(e,t){gp="useMemo",If(),_p();var n=sp.current;sp.current=Tf;try{return lf(e,t)}finally{sp.current=n}},useReducer:function(e,t,n){gp="useReducer",If(),_p();var r=sp.current;sp.current=Tf;try{return Rp(e)}finally{sp.current=r}},useRef:function(e){return gp="useRef",If(),_p(),Hp()},useState:function(e){gp="useState",If(),_p();var t=sp.current;sp.current=Tf;try{return Bp()}finally{sp.current=t}},useDebugValue:function(e,t){return gp="useDebugValue",If(),_p(),Qp()},useDeferredValue:function(e){return gp="useDeferredValue",If(),_p(),uf(e)},useTransition:function(){return gp="useTransition",If(),_p(),ff()},useMutableSource:function(e,t,n){return gp="useMutableSource",If(),_p(),zp(e,t,n)},useOpaqueIdentifier:function(){return gp="useOpaqueIdentifier",If(),_p(),bf()},unstable_isNewReconciler:j},Cf={readContext:function(e,t){return Af(),yd(e,t)},useCallback:function(e,t){return gp="useCallback",If(),_p(),rf(e,t)},useContext:function(e,t){return gp="useContext",If(),_p(),yd(e,t)},useEffect:function(e,t){return gp="useEffect",If(),_p(),qp(e,t)},useImperativeHandle:function(e,t,n){return gp="useImperativeHandle",If(),_p(),Jp(e,t,n)},useLayoutEffect:function(e,t){return gp="useLayoutEffect",If(),_p(),Xp(e,t)},useMemo:function(e,t){gp="useMemo",If(),_p();var n=sp.current;sp.current=Tf;try{return lf(e,t)}finally{sp.current=n}},useReducer:function(e,t,n){gp="useReducer",If(),_p();var r=sp.current;sp.current=Tf;try{return Op(e)}finally{sp.current=r}},useRef:function(e){return gp="useRef",If(),_p(),Hp()},useState:function(e){gp="useState",If(),_p();var t=sp.current;sp.current=Tf;try{return Fp()}finally{sp.current=t}},useDebugValue:function(e,t){return gp="useDebugValue",If(),_p(),Qp()},useDeferredValue:function(e){return gp="useDeferredValue",If(),_p(),df(e)},useTransition:function(){return gp="useTransition",If(),_p(),mf()},useMutableSource:function(e,t,n){return gp="useMutableSource",If(),_p(),zp(e,t,n)},useOpaqueIdentifier:function(){return gp="useOpaqueIdentifier",If(),_p(),xf()},unstable_isNewReconciler:j};var Rf=r.unstable_now,Of=0,Df=-1;function Lf(){Of=Rf()}function jf(e){Df=Rf(),e.actualStartTime<0&&(e.actualStartTime=Rf())}function zf(e){Df=-1}function Nf(e,t){if(Df>=0){var n=Rf()-Df;e.actualDuration+=n,t&&(e.selfBaseDuration=n),Df=-1}}function Bf(e){for(var t=e.child;t;)e.actualDuration+=t.actualDuration,t=t.sibling}var Ff,Uf,Vf,Hf,Wf,Gf,$f,qf,Kf=o.ReactCurrentOwner,Xf=!1;function Yf(e,t,n,r){t.child=null===e?gh(t,null,n,r):mh(t,e.child,n,r)}function Zf(e,t,n,r,i){if(t.type!==t.elementType){var o=n.propTypes;o&&Tc(o,r,"prop",lt(n))}var a,s=n.render,l=t.ref;if(vd(t,i),Kf.current=t,gt(!0),a=kp(e,t,s,r,l,i),t.mode&Bu){Ke();try{a=kp(e,t,s,r,l,i)}finally{Xe()}}return gt(!1),null===e||Xf?(t.flags|=zr,Yf(e,t,a,i),t.child):(Mp(e,t,i),Tm(e,t,i))}function Jf(e,t,n,r,i,o){if(null===e){var a,s=n.type;if(function(e){return"function"==typeof e&&!Hy(e)&&void 0===e.defaultProps}(s)&&null===n.compare&&void 0===n.defaultProps)return a=Cy(s),t.tag=E,t.type=a,sm(t,s),Qf(e,t,a,r,i,o);var l=s.propTypes;l&&Tc(l,r,"prop",lt(s));var c=$y(n.type,null,r,t,t.mode,o);return c.ref=t.ref,c.return=t,t.child=c,c}var u=n.type,d=u.propTypes;d&&Tc(d,r,"prop",lt(u));var h=e.child;if(!qo(i,o)){var p=h.memoizedProps,f=n.compare;if((f=null!==f?f:Ss)(p,r)&&e.ref===t.ref)return Tm(e,t,o)}t.flags|=zr;var m=Wy(h,r);return m.ref=t.ref,m.return=t,t.child=m,m}function Qf(e,t,n,r,i,o){if(t.type!==t.elementType){var a=t.elementType;if(a.$$typeof===Ce){var s=a,l=s._payload,c=s._init;try{a=c(l)}catch(e){a=null}var u=a&&a.propTypes;u&&Tc(u,r,"prop",lt(a))}}if(null!==e&&Ss(e.memoizedProps,r)&&e.ref===t.ref&&t.type===e.type){if(Xf=!1,!qo(o,i))return t.lanes=e.lanes,Tm(e,t,o);(e.flags&ti)!==jr&&(Xf=!0)}return rm(e,t,n,r,o)}function em(e,t,n){var r,i=t.pendingProps,o=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode||"unstable-defer-without-hiding"===i.mode)if((t.mode&Uu)===Nu){var s={baseLanes:vo};t.memoizedState=s,Av(t,n)}else{if(!qo(n,Lo)){var l;l=null!==a?Xo(a.baseLanes,n):n,by(Lo),t.lanes=t.childLanes=Lo;var c={baseLanes:l};return t.memoizedState=c,Av(t,l),null}var u={baseLanes:vo};t.memoizedState=u,Av(t,null!==a?a.baseLanes:n)}else null!==a?(r=Xo(a.baseLanes,n),t.memoizedState=null):r=n,Av(t,r);return Yf(e,t,o,n),t.child}Ff={},Uf={},Vf={},Hf={},Wf={},Gf=!1,$f={},qf={};var tm=em;function nm(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=Gr)}function rm(e,t,n,r,i){if(t.type!==t.elementType){var o=n.propTypes;o&&Tc(o,r,"prop",lt(n))}var a,s;if(a=Vc(t,Fc(0,n,!0)),vd(t,i),Kf.current=t,gt(!0),s=kp(e,t,n,r,a,i),t.mode&Bu){Ke();try{s=kp(e,t,n,r,a,i)}finally{Xe()}}return gt(!1),null===e||Xf?(t.flags|=zr,Yf(e,t,s,i),t.child):(Mp(e,t,i),Tm(e,t,i))}function im(e,t,n,r,i){if(t.type!==t.elementType){var o=n.propTypes;o&&Tc(o,r,"prop",lt(n))}var a,l;Wc(n)?(a=!0,Xc(t)):a=!1,vd(t,i),null===t.stateNode?(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=Nr),ah(t,n,r),lh(t,n,r,i),l=!0):l=null===e?function(e,t,n,r){var i=e.stateNode,o=e.memoizedProps;i.props=o;var a,s=i.context,l=t.contextType;a="object"==typeof l&&null!==l?yd(l):Vc(e,Fc(0,t,!0));var c=t.getDerivedStateFromProps,u="function"==typeof c||"function"==typeof i.getSnapshotBeforeUpdate;u||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||o===n&&s===a||sh(e,i,n,a),Dd();var d=e.memoizedState,h=i.state=d;if(Rd(e,n,i,r),h=e.memoizedState,o===n&&d===h&&!Hc()&&!Ld())return"function"==typeof i.componentDidMount&&(e.flags|=Br),!1;"function"==typeof c&&(Zd(e,t,c,n),h=e.memoizedState);var p=Ld()||ih(e,t,o,n,d,h,a);return p?(u||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(e.flags|=Br)):("function"==typeof i.componentDidMount&&(e.flags|=Br),e.memoizedProps=n,e.memoizedState=h),i.props=n,i.state=h,i.context=a,p}(t,n,r,i):function(e,t,n,r,i){var o=t.stateNode;Pd(e,t);var a=t.memoizedProps,s=t.type===t.elementType?a:rd(t.type,a);o.props=s;var l,c=t.pendingProps,u=o.context,d=n.contextType;l="object"==typeof d&&null!==d?yd(d):Vc(t,Fc(0,n,!0));var h=n.getDerivedStateFromProps,p="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate;p||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||a===c&&u===l||sh(t,o,r,l),Dd();var f=t.memoizedState,m=o.state=f;if(Rd(t,r,o,i),m=t.memoizedState,a===c&&f===m&&!Hc()&&!Ld())return"function"==typeof o.componentDidUpdate&&(a===e.memoizedProps&&f===e.memoizedState||(t.flags|=Br)),"function"==typeof o.getSnapshotBeforeUpdate&&(a===e.memoizedProps&&f===e.memoizedState||(t.flags|=$r)),!1;"function"==typeof h&&(Zd(t,n,h,r),m=t.memoizedState);var g=Ld()||ih(t,n,s,r,f,m,l);return g?(p||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,m,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,m,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=Br),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=$r)):("function"==typeof o.componentDidUpdate&&(a===e.memoizedProps&&f===e.memoizedState||(t.flags|=Br)),"function"==typeof o.getSnapshotBeforeUpdate&&(a===e.memoizedProps&&f===e.memoizedState||(t.flags|=$r)),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=l,g}(e,t,n,r,i);var c=om(e,t,n,l,a,i),u=t.stateNode;return l&&u.props!==r&&(Gf||s("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",lt(t.type)||"a component"),Gf=!0),c}function om(e,t,n,r,i,o){nm(e,t);var a=(t.flags&Wr)!==jr;if(!r&&!a)return i&&Yc(t,n,!1),Tm(e,t,o);var s,l=t.stateNode;if(Kf.current=t,a&&"function"!=typeof n.getDerivedStateFromError)s=null,zf();else{if(gt(!0),s=l.render(),t.mode&Bu){Ke();try{l.render()}finally{Xe()}}gt(!1)}return t.flags|=zr,null!==e&&a?function(e,t,n,r){t.child=mh(t,e.child,null,r),t.child=mh(t,null,n,r)}(e,t,s,o):Yf(e,t,s,o),t.memoizedState=l.state,i&&Yc(t,n,!0),t.child}function am(e){var t=e.stateNode;t.pendingContext?qc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qc(e,t.context,!1),Eh(e,t.containerInfo)}function sm(e,t){if(t&&t.childContextTypes&&s("%s(...): childContextTypes cannot be defined on a function component.",t.displayName||t.name||"Component"),null!==e.ref){var n="",r=ht();r&&(n+="\n\nCheck the render method of `"+r+"`.");var i=r||e._debugID||"",o=e._debugSource;o&&(i=o.fileName+":"+o.lineNumber),Wf[i]||(Wf[i]=!0,s("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",n))}if("function"==typeof t.getDerivedStateFromProps){var a=lt(t)||"Unknown";Hf[a]||(s("%s: Function components do not support getDerivedStateFromProps.",a),Hf[a]=!0)}if("object"==typeof t.contextType&&null!==t.contextType){var l=lt(t)||"Unknown";Vf[l]||(s("%s: Function components do not support contextType.",l),Vf[l]=!0)}}var lm={dehydrated:null,retryLane:yo};function cm(e){return{baseLanes:e}}function um(e,t){return{baseLanes:Xo(e.baseLanes,t)}}function dm(e,t){return Yo(e.childLanes,t)}function hm(e,t,n){var r=t.pendingProps;fb(t)&&(t.flags|=Wr);var i=Rh.current,o=!1;if((t.flags&Wr)!==jr||function(e,t,n,r){return(null===t||null!==t.memoizedState)&&Oh(e,Ih)}(i,e)?(o=!0,t.flags&=~Wr):null!==e&&null===e.memoizedState||void 0!==r.fallback&&!0!==r.unstable_avoidThisFallback&&(i|=Ah),jh(t,i=Dh(i)),null===e){void 0!==r.fallback&&Yh(t);var a=r.children,s=r.fallback;if(o){var l=pm(t,a,s,n);return t.child.memoizedState=cm(n),t.memoizedState=lm,l}if("number"==typeof r.unstable_expectedLoadTime){var c=pm(t,a,s,n);return t.child.memoizedState=cm(n),t.memoizedState=lm,t.lanes=Ao,by(Ao),c}return function(e,t,n){var r=Xy({mode:"visible",children:t},e.mode,n,null);return r.return=e,e.child=r,r}(t,a,n)}if(null!==e.memoizedState){if(o){var u=r.fallback,d=gm(e,t,r.children,u,n),h=t.child,p=e.child.memoizedState;return h.memoizedState=null===p?cm(n):um(p,n),h.childLanes=dm(e,n),t.memoizedState=lm,d}var f=mm(e,t,r.children,n);return t.memoizedState=null,f}if(o){var m=r.fallback,g=gm(e,t,r.children,m,n),v=t.child,y=e.child.memoizedState;return v.memoizedState=null===y?cm(n):um(y,n),v.childLanes=dm(e,n),t.memoizedState=lm,g}var b=mm(e,t,r.children,n);return t.memoizedState=null,b}function pm(e,t,n,r){var i,o,a=e.mode,s=e.child,l={mode:"hidden",children:t};return(a&Fu)===Nu&&null!==s?((i=s).childLanes=vo,i.pendingProps=l,e.mode&Vu&&(i.actualDuration=0,i.actualStartTime=-1,i.selfBaseDuration=0,i.treeBaseDuration=0),o=Ky(n,a,r,null)):(i=Xy(l,a,vo,null),o=Ky(n,a,r,null)),i.return=e,o.return=e,i.sibling=o,e.child=i,o}function fm(e,t){return Wy(e,t)}function mm(e,t,n,r){var i=e.child,o=i.sibling,a=fm(i,{mode:"visible",children:n});return(t.mode&Fu)===Nu&&(a.lanes=r),a.return=t,a.sibling=null,null!==o&&(o.nextEffect=null,o.flags=Ur,t.firstEffect=t.lastEffect=o),t.child=a,a}function gm(e,t,n,r,i){var o,a,s=t.mode,l=e.child,c=l.sibling,u={mode:"hidden",children:n};if((s&Fu)===Nu&&t.child!==l){(o=t.child).childLanes=vo,o.pendingProps=u,t.mode&Vu&&(o.actualDuration=0,o.actualStartTime=-1,o.selfBaseDuration=l.selfBaseDuration,o.treeBaseDuration=l.treeBaseDuration);var d=o.lastEffect;null!==d?(t.firstEffect=o.firstEffect,t.lastEffect=d,d.nextEffect=null):t.firstEffect=t.lastEffect=null}else o=fm(l,u);return null!==c?a=Wy(c,r):(a=Ky(r,s,i,null)).flags|=Nr,a.return=t,o.return=t,o.sibling=a,t.child=o,a}function vm(e,t){e.lanes=Xo(e.lanes,t);var n=e.alternate;null!==n&&(n.lanes=Xo(n.lanes,t)),gd(e.return,t)}function ym(e,t){var n=Array.isArray(e),r=!n&&"function"==typeof Ne(e);if(n||r){var i=n?"array":"iterable";return s("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",i,t,i),!1}return!0}function bm(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function xm(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail,a=r.children;!function(e){if(void 0!==e&&"forwards"!==e&&"backwards"!==e&&"together"!==e&&!$f[e])if($f[e]=!0,"string"==typeof e)switch(e.toLowerCase()){case"together":case"forwards":case"backwards":s('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',e,e.toLowerCase());break;case"forward":case"backward":s('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',e,e.toLowerCase());break;default:s('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e)}else s('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e)}(i),function(e,t){void 0===e||qf[e]||("collapsed"!==e&&"hidden"!==e?(qf[e]=!0,s('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',e)):"forwards"!==t&&"backwards"!==t&&(qf[e]=!0,s('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',e)))}(o,i),function(e,t){if(("forwards"===t||"backwards"===t)&&null!=e&&!1!==e)if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(!ym(e[n],n))return}else{var r=Ne(e);if("function"==typeof r){var i=r.call(e);if(i)for(var o=i.next(),a=0;!o.done;o=i.next()){if(!ym(o.value,a))return;a++}}else s('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',t)}}(a,i),Yf(e,t,a,n);var l=Rh.current;if(Oh(l,Ih)?(l=Lh(l,Ih),t.flags|=Wr):(null!==e&&(e.flags&Wr)!==jr&&function(e,t,n){for(var r=t;null!==r;){if(r.tag===w)null!==r.memoizedState&&vm(r,n);else if(r.tag===T)vm(r,n);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)return;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}(t,t.child,n),l=Dh(l)),jh(t,l),(t.mode&Fu)===Nu)t.memoizedState=null;else switch(i){case"forwards":var c,u=function(e){for(var t=e,n=null;null!==t;){var r=t.alternate;null!==r&&null===Bh(r)&&(n=t),t=t.sibling}return n}(t.child);null===u?(c=t.child,t.child=null):(c=u.sibling,u.sibling=null),bm(t,!1,c,u,o,t.lastEffect);break;case"backwards":var d=null,h=t.child;for(t.child=null;null!==h;){var p=h.alternate;if(null!==p&&null===Bh(p)){t.child=h;break}var f=h.sibling;h.sibling=d,d=h,h=f}bm(t,!0,d,null,o,t.lastEffect);break;case"together":bm(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}var _m=!1;var wm,Sm,Em,km,Mm=!1;function Pm(){Xf=!0}function Tm(e,t,n){return null!==e&&(t.dependencies=e.dependencies),zf(),Nv(t.lanes),qo(n,t.childLanes)?(function(e,t){if(null!==e&&t.child!==e.child)throw Error("Resuming work not yet implemented.");if(null!==t.child){var n=t.child,r=Wy(n,n.pendingProps);for(t.child=r,r.return=t;null!==n.sibling;)n=n.sibling,(r=r.sibling=Wy(n,n.pendingProps)).return=t;r.sibling=null}}(e,t),t.child):null}function Cm(e,t,n){var r=t.lanes;if(t._debugNeedsRemount&&null!==e)return function(e,t,n){var r=t.return;if(null===r)throw new Error("Cannot swap the root fiber.");if(e.alternate=null,t.alternate=null,n.index=t.index,n.sibling=t.sibling,n.return=t.return,n.ref=t.ref,t===r.child)r.child=n;else{var i=r.child;if(null===i)throw new Error("Expected parent to have a child.");for(;i.sibling!==t;)if(null===(i=i.sibling))throw new Error("Expected to find the previous sibling.");i.sibling=n}var o=r.lastEffect;return null!==o?(o.nextEffect=e,r.lastEffect=e):r.firstEffect=r.lastEffect=e,e.nextEffect=null,e.flags=Ur,n.flags|=Nr,n}(e,t,$y(t.type,t.key,t.pendingProps,t._debugOwner||null,t.mode,t.lanes));if(null!==e)if(e.memoizedProps!==t.pendingProps||Hc()||t.type!==e.type)Xf=!0;else{if(!qo(n,r)){switch(Xf=!1,t.tag){case h:am(t),Qh();break;case f:Ph(t);break;case u:Wc(t.type)&&Xc(t);break;case p:Eh(t,t.stateNode.containerInfo);break;case b:fd(t,t.memoizedProps.value);break;case _:qo(n,t.childLanes)&&(t.flags|=Br);var i=t.stateNode;i.effectDuration=0,i.passiveEffectDuration=0;break;case w:if(null!==t.memoizedState){if(qo(n,t.child.childLanes))return hm(e,t,n);jh(t,Dh(Rh.current));var o=Tm(e,t,n);return null!==o?o.sibling:null}jh(t,Dh(Rh.current));break;case T:var a=(e.flags&Wr)!==jr,l=qo(n,t.childLanes);if(a){if(l)return xm(e,t,n);t.flags|=Wr}var P=t.memoizedState;if(null!==P&&(P.rendering=null,P.tail=null,P.lastEffect=null),jh(t,Rh.current),l)break;return null;case R:case O:return t.lanes=vo,em(e,t,n)}return Tm(e,t,n)}Xf=(e.flags&ti)!==jr}else Xf=!1;switch(t.lanes=vo,t.tag){case d:return function(e,t,n,r){null!==e&&(e.alternate=null,t.alternate=null,t.flags|=Nr);var i,o,a=t.pendingProps;if(i=Vc(t,Fc(0,n,!1)),vd(t,r),n.prototype&&"function"==typeof n.prototype.render){var l=lt(n)||"Unknown";Ff[l]||(s("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",l,l),Ff[l]=!0)}if(t.mode&Bu&&$u.recordLegacyContextWarning(t,null),gt(!0),Kf.current=t,o=kp(null,t,n,a,i,r),gt(!1),t.flags|=zr,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){var d=lt(n)||"Unknown";Uf[d]||(s("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",d,d,d),Uf[d]=!0)}if("object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){var h=lt(n)||"Unknown";Uf[h]||(s("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",h,h,h),Uf[h]=!0),t.tag=u,t.memoizedState=null,t.updateQueue=null;var p=!1;Wc(n)?(p=!0,Xc(t)):p=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Md(t);var f=n.getDerivedStateFromProps;return"function"==typeof f&&Zd(t,n,f,a),oh(t,o),lh(t,n,a,r),om(null,t,n,!0,p,r)}if(t.tag=c,t.mode&Bu){Ke();try{o=kp(null,t,n,a,i,r)}finally{Xe()}}return Yf(null,t,o,r),sm(t,n),t.child}(e,t,t.type,n);case k:return function(e,t,n,r,i){null!==e&&(e.alternate=null,t.alternate=null,t.flags|=Nr);var o=t.pendingProps,a=n,s=a._payload,l=(0,a._init)(s);t.type=l;var h=t.tag=function(e){if("function"==typeof e)return Hy(e)?u:c;if(null!=e){var t=e.$$typeof;if(t===ke)return x;if(t===Te)return S}return d}(l),p=rd(l,o);switch(h){case c:return sm(t,l),t.type=l=Cy(l),rm(null,t,l,p,i);case u:return t.type=l=Ay(l),im(null,t,l,p,i);case x:return t.type=l=Iy(l),Zf(null,t,l,p,i);case S:if(t.type!==t.elementType){var f=l.propTypes;f&&Tc(f,p,"prop",lt(l))}return Jf(null,t,l,rd(l.type,p),r,i)}var m="";throw null!==l&&"object"==typeof l&&l.$$typeof===Ce&&(m=" Did you wrap a component in React.lazy() more than once?"),Error("Element type is invalid. Received a promise that resolves to: "+l+". Lazy element type must resolve to a class or function."+m)}(e,t,t.elementType,r,n);case c:var D=t.type,L=t.pendingProps;return rm(e,t,D,t.elementType===D?L:rd(D,L),n);case u:var j=t.type,z=t.pendingProps;return im(e,t,j,t.elementType===j?z:rd(j,z),n);case h:return function(e,t,n){am(t);var r=t.updateQueue;if(null===e||null===r)throw Error("If the root does not have an updateQueue, we should have already bailed out. This error is likely caused by a bug in React. Please file an issue.");var i=t.pendingProps,o=t.memoizedState,a=null!==o?o.element:null;Pd(e,t),Rd(t,i,null,n);var s=t.memoizedState.element;if(s===a)return Qh(),Tm(e,t,n);var l,c,u=t.stateNode;if(u.hydrate&&(c=(l=t).stateNode.containerInfo,Gh=sc(c),Wh=l,$h=!0,1)){var d=u.mutableSourceEagerHydrationData;if(null!=d)for(var h=0;h<d.length;h+=2)ip(d[h],d[h+1]);var p=gh(t,null,s,n);t.child=p;for(var f=p;f;)f.flags=f.flags&~Nr|Xr,f=f.sibling}else Yf(e,t,s,n),Qh();return t.child}(e,t,n);case f:return function(e,t,n){Ph(t),null===e&&Yh(t);var r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children;return Yl(r,i)?a=null:null!==o&&Yl(r,o)&&(t.flags|=Vr),nm(e,t),Yf(e,t,a,n),t.child}(e,t,n);case m:return function(e,t){return null===e&&Yh(t),null}(e,t);case w:return hm(e,t,n);case p:return function(e,t,n){Eh(t,t.stateNode.containerInfo);var r=t.pendingProps;return null===e?t.child=mh(t,null,r,n):Yf(e,t,r,n),t.child}(e,t,n);case x:var N=t.type,B=t.pendingProps;return Zf(e,t,N,t.elementType===N?B:rd(N,B),n);case g:return function(e,t,n){return Yf(e,t,t.pendingProps,n),t.child}(e,t,n);case v:return function(e,t,n){return Yf(e,t,t.pendingProps.children,n),t.child}(e,t,n);case _:return function(e,t,n){t.flags|=Br;var r=t.stateNode;return r.effectDuration=0,r.passiveEffectDuration=0,Yf(e,t,t.pendingProps.children,n),t.child}(e,t,n);case b:return function(e,t,n){var r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value;"value"in i||_m||(_m=!0,s("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var l=t.type.propTypes;if(l&&Tc(l,i,"prop","Context.Provider"),fd(t,a),null!==o){var c=function(e,t,n){if(_s(n,t))return 0;var r="function"==typeof e._calculateChangedBits?e._calculateChangedBits(n,t):od;return(r&od)!==r&&s("calculateChangedBits: Expected the return value to be a 31-bit integer. Instead received: %s",r),0|r}(r,a,o.value);if(0===c){if(o.children===i.children&&!Hc())return Tm(e,t,n)}else!function(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=void 0,a=i.dependencies;if(null!==a){o=i.child;for(var s=a.firstContext;null!==s;){if(s.context===t&&0!=(s.observedBits&n)){if(i.tag===u){var l=Td(jo,Go(r));l.tag=Sd,Cd(i,l)}i.lanes=Xo(i.lanes,r);var c=i.alternate;null!==c&&(c.lanes=Xo(c.lanes,r)),gd(i.return,r),a.lanes=Xo(a.lanes,r);break}s=s.next}}else o=i.tag===b&&i.type===e.type?null:i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}var d=o.sibling;if(null!==d){d.return=o.return,o=d;break}o=o.return}i=o}}(t,r,c,n)}return Yf(e,t,i.children,n),t.child}(e,t,n);case y:return function(e,t,n){var r=t.type;void 0===r._context?r!==r.Consumer&&(Mm||(Mm=!0,s("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):r=r._context;var i=t.pendingProps,o=i.children;"function"!=typeof o&&s("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),vd(t,n);var a,l=yd(r,i.unstable_observedBits);return Kf.current=t,gt(!0),a=o(l),gt(!1),t.flags|=zr,Yf(e,t,a,n),t.child}(e,t,n);case S:var F=t.type,U=rd(F,t.pendingProps);if(t.type!==t.elementType){var V=F.propTypes;V&&Tc(V,U,"prop",lt(F))}return Jf(e,t,F,U=rd(F.type,U),r,n);case E:return Qf(e,t,t.type,t.pendingProps,r,n);case M:var H=t.type,W=t.pendingProps;return function(e,t,n,r,i){var o;return null!==e&&(e.alternate=null,t.alternate=null,t.flags|=Nr),t.tag=u,Wc(n)?(o=!0,Xc(t)):o=!1,vd(t,i),ah(t,n,r),lh(t,n,r,i),om(null,t,n,!0,o,i)}(e,t,H,t.elementType===H?W:rd(H,W),n);case T:return xm(e,t,n);case C:case A:case I:break;case R:return em(e,t,n);case O:return tm(e,t,n)}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function Am(e){e.flags|=Br}function Im(e){e.flags|=Gr}function Rm(e,t){if(!ep())switch(e.tailMode){case"hidden":for(var n=e.tail,r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":for(var i=e.tail,o=null;null!==i;)null!==i.alternate&&(o=i),i=i.sibling;null===o?t||null===e.tail?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Om(e,t,n){var r,i,o,a=t.pendingProps;switch(t.tag){case d:case k:case E:case c:case x:case g:case v:case _:case y:case S:return null;case u:return Wc(t.type)&&Gc(t),null;case h:kh(t),$c(t),rp();var l=t.stateNode;return l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(null===e||null===e.child)&&(Jh(t)?Am(t):l.hydrate||(t.flags|=$r)),Sm(t),null;case f:Th(t);var P=Sh(),D=t.type;if(null!==e&&null!=t.stateNode)Em(e,t,D,a,P),e.ref!==t.ref&&Im(t);else{if(!a){if(null===t.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return null}var L=Mh();if(Jh(t))i=L,o=function(e,t,n,r,i,o){return gc(o,e),Sc(e,n),function(e,t,n,r,i){var o,a;switch(ol=!0===n[vl],o=Ln(t,n),al(t,n),t){case"dialog":$s("cancel",e),$s("close",e);break;case"iframe":case"object":case"embed":$s("load",e);break;case"video":case"audio":for(var s=0;s<Us.length;s++)$s(Us[s],e);break;case"source":$s("error",e);break;case"img":case"image":case"link":$s("error",e),$s("load",e);break;case"details":$s("toggle",e);break;case"input":Rt(e,n),$s("invalid",e);break;case"option":Ft(0,n);break;case"select":$t(e,n),$s("invalid",e);break;case"textarea":Xt(e,n),$s("invalid",e)}Dn(t,n),a=new Set;for(var l=e.attributes,c=0;c<l.length;c++)switch(l[c].name.toLowerCase()){case"data-reactroot":case"value":case"checked":case"selected":break;default:a.add(l[c].name)}var u,d=null;for(var h in n)if(n.hasOwnProperty(h)){var p=n[h];if(h===bl)"string"==typeof p?e.textContent!==p&&(ol||sl(e.textContent,p),d=[bl,p]):"number"==typeof p&&e.textContent!==""+p&&(ol||sl(e.textContent,p),d=[bl,""+p]);else if(B.hasOwnProperty(h))null!=p&&("function"!=typeof p&&ul(h,p),"onScroll"===h&&$s("scroll",e));else if("boolean"==typeof o){var f=void 0,m=se(h);if(ol);else if(h===gl||h===vl||"value"===h||"checked"===h||"selected"===h);else if(h===ml){var g=e.innerHTML,v=p?p[_l]:void 0;if(null!=v){var y=pl(e,v);y!==g&&ll(h,g,y)}}else if(h===xl){if(a.delete(h),dl){var b=Cn(p);b!==(f=e.getAttribute("style"))&&ll(h,f,b)}}else if(o)a.delete(h.toLowerCase()),p!==(f=ge(e,h,p))&&ll(h,f,p);else if(!ie(h,m,o)&&!ae(h,p,m,o)){var x=!1;if(null!==m)a.delete(m.attributeName),f=me(e,h,p,m);else{var _=r;if(_===wl&&(_=nn(t)),_===wl)a.delete(h.toLowerCase());else{var w=(u=h.toLowerCase(),jn.hasOwnProperty(u)&&jn[u]||null);null!==w&&w!==h&&(x=!0,a.delete(w)),a.delete(h)}f=ge(e,h,p)}p===f||x||ll(h,f,p)}}}switch(a.size>0&&!ol&&cl(a),t){case"input":St(e),Lt(e,n,!0);break;case"textarea":St(e),Zt(e);break;case"select":case"option":break;default:"function"==typeof n.onClick&&Pl(e)}return d}(e,t,n,i.namespace)}((r=t).stateNode,r.type,r.memoizedProps,0,i,r),r.updateQueue=o,null!==o&&Am(t);else{var j=function(e,t,n,r,i){var o=r;if(Ol(e,null,o.ancestorInfo),"string"==typeof t.children||"number"==typeof t.children){var a=""+t.children,l=Dl(o.ancestorInfo,e);Ol(null,a,l)}var c=function(e,t,n,r){var i,o,a=kl(n),l=r;if(l===wl&&(l=nn(e)),l===wl){if((i=Ln(e,t))||e===e.toLowerCase()||s("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",e),"script"===e){var c=a.createElement("div");c.innerHTML="<script><\/script>";var u=c.firstChild;o=c.removeChild(u)}else if("string"==typeof t.is)o=a.createElement(e,{is:t.is});else if(o=a.createElement(e),"select"===e){var d=o;t.multiple?d.multiple=!0:t.size&&(d.size=t.size)}}else o=a.createElementNS(l,e);return l===wl&&(i||"[object HTMLUnknownElement]"!==Object.prototype.toString.call(o)||Object.prototype.hasOwnProperty.call(il,e)||(il[e]=!0,s("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",e))),o}(e,t,n,o.namespace);return gc(i,c),Sc(c,t),c}(D,a,P,L,t);wm(j,t,!1,!1),t.stateNode=j,function(e,t,n,r,i){return function(e,t,n,r){var i,o=Ln(t,n);switch(al(t,n),t){case"dialog":$s("cancel",e),$s("close",e),i=n;break;case"iframe":case"object":case"embed":$s("load",e),i=n;break;case"video":case"audio":for(var a=0;a<Us.length;a++)$s(Us[a],e);i=n;break;case"source":$s("error",e),i=n;break;case"img":case"image":case"link":$s("error",e),$s("load",e),i=n;break;case"details":$s("toggle",e),i=n;break;case"input":Rt(e,n),i=It(e,n),$s("invalid",e);break;case"option":Ft(0,n),i=Ut(0,n);break;case"select":$t(e,n),i=Gt(0,n),$s("invalid",e);break;case"textarea":Xt(e,n),i=Kt(e,n),$s("invalid",e);break;default:i=n}switch(Dn(t,i),function(e,t,n,r,i){for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];if(o===xl)a&&Object.freeze(a),An(t,a);else if(o===ml){var s=a?a[_l]:void 0;null!=s&&sn(t,s)}else o===bl?"string"==typeof a?("textarea"!==e||""!==a)&&pn(t,a):"number"==typeof a&&pn(t,""+a):o===gl||o===vl||o===yl||(B.hasOwnProperty(o)?null!=a&&("function"!=typeof a&&ul(o,a),"onScroll"===o&&$s("scroll",t)):null!=a&&ve(t,o,a,i))}}(t,e,0,i,o),t){case"input":St(e),Lt(e,n,!1);break;case"textarea":St(e),Zt(e);break;case"option":!function(e,t){null!=t.value&&e.setAttribute("value",vt(yt(t.value)))}(e,n);break;case"select":!function(e,t){var n=e;n.multiple=!!t.multiple;var r=t.value;null!=r?Wt(n,!!t.multiple,r,!1):null!=t.defaultValue&&Wt(n,!!t.multiple,t.defaultValue,!0)}(e,n);break;default:"function"==typeof i.onClick&&Pl(e)}}(e,t,n),Xl(t,n)}(j,D,a)&&Am(t)}null!==t.ref&&Im(t)}return null;case m:var z=a;if(e&&null!=t.stateNode){var N=e.memoizedProps;km(e,t,N,z)}else{if("string"!=typeof z&&null===t.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var F=Sh(),U=Mh();Jh(t)?function(e){var t=e.stateNode,n=e.memoizedProps,r=function(e,t,n){return gc(n,e),function(e,t){return e.nodeValue!==t}(e,t)}(t,n,e);if(r){var i=Wh;if(null!==i)switch(i.tag){case h:i.stateNode.containerInfo,function(e,t,n){Tl(t,n)}(0,t,n);break;case f:i.type;var o=i.memoizedProps;i.stateNode,function(e,t,n,r,i){!0!==t[Fl]&&Tl(r,i)}(0,o,0,t,n)}}return r}(t)&&Am(t):t.stateNode=function(e,t,n,r){Ol(null,e,n.ancestorInfo);var i=function(e,t){return kl(t).createTextNode(e)}(e,t);return gc(r,i),i}(z,F,U,t)}return null;case w:zh(t);var V=t.memoizedState;if((t.flags&Wr)!==jr)return t.lanes=n,(t.mode&Vu)!==Nu&&Bf(t),t;var H=null!==V,W=!1;return null===e?void 0!==t.memoizedProps.fallback&&Jh(t):W=null!==e.memoizedState,H&&!W&&(t.mode&Fu)!==Nu&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||Oh(Rh.current,Ah)?zg===kg&&(zg=Tg):(zg!==kg&&zg!==Tg||(zg=Cg),null!==Rg&&(Vo(Fg)||Vo(Ug))&&kv(Rg,Dg))),(H||W)&&(t.flags|=Br),null;case p:return kh(t),Sm(t),null===e&&Ks(t.stateNode.containerInfo),null;case b:return md(t),null;case M:return Wc(t.type)&&Gc(t),null;case T:zh(t);var G=t.memoizedState;if(null===G)return null;var $=(t.flags&Wr)!==jr,q=G.rendering;if(null===q)if($)Rm(G,!1);else{if(zg!==kg||null!==e&&(e.flags&Wr)!==jr)for(var K=t.child;null!==K;){var X=Bh(K);if(null!==X){$=!0,t.flags|=Wr,Rm(G,!1);var Y=X.updateQueue;return null!==Y&&(t.updateQueue=Y,t.flags|=Br),null===G.lastEffect&&(t.firstEffect=null),t.lastEffect=G.lastEffect,vh(t,n),jh(t,Lh(Rh.current,Ih)),t.child}K=K.sibling}null!==G.tail&&Cu()>Xg()&&(t.flags|=Wr,$=!0,Rm(G,!1),t.lanes=Ao,by(Ao))}else{if(!$){var Z=Bh(q);if(null!==Z){t.flags|=Wr,$=!0;var J=Z.updateQueue;if(null!==J&&(t.updateQueue=J,t.flags|=Br),Rm(G,!0),null===G.tail&&"hidden"===G.tailMode&&!q.alternate&&!ep()){var Q=t.lastEffect=G.lastEffect;return null!==Q&&(Q.nextEffect=null),null}}else 2*Cu()-G.renderingStartTime>Xg()&&n!==Lo&&(t.flags|=Wr,$=!0,Rm(G,!1),t.lanes=Ao,by(Ao))}if(G.isBackwards)q.sibling=t.child,t.child=q;else{var ee=G.last;null!==ee?ee.sibling=q:t.child=q,G.last=q}}if(null!==G.tail){var te=G.tail;G.rendering=te,G.tail=te.sibling,G.lastEffect=t.lastEffect,G.renderingStartTime=Cu(),te.sibling=null;var ne=Rh.current;return jh(t,ne=$?Lh(ne,Ih):Dh(ne)),te}return null;case C:case A:case I:break;case R:case O:if(Iv(t),null!==e){var re=t.memoizedState;null!==e.memoizedState!=(null!==re)&&"unstable-defer-without-hiding"!==a.mode&&(t.flags|=Br)}return null}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function Dm(e,t){switch(e.tag){case u:Wc(e.type)&&Gc(e);var n=e.flags;return n&ei?(e.flags=n&~ei|Wr,(e.mode&Vu)!==Nu&&Bf(e),e):null;case h:kh(e),$c(e),rp();var r=e.flags;if((r&Wr)!==jr)throw Error("The root failed to unmount after an error. This is likely a bug in React. Please file an issue.");return e.flags=r&~ei|Wr,e;case f:return Th(e),null;case w:zh(e);var i=e.flags;return i&ei?(e.flags=i&~ei|Wr,(e.mode&Vu)!==Nu&&Bf(e),e):null;case T:return zh(e),null;case p:return kh(e),null;case b:return md(e),null;case R:case O:return Iv(e),null;default:return null}}function Lm(e){switch(e.tag){case u:null!=e.type.childContextTypes&&Gc(e);break;case h:kh(e),$c(e),rp();break;case f:Th(e);break;case p:kh(e);break;case w:case T:zh(e);break;case b:md(e);break;case R:case O:Iv(e)}}function jm(e,t){return{value:e,source:t,stack:at(t)}}function zm(e,t){try{var n=t.value,r=t.source,i=t.stack,o=null!==i?i:"";if(null!=n&&n._suppressLogging){if(e.tag===u)return;console.error(n)}var a=r?lt(r.type):null,s=a?"The above error occurred in the <"+a+"> component:":"The above error occurred in one of your React components:",l=lt(e.type),c=s+"\n"+o+"\n\n"+(l?"React will try to recreate this component tree from scratch using the error boundary you provided, "+l+".":"Consider adding an error boundary to your tree to customize error handling behavior.\nVisit https://reactjs.org/link/error-boundaries to learn more about error boundaries.");console.error(c)}catch(e){setTimeout((function(){throw e}))}}wm=function(e,t,n,r){for(var i,o,a=t.child;null!==a;){if(a.tag===f||a.tag===m)i=e,o=a.stateNode,i.appendChild(o);else if(a.tag===p);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)return;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Sm=function(e){},Em=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var a=function(e,t,n,r,i,o){var a=o;if(typeof r.children!=typeof n.children&&("string"==typeof r.children||"number"==typeof r.children)){var l=""+r.children,c=Dl(a.ancestorInfo,t);Ol(null,l,c)}return function(e,t,n,r,i){al(t,r);var o,a,l,c,u=null;switch(t){case"input":o=It(e,n),a=It(e,r),u=[];break;case"option":o=Ut(0,n),a=Ut(0,r),u=[];break;case"select":o=Gt(0,n),a=Gt(0,r),u=[];break;case"textarea":o=Kt(e,n),a=Kt(e,r),u=[];break;default:a=r,"function"!=typeof(o=n).onClick&&"function"==typeof a.onClick&&Pl(e)}Dn(t,a);var d=null;for(l in o)if(!a.hasOwnProperty(l)&&o.hasOwnProperty(l)&&null!=o[l])if(l===xl){var h=o[l];for(c in h)h.hasOwnProperty(c)&&(d||(d={}),d[c]="")}else l===ml||l===bl||l===gl||l===vl||l===yl||(B.hasOwnProperty(l)?u||(u=[]):(u=u||[]).push(l,null));for(l in a){var p=a[l],f=null!=o?o[l]:void 0;if(a.hasOwnProperty(l)&&p!==f&&(null!=p||null!=f))if(l===xl)if(p&&Object.freeze(p),f){for(c in f)!f.hasOwnProperty(c)||p&&p.hasOwnProperty(c)||(d||(d={}),d[c]="");for(c in p)p.hasOwnProperty(c)&&f[c]!==p[c]&&(d||(d={}),d[c]=p[c])}else d||(u||(u=[]),u.push(l,d)),d=p;else if(l===ml){var m=p?p[_l]:void 0,g=f?f[_l]:void 0;null!=m&&g!==m&&(u=u||[]).push(l,m)}else l===bl?"string"!=typeof p&&"number"!=typeof p||(u=u||[]).push(l,""+p):l===gl||l===vl||(B.hasOwnProperty(l)?(null!=p&&("function"!=typeof p&&ul(l,p),"onScroll"===l&&$s("scroll",e)),u||f===p||(u=[])):"object"==typeof p&&null!==p&&p.$$typeof===Ie?p.toString():(u=u||[]).push(l,p))}return d&&(function(e,t){if(t){var n,r=In(e),i=In(t),o={};for(var a in r){var l=r[a],c=i[a];if(c&&l!==c){var u=l+","+c;if(o[u])continue;o[u]=!0,s("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",null==(n=e[l])||"boolean"==typeof n||""===n?"Removing":"Updating",l,c)}}}}(d,a[xl]),(u=u||[]).push(xl,d)),u}(e,t,n,r)}(t.stateNode,n,o,r,0,Mh());t.updateQueue=a,a&&Am(t)}},km=function(e,t,n,r){n!==r&&Am(t)};var Nm="function"==typeof WeakMap?WeakMap:Map;function Bm(e,t,n){var r=Td(jo,n);r.tag=Ed,r.payload={element:null};var i=t.value;return r.callback=function(){ny(i),zm(e,t)},r}function Fm(e,t,n){var r=Td(jo,n);r.tag=Ed;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var o=t.value;r.payload=function(){return zm(e,t),i(o)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch?r.callback=function(){Oy(e),"function"!=typeof i&&(this,null===Qg?Qg=new Set([this]):Qg.add(this),zm(e,t));var n=t.value,r=t.stack;this.componentDidCatch(n,{componentStack:null!==r?r:""}),"function"!=typeof i&&(qo(e.lanes,bo)||s("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",lt(e.type)||"Unknown"))}:r.callback=function(){Oy(e)},r}function Um(e,t,n){var r,i=e.pingCache;if(null===i?(i=e.pingCache=new Nm,r=new Set,i.set(t,r)):void 0===(r=i.get(t))&&(r=new Set,i.set(t,r)),!r.has(n)){r.add(n);var o=oy.bind(null,e,t,n);t.then(o,o)}}function Vm(e,t,n,r,i){if(n.flags|=Qr,n.firstEffect=n.lastEffect=null,null!==r&&"object"==typeof r&&"function"==typeof r.then){var o=r;if((n.mode&Fu)===Nu){var a=n.alternate;a?(n.updateQueue=a.updateQueue,n.memoizedState=a.memoizedState,n.lanes=a.lanes):(n.updateQueue=null,n.memoizedState=null)}var s=Oh(Rh.current,Ah),l=t;do{if(l.tag===w&&Nh(l,s)){var c=l.updateQueue;if(null===c){var d=new Set;d.add(o),l.updateQueue=d}else c.add(o);if((l.mode&Fu)===Nu){if(l.flags|=Wr,n.flags|=ti,n.flags&=~(Zr|Qr),n.tag===u)if(null===n.alternate)n.tag=M;else{var p=Td(jo,bo);p.tag=Sd,Cd(n,p)}return void(n.lanes=Xo(n.lanes,bo))}return Um(e,o,i),l.flags|=ei,void(l.lanes=i)}l=l.return}while(null!==l);r=new Error((lt(n.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}zg!==Ag&&(zg=Pg),r=jm(r,n);var f=t;do{switch(f.tag){case h:var m=r;f.flags|=ei;var g=Go(i);return f.lanes=Xo(f.lanes,g),void Ad(f,Bm(f,m,g));case u:var v=r,y=f.type,b=f.stateNode;if((f.flags&Wr)===jr&&("function"==typeof y.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&!ty(b))){f.flags|=ei;var x=Go(i);return f.lanes=Xo(f.lanes,x),void Ad(f,Fm(f,v,x))}}f=f.return}while(null!==f)}var Hm=null;Hm=new Set;var Wm="function"==typeof WeakSet?WeakSet:Set,Gm=function(e,t){t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()};function $m(e){var t=e.ref;null!==t&&("function"==typeof t?(Tr(null,t,null,null),Cr()&&iy(e,Ar())):t.current=null)}function qm(e,t){Tr(null,t,null),Cr()&&iy(e,Ar())}function Km(e,t){switch(t.tag){case c:case x:case E:case I:return;case u:if(t.flags&$r&&null!==e){var n=e.memoizedProps,r=e.memoizedState,i=t.stateNode;t.type!==t.elementType||Gf||(i.props!==t.memoizedProps&&s("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",lt(t.type)||"instance"),i.state!==t.memoizedState&&s("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",lt(t.type)||"instance"));var o=i.getSnapshotBeforeUpdate(t.elementType===t.type?n:rd(t.type,n),r),a=Hm;void 0!==o||a.has(t.type)||(a.add(t.type),s("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",lt(t.type))),i.__reactInternalSnapshotBeforeUpdate=o}return;case h:return void(t.flags&$r&&ic(t.stateNode.containerInfo));case f:case m:case p:case M:return}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function Xm(e,t,n,r){switch(n.tag){case c:case x:case E:case I:return function(e,t){var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next,o=i;do{if((o.tag&e)===e){var a=o.create;o.destroy=a();var l=o.destroy;void 0!==l&&"function"!=typeof l&&s("An effect function must not return anything besides a function, which is used for clean-up.%s",null===l?" You returned null. If your effect does not require clean up, return undefined (or nothing).":"function"==typeof l.then?"\n\nIt looks like you wrote useEffect(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:\n\nuseEffect(() => {\n  async function fetchData() {\n    // You can await here\n    const response = await MyAPI.getData(someId);\n    // ...\n  }\n  fetchData();\n}, [someId]); // Or [] if effect doesn't need props or state\n\nLearn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching":" You returned: "+l)}o=o.next}while(o!==i)}}(Vh|Uh,n),void function(e){var t=e.updateQueue,n=null!==t?t.lastEffect:null;if(null!==n){var r=n.next,i=r;do{var o=i,a=o.next,s=o.tag;(s&Hh)!==Fh&&(s&Uh)!==Fh&&(Jv(e,i),Zv(e,i)),i=a}while(i!==r)}}(n);case u:var i=n.stateNode;if(n.flags&Br)if(null===t)n.type!==n.elementType||Gf||(i.props!==n.memoizedProps&&s("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",lt(n.type)||"instance"),i.state!==n.memoizedState&&s("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",lt(n.type)||"instance")),i.componentDidMount();else{var o=n.elementType===n.type?t.memoizedProps:rd(n.type,t.memoizedProps),a=t.memoizedState;n.type!==n.elementType||Gf||(i.props!==n.memoizedProps&&s("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",lt(n.type)||"instance"),i.state!==n.memoizedState&&s("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",lt(n.type)||"instance")),i.componentDidUpdate(o,a,i.__reactInternalSnapshotBeforeUpdate)}var l=n.updateQueue;return void(null!==l&&(n.type!==n.elementType||Gf||(i.props!==n.memoizedProps&&s("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",lt(n.type)||"instance"),i.state!==n.memoizedState&&s("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",lt(n.type)||"instance")),jd(0,l,i)));case h:var d=n.updateQueue;if(null!==d){var g=null;if(null!==n.child)switch(n.child.tag){case f:case u:g=n.child.stateNode}jd(0,d,g)}return;case f:var v=n.stateNode;return void(null===t&&n.flags&Br&&(k=v,P=n.type,D=n.memoizedProps,Xl(P,D)&&k.focus()));case m:case p:return;case _:var y=n.memoizedProps,b=(y.onCommit,y.onRender),S=(n.stateNode.effectDuration,Of);return void("function"==typeof b&&b(n.memoizedProps.id,null===t?"mount":"update",n.actualDuration,n.treeBaseDuration,n.actualStartTime,S,e.memoizedInteractions));case w:return void function(e,t){if(null===t.memoizedState){var n=t.alternate;if(null!==n){var r=n.memoizedState;if(null!==r){var i=r.dehydrated;null!==i&&function(e){Ci(e)}(i)}}}}(0,n);case T:case M:case C:case A:case R:case O:return}var k,P,D;throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function Ym(e,t){for(var n=e;;){if(n.tag===f){var r=n.stateNode;t?nc(r):rc(n.stateNode,n.memoizedProps)}else if(n.tag===m){var i=n.stateNode;t?i.nodeValue="":(o=i,a=n.memoizedProps,o.nodeValue=a)}else if((n.tag!==R&&n.tag!==O||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)return;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}var o,a}function Zm(e){var t=e.ref;if(null!==t){var n,r=e.stateNode;e.tag,n=r,"function"==typeof t?t(n):(t.hasOwnProperty("current")||s("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",lt(e.type)),t.current=n)}}function Jm(e){var t=e.ref;null!==t&&("function"==typeof t?t(null):t.current=null)}function Qm(e,t,n){switch(function(e){if(tu&&"function"==typeof tu.onCommitFiberUnmount)try{tu.onCommitFiberUnmount(eu,e)}catch(e){nu||(nu=!0,s("React instrumentation encountered an error: %s",e))}}(t),t.tag){case c:case x:case S:case E:case I:var r=t.updateQueue;if(null!==r){var i=r.lastEffect;if(null!==i){var o=i.next,a=o;do{var l=a,d=l.destroy,h=l.tag;void 0!==d&&((h&Hh)!==Fh?Jv(t,a):qm(t,d)),a=a.next}while(a!==o)}}return;case u:$m(t);var m=t.stateNode;return void("function"==typeof m.componentWillUnmount&&function(e,t){Tr(null,Gm,null,e,t),Cr()&&iy(e,Ar())}(t,m));case f:return void $m(t);case p:return void ag(e,t);case C:case P:case A:return}}function eg(e,t,n){for(var r=t;;)if(Qm(e,r),null===r.child||r.tag===p){if(r===t)return;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function tg(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null,e._debugOwner=null}function ng(e){return e.tag===f||e.tag===h||e.tag===p}function rg(e){var t,n,r=function(e){for(var t=e.return;null!==t;){if(ng(t))return t;t=t.return}throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}(e),i=r.stateNode;switch(r.tag){case f:t=i,n=!1;break;case h:case p:t=i.containerInfo,n=!0;break;default:throw Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}r.flags&Vr&&(ec(t),r.flags&=~Vr);var o=function(e){var t=e;e:for(;;){for(;null===t.sibling;){if(null===t.return||ng(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==f&&t.tag!==m&&t.tag!==P;){if(t.flags&Nr)continue e;if(null===t.child||t.tag===p)continue e;t.child.return=t,t=t.child}if(!(t.flags&Nr))return t.stateNode}}(e);n?ig(e,o,t):og(e,o,t)}function ig(e,t,n){var r=e.tag,i=r===f||r===m;if(i||L){var o=i?e.stateNode:e.stateNode.instance;t?function(e,t,n){e.nodeType===un?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)}(n,o,t):function(e,t){var n;e.nodeType===un?(n=e.parentNode).insertBefore(t,e):(n=e).appendChild(t),null==e._reactRootContainer&&null===n.onclick&&Pl(n)}(n,o)}else if(r===p);else{var a=e.child;if(null!==a){ig(a,t,n);for(var s=a.sibling;null!==s;)ig(s,t,n),s=s.sibling}}}function og(e,t,n){var r=e.tag,i=r===f||r===m;if(i||L){var o=i?e.stateNode:e.stateNode.instance;t?function(e,t,n){e.insertBefore(t,n)}(n,o,t):function(e,t){e.appendChild(t)}(n,o)}else if(r===p);else{var a=e.child;if(null!==a){og(a,t,n);for(var s=a.sibling;null!==s;)og(s,t,n),s=s.sibling}}}function ag(e,t,n){for(var r,i,o,a,s=t,l=!1;;){if(!l){var c=s.return;e:for(;;){if(null===c)throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");var u=c.stateNode;switch(c.tag){case f:r=u,i=!1;break e;case h:case p:r=u.containerInfo,i=!0;break e}c=c.return}l=!0}if(s.tag===f||s.tag===m)eg(e,s),i?(o=r,a=s.stateNode,o.nodeType===un?o.parentNode.removeChild(a):o.removeChild(a)):tc(r,s.stateNode);else if(s.tag===p){if(null!==s.child){r=s.stateNode.containerInfo,i=!0,s.child.return=s,s=s.child;continue}}else if(Qm(e,s),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)return;for(;null===s.sibling;){if(null===s.return||s.return===t)return;(s=s.return).tag===p&&(l=!1)}s.sibling.return=s.return,s=s.sibling}}function sg(e,t,n){ag(e,t);var r=t.alternate;tg(t),null!==r&&tg(r)}function lg(e,t){switch(t.tag){case c:case x:case S:case E:case I:return void function(e,t){var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next,o=i;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&a()}o=o.next}while(o!==i)}}(Vh|Uh,t);case u:return;case f:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r,o=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&function(e,t,n,r,i,o){Sc(e,i),function(e,t,n,r,i){switch("input"===n&&"radio"===i.type&&null!=i.name&&Ot(e,i),Ln(n,r),function(e,t,n,r){for(var i=0;i<t.length;i+=2){var o=t[i],a=t[i+1];o===xl?An(e,a):o===ml?sn(e,a):o===bl?pn(e,a):ve(e,o,a,r)}}(e,t,0,Ln(n,i)),n){case"input":Dt(e,i);break;case"textarea":Yt(e,i);break;case"select":!function(e,t){var n=e,r=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!t.multiple;var i=t.value;null!=i?Wt(n,!!t.multiple,i,!1):r!==!!t.multiple&&(null!=t.defaultValue?Wt(n,!!t.multiple,t.defaultValue,!0):Wt(n,!!t.multiple,t.multiple?[]:"",!1))}(e,i)}}(e,t,n,r,i)}(n,a,o,i,r)}return;case m:if(null===t.stateNode)throw Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var s=t.stateNode,l=t.memoizedProps;return null!==e&&e.memoizedProps,void function(e,t,n){e.nodeValue=n}(s,0,l);case h:var d=t.stateNode;return void(d.hydrate&&(d.hydrate=!1,Ci(d.containerInfo)));case _:return;case w:return function(e){null!==e.memoizedState&&(Wg=Cu(),Ym(e.child,!0))}(t),void cg(t);case T:return void cg(t);case M:return;case C:case A:break;case R:case O:return void Ym(t,null!==t.memoizedState)}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function cg(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Wm),t.forEach((function(t){var r=ay.bind(null,e,t);n.has(t)||(!0!==t.__reactDoNotTraceInteractions&&(r=i.unstable_wrap(r)),n.add(t),t.then(r,r))}))}}function ug(e,t){if(null!==e){var n=e.memoizedState;if(null===n||null!==n.dehydrated){var r=t.memoizedState;return null!==r&&null===r.dehydrated}}return!1}function dg(e){ec(e.stateNode)}if("function"==typeof Symbol&&Symbol.for){var hg=Symbol.for;hg("selector.component"),hg("selector.has_pseudo_class"),hg("selector.role"),hg("selector.test_id"),hg("selector.text")}var pg=[],fg=Math.ceil,mg=o.ReactCurrentDispatcher,gg=o.ReactCurrentOwner,vg=o.IsSomeRendererActing,yg=0,bg=1,xg=4,_g=8,wg=16,Sg=32,Eg=64,kg=0,Mg=1,Pg=2,Tg=3,Cg=4,Ag=5,Ig=yg,Rg=null,Og=null,Dg=vo,Lg=vo,jg=Oc(vo),zg=kg,Ng=null,Bg=vo,Fg=vo,Ug=vo,Vg=vo,Hg=null,Wg=0,Gg=500,$g=1/0,qg=500;function Kg(){$g=Cu()+qg}function Xg(){return $g}var Yg=null,Zg=!1,Jg=null,Qg=null,ev=!1,tv=null,nv=wu,rv=vo,iv=[],ov=[],av=null,sv=50,lv=0,cv=null,uv=50,dv=0,hv=null,pv=jo,fv=vo,mv=vo,gv=!1,vv=null,yv=!1;function bv(){return(Ig&(wg|Sg))!==yg?Cu():pv!==jo?pv:pv=Cu()}function xv(e){var t=e.mode;if((t&Fu)===Nu)return bo;if((t&Uu)===Nu)return Au()===vu?bo:xo;if(fv===vo&&(fv=Bg),Wu.transition!==Gu)return mv!==vo&&(mv=null!==Hg?Hg.pendingLanes:vo),function(e,t){var n=Go(To&~t);return n===yo&&(n=Go(To&~e))===yo&&(n=Go(To)),n}(fv,mv);var n=Au();return Wo((Ig&xg)!==yg&&n===yu?no:function(e){switch(e){case qi:return Qi;case Ki:return io;case Xi:case Yi:return ao;case Zi:return po;default:return mo}}(n),fv)}function _v(e,t,n){!function(){if(lv>sv)throw lv=0,cv=null,Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");dv>uv&&(dv=0,s("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}(),function(e){if(dt&&(Ig&wg)!==yg&&!gf)switch(e.tag){case c:case x:case E:var t=Og&&lt(Og.type)||"Unknown",n=t;dy.has(n)||(dy.add(n),s("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",lt(e.type)||"Unknown",t,t));break;case u:hy||(s("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),hy=!0)}}(e);var r=wv(e,t);if(null===r)return function(e){var t=e.tag;if((t===h||t===u||t===c||t===x||t===S||t===E||t===I)&&(e.flags&Kr)===jr){var n=lt(e.type)||"ReactComponent";if(null!==uy){if(uy.has(n))return;uy.add(n)}else uy=new Set([n]);if(gv);else{var r=ut;try{mt(e),s("Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in %s.",t===u?"the componentWillUnmount method":"a useEffect cleanup function")}finally{r?mt(e):ft()}}}}(e),null;Jo(r,t,n),r===Rg&&(Ug=Xo(Ug,t),zg===Cg&&kv(r,Dg));var i=Au();t===bo?(Ig&_g)!==yg&&(Ig&(wg|Sg))===yg?(_y(r,t),Mv(r)):(Sv(r,n),_y(r,t),Ig===yg&&(Kg(),Lu())):((Ig&xg)===yg||i!==yu&&i!==vu||(null===av?av=new Set([r]):av.add(r)),Sv(r,n),_y(r,t)),Hg=r}function wv(e,t){e.lanes=Xo(e.lanes,t);var n=e.alternate;null!==n&&(n.lanes=Xo(n.lanes,t)),null===n&&(e.flags&(Nr|Xr))!==jr&&ly(e);for(var r=e,i=e.return;null!==i;)i.childLanes=Xo(i.childLanes,t),null!==(n=i.alternate)?n.childLanes=Xo(n.childLanes,t):(i.flags&(Nr|Xr))!==jr&&ly(e),r=i,i=i.return;return r.tag===h?r.stateNode:null}function Sv(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.pendingLanes,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=n;a>0;){var s=$o(a),l=1<<s,c=o[s];c===jo?(l&r)!==vo&&(l&i)===vo||(o[s]=Fo(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}(e,t);var r=Bo(e,e===Rg?Dg:vo),i=zo;if(r!==vo){if(null!==n){if(e.callbackPriority===i)return;Du(n)}var o,a;i===Qi?(a=Mv.bind(null,e),null===ku?(ku=[a],Mu=ou(du,ju)):ku.push(a),o=gu):o=i===eo?Ou(vu,Mv.bind(null,e)):Ou(function(e){switch(e){case Qi:case eo:return qi;case to:case no:case ro:case io:return Ki;case oo:case ao:case so:case lo:case uo:case co:return Xi;case ho:case po:case fo:return Zi;case mo:return Ji;default:throw Error("Invalid update priority: "+e+". This is a bug in React.")}}(i),Ev.bind(null,e)),e.callbackPriority=i,e.callbackNode=o}else null!==n&&(Du(n),e.callbackNode=null,e.callbackPriority=mo)}function Ev(e){if(pv=jo,fv=vo,mv=vo,(Ig&(wg|Sg))!==yg)throw Error("Should not already be working.");var t=e.callbackNode;if(Yv()&&e.callbackNode!==t)return null;var n=Bo(e,e===Rg?Dg:vo);if(n===vo)return null;var r=function(e,t){var n=Ig;Ig|=wg;var r=Dv();Rg===e&&Dg===t||(Kg(),Rv(e,t),wy(e,t));for(var i=jv(e);;)try{Uv();break}catch(t){Ov(e,t)}return dd(),zv(i),Lv(r),Ig=n,null!==Og?kg:(Rg=null,Dg=vo,zg)}(e,n);if(qo(Bg,Ug))Rv(e,vo);else if(r!==kg){if(r===Pg&&(Ig|=Eg,e.hydrate&&(e.hydrate=!1,ic(e.containerInfo)),(n=Uo(e))!==vo&&(r=Bv(e,n))),r===Mg){var i=Ng;throw Rv(e,vo),kv(e,n),Sv(e,Cu()),i}var o=e.current.alternate;e.finishedWork=o,e.finishedLanes=n,function(e,t,n){switch(t){case kg:case Mg:throw Error("Root did not complete. This is a bug in React.");case Pg:Gv(e);break;case Tg:if(kv(e,n),Ho(n)&&!Ey()){var r=Wg+Gg-Cu();if(r>10){if(Bo(e,vo)!==vo)break;var i=e.suspendedLanes;if(!Ko(i,n)){bv(),Qo(e,i);break}e.timeoutHandle=Zl(Gv.bind(null,e),r);break}}Gv(e);break;case Cg:if(kv(e,n),function(e){return(e&To)===e}(n))break;if(!Ey()){var o=function(e,t){for(var n=e.eventTimes,r=jo;t>0;){var i=$o(t),o=1<<i,a=n[i];a>r&&(r=a),t&=~o}return r}(e,n),a=o,s=Cu()-a,l=((c=s)<120?120:c<480?480:c<1080?1080:c<1920?1920:c<3e3?3e3:c<4320?4320:1960*fg(c/1960))-s;if(l>10){e.timeoutHandle=Zl(Gv.bind(null,e),l);break}}Gv(e);break;case Ag:Gv(e);break;default:throw Error("Unknown root exit status.")}var c}(e,r,n)}return Sv(e,Cu()),e.callbackNode===t?Ev.bind(null,e):null}function kv(e,t){t=Yo(t,Vg),function(e,t){e.suspendedLanes|=t,e.pingedLanes&=~t;for(var n=e.expirationTimes,r=t;r>0;){var i=$o(r),o=1<<i;n[i]=jo,r&=~o}}(e,t=Yo(t,Ug))}function Mv(e){if((Ig&(wg|Sg))!==yg)throw Error("Should not already be working.");var t,n;if(Yv(),e===Rg&&qo(e.expiredLanes,Dg)?(n=Bv(e,t=Dg),qo(Bg,Ug)&&(n=Bv(e,t=Bo(e,t)))):n=Bv(e,t=Bo(e,vo)),e.tag!==Zc&&n===Pg&&(Ig|=Eg,e.hydrate&&(e.hydrate=!1,ic(e.containerInfo)),(t=Uo(e))!==vo&&(n=Bv(e,t))),n===Mg){var r=Ng;throw Rv(e,vo),kv(e,t),Sv(e,Cu()),r}var i=e.current.alternate;return e.finishedWork=i,e.finishedLanes=t,Gv(e),Sv(e,Cu()),null}function Pv(e,t){var n=Ig;Ig|=bg;try{return e(t)}finally{(Ig=n)===yg&&(Kg(),Lu())}}function Tv(e,t){var n=Ig;Ig&=~bg,Ig|=_g;try{return e(t)}finally{(Ig=n)===yg&&(Kg(),Lu())}}function Cv(e,t){var n=Ig;if((n&(wg|Sg))!==yg)return s("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),e(t);Ig|=bg;try{return e?Ru(vu,e.bind(null,t)):void 0}finally{Ig=n,Lu()}}function Av(e,t){Lc(jg,Lg,e),Lg=Xo(Lg,t),Bg=Xo(Bg,t)}function Iv(e){Lg=jg.current,Dc(jg,e)}function Rv(e,t){e.finishedWork=null,e.finishedLanes=vo;var n=e.timeoutHandle;if(n!==Ql&&(e.timeoutHandle=Ql,Jl(n)),null!==Og)for(var r=Og.return;null!==r;)Lm(r),r=r.return;Rg=e,Og=Wy(e.current,null),Dg=Lg=Bg=t,zg=kg,Ng=null,Fg=vo,Ug=vo,Vg=vo,hv=null,$u.discardPendingWarnings()}function Ov(e,t){for(;;){var n=Og;try{if(dd(),Pp(),ft(),gg.current=null,null===n||null===n.return)return zg=Mg,Ng=t,void(Og=null);D&&n.mode&Vu&&Nf(n,!0),Vm(e,n.return,n,t,Dg),Hv(n)}catch(e){t=e,Og===n&&null!==n?(n=n.return,Og=n):n=Og;continue}return}}function Dv(){var e=mg.current;return mg.current=wf,null===e?wf:e}function Lv(e){mg.current=e}function jv(e){var t=i.__interactionsRef.current;return i.__interactionsRef.current=e.memoizedInteractions,t}function zv(e){i.__interactionsRef.current=e}function Nv(e){Fg=Xo(e,Fg)}function Bv(e,t){var n=Ig;Ig|=wg;var r=Dv();Rg===e&&Dg===t||(Rv(e,t),wy(e,t));for(var i=jv(e);;)try{Fv();break}catch(t){Ov(e,t)}if(dd(),zv(i),Ig=n,Lv(r),null!==Og)throw Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return Rg=null,Dg=vo,zg}function Fv(){for(;null!==Og;)Vv(Og)}function Uv(){for(;null!==Og&&!Su();)Vv(Og)}function Vv(e){var t,n=e.alternate;mt(e),(e.mode&Vu)!==Nu?(jf(e),t=cy(n,e,Lg),Nf(e,!0)):t=cy(n,e,Lg),ft(),e.memoizedProps=e.pendingProps,null===t?Hv(e):Og=t,gg.current=null}function Hv(e){var t=e;do{var n=t.alternate,r=t.return;if((t.flags&Qr)===jr){mt(t);var i=void 0;if((t.mode&Vu)===Nu?i=Om(n,t,Lg):(jf(t),i=Om(n,t,Lg),Nf(t,!1)),ft(),null!==i)return void(Og=i);Wv(t),null!==r&&(r.flags&Qr)===jr&&(null===r.firstEffect&&(r.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==r.lastEffect&&(r.lastEffect.nextEffect=t.firstEffect),r.lastEffect=t.lastEffect),t.flags>zr&&(null!==r.lastEffect?r.lastEffect.nextEffect=t:r.firstEffect=t,r.lastEffect=t))}else{var o=Dm(t);if(null!==o)return o.flags&=Jr,void(Og=o);if((t.mode&Vu)!==Nu){Nf(t,!1);for(var a=t.actualDuration,s=t.child;null!==s;)a+=s.actualDuration,s=s.sibling;t.actualDuration=a}null!==r&&(r.firstEffect=r.lastEffect=null,r.flags|=Qr)}var l=t.sibling;if(null!==l)return void(Og=l);Og=t=r}while(null!==t);zg===kg&&(zg=Ag)}function Wv(e){if(e.tag!==O&&e.tag!==R||null===e.memoizedState||qo(Lg,Lo)||(e.mode&Uu)===vo){var t=vo;if((e.mode&Vu)!==Nu){for(var n=e.actualDuration,r=e.selfBaseDuration,i=null===e.alternate||e.child!==e.alternate.child,o=e.child;null!==o;)t=Xo(t,Xo(o.lanes,o.childLanes)),i&&(n+=o.actualDuration),r+=o.treeBaseDuration,o=o.sibling;if(e.tag===w&&null!==e.memoizedState){var a=e.child;null!==a&&(r-=a.treeBaseDuration)}e.actualDuration=n,e.treeBaseDuration=r}else for(var s=e.child;null!==s;)t=Xo(t,Xo(s.lanes,s.childLanes)),s=s.sibling;e.childLanes=t}}function Gv(e){var t=Au();return Ru(vu,$v.bind(null,e,t)),null}function $v(e,t){do{Yv()}while(null!==tv);if($u.flushLegacyContextWarning(),$u.flushPendingUnsafeLifecycleWarnings(),(Ig&(wg|Sg))!==yg)throw Error("Should not already be working.");var n=e.finishedWork,r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=vo,n===e.current)throw Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");e.callbackNode=null;var i,o,a=Xo(n.lanes,n.childLanes);if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t;for(var r=e.entanglements,i=e.eventTimes,o=e.expirationTimes,a=n;a>0;){var s=$o(a),l=1<<s;r[s]=vo,i[s]=jo,o[s]=jo,a&=~l}}(e,a),null!==av&&!function(e){return(e&wo)!==vo}(a)&&av.has(e)&&av.delete(e),e===Rg&&(Rg=null,Og=null,Dg=vo),n.flags>zr?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var l=Ig;Ig|=Sg;var c=jv(e);gg.current=null,e.containerInfo,ql=aa,o=Is(),Kl={focusedElem:o,selectionRange:Rs(o)?Os(o):null},sa(!1),vv=null,yv=!1,Yg=i;do{if(Tr(null,qv,null),Cr()){if(null===Yg)throw Error("Should be working on an effect.");var u=Ar();iy(Yg,u),Yg=Yg.nextEffect}}while(null!==Yg);vv=null,Lf(),Yg=i;do{if(Tr(null,Kv,null,e,t),Cr()){if(null===Yg)throw Error("Should be working on an effect.");var d=Ar();iy(Yg,d),Yg=Yg.nextEffect}}while(null!==Yg);e.containerInfo,function(e){var t,n,r,i,o=Is(),a=e.focusedElem,s=e.selectionRange;if(o!==a&&Cs(a)){null!==s&&Rs(a)&&(t=a,r=(n=s).start,void 0===(i=n.end)&&(i=r),"selectionStart"in t?(t.selectionStart=r,t.selectionEnd=Math.min(i,t.value.length)):function(e,t){var n=e.ownerDocument||document,r=n&&n.defaultView||window;if(r.getSelection){var i=r.getSelection(),o=e.textContent.length,a=Math.min(t.start,o),s=void 0===t.end?a:Math.min(t.end,o);if(!i.extend&&a>s){var l=s;s=a,a=l}var c=Ms(e,a),u=Ms(e,s);if(c&&u){if(1===i.rangeCount&&i.anchorNode===c.node&&i.anchorOffset===c.offset&&i.focusNode===u.node&&i.focusOffset===u.offset)return;var d=n.createRange();d.setStart(c.node,c.offset),i.removeAllRanges(),a>s?(i.addRange(d),i.extend(u.node,u.offset)):(d.setEnd(u.node,u.offset),i.addRange(d))}}}(t,n));for(var l=[],c=a;c=c.parentNode;)c.nodeType===ln&&l.push({element:c,left:c.scrollLeft,top:c.scrollTop});"function"==typeof a.focus&&a.focus();for(var u=0;u<l.length;u++){var d=l[u];d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}}(Kl),sa(ql),ql=null,Kl=null,e.current=n,Yg=i;do{if(Tr(null,Xv,null,e,r),Cr()){if(null===Yg)throw Error("Should be working on an effect.");var h=Ar();iy(Yg,h),Yg=Yg.nextEffect}}while(null!==Yg);Yg=null,Eu(),zv(c),Ig=l}else e.current=n,Lf();var p=ev;if(ev)ev=!1,tv=e,rv=r,nv=t;else for(Yg=i;null!==Yg;){var f=Yg.nextEffect;Yg.nextEffect=null,Yg.flags&Ur&&My(Yg),Yg=f}if((a=e.pendingLanes)!==vo){if(null!==hv){var m=hv;hv=null;for(var g=0;g<m.length;g++)xy(e,m[g],e.memoizedInteractions)}_y(e,a)}else Qg=null;if(p||Sy(e,r),a===bo?e===cv?lv++:(lv=0,cv=e):lv=0,function(e,t){if(tu&&"function"==typeof tu.onCommitFiberRoot)try{var n=(e.current.flags&Wr)===Wr;D?tu.onCommitFiberRoot(eu,e,t,n):tu.onCommitFiberRoot(eu,e,void 0,n)}catch(e){nu||(nu=!0,s("React instrumentation encountered an error: %s",e))}}(n.stateNode,t),pg.forEach((function(e){return e()})),Sv(e,Cu()),Zg){Zg=!1;var v=Jg;throw Jg=null,v}return(Ig&_g)!==yg||Lu(),null}function qv(){for(;null!==Yg;){var e=Yg.alternate;yv||null===vv||((Yg.flags&Ur)!==jr?ci(Yg,vv)&&(yv=!0):Yg.tag===w&&ug(e,Yg)&&ci(Yg,vv)&&(yv=!0));var t=Yg.flags;(t&$r)!==jr&&(mt(Yg),Km(e,Yg),ft()),(t&qr)!==jr&&(ev||(ev=!0,Ou(bu,(function(){return Yv(),null})))),Yg=Yg.nextEffect}}function Kv(e,t){for(;null!==Yg;){mt(Yg);var n=Yg.flags;if(n&Vr&&dg(Yg),n&Gr){var r=Yg.alternate;null!==r&&Jm(r)}switch(n&(Nr|Br|Ur|Xr)){case Nr:rg(Yg),Yg.flags&=~Nr;break;case Fr:rg(Yg),Yg.flags&=~Nr,lg(Yg.alternate,Yg);break;case Xr:Yg.flags&=~Xr;break;case Yr:Yg.flags&=~Xr,lg(Yg.alternate,Yg);break;case Br:lg(Yg.alternate,Yg);break;case Ur:sg(e,Yg)}ft(),Yg=Yg.nextEffect}}function Xv(e,t){for(;null!==Yg;){mt(Yg);var n=Yg.flags;n&(Br|Hr)&&Xm(e,Yg.alternate,Yg),n&Gr&&Zm(Yg),ft(),Yg=Yg.nextEffect}}function Yv(){if(nv!==wu){var e=nv>bu?bu:nv;return nv=wu,Ru(e,ey)}return!1}function Zv(e,t){iv.push(t,e),ev||(ev=!0,Ou(bu,(function(){return Yv(),null})))}function Jv(e,t){ov.push(t,e),e.flags|=Kr;var n=e.alternate;null!==n&&(n.flags|=Kr),ev||(ev=!0,Ou(bu,(function(){return Yv(),null})))}function Qv(e){var t=e.create;e.destroy=t()}function ey(){if(null===tv)return!1;var e=tv,t=rv;if(tv=null,rv=vo,(Ig&(wg|Sg))!==yg)throw Error("Cannot flush passive effects while already rendering.");gv=!0;var n=Ig;Ig|=Sg;var r=jv(e),i=ov;ov=[];for(var o=0;o<i.length;o+=2){var a=i[o],s=i[o+1],l=a.destroy;a.destroy=void 0,s.flags&=~Kr;var c=s.alternate;if(null!==c&&(c.flags&=~Kr),"function"==typeof l){if(mt(s),Tr(null,l,null),Cr()){if(null===s)throw Error("Should be working on an effect.");iy(s,Ar())}ft()}}var u=iv;iv=[];for(var d=0;d<u.length;d+=2){var h=u[d],p=u[d+1];if(mt(p),Tr(null,Qv,null,h),Cr()){if(null===p)throw Error("Should be working on an effect.");iy(p,Ar())}ft()}for(var f=e.current.firstEffect;null!==f;){var m=f.nextEffect;f.nextEffect=null,f.flags&Ur&&My(f),f=m}return zv(r),Sy(e,t),gv=!1,Ig=n,Lu(),dv=null===tv?0:dv+1,!0}function ty(e){return null!==Qg&&Qg.has(e)}var ny=function(e){Zg||(Zg=!0,Jg=e)};function ry(e,t,n){Cd(e,Bm(e,jm(n,t),bo));var r=bv(),i=wv(e,bo);null!==i&&(Jo(i,bo,r),Sv(i,r),_y(i,bo))}function iy(e,t){if(e.tag!==h)for(var n=e.return;null!==n;){if(n.tag===h)return void ry(n,e,t);if(n.tag===u){var r=n.type,i=n.stateNode;if("function"==typeof r.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&!ty(i)){var o=jm(t,e);Cd(n,Fm(n,o,bo));var a=bv(),s=wv(n,bo);if(null!==s)Jo(s,bo,a),Sv(s,a),_y(s,bo);else if("function"==typeof i.componentDidCatch&&!ty(i))try{i.componentDidCatch(t,o)}catch(e){}return}}n=n.return}else ry(e,e,t)}function oy(e,t,n){var r=e.pingCache;null!==r&&r.delete(t);var i=bv();Qo(e,n),Rg===e&&Ko(Dg,n)&&(zg===Cg||zg===Tg&&Ho(Dg)&&Cu()-Wg<Gg?Rv(e,vo):Vg=Xo(Vg,n)),Sv(e,i),_y(e,n)}function ay(e,t){var n,r=yo;null!==(n=e.stateNode)&&n.delete(t),function(e,t){var n,r;t===yo&&(t=((r=e.mode)&Fu)===Nu?bo:(r&Uu)===Nu?Au()===vu?bo:xo:(fv===vo&&(fv=Bg),(n=Go(Co&~fv))===yo&&(n=Go(Co)),n));var i=bv(),o=wv(e,t);null!==o&&(Jo(o,t,i),Sv(o,i),_y(o,t))}(e,r)}var sy=null;function ly(e){if((Ig&wg)===yg&&e.mode&(Fu|Uu)){var t=e.tag;if(t===d||t===h||t===u||t===c||t===x||t===S||t===E||t===I){var n=lt(e.type)||"ReactComponent";if(null!==sy){if(sy.has(n))return;sy.add(n)}else sy=new Set([n]);var r=ut;try{mt(e),s("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{r?mt(e):ft()}}}}var cy,uy=null;cy=function(e,t,n){var r=Jy(null,t);try{return Cm(e,t,n)}catch(i){if(null!==i&&"object"==typeof i&&"function"==typeof i.then)throw i;if(dd(),Pp(),Lm(t),Jy(t,r),t.mode&Vu&&jf(t),Tr(null,Cm,null,e,t,n),Cr())throw Ar();throw i}};var dy,hy=!1;dy=new Set;var py={current:!1};function fy(e){if(!0===vg.current&&!0!==py.current){var t=ut;try{mt(e),s("It looks like you're using the wrong act() around your test interactions.\nBe sure to use the matching version of act() corresponding to your renderer:\n\n// for react-dom:\nimport {act} from 'react-dom/test-utils';\n// ...\nact(() => ...);\n\n// for react-test-renderer:\nimport TestRenderer from react-test-renderer';\nconst {act} = TestRenderer;\n// ...\nact(() => ...);")}finally{t?mt(e):ft()}}}function my(e){(e.mode&Bu)!==Nu&&!1===vg.current&&!1===py.current&&s("An update to %s ran an effect, but was not wrapped in act(...).\n\nWhen testing, code that causes React state updates should be wrapped into act(...):\n\nact(() => {\n  /* fire events that update state */\n});\n/* assert on the output */\n\nThis ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act",lt(e.type))}var gy=function(e){if(Ig===yg&&!1===vg.current&&!1===py.current){var t=ut;try{mt(e),s("An update to %s inside a test was not wrapped in act(...).\n\nWhen testing, code that causes React state updates should be wrapped into act(...):\n\nact(() => {\n  /* fire events that update state */\n});\n/* assert on the output */\n\nThis ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act",lt(e.type))}finally{t?mt(e):ft()}}},vy=!1;function yy(e,t){return 1e3*t+e.interactionThreadID}function by(e){null===hv?hv=[e]:hv.push(e)}function xy(e,t,n){if(n.size>0){var r=e.pendingInteractionMap,o=r.get(t);null!=o?n.forEach((function(e){o.has(e)||e.__count++,o.add(e)})):(r.set(t,new Set(n)),n.forEach((function(e){e.__count++})));var a=i.__subscriberRef.current;if(null!==a){var s=yy(e,t);a.onWorkScheduled(n,s)}}}function _y(e,t){xy(e,t,i.__interactionsRef.current)}function wy(e,t){var n=new Set;if(e.pendingInteractionMap.forEach((function(e,r){qo(t,r)&&e.forEach((function(e){return n.add(e)}))})),e.memoizedInteractions=n,n.size>0){var r=i.__subscriberRef.current;if(null!==r){var o=yy(e,t);try{r.onWorkStarted(n,o)}catch(e){Ou(vu,(function(){throw e}))}}}}function Sy(e,t){var n,r=e.pendingLanes;try{if(null!==(n=i.__subscriberRef.current)&&e.memoizedInteractions.size>0){var o=yy(e,t);n.onWorkStopped(e.memoizedInteractions,o)}}catch(e){Ou(vu,(function(){throw e}))}finally{var a=e.pendingInteractionMap;a.forEach((function(e,t){qo(r,t)||(a.delete(t),e.forEach((function(e){if(e.__count--,null!==n&&0===e.__count)try{n.onInteractionScheduledWorkCompleted(e)}catch(e){Ou(vu,(function(){throw e}))}})))}))}}function Ey(){return ky>0}var ky=0;function My(e){e.sibling=null,e.stateNode=null}var Py=null,Ty=null;function Cy(e){if(null===Py)return e;var t=Py(e);return void 0===t?e:t.current}function Ay(e){return Cy(e)}function Iy(e){if(null===Py)return e;var t=Py(e);if(void 0===t){if(null!=e&&"function"==typeof e.render){var n=Cy(e.render);if(e.render!==n){var r={$$typeof:ke,render:n};return void 0!==e.displayName&&(r.displayName=e.displayName),r}}return e}return t.current}function Ry(e,t){if(null===Py)return!1;var n=e.elementType,r=t.type,i=!1,o="object"==typeof r&&null!==r?r.$$typeof:null;switch(e.tag){case u:"function"==typeof r&&(i=!0);break;case c:("function"==typeof r||o===Ce)&&(i=!0);break;case x:(o===ke||o===Ce)&&(i=!0);break;case S:case E:(o===Te||o===Ce)&&(i=!0);break;default:return!1}if(i){var a=Py(n);if(void 0!==a&&a===Py(r))return!0}return!1}function Oy(e){null!==Py&&"function"==typeof WeakSet&&(null===Ty&&(Ty=new WeakSet),Ty.add(e))}function Dy(e,t,n){var r=e.alternate,i=e.child,o=e.sibling,a=e.tag,s=e.type,l=null;switch(a){case c:case E:case u:l=s;break;case x:l=s.render}if(null===Py)throw new Error("Expected resolveFamily to be set during hot reload.");var d=!1,h=!1;if(null!==l){var p=Py(l);void 0!==p&&(n.has(p)?h=!0:t.has(p)&&(a===u?h=!0:d=!0))}null!==Ty&&(Ty.has(e)||null!==r&&Ty.has(r))&&(h=!0),h&&(e._debugNeedsRemount=!0),(h||d)&&_v(e,bo,jo),null===i||h||Dy(i,t,n),null!==o&&Dy(o,t,n)}var Ly;function jy(e,t,n){var r=e.child,i=e.sibling,o=e.tag,a=e.type,s=null;switch(o){case c:case E:case u:s=a;break;case x:s=a.render}var l=!1;null!==s&&t.has(s)&&(l=!0),l?function(e,t){var n=function(e,t){for(var n=e,r=!1;;){if(n.tag===f)r=!0,t.add(n.stateNode);else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)return r;for(;null===n.sibling;){if(null===n.return||n.return===e)return r;n=n.return}n.sibling.return=n.return,n=n.sibling}return!1}(e,t);if(!n)for(var r=e;;){switch(r.tag){case f:return void t.add(r.stateNode);case p:case h:return void t.add(r.stateNode.containerInfo)}if(null===r.return)throw new Error("Expected to reach root first.");r=r.return}}(e,n):null!==r&&jy(r,t,n),null!==i&&jy(i,t,n)}Ly=!1;try{var zy=Object.preventExtensions({});new Map([[zy,null]]),new Set([zy])}catch(e){Ly=!0}var Ny=1;function By(e,t,n,r){this.tag=e,this.key=n,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=r,this.flags=jr,this.nextEffect=null,this.firstEffect=null,this.lastEffect=null,this.lanes=vo,this.childLanes=vo,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugID=Ny++,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,Ly||"function"!=typeof Object.preventExtensions||Object.preventExtensions(this)}var Fy,Uy,Vy=function(e,t,n,r){return new By(e,t,n,r)};function Hy(e){var t=e.prototype;return!(!t||!t.isReactComponent)}function Wy(e,t){var n=e.alternate;null===n?((n=Vy(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n._debugID=e._debugID,n._debugSource=e._debugSource,n._debugOwner=e._debugOwner,n._debugHookTypes=e._debugHookTypes,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=jr,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null,n.actualDuration=0,n.actualStartTime=-1),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue;var r=e.dependencies;switch(n.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.selfBaseDuration=e.selfBaseDuration,n.treeBaseDuration=e.treeBaseDuration,n._debugNeedsRemount=e._debugNeedsRemount,n.tag){case d:case c:case E:n.type=Cy(e.type);break;case u:n.type=Ay(e.type);break;case x:n.type=Iy(e.type)}return n}function Gy(e,t){e.flags&=Nr,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null;var n=e.alternate;if(null===n)e.childLanes=vo,e.lanes=t,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null,e.selfBaseDuration=0,e.treeBaseDuration=0;else{e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type;var r=n.dependencies;e.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext},e.selfBaseDuration=n.selfBaseDuration,e.treeBaseDuration=n.treeBaseDuration}return e}function $y(e,t,n,r,i,o){var a=d,l=e;if("function"==typeof e)Hy(e)?(a=u,l=Ay(l)):l=Cy(l);else if("string"==typeof e)a=f;else e:switch(e){case xe:return Ky(n.children,i,o,t);case Re:a=v,i|=Hu;break;case _e:a=v,i|=Bu;break;case we:return function(e,t,n,r){"string"!=typeof e.id&&s('Profiler must specify an "id" as a prop');var i=Vy(_,e,r,t|Vu);return i.elementType=we,i.type=we,i.lanes=n,i.stateNode={effectDuration:0,passiveEffectDuration:0},i}(n,i,o,t);case Me:return function(e,t,n,r){var i=Vy(w,e,r,t);return i.type=Me,i.elementType=Me,i.lanes=n,i}(n,i,o,t);case Pe:return function(e,t,n,r){var i=Vy(T,e,r,t);return i.type=Pe,i.elementType=Pe,i.lanes=n,i}(n,i,o,t);case Oe:return Xy(n,i,o,t);case De:return function(e,t,n,r){var i=Vy(O,e,r,t);return i.type=De,i.elementType=De,i.lanes=n,i}(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Se:a=b;break e;case Ee:a=y;break e;case ke:a=x,l=Iy(l);break e;case Te:a=S;break e;case Ce:a=k,l=null;break e;case Ae:a=I;break e}var c="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(c+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var h=r?lt(r.type):null;throw h&&(c+="\n\nCheck the render method of `"+h+"`."),Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: "+(null==e?e:typeof e)+"."+c)}var p=Vy(a,n,t,i);return p.elementType=e,p.type=l,p.lanes=o,p._debugOwner=r,p}function qy(e,t,n){var r;r=e._owner;var i=$y(e.type,e.key,e.props,r,t,n);return i._debugSource=e._source,i._debugOwner=e._owner,i}function Ky(e,t,n,r){var i=Vy(g,e,r,t);return i.lanes=n,i}function Xy(e,t,n,r){var i=Vy(R,e,r,t);return i.type=Oe,i.elementType=Oe,i.lanes=n,i}function Yy(e,t,n){var r=Vy(m,e,null,t);return r.lanes=n,r}function Zy(e,t,n){var r=null!==e.children?e.children:[],i=Vy(p,r,e.key,t);return i.lanes=n,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function Jy(e,t){return null===e&&(e=Vy(d,null,null,Nu)),e.tag=t.tag,e.key=t.key,e.elementType=t.elementType,e.type=t.type,e.stateNode=t.stateNode,e.return=t.return,e.child=t.child,e.sibling=t.sibling,e.index=t.index,e.ref=t.ref,e.pendingProps=t.pendingProps,e.memoizedProps=t.memoizedProps,e.updateQueue=t.updateQueue,e.memoizedState=t.memoizedState,e.dependencies=t.dependencies,e.mode=t.mode,e.flags=t.flags,e.nextEffect=t.nextEffect,e.firstEffect=t.firstEffect,e.lastEffect=t.lastEffect,e.lanes=t.lanes,e.childLanes=t.childLanes,e.alternate=t.alternate,e.actualDuration=t.actualDuration,e.actualStartTime=t.actualStartTime,e.selfBaseDuration=t.selfBaseDuration,e.treeBaseDuration=t.treeBaseDuration,e._debugID=t._debugID,e._debugSource=t._debugSource,e._debugOwner=t._debugOwner,e._debugNeedsRemount=t._debugNeedsRemount,e._debugHookTypes=t._debugHookTypes,e}function Qy(e,t,n){switch(this.tag=t,this.containerInfo=e,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=Ql,this.context=null,this.pendingContext=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=mo,this.eventTimes=Zo(vo),this.expirationTimes=Zo(jo),this.pendingLanes=vo,this.suspendedLanes=vo,this.pingedLanes=vo,this.expiredLanes=vo,this.mutableReadLanes=vo,this.finishedLanes=vo,this.entangledLanes=vo,this.entanglements=Zo(vo),this.mutableSourceEagerHydrationData=null,this.interactionThreadID=i.unstable_getThreadID(),this.memoizedInteractions=new Set,this.pendingInteractionMap=new Map,t){case Jc:this._debugRootType="createBlockingRoot()";break;case Qc:this._debugRootType="createRoot()";break;case Zc:this._debugRootType="createLegacyRoot()"}}function eb(e,t){var n=(0,t._getVersion)(t._source);null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)}function tb(e,t,n,i){!function(e,t){if(tu&&"function"==typeof tu.onScheduleFiberRoot)try{tu.onScheduleFiberRoot(eu,e,t)}catch(e){nu||(nu=!0,s("React instrumentation encountered an error: %s",e))}}(t,e);var o,a=t.current,l=bv();"undefined"!=typeof jest&&(o=a,!1===vy&&void 0===r.unstable_flushAllWithoutAsserting&&(o.mode&Fu||o.mode&Uu)&&(vy=!0,s("In Concurrent or Sync modes, the \"scheduler\" module needs to be mocked to guarantee consistent behaviour across tests and browsers. For example, with jest: \njest.mock('scheduler', () => require('scheduler/unstable_mock'));\n\nFor more info, visit https://reactjs.org/link/mock-scheduler")),fy(a));var c=xv(a),d=function(e){if(!e)return jc;var t=Ir(e),n=function(e){if(!function(e){return ri(e)===e}(e)||e.tag!==u)throw Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var t=e;do{switch(t.tag){case h:return t.stateNode.context;case u:if(Wc(t.type))return t.stateNode.__reactInternalMemoizedMergedChildContext}t=t.return}while(null!==t);throw Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}(t);if(t.tag===u){var r=t.type;if(Wc(r))return Kc(t,r,n)}return n}(n);null===t.context?t.context=d:t.pendingContext=d,dt&&null!==ut&&!Fy&&(Fy=!0,s("Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.\n\nCheck the render method of %s.",lt(ut.type)||"Unknown"));var p=Td(l,c);return p.payload={element:e},null!==(i=void 0===i?null:i)&&("function"!=typeof i&&s("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",i),p.callback=i),Cd(a,p),_v(a,c,l),c}function nb(e){var t=e.current;return t.child?(t.child.tag,t.child.stateNode):null}function rb(e,t){var n,r,i=e.memoizedState;null!==i&&null!==i.dehydrated&&(i.retryLane=(r=t,(n=i.retryLane)!==yo&&n<r?n:r))}function ib(e,t){rb(e,t);var n=e.alternate;n&&rb(n,t)}function ob(e){var t=function(e){var t=si(e);if(!t)return null;for(var n=t;;){if(n.tag===f||n.tag===m||L)return n;if(n.child&&n.tag!==p)n.child.return=n,n=n.child;else{if(n===t)return null;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}(e);return null===t?null:t.tag===C?t.stateNode.instance:t.stateNode}Fy=!1,Uy={};var ab,sb,lb,cb,ub,db,hb,pb,fb=function(e){return!1},mb=function(e,t,r){var i=t[r],o=Array.isArray(e)?e.slice():n({},e);return r+1===t.length?(Array.isArray(o)?o.splice(i,1):delete o[i],o):(o[i]=mb(e[i],t,r+1),o)},gb=function(e,t){return mb(e,t,0)},vb=function(e,t,r,i){var o=t[i],a=Array.isArray(e)?e.slice():n({},e);return i+1===t.length?(a[r[i]]=a[o],Array.isArray(a)?a.splice(o,1):delete a[o]):a[o]=vb(e[o],t,r,i+1),a},yb=function(e,t,n){if(t.length===n.length){for(var r=0;r<n.length-1;r++)if(t[r]!==n[r])return void a("copyWithRename() expects paths to be the same except for the deepest key");return vb(e,t,n,0)}a("copyWithRename() expects paths of the same length")},bb=function(e,t,r,i){if(r>=t.length)return i;var o=t[r],a=Array.isArray(e)?e.slice():n({},e);return a[o]=bb(e[o],t,r+1,i),a},xb=function(e,t,n){return bb(e,t,0,n)},_b=function(e,t){for(var n=e.memoizedState;null!==n&&t>0;)n=n.next,t--;return n};function wb(e,t){this._internalRoot=Eb(e,Qc,t)}function Sb(e,t,n){this._internalRoot=Eb(e,t,n)}function Eb(e,t,n){var r,i=null!=n&&!0===n.hydrate,o=(null!=n&&n.hydrationOptions,null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null),a=function(e,t,n,r){return function(e,t,n,r){var i=new Qy(e,t,n),o=function(e){var t;return t=e===Qc?Uu|Fu|Bu:e===Jc?Fu|Bu:Nu,ru&&(t|=Vu),Vy(h,null,null,t)}(t);return i.current=o,o.stateNode=i,Md(o),i}(e,t,n)}(e,t,i);if(r=a.current,e[fc]=r,e.nodeType,Ks(e.nodeType===un?e.parentNode:e),o)for(var s=0;s<o.length;s++)eb(a,o[s]);return a}function kb(e){return!(!e||e.nodeType!==ln&&e.nodeType!==dn&&e.nodeType!==hn&&(e.nodeType!==un||" react-mount-point-unstable "!==e.nodeValue))}ab=function(e,t,r,i){var o=_b(e,t);if(null!==o){var a=xb(o.memoizedState,r,i);o.memoizedState=a,o.baseState=a,e.memoizedProps=n({},e.memoizedProps),_v(e,bo,jo)}},sb=function(e,t,r){var i=_b(e,t);if(null!==i){var o=gb(i.memoizedState,r);i.memoizedState=o,i.baseState=o,e.memoizedProps=n({},e.memoizedProps),_v(e,bo,jo)}},lb=function(e,t,r,i){var o=_b(e,t);if(null!==o){var a=yb(o.memoizedState,r,i);o.memoizedState=a,o.baseState=a,e.memoizedProps=n({},e.memoizedProps),_v(e,bo,jo)}},cb=function(e,t,n){e.pendingProps=xb(e.memoizedProps,t,n),e.alternate&&(e.alternate.pendingProps=e.pendingProps),_v(e,bo,jo)},ub=function(e,t){e.pendingProps=gb(e.memoizedProps,t),e.alternate&&(e.alternate.pendingProps=e.pendingProps),_v(e,bo,jo)},db=function(e,t,n){e.pendingProps=yb(e.memoizedProps,t,n),e.alternate&&(e.alternate.pendingProps=e.pendingProps),_v(e,bo,jo)},hb=function(e){_v(e,bo,jo)},pb=function(e){fb=e},wb.prototype.render=Sb.prototype.render=function(e){var t=this._internalRoot;"function"==typeof arguments[1]&&s("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var n=t.containerInfo;if(n.nodeType!==un){var r=ob(t.current);r&&r.parentNode!==n&&s("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}tb(e,t,null,null)},wb.prototype.unmount=Sb.prototype.unmount=function(){"function"==typeof arguments[0]&&s("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var e=this._internalRoot,t=e.containerInfo;tb(null,e,null,(function(){vc(t)}))};var Mb,Pb=o.ReactCurrentOwner,Tb=!1;function Cb(e){return e?e.nodeType===dn?e.documentElement:e.firstChild:null}function Ab(e,t,n,r,i){Mb(n),function(e,t){null!==e&&"function"!=typeof e&&s("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.","render",e)}(void 0===i?null:i);var o,l=n._reactRootContainer;if(l){if(o=l._internalRoot,"function"==typeof i){var c=i;i=function(){var e=nb(o);c.call(e)}}tb(t,o,e,i)}else{if(l=n._reactRootContainer=function(e,t){var n=t||function(e){var t=Cb(e);return!(!t||t.nodeType!==ln||!t.hasAttribute(J))}(e);if(!n)for(var r,i=!1;r=e.lastChild;)!i&&r.nodeType===ln&&r.hasAttribute(J)&&(i=!0,s("render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup.")),e.removeChild(r);return!n||t||Tb||(Tb=!0,a("render(): Calling ReactDOM.render() to hydrate server-rendered markup will stop working in React v18. Replace the ReactDOM.render() call with ReactDOM.hydrate() if you want React to attach to the server HTML.")),function(e,t){return new Sb(e,Zc,t)}(e,n?{hydrate:!0}:void 0)}(n,r),o=l._internalRoot,"function"==typeof i){var u=i;i=function(){var e=nb(o);u.call(e)}}Tv((function(){tb(t,o,e,i)}))}return nb(o)}Mb=function(e){if(e._reactRootContainer&&e.nodeType!==un){var t=ob(e._reactRootContainer._internalRoot.current);t&&t.parentNode!==e&&s("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var n=!!e._reactRootContainer,r=Cb(e);!(!r||!xc(r))&&!n&&s("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),e.nodeType===ln&&e.tagName&&"BODY"===e.tagName.toUpperCase()&&s("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")},Rr=function(e){if(e.tag===w){var t=bv(),n=_o;_v(e,n,t),ib(e,n)}},Or=function(e){if(e.tag===w){var t=bv(),n=Io;_v(e,n,t),ib(e,n)}},Dr=function(e){if(e.tag===w){var t=bv(),n=xv(e);_v(e,n,t),ib(e,n)}},Lr=function(e,t){try{return t()}finally{}};var Ib=!1;function Rb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!kb(t))throw Error("Target container is not a DOM element.");return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:be,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}"function"==typeof Map&&null!=Map.prototype&&"function"==typeof Map.prototype.forEach&&"function"==typeof Set&&null!=Set.prototype&&"function"==typeof Set.prototype.clear&&"function"==typeof Set.prototype.forEach||s("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),rr=function(e,t,n){switch(t){case"input":return void function(e,t){var n=e;Dt(n,t),function(e,t){var n=t.name;if("radio"===t.type&&null!=n){for(var r=e;r.parentNode;)r=r.parentNode;for(var i=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),o=0;o<i.length;o++){var a=i[o];if(a!==e&&a.form===e.form){var s=wc(a);if(!s)throw Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");Et(a),Dt(a,s)}}}}(n,t)}(e,n);case"textarea":return void function(e,t){Yt(e,t)}(e,n);case"select":return void function(e,t){var n=e,r=t.value;null!=r&&Wt(n,!!t.multiple,r,!1)}(e,n)}},cr=Pv,ur=function(e,t,n,r,i){var o=Ig;Ig|=xg;try{return Ru(yu,e.bind(null,t,n,r,i))}finally{(Ig=o)===yg&&(Kg(),Lu())}},dr=function(){(Ig&(bg|wg|Sg))===yg?(function(){if(null!==av){var e=av;av=null,e.forEach((function(e){!function(e){e.expiredLanes|=wo&e.pendingLanes}(e),Sv(e,Cu())}))}Lu()}(),Yv()):(Ig&wg)!==yg&&s("unstable_flushDiscreteUpdates: Cannot flush updates when React is already rendering.")},hr=function(e,t){var n=Ig;Ig|=2;try{return e(t)}finally{(Ig=n)===yg&&(Kg(),Lu())}};var Ob,Db,Lb,jb={Events:[xc,_c,wc,sr,lr,Yv,py]};if(Db=(Ob={findFiberByHostInstance:bc,bundleType:1,version:zu,rendererPackageName:"react-dom"}).findFiberByHostInstance,Lb=o.ReactCurrentDispatcher,!function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled)return!0;if(!t.supportsFiber)return s("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{eu=t.inject(e),tu=t}catch(e){s("React instrumentation encountered an error: %s.",e)}return!0}({bundleType:Ob.bundleType,version:Ob.version,rendererPackageName:Ob.rendererPackageName,rendererConfig:Ob.rendererConfig,overrideHookState:ab,overrideHookStateDeletePath:sb,overrideHookStateRenamePath:lb,overrideProps:cb,overridePropsDeletePath:ub,overridePropsRenamePath:db,setSuspenseHandler:pb,scheduleUpdate:hb,currentDispatcherRef:Lb,findHostInstanceByFiber:function(e){var t=li(e);return null===t?null:t.stateNode},findFiberByHostInstance:Db||function(e){return null},findHostInstancesForRefresh:function(e,t){var n=new Set,r=new Set(t.map((function(e){return e.current})));return jy(e.current,r,n),n},scheduleRefresh:function(e,t){if(null!==Py){var n=t.staleFamilies,r=t.updatedFamilies;Yv(),Cv((function(){Dy(e.current,r,n)}))}},scheduleRoot:function(e,t){e.context===jc&&(Yv(),Cv((function(){tb(t,e,null,null)})))},setRefreshHandler:function(e){Py=e},getCurrentFiber:function(){return ut}})&&H&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&-1===navigator.userAgent.indexOf("Edge")||navigator.userAgent.indexOf("Firefox")>-1)){var zb=window.location.protocol;/^(https?|file):$/.test(zb)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+("file:"===zb?"\nYou might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq":""),"font-weight:bold")}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jb,e.createPortal=Rb,e.findDOMNode=function(e){var t=Pb.current;return null!==t&&null!==t.stateNode&&(t.stateNode._warnedAboutRefsInRender||s("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",lt(t.type)||"A component"),t.stateNode._warnedAboutRefsInRender=!0),null==e?null:e.nodeType===ln?e:function(e,t){var n=Ir(e);if(void 0===n)throw"function"==typeof e.render?Error("Unable to find node on an unmounted component."):Error("Argument appears to not be a ReactComponent. Keys: "+Object.keys(e));var r=li(n);if(null===r)return null;if(r.mode&Bu){var i=lt(n.type)||"Component";if(!Uy[i]){Uy[i]=!0;var o=ut;try{mt(r),n.mode&Bu?s("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",t,t,i):s("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",t,t,i)}finally{o?mt(o):ft()}}}return r.stateNode}(e,"findDOMNode")},e.flushSync=Cv,e.hydrate=function(e,t,n){if(!kb(t))throw Error("Target container is not a DOM element.");return yc(t)&&void 0===t._reactRootContainer&&s("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOM.createRoot(). This is not supported. Did you mean to call createRoot(container, {hydrate: true}).render(element)?"),Ab(null,e,t,!0,n)},e.render=function(e,t,n){if(!kb(t))throw Error("Target container is not a DOM element.");return yc(t)&&void 0===t._reactRootContainer&&s("You are calling ReactDOM.render() on a container that was previously passed to ReactDOM.createRoot(). This is not supported. Did you mean to call root.render(element)?"),Ab(null,e,t,!1,n)},e.unmountComponentAtNode=function(e){if(!kb(e))throw Error("unmountComponentAtNode(...): Target container is not a DOM element.");if(yc(e)&&void 0===e._reactRootContainer&&s("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOM.createRoot(). This is not supported. Did you mean to call root.unmount()?"),e._reactRootContainer){var t=Cb(e);return t&&!xc(t)&&s("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React."),Tv((function(){Ab(null,null,e,!1,(function(){e._reactRootContainer=null,vc(e)}))})),!0}var n=Cb(e),r=!(!n||!xc(n)),i=e.nodeType===ln&&kb(e.parentNode)&&!!e.parentNode._reactRootContainer;return r&&s("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",i?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."),!1},e.unstable_batchedUpdates=Pv,e.unstable_createPortal=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Ib||(Ib=!0,a('The ReactDOM.unstable_createPortal() alias has been deprecated, and will be removed in React 18+. Update your code to use ReactDOM.createPortal() instead. It has the exact same API, but without the "unstable_" prefix.')),Rb(e,t,n)},e.unstable_renderSubtreeIntoContainer=function(e,t,n,r){return function(e,t,n,r){if(!kb(n))throw Error("Target container is not a DOM element.");if(null==e||void 0===e._reactInternals)throw Error("parentComponent must be a valid React Component");return Ab(e,t,n,!1,r)}(e,t,n,r)},e.version=zu}()}}),cf=S({"../node_modules/react-dom/index.js"(e,t){"use strict";t.exports=lf()}});function uf(e,t,n){const r=(0,Up.useCallback)(e,t),i=(0,Up.useRef)(null);return i.current?i.current.set(r):i.current=new Np.Atom(r),df((0,Up.useMemo)((()=>(0,Bp.prism)((()=>i.current.prism.getValue()()))),[]),n)}function df(e,t){var n;const r=function(e){const[,t]=(0,Up.useState)(0);return(0,Up.useCallback)((()=>{t((e=>e+1))}),[])}(),i=(0,Up.useRef)(void 0);i.current||(Gp++,i.current={order:Gp,runUpdate:()=>{i.current.unmounted||r()},der:e,lastValue:void 0,unmounted:!1,queueUpdate:()=>{var e;Hp&&(null==(e=i.current.debug)||e.history.push("queueUpdate()")),Xp(i.current)},untap:e.onStale((()=>{Hp&&i.current.debug.history.push("onStale(cb)"),i.current.queueUpdate()}))},Hp&&(i.current.debug={label:t,traceOfFirstTimeRender:new Error,history:[]})),e!==i.current.der&&console.error("Argument `der` in `usePrismInstance(der)` should not change between renders."),(0,Up.useLayoutEffect)((()=>function(){i.current.unmounted=!0,i.current.untap(),Zp(i.current)}),[]),Zp(i.current);const o=i.current.der.getValue();return i.current.lastValue=o,Hp&&(null==(n=i.current.debug)||n.history.push("rendered")),o}var hf,pf=w({"../packages/react/src/index.ts"(){Np=k(n(771)),Bp=k(n(771)),Tp(),Fp=k(Qp()),Up=k(nf()),Vp=k(cf()),Hp=!1,Wp=(e,t)=>uf((()=>(0,Bp.val)(e)),[e],t),Gp=0,$p=[],qp=new Set,Kp=!1,Xp=e=>{Yp(e),Kp||(Kp=!0,(0,Fp.default)((()=>{(0,Vp.unstable_batchedUpdates)((function(){for(var e,t;$p.length>0;){const n=$p.shift();let r;qp.delete(n),Hp&&(null==(e=n.debug)||e.history.push("queue reached"));try{r=n.der.getValue()}catch(e){Hp&&(null==(t=n.debug)||t.history.push("queue: der.getValue() errored")),console.error("A `der.getValue()` in `usePrismInstance(der)` threw an error. This may be a zombie child issue, so we're gonna try to get its value again in a normal react render phase.If you see the same error again, then you either have an error in your prism code, or the deps array in `usePrism(fn, deps)` is missing a dependency and causing the prism to read stale values."),console.error(e),n.runUpdate();continue}r!==n.lastValue&&(n.lastValue=r,n.runUpdate())}}),1),Kp=!1})))},Yp=e=>{if(!qp.has(e))if(qp.add(e),0===$p.length)$p.push(e);else{const t=oh($p,(t=>t.order>=e.order));-1===t?$p.push(e):$p[t].order>e.order&&$p.splice(t,0,e)}},Zp=e=>{if(!qp.has(e))return;qp.delete(e);const t=oh($p,(t=>t===e));$p.splice(t,1)}}}),ff=S({"../node_modules/react-is/cjs/react-is.development.js"(e){"use strict";!function(){var t=60103,n=60106,r=60107,i=60108,o=60114,a=60109,s=60110,l=60112,c=60113,u=60120,d=60115,h=60116,p=60121,f=60122,m=60117,g=60129,v=60131;if("function"==typeof Symbol&&Symbol.for){var y=Symbol.for;t=y("react.element"),n=y("react.portal"),r=y("react.fragment"),i=y("react.strict_mode"),o=y("react.profiler"),a=y("react.provider"),s=y("react.context"),l=y("react.forward_ref"),c=y("react.suspense"),u=y("react.suspense_list"),d=y("react.memo"),h=y("react.lazy"),p=y("react.block"),f=y("react.server.block"),m=y("react.fundamental"),y("react.scope"),y("react.opaque.id"),g=y("react.debug_trace_mode"),y("react.offscreen"),v=y("react.legacy_hidden")}function b(e){if("object"==typeof e&&null!==e){var p=e.$$typeof;switch(p){case t:var f=e.type;switch(f){case r:case o:case i:case c:case u:return f;default:var m=f&&f.$$typeof;switch(m){case s:case l:case h:case d:case a:return m;default:return p}}case n:return p}}}var x=s,_=a,w=t,S=l,E=r,k=h,M=d,P=n,T=o,C=i,A=c,I=!1,R=!1;e.ContextConsumer=x,e.ContextProvider=_,e.Element=w,e.ForwardRef=S,e.Fragment=E,e.Lazy=k,e.Memo=M,e.Portal=P,e.Profiler=T,e.StrictMode=C,e.Suspense=A,e.isAsyncMode=function(e){return I||(I=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 18+.")),!1},e.isConcurrentMode=function(e){return R||(R=!0,console.warn("The ReactIs.isConcurrentMode() alias has been deprecated, and will be removed in React 18+.")),!1},e.isContextConsumer=function(e){return b(e)===s},e.isContextProvider=function(e){return b(e)===a},e.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},e.isForwardRef=function(e){return b(e)===l},e.isFragment=function(e){return b(e)===r},e.isLazy=function(e){return b(e)===h},e.isMemo=function(e){return b(e)===d},e.isPortal=function(e){return b(e)===n},e.isProfiler=function(e){return b(e)===o},e.isStrictMode=function(e){return b(e)===i},e.isSuspense=function(e){return b(e)===c},e.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||!(e!==r&&e!==o&&e!==g&&e!==i&&e!==c&&e!==u&&e!==v)||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===d||e.$$typeof===a||e.$$typeof===s||e.$$typeof===l||e.$$typeof===m||e.$$typeof===p||e[0]===f)},e.typeOf=b}()}}),mf=S({"../node_modules/react-is/index.js"(e,t){"use strict";t.exports=ff()}}),gf=S({"../node_modules/shallowequal/index.js"(e,t){t.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],d=t[c];if(!1===(i=n?n.call(r,u,d,c):void 0)||void 0===i&&u!==d)return!1}return!0}}});function vf(e){function t(e,r,l,c,h){for(var p,f,m,g,x,w=0,S=0,E=0,k=0,M=0,R=0,D=m=p=0,j=0,z=0,N=0,B=0,F=l.length,U=F-1,V="",H="",W="",G="";j<F;){if(f=l.charCodeAt(j),j===U&&S+k+E+w!==0&&(0!==S&&(f=47===S?10:47),k=E=w=0,F++,U++),S+k+E+w===0){if(j===U&&(0<z&&(V=V.replace(d,"")),0<V.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:V+=l.charAt(j)}f=59}switch(f){case 123:for(p=(V=V.trim()).charCodeAt(0),m=1,B=++j;j<F;){switch(f=l.charCodeAt(j)){case 123:m++;break;case 125:m--;break;case 47:switch(f=l.charCodeAt(j+1)){case 42:case 47:e:{for(D=j+1;D<U;++D)switch(l.charCodeAt(D)){case 47:if(42===f&&42===l.charCodeAt(D-1)&&j+2!==D){j=D+1;break e}break;case 10:if(47===f){j=D+1;break e}}j=D}}break;case 91:f++;case 40:f++;case 34:case 39:for(;j++<U&&l.charCodeAt(j)!==f;);}if(0===m)break;j++}if(m=l.substring(B,j),0===p&&(p=(V=V.replace(u,"").trim()).charCodeAt(0)),64===p){switch(0<z&&(V=V.replace(d,"")),f=V.charCodeAt(1)){case 100:case 109:case 115:case 45:z=r;break;default:z=I}if(B=(m=t(r,z,m,f,h+1)).length,0<O&&(x=s(3,m,z=n(I,V,N),r,T,P,B,f,h,c),V=z.join(""),void 0!==x&&0===(B=(m=x.trim()).length)&&(f=0,m="")),0<B)switch(f){case 115:V=V.replace(_,a);case 100:case 109:case 45:m=V+"{"+m+"}";break;case 107:m=(V=V.replace(v,"$1 $2"))+"{"+m+"}",m=1===A||2===A&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=V+m,112===c&&(H+=m,m="")}else m=""}else m=t(r,n(r,V,N),m,c,h+1);W+=m,m=N=z=D=p=0,V="",f=l.charCodeAt(++j);break;case 125:case 59:if(1<(B=(V=(0<z?V.replace(d,""):V).trim()).length))switch(0===D&&(p=V.charCodeAt(0),45===p||96<p&&123>p)&&(B=(V=V.replace(" ",":")).length),0<O&&void 0!==(x=s(1,V,r,e,T,P,H.length,c,h,c))&&0===(B=(V=x.trim()).length)&&(V="\0\0"),p=V.charCodeAt(0),f=V.charCodeAt(1),p){case 0:break;case 64:if(105===f||99===f){G+=V+l.charAt(j);break}default:58!==V.charCodeAt(B-1)&&(H+=i(V,p,f,V.charCodeAt(2)))}N=z=D=p=0,V="",f=l.charCodeAt(++j)}}switch(f){case 13:case 10:47===S?S=0:1+p===0&&107!==c&&0<V.length&&(z=1,V+="\0"),0<O*L&&s(0,V,r,e,T,P,H.length,c,h,c),P=1,T++;break;case 59:case 125:if(S+k+E+w===0){P++;break}default:switch(P++,g=l.charAt(j),f){case 9:case 32:if(k+w+S===0)switch(M){case 44:case 58:case 9:case 32:g="";break;default:32!==f&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:k+S+w===0&&(z=N=1,g="\f"+g);break;case 108:if(k+S+w+C===0&&0<D)switch(j-D){case 2:112===M&&58===l.charCodeAt(j-3)&&(C=M);case 8:111===R&&(C=R)}break;case 58:k+S+w===0&&(D=j);break;case 44:S+E+k+w===0&&(z=1,g+="\r");break;case 34:case 39:0===S&&(k=k===f?0:0===k?f:k);break;case 91:k+S+E===0&&w++;break;case 93:k+S+E===0&&w--;break;case 41:k+S+w===0&&E--;break;case 40:k+S+w===0&&(0===p&&(2*M+3*R==533||(p=1)),E++);break;case 64:S+E+k+w+D+m===0&&(m=1);break;case 42:case 47:if(!(0<k+w+E))switch(S){case 0:switch(2*f+3*l.charCodeAt(j+1)){case 235:S=47;break;case 220:B=j,S=42}break;case 42:47===f&&42===M&&B+2!==j&&(33===l.charCodeAt(B+2)&&(H+=l.substring(B,j+1)),g="",S=0)}}0===S&&(V+=g)}R=M,M=f,j++}if(0<(B=H.length)){if(z=r,0<O&&void 0!==(x=s(2,H,z,e,T,P,B,c,h,c))&&0===(H=x).length)return G+H+W;if(H=z.join(",")+"{"+H+"}",A*C!=0){switch(2!==A||o(H,2)||(C=0),C){case 111:H=H.replace(b,":-moz-$1")+H;break;case 112:H=H.replace(y,"::-webkit-input-$1")+H.replace(y,"::-moz-$1")+H.replace(y,":-ms-input-$1")+H}C=0}}return G+H+W}function n(e,t,n){var i=t.trim().split(m);t=i;var o=i.length,a=e.length;switch(a){case 0:case 1:var s=0;for(e=0===a?"":e[0]+" ";s<o;++s)t[s]=r(e,t[s],n).trim();break;default:var l=s=0;for(t=[];s<o;++s)for(var c=0;c<a;++c)t[l++]=r(e[c]+" ",i[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var a=e+";",s=2*t+3*n+4*r;if(944===s){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===A||2===A&&o(l,1)?"-webkit-"+l+l:l}if(0===A||2===A&&!o(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(M,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return p.test(a)?a.replace(h,":-webkit-")+a.replace(h,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(x,"tb");break;case 232:l=a.replace(x,"tb-rl");break;case 220:l=a.replace(x,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,s=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(S,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(S,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===k.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,n+r===211&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+a}return a}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),D(2!==t?r:r.replace(E,"$1"),n,t)}function a(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,i,o,a,s,l,u){for(var d,h=0,p=t;h<O;++h)switch(d=R[h].call(c,e,p,n,r,i,o,a,s,l,u)){case void 0:case!1:case!0:case null:break;default:p=d}if(p!==t)return p}function l(e){return void 0!==(e=e.prefix)&&(D=null,e?"function"!=typeof e?A=1:(A=2,D=e):A=0),l}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<O){var i=s(-1,n,r,r,T,P,0,0,0,0);void 0!==i&&"string"==typeof i&&(n=i)}var o=t(I,r,n,0,0);return 0<O&&void 0!==(i=s(-2,o,r,r,T,P,o.length,0,0,0))&&(o=i),C=0,P=T=1,o}var u=/^\0+/g,d=/[\0\r\f]/g,h=/: */g,p=/zoo|gra/,f=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,_=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,E=/[^]*?(:[rp][el]a[\w-]+)[^]*/,k=/stretch|:\s*\w+\-(?:conte|avail)/,M=/([^-])(image-set\()/,P=1,T=1,C=0,A=1,I=[],R=[],O=0,D=null,L=0;return c.use=function e(t){switch(t){case void 0:case null:O=R.length=0;break;default:if("function"==typeof t)R[O++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else L=0|!!t}return e},c.set=l,void 0!==e&&l(e),c}var yf,bf,xf,_f,wf,Sf,Ef,kf,Mf,Pf,Tf,Cf,Af,If,Rf,Of,Df,Lf,jf,zf,Nf,Bf,Ff,Uf,Vf,Hf,Wf,Gf,$f,qf,Kf,Xf,Yf,Zf,Jf,Qf,em,tm,nm,rm,im,om,am,sm,lm,cm,um,dm,hm,pm,fm,mm,gm,vm,ym,bm,xm,_m,wm,Sm,Em,km,Mm,Pm,Tm,Cm,Am,Im=w({"../node_modules/@emotion/stylis/dist/stylis.browser.esm.js"(){hf=vf}}),Rm=w({"../node_modules/@emotion/unitless/dist/unitless.browser.esm.js"(){yf={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}}}),Om=S({"../node_modules/@emotion/memoize/dist/emotion-memoize.cjs.dev.js"(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}}}),Dm=S({"../node_modules/@emotion/memoize/dist/emotion-memoize.cjs.js"(e,t){"use strict";t.exports=Om()}}),Lm=S({"../node_modules/@emotion/is-prop-valid/dist/emotion-is-prop-valid.cjs.dev.js"(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Dm();function n(e){return e&&e.__esModule?e:{default:e}}var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i=n(t).default((function(e){return r.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));e.default=i}}),jm=S({"../node_modules/@emotion/is-prop-valid/dist/emotion-is-prop-valid.cjs.js"(e,t){"use strict";t.exports=Lm()}}),zm=S({"../node_modules/hoist-non-react-statics/node_modules/react-is/cjs/react-is.development.js"(e){"use strict";!function(){var t="function"==typeof Symbol&&Symbol.for,n=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,o=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,s=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,d=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,p=t?Symbol.for("react.suspense_list"):60120,f=t?Symbol.for("react.memo"):60115,m=t?Symbol.for("react.lazy"):60116,g=t?Symbol.for("react.block"):60121,v=t?Symbol.for("react.fundamental"):60117,y=t?Symbol.for("react.responder"):60118,b=t?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var p=e.type;switch(p){case c:case u:case i:case a:case o:case h:return p;default:var g=p&&p.$$typeof;switch(g){case l:case d:case m:case f:case s:return g;default:return t}}case r:return t}}}var _=c,w=u,S=l,E=s,k=n,M=d,P=i,T=m,C=f,A=r,I=a,R=o,O=h,D=!1;function L(e){return x(e)===u}e.AsyncMode=_,e.ConcurrentMode=w,e.ContextConsumer=S,e.ContextProvider=E,e.Element=k,e.ForwardRef=M,e.Fragment=P,e.Lazy=T,e.Memo=C,e.Portal=A,e.Profiler=I,e.StrictMode=R,e.Suspense=O,e.isAsyncMode=function(e){return D||(D=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),L(e)||x(e)===c},e.isConcurrentMode=L,e.isContextConsumer=function(e){return x(e)===l},e.isContextProvider=function(e){return x(e)===s},e.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},e.isForwardRef=function(e){return x(e)===d},e.isFragment=function(e){return x(e)===i},e.isLazy=function(e){return x(e)===m},e.isMemo=function(e){return x(e)===f},e.isPortal=function(e){return x(e)===r},e.isProfiler=function(e){return x(e)===a},e.isStrictMode=function(e){return x(e)===o},e.isSuspense=function(e){return x(e)===h},e.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===u||e===a||e===o||e===h||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===f||e.$$typeof===s||e.$$typeof===l||e.$$typeof===d||e.$$typeof===v||e.$$typeof===y||e.$$typeof===b||e.$$typeof===g)},e.typeOf=x}()}}),Nm=S({"../node_modules/hoist-non-react-statics/node_modules/react-is/index.js"(e,t){"use strict";t.exports=zm()}}),Bm=S({"../node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js"(e,t){"use strict";var n=Nm(),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function s(e){return n.isMemo(e)?o:a[e.$$typeof]||r}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;t.exports=function e(t,n,r){if("string"!=typeof n){if(p){var o=h(n);o&&o!==p&&e(t,o,r)}var a=c(n);u&&(a=a.concat(u(n)));for(var f=s(t),m=s(n),g=0;g<a.length;++g){var v=a[g];if(!(i[v]||r&&r[v]||m&&m[v]||f&&f[v])){var y=d(n,v);try{l(t,v,y)}catch(e){}}}}return t}}});function Fm(){return(Fm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Um(e){return"function"==typeof e}function Vm(e){return"string"==typeof e&&e||e.displayName||e.name||"Component"}function Hm(e){return e&&"string"==typeof e.styledComponentId}function Wm(){for(var e=arguments.length<=0?void 0:arguments[0],t=[],n=1,r=arguments.length;n<r;n+=1)t.push(n<0||arguments.length<=n?void 0:arguments[n]);return t.forEach((function(t){e=e.replace(/%[a-z]/,t)})),e}function Gm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error(Wm.apply(void 0,[Rf[e]].concat(n)).trim())}function $m(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Qf(t%52)+n;return(Qf(t%52)+n).replace(Jf,"$1-$2")}function qm(e){var t,n,r,i,o=void 0===e?Pf:e,a=o.options,s=void 0===a?Pf:a,l=o.plugins,c=void 0===l?Mf:l,u=new hf(s),d=[],h=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,o,a,s,l,c,u,d){switch(n){case 1:if(0===u&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===d?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){d.push(e)})),p=function(e,r,o){return 0===r&&-1!==om.indexOf(o[n.length])||o.match(i)?e:"."+t};function f(e,o,a,s){void 0===s&&(s="&");var l=e.replace(im,""),c=o&&a?a+" "+o+" { "+l+" }":l;return t=s,n=o,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),u(a||!o?"":o,c)}return u.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,p))},h,function(e){if(-2===e){var t=d;return d=[],t}}])),f.hash=c.length?c.reduce((function(e,t){return t.name||Gm(15),em(e,t.name)}),5381).toString():"",f}function Km(){return(0,xf.useContext)(am)||lm}function Xm(){return(0,xf.useContext)(sm)||cm}function Ym(e){var t=(0,xf.useState)(e.stylisPlugins),n=t[0],r=t[1],i=Km(),o=(0,xf.useMemo)((function(){var t=i;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),a=(0,xf.useMemo)((function(){return qm({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,xf.useEffect)((function(){(0,_f.default)(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),xf.default.createElement(am.Provider,{value:o},xf.default.createElement(sm.Provider,{value:a},xf.default.Children.only(e.children)))}function Zm(e){return dm.test(e)?e.replace(hm,fm).replace(pm,"-ms-"):e}function Jm(e,t,n,r){if(Array.isArray(e)){for(var i,o=[],a=0,s=e.length;a<s;a+=1)""!==(i=Jm(e[a],t,n,r))&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));return o}if(mm(e))return"";if(Hm(e))return"."+e.styledComponentId;if(Um(e)){if("function"!=typeof(c=e)||c.prototype&&c.prototype.isReactComponent||!t)return e;var l=e(t);return(0,bf.isElement)(l)&&console.warn(Vm(e)+" is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details."),Jm(l,t,n,r)}var c;return e instanceof um?n?(e.inject(n,r),e.getName(r)):e:kf(e)?function e(t,n){var r,i,o=[];for(var a in t)t.hasOwnProperty(a)&&!mm(t[a])&&(Array.isArray(t[a])&&t[a].isCss||Um(t[a])?o.push(Zm(a)+":",t[a],";"):kf(t[a])?o.push.apply(o,e(t[a],a)):o.push(Zm(a)+": "+(r=a,(null==(i=t[a])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in yf?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(e):e.toString()}function Qm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Um(e)||kf(e)?gm(Jm(Ef(Mf,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:gm(Jm(Ef(e,n)))}function eg(e){return e.replace(_m,"-").replace(wm,"")}function tg(e){return"string"==typeof e&&e.charAt(0)===e.charAt(0).toLowerCase()}function ng(e,t,n){var r=e[n];Em(t)&&Em(r)?rg(r,t):e[n]=t}function rg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(Em(a))for(var s in a)km(s)&&ng(e,a[s],s)}return e}function ig(e,t,n){var r,i=Hm(e),o=!tg(e),a=t.attrs,s=void 0===a?Mf:a,l=t.componentId,c=void 0===l?function(e,t){var n="string"!=typeof e?"sc":eg(e);Pm[n]=(Pm[n]||0)+1;var r=n+"-"+Sm("5.3.5"+n+Pm[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):l,u=t.displayName,d=void 0===u?tg(r=e)?"styled."+r:"Styled("+Vm(r)+")":u,h=t.displayName&&t.componentId?eg(t.displayName)+"-"+t.componentId:t.componentId||c,p=i&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,f=t.shouldForwardProp;i&&e.shouldForwardProp&&(f=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var m,g=new rm(n,h,i?e.componentStyle:void 0),v=g.isStatic&&0===s.length,y=function(e,t){return function(e,t,n,r){var i=e.attrs,o=e.componentStyle,a=e.defaultProps,s=e.foldedComponentIds,l=e.shouldForwardProp,c=e.styledComponentId,u=e.target;(0,xf.useDebugValue)(c);var d,h,p,f,m,g,v,y=function(e,t,n){void 0===e&&(e=Pf);var r=Fm({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,o,a=e;for(t in Um(a)&&(a=a(r)),a)r[t]=i[t]="className"===t?(n=i[t],o=a[t],n&&o?n+" "+o:n||o):a[t]})),[r,i]}(xm(t,(0,xf.useContext)(Mm),a)||Pf,t,i),b=y[0],x=y[1],_=(d=o,h=r,p=b,f=e.warnTooManyClasses,m=Km(),g=Xm(),v=h?d.generateAndInjectStyles(Pf,m,g):d.generateAndInjectStyles(p,m,g),(0,xf.useDebugValue)(v),!h&&f&&f(v),v),w=n,S=x.$as||t.$as||x.as||t.as||u,E=tg(S),k=x!==t?Fm({},t,{},x):t,M={};for(var P in k)"$"!==P[0]&&"as"!==P&&("forwardedAs"===P?M.as=k[P]:(l?l(P,wf.default,S):!E||(0,wf.default)(P))&&(M[P]=k[P]));return t.style&&x.style!==t.style&&(M.style=Fm({},t.style,{},x.style)),M.className=Array.prototype.concat(s,c,_!==c?_:null,t.className,x.className).filter(Boolean).join(" "),M.ref=w,(0,xf.createElement)(S,M)}(m,e,t,v)};return y.displayName=d,(m=xf.default.forwardRef(y)).attrs=p,m.componentStyle=g,m.displayName=d,m.shouldForwardProp=f,m.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Mf,m.styledComponentId=h,m.target=i?e.target:e,m.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),o=r&&r+"-"+(tg(e)?e:eg(Vm(e)));return ig(e,Fm({},i,{attrs:p,componentId:o}),n)},Object.defineProperty(m,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?rg({},e.defaultProps,t):t}}),bm(d,h),m.warnTooManyClasses=function(e,t){var n={},r=!1;return function(i){if(!r&&(n[i]=!0,Object.keys(n).length>=200)){var o=t?' with the id of "'+t+'"':"";console.warn("Over 200 classes were generated for component "+e+o+".\nConsider using the attrs method, together with a style object for frequently changed styles.\nExample:\n  const Component = styled.div.attrs(props => ({\n    style: {\n      background: props.background,\n    },\n  }))`width: 100%;`\n\n  <Component />"),r=!0,n={}}}}(d,h),m.toString=function(){return"."+m.styledComponentId},o&&(0,Sf.default)(m,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),m}function og(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Qm.apply(void 0,[e].concat(n)),o="sc-global-"+Sm(JSON.stringify(i)),a=new Cm(i,o);function s(e){var t=Km(),n=Xm(),r=(0,xf.useContext)(Mm),s=(0,xf.useRef)(t.allocateGSInstance(o)).current;return xf.default.Children.count(e.children)&&console.warn("The global style component "+o+" was given child JSX. createGlobalStyle does not render children."),i.some((function(e){return"string"==typeof e&&-1!==e.indexOf("@import")}))&&console.warn("Please do not use @import CSS syntax in createGlobalStyle at this time, as the CSSOM APIs we use in production do not handle it well. Instead, we recommend using a library such as react-helmet to inject a typical <link> meta tag to the stylesheet, or simply embedding it manually in your index.html <head> section for a simpler app."),t.server&&l(s,e,t,r,n),(0,xf.useLayoutEffect)((function(){if(!t.server)return l(s,e,t,r,n),function(){return a.removeStyles(s,t)}}),[s,e,t,r,n]),null}function l(e,t,n,r,i){if(a.isStatic)a.renderStyles(e,If,n,i);else{var o=Fm({},t,{theme:xm(t,r,s.defaultProps)});a.renderStyles(e,o,n,i)}}return bm(o),xf.default.memo(s)}var ag,sg,lg,cg,ug,dg,hg,pg,fg,mg=w({"../node_modules/styled-components/dist/styled-components.browser.esm.js"(){bf=k(mf()),xf=k(nf()),_f=k(gf()),Im(),Rm(),wf=k(jm()),Sf=k(Bm()),Ef=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},kf=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,bf.typeOf)(e)},Mf=Object.freeze([]),Pf=Object.freeze({}),Tf="undefined"!=typeof process&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",Cf="undefined"!=typeof window&&"HTMLElement"in window,Af=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"==typeof process||void 0===process.env.SC_DISABLE_SPEEDY||""===process.env.SC_DISABLE_SPEEDY||"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY),If={},Rf={1:"Cannot create styled-component for component: %s.\n\n",2:"Can't collect styles once you've consumed a `ServerStyleSheet`'s styles! `ServerStyleSheet` is a one off instance for each server-side render cycle.\n\n- Are you trying to reuse it across renders?\n- Are you accidentally calling collectStyles twice?\n\n",3:"Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.\n\n",4:"The `StyleSheetManager` expects a valid target or sheet prop!\n\n- Does this error occur on the client and is your target falsy?\n- Does this error occur on the server and is the sheet falsy?\n\n",5:"The clone method cannot be used on the client!\n\n- Are you running in a client-like environment on the server?\n- Are you trying to run SSR on the client?\n\n",6:"Trying to insert a new style tag, but the given Node is unmounted!\n\n- Are you using a custom target that isn't mounted?\n- Does your document not have a valid head element?\n- Have you accidentally removed a style tag manually?\n\n",7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:'ThemeProvider: Please make your "theme" prop an object.\n\n',9:"Missing document `<head>`\n\n",10:"Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021\n\n",11:"_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.\n\n",12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:"%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.\n\n",14:'ThemeProvider: "theme" prop is required.\n\n',15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:"Reached the limit of how many styled components may be created at group %s.\nYou may only create up to 1,073,741,824 components. If you're creating components dynamically,\nas for instance in your render method then you may be running into this limitation.\n\n",17:"CSSStyleSheet could not be found on HTMLStyleElement.\nHas styled-components' style tag been unmounted or altered by another script?\n"},Of=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&Gm(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),s=0,l=t.length;s<l;s++)this.tag.insertRule(a,t[s])&&(this.groupSizes[e]++,a++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+=this.tag.getRule(o)+"/*!sc*/\n";return t},e}(),Df=new Map,Lf=new Map,jf=1,zf=function(e){if(Df.has(e))return Df.get(e);for(;Lf.has(jf);)jf++;var t=jf++;return((0|t)<0||t>1<<30)&&Gm(16,""+t),Df.set(e,t),Lf.set(t,e),t},Nf=function(e){return Lf.get(e)},Bf=function(e,t){t>=jf&&(jf=t+1),Df.set(e,t),Lf.set(t,e)},Ff="style["+Tf+'][data-styled-version="5.3.5"]',Uf=new RegExp("^"+Tf+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),Vf=function(e,t,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&e.registerName(t,r)},Hf=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,o=n.length;i<o;i++){var a=n[i].trim();if(a){var s=a.match(Uf);if(s){var l=0|parseInt(s[1],10),c=s[2];0!==l&&(Bf(c,l),Vf(e,c,s[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(a)}}},Wf=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},Gf=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(Tf))return r}}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(Tf,"active"),r.setAttribute("data-styled-version","5.3.5");var a=Wf();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},$f=function(){function e(e){var t=this.element=Gf(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}Gm(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),qf=function(){function e(e){var t=this.element=Gf(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Kf=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Xf=Cf,Yf={isServer:!Cf,useCSSOMInjection:!Af},Zf=function(){function e(e,t,n){void 0===e&&(e=Pf),void 0===t&&(t={}),this.options=Fm({},Yf,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Cf&&Xf&&(Xf=!1,function(e){for(var t=document.querySelectorAll(Ff),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(Tf)&&(Hf(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return zf(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(Fm({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new Kf(i):r?new $f(i):new qf(i),new Of(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(zf(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(zf(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(zf(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var o=Nf(i);if(void 0!==o){var a=e.names.get(o),s=t.getGroup(i);if(a&&s&&a.size){var l=Tf+".g"+i+'[id="'+o+'"]',c="";void 0!==a&&a.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+l+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),Jf=/(a)(d)/gi,Qf=function(e){return String.fromCharCode(e+(e>25?39:97))},em=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},nm=(tm=function(e){return em(5381,e)})("5.3.5"),rm=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=!1,this.componentId=t,this.baseHash=em(nm,t),this.baseStyle=n,Zf.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var o=Jm(this.rules,e,t,n).join(""),a=$m(em(this.baseHash,o)>>>0);if(!t.hasNameForId(r,a)){var s=n(o,"."+a,void 0,r);t.insertRules(r,a,s)}i.push(a),this.staticRulesId=a}else{for(var l=this.rules.length,c=em(this.baseHash,n.hash),u="",d=0;d<l;d++){var h=this.rules[d];if("string"==typeof h)u+=h,c=em(c,h+d);else if(h){var p=Jm(h,e,t,n),f=Array.isArray(p)?p.join(""):p;c=em(c,f+d),u+=f}}if(u){var m=$m(c>>>0);if(!t.hasNameForId(r,m)){var g=n(u,"."+m,void 0,r);t.insertRules(r,m,g)}i.push(m)}}return i.join(" ")},e}(),im=/^\s*\/\/.*$/gm,om=[":","[",".","#"],(am=xf.default.createContext()).Consumer,(sm=xf.default.createContext()).Consumer,lm=new Zf,cm=qm(),um=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=cm);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return Gm(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=cm),this.name+e.hash},e}(),dm=/([A-Z])/,hm=/([A-Z])/g,pm=/^ms-/,fm=function(e){return"-"+e.toLowerCase()},mm=function(e){return null==e||!1===e||""===e},gm=function(e){return Array.isArray(e)&&(e.isCss=!0),e},vm=/invalid hook call/i,ym=new Set,bm=function(e,t){var n="The component "+e+(t?' with the id of "'+t+'"':"")+" has been created dynamically.\nYou may see this warning because you've called styled inside another component.\nTo resolve this only create new StyledComponents outside of any render method and function component.",r=console.error;try{var i=!0;console.error=function(e){if(vm.test(e))i=!1,ym.delete(n);else{for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];r.apply(void 0,[e].concat(o))}},(0,xf.useRef)(),i&&!ym.has(n)&&(console.warn(n),ym.add(n))}catch(e){vm.test(e.message)&&ym.delete(n)}finally{console.error=r}},xm=function(e,t,n){return void 0===n&&(n=Pf),e.theme!==n.theme&&e.theme||t||n.theme},_m=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,wm=/(^-|-$)/g,Sm=function(e){return $m(tm(e)>>>0)},Em=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},km=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e},(Mm=xf.default.createContext()).Consumer,Pm={},Tm=function(e){return function e(t,n,r){if(void 0===r&&(r=Pf),!(0,bf.isValidElementType)(n))return Gm(1,String(n));var i=function(){return t(n,r,Qm.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,Fm({},r,{},i))},i.attrs=function(i){return e(t,n,Fm({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(ig,e)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Tm[e]=Tm(e)})),Cm=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=function(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Um(n)&&!Hm(n))return!1}return!0}(e),Zf.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var i=r(Jm(this.rules,t,n,r).join(""),""),o=this.componentId+e;n.insertRules(o,o,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&Zf.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}(),function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Wf();return"<style "+[n&&'nonce="'+n+'"',Tf+'="true"','data-styled-version="5.3.5"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?Gm(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return Gm(2);var n=((t={})[Tf]="",t["data-styled-version"]="5.3.5",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=Wf();return r&&(n.nonce=r),[xf.default.createElement("style",Fm({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Zf({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?Gm(2):xf.default.createElement(Ym,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return Gm(3)}}(),"undefined"!=typeof navigator&&"ReactNative"===navigator.product&&console.warn("It looks like you've imported 'styled-components' on React Native.\nPerhaps you're looking to import 'styled-components/native'?\nRead more about this at https://www.styled-components.com/docs/basics#react-native"),"undefined"!=typeof window&&(window["__styled-components-init__"]=window["__styled-components-init__"]||0,1===window["__styled-components-init__"]&&console.warn("It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.\n\nSee https://s-c.sh/2BAXzed for more info."),window["__styled-components-init__"]+=1),Am=Tm}}),gg=w({"studio/src/uiComponents/PointerEventsHandler.tsx"(){ag=k(nf()),mg(),sg="--lockedCursor",lg=Am.div`
  pointer-events: auto;
  &.normal {
    pointer-events: none;
  }
`,cg=Am.div`
  position: absolute;
  inset: 0;
  pointer-events: none;

  #pointer-root:not(.normal) > & {
    pointer-events: auto;
  }
`,ug=(0,ag.createContext)({}),dg=(e,t,n)=>{const r=(0,ag.useContext)(ug);(0,ag.useLayoutEffect)((()=>{if(e)return r.getLock(t,n)}),[e,t,n])},hg=e=>{var t,n,r,i;const[o,a]=(0,ag.useState)([]),s=(0,ag.useMemo)((()=>({getLock:(e,t)=>{const n={className:e,cursor:t};return a((e=>[...e,n])),()=>{a((e=>e.filter((e=>e!==n))))}}})),[]),l=null!=(n=null==(t=o[0])?void 0:t.cursor)?n:"";return ag.default.createElement(ug.Provider,{value:s},ag.default.createElement(lg,{id:"pointer-root",className:(null!=(i=null==(r=o[0])?void 0:r.className)?i:"normal")+" "+e.className},ag.default.createElement(cg,{style:{cursor:l,[sg]:l}},e.children)))}}});function vg(e){return pg.default.createElement(fg.Provider,{value:e.logger},e.children)}function yg(e,t){const n=(0,pg.useContext)(fg);return(0,pg.useMemo)((()=>e?n.named(e,t):n),[n,e,t])}var bg,xg,_g,wg=w({"studio/src/uiComponents/useLogger.tsx"(){pg=k(nf()),fg=pg.default.createContext(null)}});function Sg(e){const t=function(){const e=yg("PointerCapturing");let t=bg.default.useRef(null);const n=()=>null!=t.current;return r=>{let i;const o=e=>(i=e,t.current=e,e);return{capturing:{capturePointer(n){if(e._debug("Capturing pointer",{forDebugName:r,reason:n}),null!=t.current)throw new Error(`"${r}" attempted capturing pointer for "${n}" while already captured by "${t.current.debugOwnerName}" for "${t.current.debugReason}"`);const i=o({debugOwnerName:r,debugReason:n});return{isCapturing:()=>i===t.current,release:()=>i===t.current&&(e._debug("Releasing pointer",{forDebugName:r,reason:n}),o(null),!0)}},isPointerBeingCaptured:n},forceRelease(){i&&t.current===i&&(e._debug("Force releasing pointer",{localCapture:i}),o(null))}}}}();return bg.default.createElement(xg.Provider,{value:t},bg.default.createElement(_g,{children:e.children}))}function Eg(e){const t=(0,bg.useContext)(xg),n=(0,bg.useMemo)((()=>t(e)),[e,t]);return(0,bg.useEffect)((()=>()=>{n.forceRelease()}),[n]),n.capturing}var kg,Mg,Pg,Tg=w({"studio/src/UIRoot/PointerCapturing.tsx"(){bg=k(nf()),wg(),xg=bg.default.createContext(null),_g=bg.default.memo((({children:e})=>bg.default.createElement(bg.default.Fragment,null,e)))}}),Cg=w({"shared/src/utils/noop.ts"(){kg=()=>{}}}),Ag=w({"studio/src/uiComponents/isSafari.ts"(){Mg="undefined"!=typeof window&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}});function Ig(e){const t=(0,Pg.useMemo)((()=>{let t=e;return{get current(){return t},set current(e){t=e,r(e)}}}),[]),[n,r]=(0,Pg.useState)((()=>e));return[t,n]}var Rg,Og,Dg,Lg,jg=w({"studio/src/utils/useRefAndState.ts"(){Pg=k(nf())}});function zg(e,t){const n=(0,Rg.useRef)(t);n.current=t;const r=t.shouldPointerLock&&!Mg,i=(0,Rg.useRef)({domDragStarted:!1}),{capturePointer:o}=Eg(`useDrag for ${t.debugName}`),a=(0,Rg.useRef)({onDrag:kg,onDragEnd:kg,onClick:kg}),s=(0,Rg.useRef)(),[l,c]=Ig(!1);return(0,Rg.useLayoutEffect)((()=>{if(!e)return;const c=()=>{const e=i.current.domDragStarted&&i.current.detection.detected;l.current!==e&&(l.current=e)},u=t=>{if(!i.current.domDragStarted)return;const n=i.current;if(!function(e,t){return(!t.detection.detected||t.detection.detected&&t.detection.dragEventCount<3)&&(Math.abs(e.movementX)>Lg||Math.abs(e.movementY)>Lg)}(t,n)&&(n.detection.detected||(n.detection.totalDistanceMoved+=Math.abs(t.movementY)+Math.abs(t.movementX),n.detection.totalDistanceMoved>Dg&&(r&&e.requestPointerLock(),n.detection={detected:!0,dragMovement:{x:0,y:0},dragEventCount:0},c())),n.detection.detected)){n.detection.dragEventCount+=1;const{dragMovement:e}=n.detection;if(r)e.x+=t.movementX,e.y+=t.movementY;else{const{startPos:r}=n;e.x=t.screenX-r.x,e.y=t.screenY-r.y}a.current.onDrag(e.x,e.y,t,t.movementX,t.movementY)}},d=e=>{if(h(),!i.current.domDragStarted)return;const n=i.current.detection.detected;i.current={domDragStarted:!1},t.shouldPointerLock&&!Mg&&document.exitPointerLock(),a.current.onDragEnd(n),window.focus(),n||a.current.onClick(e),c()},h=()=>{var e;null==(e=s.current)||e.release(),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",d)},p=e=>{n.current.disabled||i.current.domDragStarted&&i.current.detection.detected&&(n.current.dontBlockMouseDown||(e.stopPropagation(),e.preventDefault()),i.current.detection={detected:!1,totalDistanceMoved:0},c())},f=e=>{(e=>{var t,r,l,h;null==(t=s.current)||t.release();const p=n.current;if(!0===p.disabled)return;if(!(null!=(r=p.buttons)?r:[0]).includes(e.button))return;const f=p.onDragStart(e);!1!==f&&(a.current.onDrag=f.onDrag,a.current.onDragEnd=null!=(l=f.onDragEnd)?l:kg,a.current.onClick=null!=(h=f.onClick)?h:kg,s.current=o("Drag start"),p.dontBlockMouseDown||(e.stopPropagation(),e.preventDefault()),i.current={domDragStarted:!0,startPos:{x:e.screenX,y:e.screenY},detection:{detected:!1,totalDistanceMoved:0}},c(),document.addEventListener("mousemove",u),document.addEventListener("mouseup",d))})(e)};return e.addEventListener("mousedown",f),e.addEventListener("click",p),()=>{var t,n;h(),e.removeEventListener("mousedown",f),e.removeEventListener("click",p),i.current.domDragStarted&&(null==(n=(t=a.current).onDragEnd)||n.call(t,i.current.detection.detected)),i.current={domDragStarted:!1},c()}}),[e]),dg(c&&!!t.lockCSSCursorTo,"dragging",t.lockCSSCursorTo),[c]}var Ng,Bg,Fg=w({"studio/src/uiComponents/useDrag.ts"(){var e;Rg=k(nf()),gg(),Tg(),Cg(),Ag(),jg(),(e=Og||(Og={}))[e.Left=0]="Left",e[e.Middle=1]="Middle",Dg=3,Lg=100}}),Ug=w({"studio/src/uiComponents/useKeyDownCallback.tsx"(){Ng=k(nf())}});function Vg(e){const[t,n]=(0,Bg.useState)(!1);return function(e,t){const n=(0,Ng.useRef)({combo:e,listener:t});n.current={combo:e,listener:t},(0,Ng.useEffect)((()=>{function e(e){e.key===n.current.combo&&n.current.listener({down:!0,event:e})}function t(e){e.key===n.current.combo&&n.current.listener({down:!1,event:e})}function r(e){n.current.listener({down:!1,event:void 0})}return document.addEventListener("keydown",e),document.addEventListener("keyup",t),window.addEventListener("blur",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t),window.removeEventListener("blur",r)}}),[])}(e,(({down:e})=>{n(e)})),t}var Hg,Wg,Gg,$g=w({"studio/src/uiComponents/useKeyDown.ts"(){Bg=k(nf()),Ug()}}),qg=w({"studio/src/uiComponents/useValToAtom.ts"(){Hg=k(n(771)),Wg=k(nf())}});function Kg(e,t,n){const r=t((0,Gg.pointer)({root:{},path:[]}));cp(e,(0,Gg.getPointerParts)(r).path,n)}var Xg,Yg,Zg,Jg=w({"shared/src/utils/mutableSetDeep.ts"(){Gg=k(n(771)),xp()}}),Qg=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/DopeSnap.tsx"(){Xg="data-pos",Yg={checkIfMouseEventSnapToPos(e,t){const n=e.composedPath().find((e=>e instanceof Element&&e!==(null==t?void 0:t.ignore)&&e.hasAttribute(Xg)));if(n){const e=parseFloat(n.getAttribute(Xg));if(isFinite(e))return e}return null},includePositionSnapAttrs:e=>({[Xg]:e})}}});function ev(e){const t="sheet"===e.type?function(e){return e.children.flatMap(nv)}(e):nv(e);return{byPosition:tv(t),tracks:t}}function tv(e){const t=new Map;for(const n of e)for(const e of n.data.keyframes){let r=t.get(e.position);r||(r=[],t.set(e.position,r)),r.push({kf:e,track:n,itemKey:Rp.forTrackKeyframe(n.sheetObject,n.id,e.id)})}return t}function nv(e){return e.children.flatMap((e=>"propWithChildren"===e.type?nv(e):function(e){const t=e.sheetObject,n=t.address.projectId,r=T().atomP.historic.coreByProject[n].sheetsById[t.address.sheetId].sequence.tracksByObject[t.address.objectKey],i=(0,Zg.val)(r.trackIdByPropPath[qe(e.pathToProp)]);if(!i)return[];const o=(0,Zg.val)(r.trackData[i]);return o?[{id:i,data:o,sheetObject:t}]:[]}(e)))}function rv(e,t){return Ep(e.children.flatMap((e=>"propWithChildren"===e.type?rv(e,t):function(e,t){var n,r;const i=e.sheetObject,o=i.address.projectId,a=T().atomP.historic.coreByProject[o].sheetsById[i.address.sheetId].sequence.tracksByObject[i.address.objectKey],s=(0,Zg.val)(a.trackIdByPropPath[qe(e.pathToProp)]);return s&&null!=(r=null==(n=t[i.address.objectKey])?void 0:n[s])?r:[]}(e,t))))}var iv,ov,av,sv,lv,cv,uv,dv,hv,pv,fv,mv,gv,vv,yv=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/collectAggregateKeyframes.tsx"(){I(),Zg=k(n(771)),jp(),ct(),Tp()}}),bv=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/DopeSheetSelectionView.tsx"(){I(),Fg(),$g(),qg(),Jg(),jg(),pf(),iv=k(n(771)),ov=k(nf()),mg(),Qg(),yv(),wg(),av=Am.div`
  cursor: ${e=>e.isShiftDown?"cell":"default"};
`,sv=({layoutP:e,children:t,height:n})=>{const[r,i]=Ig(null),o=Vg("Shift"),a=function(e,t){const[n,r]=Ig(null),i=yg("useCaptureSelection");return zg(t,(0,ov.useMemo)((()=>({debugName:"DopeSheetSelectionView/useCaptureSelection",dontBlockMouseDown:!0,lockCSSCursorTo:"cell",onDragStart(r){if(!r.shiftKey||r.target instanceof HTMLInputElement)return!1;const o=t.getBoundingClientRect(),a=r.clientX-o.left-(0,iv.val)(e.scaledSpace.leftPadding),s=(0,iv.val)(e.scaledSpace.toUnitSpace)(a);return n.current={h:[s,s],v:[r.clientY-o.top,r.clientY-o.top]},(0,iv.val)(e.selectionAtom).set({current:void 0}),{onDrag(r,o,a){const s=t.getBoundingClientRect(),l=a.clientX-s.left-(0,iv.val)(e.scaledSpace.leftPadding),c=(0,iv.val)(e.scaledSpace.toUnitSpace)(l);n.current={h:[n.current.h[0],c],v:[n.current.v[0],a.clientY-s.top]};const u=lv.boundsToSelection(i,(0,iv.val)(e),n.current);(0,iv.val)(e.selectionAtom).set({current:u})},onDragEnd(e){n.current=null}}}})),[e,t,n])),r}(e,i);return(0,ov.useRef)(a).current=a,ov.default.createElement(av,{style:{height:n+"px"},ref:r,isShiftDown:o,className:"selectionview"},a&&ov.default.createElement(dv,{state:a,layoutP:e}),t)},function(e){const t=(e,t,n,i,o)=>{const a=ev(n);if(n.top+n.nodeHeight/2+5>i.v[0]&&n.top+n.nodeHeight/2-5<i.v[1])for(const[e,n]of a.byPosition){const r=t.scaledSpace.toUnitSpace(5);if(!(e+r<=i.h[0]||e-r>=i.h[1]))for(const e of n)Kg(o,(t=>t[e.track.sheetObject.address.objectKey].byTrackId[e.track.id].byKeyframeId[e.kf.id]),!0)}r(e,t,n,i,o)},n={sheet(e,n,r,i,o){t(e,n,r,i,o)},propWithChildren(e,n,r,i,o){t(e,n,r,i,o)},sheetObject(e,n,r,i,o){t(e,n,r,i,o)},primitiveProp(e,t,n,r,i){const{sheetObject:o,trackId:a}=n,s=(0,iv.val)(T().atomP.historic.coreByProject[o.address.projectId].sheetsById[o.address.sheetId].sequence.tracksByObject[o.address.objectKey].trackData[a]);if(!(r.v[0]>n.top+n.heightIncludingChildren/2+5||n.top+n.heightIncludingChildren/2-5>r.v[1]))for(const e of s.keyframes)if(!(e.position+t.scaledSpace.toUnitSpace(5)<=r.h[0])){if(e.position-t.scaledSpace.toUnitSpace(5)>=r.h[1])break;Kg(i,(t=>t[o.address.objectKey].byTrackId[a].byKeyframeId[e.id]),!0)}}},r=(e,t,n,r,o)=>{if("children"in n)for(const a of n.children)i(e,t,a,r,o)};function i(e,t,i,o,a){if(!i.shouldRender)return;if(o.v[0]>i.top+i.heightIncludingChildren||i.top>o.v[1])return;const s=n[i.type];s?s(e,t,i,o,a):r(e,t,i,o,a)}e.boundsToSelection=function(e,t,n){const r={};n=uv(n);const o=t.tree;i(e.utilFor.internal(),t,o,n,r);const a=t.tree.sheet;return{type:"DopeSheetSelection",byObjectKey:r,getDragHandlers:e=>({debugName:"DopeSheetSelectionView/boundsToSelection",onDragStart(){let n;const i=t.scaledSpace.toUnitSpace;return{onDrag(t,o,s){n&&(n.discard(),n=void 0);const l=Yg.checkIfMouseEventSnapToPos(s,{ignore:e.domNode}),c=null!=l?l-e.positionAtStartOfDrag:i(t);n=T().tempTransaction((({stateEditors:t})=>{const n=t.coreByProject.historic.sheetsById.sequence.transformKeyframes;for(const t of Object.keys(r)){const{byTrackId:i}=r[t];for(const r of Object.keys(i)){const{byKeyframeId:o}=i[r];n({trackId:r,keyframeIds:Object.keys(o),translate:c,scale:1,origin:0,snappingFunction:a.getSequence().closestGridPosition,objectKey:t,projectId:e.projectId,sheetId:e.sheetId})}}}))},onDragEnd(e){e?null==n||n.commit():null==n||n.discard()}}}}),delete(){T().transaction((({stateEditors:e})=>{const t=e.coreByProject.historic.sheetsById.sequence.deleteKeyframes;for(const e of Object.keys(r)){const{byTrackId:n}=r[e];for(const r of Object.keys(n)){const{byKeyframeId:i}=n[r];t(b(y({},a.address),{objectKey:e,trackId:r,keyframeIds:Object.keys(i)}))}}}))}}}}(lv||(lv={})),cv=Am.div`
  position: absolute;
  background: rgba(255, 255, 255, 0.1);
  border: 1px dashed rgba(255, 255, 255, 0.4);
  box-sizing: border-box;
`,uv=e=>({h:[...e.h].sort(((e,t)=>e-t)),v:[...e.v].sort(((e,t)=>e-t))}),dv=({state:e,layoutP:t})=>{const n=function(e){const t=(0,Wg.useMemo)((()=>new Hg.Atom(e)),[]);return(0,Wg.useLayoutEffect)((()=>{t.set(e)}),[e]),t}(e);return uf((()=>{const e=(0,iv.val)(n.pointer),r=uv(e),i=(0,iv.val)(t.scaledSpace.fromUnitSpace),o=(0,iv.val)(t.scaledSpace.leftPadding),a=r.h.map(i).map((e=>e+o)),s=r.v[0],l=r.v[1]-r.v[0],c=a[0],u=a[1]-a[0];return ov.default.createElement(cv,{style:{top:s+"px",height:l+"px",left:c+"px",width:u+"px"}})}),[t,n])},hv=sv}}),xv=w({"studio/src/selectors.ts"(){pv=k(n(771)),H(),Tp(),I(),fv=()=>{var e;const t=(0,pv.val)(T().projectsP),n=(null!=(e=(0,pv.val)(T().atomP.historic.panels.outlinePanel.selection))?e:[]).map((e=>{const n=t[e.projectId];if(!n)return;if("Project"===e.type)return n;if(!(0,pv.val)(n.sheetTemplatesP[e.sheetId]))return;const r=mv(n,e.sheetId);if(!r)return;if("Sheet"===e.type)return r;return(0,pv.val)(r.objectsP[e.objectKey])||void 0}));return Ep(n.filter((e=>void 0!==e)))},mv=(e,t)=>{const n=T().atomP.historic.projects.stateByProjectId[e.address.projectId],r=(0,pv.val)(n.stateBySheetId[t].selectedInstanceId),i=(0,pv.val)(e.sheetTemplatesP[t]);if(i){if(r)return(0,pv.val)(i.instancesP[r]);{const e=(0,pv.val)(i.instancesP);return e[(o=e,Object.keys(o))[0]]}var o}}}}),_v=w({"shared/src/utils/valToAtom.ts"(){gv=k(n(771)),vv=(e,t)=>{const n=gv.prism.memo(e,(()=>new gv.Atom(t)),[]);return n.set(t),n}}});function wv(){return wv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wv.apply(this,arguments)}var Sv=w({"../node_modules/@babel/runtime/helpers/esm/extends.js"(){}}),Ev=w({"../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"(){}});function kv(e,t){return(kv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mv=w({"../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js"(){}}),Pv=w({"../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"(){Mv()}});function Tv(e){return(Tv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cv=w({"../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"(){}}),Av=w({"../node_modules/@babel/runtime/helpers/esm/isNativeFunction.js"(){}}),Iv=w({"../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js"(){}});function Rv(e,t,n){return(Rv=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&kv(i,n.prototype),i}).apply(null,arguments)}var Ov=w({"../node_modules/@babel/runtime/helpers/esm/construct.js"(){Mv(),Iv()}});function Dv(e){var t="function"==typeof Map?new Map:void 0;return Dv=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Rv(e,arguments,Tv(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),kv(r,e)},Dv(e)}var Lv,jv,zv,Nv,Bv,Fv,Uv,Vv,Hv,Wv,Gv,$v,qv,Kv,Xv,Yv,Zv,Jv,Qv,ey,ty,ny,ry=w({"../node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js"(){Cv(),Mv(),Av(),Ov()}}),iy=w({"../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteralLoose.js"(){}});function oy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0],o=[];for(r=1;r<t.length;r+=1)o.push(t[r]);return o.forEach((function(e){i=i.replace(/%[a-z]/,e)})),i}function ay(e,t){if(!e)return t.toLowerCase();var n=e.split("-");if(n.length>1)return n.splice(1,0,t),n.reduce((function(e,t){return""+e+((n=t).charAt(0).toUpperCase()+n.slice(1));var n}));var r=e.replace(/([a-z])([A-Z])/g,"$1"+t+"$2");return e===r?""+e+t:r}function sy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0],o=n[1],a=void 0===o?i:o,s=n[2],l=void 0===s?i:s,c=n[3];return function(e,t){for(var n={},r=0;r<t.length;r+=1)(t[r]||0===t[r])&&(n[ay(e,zv[r])]=t[r]);return n}(e,[i,a,l,void 0===c?a:c])}function ly(e){return Math.round(255*e)}function cy(e,t,n){return ly(e)+","+ly(t)+","+ly(n)}function uy(e,t,n,r){if(void 0===r&&(r=cy),0===t)return r(n,n,n);var i=(e%360+360)%360/60,o=(1-Math.abs(2*n-1))*t,a=o*(1-Math.abs(i%2-1)),s=0,l=0,c=0;i>=0&&i<1?(s=o,l=a):i>=1&&i<2?(s=a,l=o):i>=2&&i<3?(l=o,c=a):i>=3&&i<4?(l=a,c=o):i>=4&&i<5?(s=a,c=o):i>=5&&i<6&&(s=o,c=a);var u=n-o/2;return r(s+u,l+u,c+u)}function dy(e){if("string"!=typeof e)throw new jv(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return Nv[t]?"#"+Nv[t]:e}(e);if(t.match(Bv))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(Fv)){var n=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:n}}if(t.match(Uv))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(Vv)){var r=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:r}}var i=Hv.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var o=Wv.exec(t.substring(0,50));if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10),alpha:parseFloat(""+o[4])};var a=Gv.exec(t);if(a){var s="rgb("+uy(parseInt(""+a[1],10),parseInt(""+a[2],10)/100,parseInt(""+a[3],10)/100)+")",l=Hv.exec(s);if(!l)throw new jv(4,t,s);return{red:parseInt(""+l[1],10),green:parseInt(""+l[2],10),blue:parseInt(""+l[3],10)}}var c=$v.exec(t.substring(0,50));if(c){var u="rgb("+uy(parseInt(""+c[1],10),parseInt(""+c[2],10)/100,parseInt(""+c[3],10)/100)+")",d=Hv.exec(u);if(!d)throw new jv(4,t,u);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+c[4])}}throw new jv(5)}function hy(e){return function(e){var t,n=e.red/255,r=e.green/255,i=e.blue/255,o=Math.max(n,r,i),a=Math.min(n,r,i),s=(o+a)/2;if(o===a)return void 0!==e.alpha?{hue:0,saturation:0,lightness:s,alpha:e.alpha}:{hue:0,saturation:0,lightness:s};var l=o-a,c=s>.5?l/(2-o-a):l/(o+a);switch(o){case n:t=(r-i)/l+(r<i?6:0);break;case r:t=(i-n)/l+2;break;default:t=(n-r)/l+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:c,lightness:s,alpha:e.alpha}:{hue:t,saturation:c,lightness:s}}(dy(e))}function py(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function fy(e){return py(Math.round(255*e))}function my(e,t,n){return qv("#"+fy(e)+fy(t)+fy(n))}function gy(e,t,n){return uy(e,t,n,my)}function vy(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return qv("#"+py(e)+py(t)+py(n));if("object"==typeof e&&void 0===t&&void 0===n)return qv("#"+py(e.red)+py(e.green)+py(e.blue));throw new jv(6)}function yy(e,t,n,r){if("string"==typeof e&&"number"==typeof t){var i=dy(e);return"rgba("+i.red+","+i.green+","+i.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r)return r>=1?vy(e,t,n):"rgba("+e+","+t+","+n+","+r+")";if("object"==typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?vy(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new jv(7)}function by(e){if("object"!=typeof e)throw new jv(8);if(Xv(e))return yy(e);if(Kv(e))return vy(e);if(Zv(e))return function(e,t,n,r){if("object"==typeof e)return e.alpha>=1?gy(e.hue,e.saturation,e.lightness):"rgba("+uy(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new jv(2)}(e);if(Yv(e))return function(e,t,n){if("object"==typeof e)return gy(e.hue,e.saturation,e.lightness);throw new jv(1)}(e);throw new jv(8)}function xy(e,t,n){return function(){var r=n.concat(Array.prototype.slice.call(arguments));return r.length>=t?e.apply(this,r):xy(e,t,r)}}function _y(e){return xy(e,e.length,[])}function wy(e,t,n){return Math.max(e,Math.min(t,n))}function Sy(e,t){if("transparent"===t)return t;var n=hy(t);return by(wv({},n,{lightness:wy(0,1,n.lightness-parseFloat(e))}))}function Ey(e,t){if("transparent"===t)return t;var n=hy(t);return by(wv({},n,{lightness:wy(0,1,n.lightness+parseFloat(e))}))}function ky(e,t){if("transparent"===t)return t;var n=hy(t);return by(wv({},n,{saturation:wy(0,1,n.saturation+parseFloat(e))}))}function My(e,t){if("transparent"===t)return t;var n=dy(t);return yy(wv({},n,{alpha:wy(0,1,+(100*("number"==typeof n.alpha?n.alpha:1)-100*parseFloat(e)).toFixed(2)/100)}))}function Py(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ny.indexOf(e)>=0&&e?wv({},sy.apply(void 0,[""].concat(n)),{position:e}):sy.apply(void 0,["",e].concat(n))}var Ty=w({"../node_modules/polished/dist/polished.esm.js"(){Sv(),Ev(),Pv(),ry(),iy(),Lv={1:"Passed invalid arguments to hsl, please pass multiple numbers e.g. hsl(360, 0.75, 0.4) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75 }).\n\n",2:"Passed invalid arguments to hsla, please pass multiple numbers e.g. hsla(360, 0.75, 0.4, 0.7) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75, alpha: 0.7 }).\n\n",3:"Passed an incorrect argument to a color function, please pass a string representation of a color.\n\n",4:"Couldn't generate valid rgb string from %s, it returned %s.\n\n",5:"Couldn't parse the color string. Please provide the color as a string in hex, rgb, rgba, hsl or hsla notation.\n\n",6:"Passed invalid arguments to rgb, please pass multiple numbers e.g. rgb(255, 205, 100) or an object e.g. rgb({ red: 255, green: 205, blue: 100 }).\n\n",7:"Passed invalid arguments to rgba, please pass multiple numbers e.g. rgb(255, 205, 100, 0.75) or an object e.g. rgb({ red: 255, green: 205, blue: 100, alpha: 0.75 }).\n\n",8:"Passed invalid argument to toColorString, please pass a RgbColor, RgbaColor, HslColor or HslaColor object.\n\n",9:"Please provide a number of steps to the modularScale helper.\n\n",10:"Please pass a number or one of the predefined scales to the modularScale helper as the ratio.\n\n",11:'Invalid value passed as base to modularScale, expected number or em string but got "%s"\n\n',12:'Expected a string ending in "px" or a number passed as the first argument to %s(), got "%s" instead.\n\n',13:'Expected a string ending in "px" or a number passed as the second argument to %s(), got "%s" instead.\n\n',14:'Passed invalid pixel value ("%s") to %s(), please pass a value like "12px" or 12.\n\n',15:'Passed invalid base value ("%s") to %s(), please pass a value like "12px" or 12.\n\n',16:"You must provide a template to this method.\n\n",17:"You passed an unsupported selector state to this method.\n\n",18:"minScreen and maxScreen must be provided as stringified numbers with the same units.\n\n",19:"fromSize and toSize must be provided as stringified numbers with the same units.\n\n",20:"expects either an array of objects or a single object with the properties prop, fromSize, and toSize.\n\n",21:"expects the objects in the first argument array to have the properties `prop`, `fromSize`, and `toSize`.\n\n",22:"expects the first argument object to have the properties `prop`, `fromSize`, and `toSize`.\n\n",23:"fontFace expects a name of a font-family.\n\n",24:"fontFace expects either the path to the font file(s) or a name of a local copy.\n\n",25:"fontFace expects localFonts to be an array.\n\n",26:"fontFace expects fileFormats to be an array.\n\n",27:"radialGradient requries at least 2 color-stops to properly render.\n\n",28:"Please supply a filename to retinaImage() as the first argument.\n\n",29:"Passed invalid argument to triangle, please pass correct pointingDirection e.g. 'right'.\n\n",30:"Passed an invalid value to `height` or `width`. Please provide a pixel based unit.\n\n",31:"The animation shorthand only takes 8 arguments. See the specification for more information: http://mdn.io/animation\n\n",32:"To pass multiple animations please supply them in arrays, e.g. animation(['rotate', '2s'], ['move', '1s'])\nTo pass a single animation please supply them in simple values, e.g. animation('rotate', '2s')\n\n",33:"The animation shorthand arrays can only have 8 elements. See the specification for more information: http://mdn.io/animation\n\n",34:"borderRadius expects a radius value as a string or number as the second argument.\n\n",35:'borderRadius expects one of "top", "bottom", "left" or "right" as the first argument.\n\n',36:"Property must be a string value.\n\n",37:"Syntax Error at %s.\n\n",38:"Formula contains a function that needs parentheses at %s.\n\n",39:"Formula is missing closing parenthesis at %s.\n\n",40:"Formula has too many closing parentheses at %s.\n\n",41:"All values in a formula must have the same unit or be unitless.\n\n",42:"Please provide a number of steps to the modularScale helper.\n\n",43:"Please pass a number or one of the predefined scales to the modularScale helper as the ratio.\n\n",44:"Invalid value passed as base to modularScale, expected number or em/rem string but got %s.\n\n",45:"Passed invalid argument to hslToColorString, please pass a HslColor or HslaColor object.\n\n",46:"Passed invalid argument to rgbToColorString, please pass a RgbColor or RgbaColor object.\n\n",47:"minScreen and maxScreen must be provided as stringified numbers with the same units.\n\n",48:"fromSize and toSize must be provided as stringified numbers with the same units.\n\n",49:"Expects either an array of objects or a single object with the properties prop, fromSize, and toSize.\n\n",50:"Expects the objects in the first argument array to have the properties prop, fromSize, and toSize.\n\n",51:"Expects the first argument object to have the properties prop, fromSize, and toSize.\n\n",52:"fontFace expects either the path to the font file(s) or a name of a local copy.\n\n",53:"fontFace expects localFonts to be an array.\n\n",54:"fontFace expects fileFormats to be an array.\n\n",55:"fontFace expects a name of a font-family.\n\n",56:"linearGradient requries at least 2 color-stops to properly render.\n\n",57:"radialGradient requries at least 2 color-stops to properly render.\n\n",58:"Please supply a filename to retinaImage() as the first argument.\n\n",59:"Passed invalid argument to triangle, please pass correct pointingDirection e.g. 'right'.\n\n",60:"Passed an invalid value to `height` or `width`. Please provide a pixel based unit.\n\n",61:"Property must be a string value.\n\n",62:"borderRadius expects a radius value as a string or number as the second argument.\n\n",63:'borderRadius expects one of "top", "bottom", "left" or "right" as the first argument.\n\n',64:"The animation shorthand only takes 8 arguments. See the specification for more information: http://mdn.io/animation.\n\n",65:"To pass multiple animations please supply them in arrays, e.g. animation(['rotate', '2s'], ['move', '1s'])\\nTo pass a single animation please supply them in simple values, e.g. animation('rotate', '2s').\n\n",66:"The animation shorthand arrays can only have 8 elements. See the specification for more information: http://mdn.io/animation.\n\n",67:"You must provide a template to this method.\n\n",68:"You passed an unsupported selector state to this method.\n\n",69:'Expected a string ending in "px" or a number passed as the first argument to %s(), got %s instead.\n\n',70:'Expected a string ending in "px" or a number passed as the second argument to %s(), got %s instead.\n\n',71:'Passed invalid pixel value %s to %s(), please pass a value like "12px" or 12.\n\n',72:'Passed invalid base value %s to %s(), please pass a value like "12px" or 12.\n\n',73:"Please provide a valid CSS variable.\n\n",74:"CSS variable not found and no default was provided.\n\n",75:"important requires a valid style object, got a %s instead.\n\n",76:"fromSize and toSize must be provided as stringified numbers with the same units as minScreen and maxScreen.\n\n",77:'remToPx expects a value in "rem" but you provided it in "%s".\n\n',78:'base must be set in "px" or "%" but you set it in "%s".\n'},jv=function(e){var t,n;function r(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e.call(this,oy.apply(void 0,[Lv[t]].concat(r)))||this)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,kv(t,n),r}(Dv(Error)),zv=["Top","Right","Bottom","Left"],Nv={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Bv=/^#[a-fA-F0-9]{6}$/,Fv=/^#[a-fA-F0-9]{8}$/,Uv=/^#[a-fA-F0-9]{3}$/,Vv=/^#[a-fA-F0-9]{4}$/,Hv=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,Wv=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,Gv=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,$v=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,qv=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},Kv=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)},Xv=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha},Yv=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)},Zv=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha},Jv=_y(Sy),Qv=_y(Ey),ey=_y(ky),ty=_y(My),ny=["absolute","fixed","relative","static","sticky"]}});function Cy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Iy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ay(Object(n),!0).forEach((function(t){Cy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ay(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ry(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Oy,Dy,Ly=w({"../node_modules/reakit/es/_rollupPluginBabelHelpers-1f0bf8c2.js"(){}}),jy=w({"../node_modules/reakit-system/es/SystemContext.js"(){Oy=k(nf()),Dy=(0,Oy.createContext)({})}});function zy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ny(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function By(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ny(Object(n),!0).forEach((function(t){zy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ny(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fy(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Uy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vy(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Uy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uy(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}var Hy,Wy,Gy=w({"../node_modules/reakit-system/es/_rollupPluginBabelHelpers-0c84a174.js"(){}}),$y=w({"../node_modules/reakit-system/es/useCreateElement.js"(){Hy=k(nf()),jy(),Gy(),Wy=function(e,t,n){void 0===n&&(n=t.children);var r=(0,Hy.useContext)(Dy);return r.useCreateElement?r.useCreateElement(e,t,n):"string"==typeof e&&function(e){return"function"==typeof e}(n)?(t.children,n(Fy(t,["children"]))):(0,Hy.createElement)(e,t,n)}}});function qy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ky(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ky(Object(n),!0).forEach((function(t){qy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ky(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zy=w({"../node_modules/reakit-utils/es/_rollupPluginBabelHelpers-1f0bf8c2.js"(){}}),Jy=w({"../node_modules/reakit-utils/es/isObject.js"(){}});function Qy(e){var t;if(!function(e){return"object"==typeof e&&null!=e}(e))return!1;var n=Object.getPrototypeOf(e);return null==n||(null===(t=n.constructor)||void 0===t?void 0:t.toString())===Object.toString()}var eb=w({"../node_modules/reakit-utils/es/isPlainObject.js"(){Jy()}});function tb(e,t){for(var n={},r={},i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];t.indexOf(a)>=0?n[a]=e[a]:r[a]=e[a]}return[n,r]}function nb(e,t){if(void 0===t&&(t=[]),!Qy(e.state))return tb(e,t);var n=tb(e,[].concat(t,["state"])),r=n[0],i=n[1],o=r.state,a=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(r,["state"]);return[Xy(Xy({},o),a),i]}var rb=w({"../node_modules/reakit-utils/es/splitProps.js"(){Zy(),eb()}});function ib(e,t){if(e===t)return!0;if(!e)return!1;if(!t)return!1;if("object"!=typeof e)return!1;if("object"!=typeof t)return!1;var n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(var o=0,a=n;o<a.length;o++){var s=a[o];if(e[s]!==t[s])return!1}return!0}var ob=w({"../node_modules/reakit-utils/es/shallowEqual.js"(){}});function ab(e){return"normalizePropsAreEqualInner"===e.name?e:function(t,n){return Qy(t.state)&&Qy(n.state)?e(Xy(Xy({},t.state),t),Xy(Xy({},n.state),n)):e(t,n)}}var sb,lb=w({"../node_modules/reakit-utils/es/normalizePropsAreEqual.js"(){Zy(),eb()}});function cb(e){var t,n=e.as,r=e.useHook,i=e.memo,o=e.propsAreEqual,a=void 0===o?null==r?void 0:r.unstable_propsAreEqual:o,s=e.keys,l=void 0===s?(null==r?void 0:r.__keys)||[]:s,c=e.useCreateElement,u=void 0===c?Wy:c,d=function(e,t){var i=e.as,o=void 0===i?n:i,a=Fy(e,["as"]);if(r){var s,c=nb(a,l),d=c[0],h=c[1],p=r(d,By({ref:t},h)),f=p.wrapElement,m=Fy(p,["wrapElement"]),g=(null===(s=o.render)||void 0===s?void 0:s.__keys)||o.__keys,v=g&&nb(a,g)[0],y=v?By(By({},m),v):m,b=u(o,y);return f?f(b):b}return u(o,By({ref:t},a))};return r&&(d.displayName=r.name.replace(/^(unstable_)?use/,"")),t=d,d=(0,sb.forwardRef)(t),i&&(d=function(e,t){return(0,sb.memo)(e,t)}(d,a&&ab(a))),d.__keys=l,d.unstable_propsAreEqual=ab(a||ib),d}var ub,db=w({"../node_modules/reakit-system/es/createComponent.js"(){sb=k(nf()),Gy(),$y(),rb(),ob(),lb()}});function hb(e,t){(0,ub.useDebugValue)(e);var n=(0,ub.useContext)(Dy);return null!=n[e]?n[e]:t}var pb,fb,mb=w({"../node_modules/reakit-system/es/useToken.js"(){ub=k(nf()),jy()}}),gb=w({"../node_modules/reakit-system/es/useProps.js"(){pb=k(nf()),mb()}}),vb=w({"../node_modules/reakit-system/es/useOptions.js"(){fb=k(nf()),mb(),Gy()}}),yb=w({"../node_modules/reakit-utils/es/toArray.js"(){}});function bb(e){var t,n,r,i=(r=e.compose,Array.isArray(r)?r:void 0!==r?[r]:[]),o=function(t,n){if(e.useOptions&&(t=e.useOptions(t,n)),e.name&&(t=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r="use"+e+"Options";(0,fb.useDebugValue)(r);var i=hb(r);return i?By(By({},t),i(t,n)):t}(e.name,t,n)),e.compose)for(var r,o=Vy(i);!(r=o()).done;)t=r.value.__useOptions(t,n);return t},a=function(t,n,r){if(void 0===t&&(t={}),void 0===n&&(n={}),void 0===r&&(r=!1),r||(t=o(t,n)),e.useProps&&(n=e.useProps(t,n)),e.name&&(n=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r="use"+e+"Props";(0,pb.useDebugValue)(r);var i=hb(r);return i?i(t,n):n}(e.name,t,n)),e.compose)if(e.useComposeOptions&&(t=e.useComposeOptions(t,n)),e.useComposeProps)n=e.useComposeProps(t,n);else for(var a,s=Vy(i);!(a=s()).done;)n=(0,a.value)(t,n,!0);var l={},c=n||{};for(var u in c)void 0!==c[u]&&(l[u]=c[u]);return l};a.__useOptions=o;var s=i.reduce((function(e,t){return e.push.apply(e,t.__keys||[]),e}),[]);return a.__keys=[].concat(s,(null===(t=e.useState)||void 0===t?void 0:t.__keys)||[],e.keys||[]),a.unstable_propsAreEqual=e.propsAreEqual||(null===(n=i[0])||void 0===n?void 0:n.unstable_propsAreEqual)||ib,e.name&&Object.defineProperty(a,"name",{value:"use"+e.name}),a}var xb,_b=w({"../node_modules/reakit-system/es/createHook.js"(){k(nf()),gb(),Gy(),vb(),ob(),yb()}});function wb(e,t){void 0===t&&(t=null),e&&("function"==typeof e?e(t):e.current=t)}function Sb(e,t){return(0,xb.useMemo)((function(){return null==e&&null==t?null:function(n){wb(e,n),wb(t,n)}}),[e,t])}var Eb,kb=w({"../node_modules/reakit-utils/es/useForkRef.js"(){xb=k(nf())}});function Mb(e){if("BUTTON"===e.tagName)return!0;if("INPUT"===e.tagName){var t=e;return-1!==Eb.indexOf(t.type)}return!1}var Pb=w({"../node_modules/reakit-utils/es/isButton.js"(){Eb=["button","color","file","image","reset","submit"]}});function Tb(e){for(var t,n=[],r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Yy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yy(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}(e);!(t=r()).done;){var i=t.value;Array.isArray(i)?n.push.apply(n,Tb(i)):n.push(i)}return n}var Cb=w({"../node_modules/reakit-utils/es/flatten.js"(){Zy()}});function Ab(e){var t;if(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=Tb(r.map((function(e){return[e,"\n"]})));(t=console).warn.apply(t,o.slice(0,-1));try{throw Error(o.join(""))}catch(e){}}}var Ib=w({"../node_modules/reakit-warning/es/warning.js"(){Cb()}}),Rb=w({"../node_modules/reakit-warning/es/useWarning.js"(){Ib(),k(nf())}}),Ob=w({"../node_modules/reakit-warning/es/index.js"(){Ib(),k(nf()),Rb()}});function Db(e){return e?e.ownerDocument||e:document}var Lb,jb,zb=w({"../node_modules/reakit-utils/es/getDocument.js"(){}}),Nb=w({"../node_modules/reakit-utils/es/getWindow.js"(){zb();try{Lb=window}catch(e){}}});var Bb,Fb,Ub,Vb=w({"../node_modules/reakit-utils/es/canUseDOM.js"(){var e;Nb(),e=Lb,jb=Boolean(void 0!==e&&e.document&&e.document.createElement)}}),Hb=w({"../node_modules/reakit-utils/es/useIsomorphicEffect.js"(){Bb=k(nf()),Vb(),Fb=jb?Bb.useLayoutEffect:Bb.useEffect}});function Wb(e){var t=(0,Ub.useRef)(e);return Fb((function(){t.current=e})),t}var Gb=w({"../node_modules/reakit-utils/es/useLiveRef.js"(){Ub=k(nf()),Hb()}}),$b=w({"../node_modules/reakit-utils/es/isSelfTarget.js"(){}}),qb=w({"../node_modules/reakit-utils/es/getActiveElement.js"(){zb()}});function Kb(e,t){return e===t||e.contains(t)}var Xb=w({"../node_modules/reakit-utils/es/contains.js"(){}});var Yb=w({"../node_modules/reakit-utils/es/hasFocusWithin.js"(){qb(),Xb()}}),Zb=w({"../node_modules/reakit-utils/es/isPortalEvent.js"(){Xb()}});function Jb(e){return!!jb&&-1!==window.navigator.userAgent.indexOf(e)}var Qb,ex,tx,nx,rx,ix,ox=w({"../node_modules/reakit-utils/es/dom.js"(){Vb()}}),ax=w({"../node_modules/reakit-utils/es/matches.js"(){}}),sx=w({"../node_modules/reakit-utils/es/tabbable.js"(){ax(),Qb="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])"}}),lx=w({"../node_modules/reakit/es/Role/Role.js"(){Ly(),db(),_b(),ob(),cb({as:"div",useHook:ex=bb({name:"Role",keys:["unstable_system"],propsAreEqual:function(e,t){var n=e.unstable_system,r=Ry(e,["unstable_system"]),i=t.unstable_system,o=Ry(t,["unstable_system"]);return!(n!==i&&!ib(n,i))&&ib(r,o)}})})}});function cx(e){!function(e){var t=function(e){var t=Db(e).activeElement;return null!=t&&t.nodeName?t:null}(e);if(!t)return!1;if(Kb(e,t))return!0;var n=t.getAttribute("aria-activedescendant");return!(!n||n!==e.id&&!e.querySelector("#"+n))}(e)&&function(e){return function(e,t){return"matches"in e?e.matches(t):"msMatchesSelector"in e?e.msMatchesSelector(t):e.webkitMatchesSelector(t)}(e,Qb)&&function(e){var t=e;return t.offsetWidth>0||t.offsetHeight>0||e.getClientRects().length>0}(e)}(e)&&e.focus()}function ux(e,t,n,r){return e?t&&!n?-1:void 0:t?r:r||0}function dx(e,t){return(0,tx.useCallback)((function(n){var r;null===(r=e.current)||void 0===r||r.call(e,n),n.defaultPrevented||t&&(n.stopPropagation(),n.preventDefault())}),[e,t])}var hx,px,fx,mx,gx,vx,yx,bx,xx,_x,wx=w({"../node_modules/reakit/es/Tabbable/Tabbable.js"(){Ly(),db(),_b(),tx=k(nf()),kb(),Pb(),Ob(),Gb(),Hb(),Yb(),Zb(),ox(),sx(),lx(),nx=["disabled","focusable"],rx=Jb("Mac")&&!Jb("Chrome")&&(Jb("Safari")||Jb("Firefox")),cb({as:"div",useHook:ix=bb({name:"Tabbable",compose:ex,keys:nx,useOptions:function(e,t){return Iy({disabled:t.disabled},e)},useProps:function(e,t){var n=t.ref,r=t.tabIndex,i=t.onClickCapture,o=t.onMouseDownCapture,a=t.onMouseDown,s=t.onKeyPressCapture,l=t.style,c=Ry(t,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),u=(0,tx.useRef)(null),d=Wb(i),h=Wb(o),p=Wb(a),f=Wb(s),m=!!e.disabled&&!e.focusable,g=(0,tx.useState)(!0),v=g[0],y=g[1],b=(0,tx.useState)(!0),x=b[0],_=b[1],w=e.disabled?Iy({pointerEvents:"none"},l):l;Fb((function(){var e,t=u.current;t?("BUTTON"!==(e=t).tagName&&"INPUT"!==e.tagName&&"SELECT"!==e.tagName&&"TEXTAREA"!==e.tagName&&"A"!==e.tagName&&y(!1),function(e){return"BUTTON"===e.tagName||"INPUT"===e.tagName||"SELECT"===e.tagName||"TEXTAREA"===e.tagName}(t)||_(!1)):Ab(!0,"Can't determine if the element is a native tabbable element because `ref` wasn't passed to the component.","See https://reakit.io/docs/tabbable")}),[]);var S=dx(d,e.disabled),E=dx(h,e.disabled),k=dx(f,e.disabled),M=(0,tx.useCallback)((function(e){var t;null===(t=p.current)||void 0===t||t.call(p,e);var n=e.currentTarget;if(!e.defaultPrevented&&rx&&!function(e){return!Kb(e.currentTarget,e.target)}(e)&&Mb(n)){var r=requestAnimationFrame((function(){n.removeEventListener("mouseup",i,!0),cx(n)})),i=function(){cancelAnimationFrame(r),cx(n)};n.addEventListener("mouseup",i,{once:!0,capture:!0})}}),[]);return Iy({ref:Sb(u,n),style:w,tabIndex:ux(m,v,x,r),disabled:!(!m||!x)||void 0,"aria-disabled":!!e.disabled||void 0,onClickCapture:S,onMouseDownCapture:E,onMouseDown:M,onKeyPressCapture:k},c)}})})}}),Sx=w({"../node_modules/reakit/es/Clickable/Clickable.js"(){Ly(),db(),_b(),hx=k(nf()),Pb(),Ob(),Gb(),$b(),wx(),cb({as:"button",memo:!0,useHook:px=bb({name:"Clickable",compose:ix,keys:["unstable_clickOnEnter","unstable_clickOnSpace"],useOptions:function(e){var t=e.unstable_clickOnEnter,n=void 0===t||t,r=e.unstable_clickOnSpace;return Iy({unstable_clickOnEnter:n,unstable_clickOnSpace:void 0===r||r},Ry(e,["unstable_clickOnEnter","unstable_clickOnSpace"]))},useProps:function(e,t){var n=t.onKeyDown,r=t.onKeyUp,i=Ry(t,["onKeyDown","onKeyUp"]),o=(0,hx.useState)(!1),a=o[0],s=o[1],l=Wb(n),c=Wb(r),u=(0,hx.useCallback)((function(t){var n;if(null===(n=l.current)||void 0===n||n.call(l,t),!t.defaultPrevented&&!e.disabled&&!t.metaKey&&function(e){return e.target===e.currentTarget}(t)){var r=e.unstable_clickOnEnter&&"Enter"===t.key,i=e.unstable_clickOnSpace&&" "===t.key;if(r||i){if(function(e){var t=e.currentTarget;return!!e.isTrusted&&(Mb(t)||"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"A"===t.tagName||"SELECT"===t.tagName)}(t))return;t.preventDefault(),r?t.currentTarget.click():i&&s(!0)}}}),[e.disabled,e.unstable_clickOnEnter,e.unstable_clickOnSpace]),d=(0,hx.useCallback)((function(t){var n;if(null===(n=c.current)||void 0===n||n.call(c,t),!t.defaultPrevented&&!e.disabled&&!t.metaKey){var r=e.unstable_clickOnSpace&&" "===t.key;a&&r&&(s(!1),t.currentTarget.click())}}),[e.disabled,e.unstable_clickOnSpace,a]);return Iy({"data-active":a||void 0,onKeyDown:u,onKeyUp:d},i)}})})}}),Ex=w({"../node_modules/reakit/es/Button/Button.js"(){Ly(),db(),_b(),fx=k(nf()),kb(),Pb(),Ob(),Sx(),mx=bb({name:"Button",compose:px,keys:[],useProps:function(e,t){var n=t.ref,r=Ry(t,["ref"]),i=(0,fx.useRef)(null),o=(0,fx.useState)(void 0),a=o[0],s=o[1],l=(0,fx.useState)("button"),c=l[0],u=l[1];return(0,fx.useEffect)((function(){var e=i.current;e?Mb(e)||("A"!==e.tagName&&s("button"),u(void 0)):Ab(!0,"Can't determine whether the element is a native button because `ref` wasn't passed to the component","See https://reakit.io/docs/button")}),[]),Iy({ref:Sb(i,n),role:a,type:c},r)}}),gx=cb({as:"button",memo:!0,useHook:mx})}}),kx=w({"../node_modules/reakit/es/Group/Group.js"(){Ly(),db(),_b(),lx(),vx=bb({name:"Group",compose:ex,keys:[],useProps:function(e,t){return Iy({role:"group"},t)}}),yx=cb({as:"div",useHook:vx})}});function Mx(){return jb?document.body:null}function Px(e){var t=e.children,n=(0,bx.useContext)(_x)||Mx(),r=(0,bx.useState)((function(){if(jb){var e=document.createElement("div");return e.className=Px.__className,e}return null}))[0];return Fb((function(){if(r&&n)return n.appendChild(r),function(){n.removeChild(r)}}),[r,n]),r?(0,xx.createPortal)((0,bx.createElement)(_x.Provider,{value:r},t),r):null}var Tx,Cx,Ax,Ix,Rx,Ox,Dx,Lx,jx,zx,Nx,Bx,Fx,Ux,Vx,Hx=w({"../node_modules/reakit/es/Portal/Portal.js"(){bx=k(nf()),Hb(),Vb(),xx=k(cf()),_x=(0,bx.createContext)(Mx()),Px.__className="__reakit-portal",Px.__selector="."+Px.__className}}),Wx=w({"../node_modules/body-scroll-lock/lib/bodyScrollLock.esm.js"(){"undefined"!=typeof window&&(Tx={get passive(){}},window.addEventListener("testPassive",null,Tx),window.removeEventListener("testPassive",null,Tx)),"undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints)}}),Gx=w({"../node_modules/reakit/es/index.js"(){k(nf()),Ob(),Ex(),kx(),k(cf()),Hx(),Wx(),Ib()}}),$x=w({"studio/src/css.tsx"(){Ty(),mg(),mg(),Cx=k(nf()),Ax=k(cf()),Gx(),jg(),Ix=Qm`
  #pointer-root & {
    pointer-events: none;
  }
  #pointer-root.normal & {
    pointer-events: auto;
  }
`,Rx={panel:{bg:"#282b2f",head:{title:{color:"#bbb"},punctuation:{color:"#808080"}},body:{compoudThing:{label:{get color(){return Qv(.6,Rx.panel.bg)}}}}}},Ox="undefined"!=typeof window?og`
  :host {
    all: initial;
    color: white;
    font: 11px -apple-system, BlinkMacSystemFont, Segoe WPC, Segoe Editor,
      HelveticaNeue-Light, Ubuntu, Droid Sans, sans-serif;
  }

  * {
    padding: 0;
    margin: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    list-style: none;
  }
`:{},Dx=Am.div`
  z-index: 51;
  position: fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  pointer-events: none;
`,Lx=e=>Cx.default.createElement(Ym,{disableVendorPrefixes:!0,target:e.target},Cx.default.createElement(Cx.default.Fragment,null,Cx.default.createElement(Ox,null),e.children)),jx=e=>{const[t,n]=(0,Cx.useState)(null),[r,i]=(0,Cx.useState)(null);(0,Cx.useLayoutEffect)((()=>{if(!t)return;const e=t.parentNode.attachShadow({mode:"open"});return i(e),()=>{var n;null==(n=t.parentNode)||n.removeChild(e)}}),[t]);const[o,a]=Ig(void 0);return r?Ax.default.createPortal(Cx.default.createElement(Lx,{target:r},Cx.default.createElement(Cx.default.Fragment,null,Cx.default.createElement(Dx,{ref:o}),Cx.default.createElement(_x.Provider,{value:a},e.children))),r):Cx.default.createElement("template",{ref:n,"shadow-root":"open"},e.children)}}}),qx=w({"../node_modules/react-icons/lib/esm/iconsManifest.js"(){}}),Kx=w({"../node_modules/react-icons/lib/esm/iconContext.js"(){zx=k(nf()),Nx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Bx=zx.default.createContext&&zx.default.createContext(Nx)}});function Xx(e){return e&&e.map((function(e,t){return Fx.default.createElement(e.tag,Ux({key:t},e.attr),Xx(e.child))}))}function Yx(e){return function(t){return Fx.default.createElement(Zx,Ux({attr:Ux({},e.attr)},t),Xx(e.child))}}function Zx(e){var t=function(t){var n,r=e.attr,i=e.size,o=e.title,a=Vx(e,["attr","size","title"]),s=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),Fx.default.createElement("svg",Ux({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:Ux(Ux({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&Fx.default.createElement("title",null,o),e.children)};return void 0!==Bx?Fx.default.createElement(Bx.Consumer,null,(function(e){return t(e)})):t(Nx)}var Jx=w({"../node_modules/react-icons/lib/esm/iconBase.js"(){Fx=k(nf()),Kx(),Ux=function(){return Ux=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ux.apply(this,arguments)},Vx=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}}}),Qx=w({"../node_modules/react-icons/lib/esm/index.js"(){qx(),Jx(),Kx()}}),e_=w({"../node_modules/react-icons/fa/index.esm.js"(){Qx()}}),t_=w({"../node_modules/react-icons/io/index.esm.js"(){Qx()}});function n_(e){return Yx({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(e)}var r_=w({"../node_modules/react-icons/io5/index.esm.js"(){Qx()}}),i_=w({"../node_modules/react-icons/md/index.esm.js"(){Qx()}}),o_=w({"../node_modules/react-icons/ti/index.esm.js"(){Qx()}});function a_(e){return Yx({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"}}]})(e)}function s_(e){return Yx({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3l5 5z"}}]})(e)}var l_=w({"../node_modules/react-icons/go/index.esm.js"(){Qx()}}),c_=w({"../node_modules/react-icons/fi/index.esm.js"(){Qx()}}),u_=w({"../node_modules/react-icons/gi/index.esm.js"(){Qx()}}),d_=w({"../node_modules/react-icons/wi/index.esm.js"(){Qx()}}),h_=w({"../node_modules/react-icons/di/index.esm.js"(){Qx()}}),p_=w({"../node_modules/react-icons/ai/index.esm.js"(){Qx()}}),f_=w({"../node_modules/react-icons/bs/index.esm.js"(){Qx()}}),m_=w({"../node_modules/react-icons/ri/index.esm.js"(){Qx()}}),g_=w({"../node_modules/react-icons/fc/index.esm.js"(){Qx()}}),v_=w({"../node_modules/react-icons/gr/index.esm.js"(){Qx()}});function y_(e){return Yx({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(e)}var b_=w({"../node_modules/react-icons/hi/index.esm.js"(){Qx()}}),x_=w({"../node_modules/react-icons/si/index.esm.js"(){Qx()}}),__=w({"../node_modules/react-icons/im/index.esm.js"(){Qx()}}),w_=w({"../node_modules/react-icons/bi/index.esm.js"(){Qx()}});function S_(e){return Yx({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M6 9.65685L7.41421 11.0711L11.6569 6.82843L15.8995 11.0711L17.3137 9.65685L11.6569 4L6 9.65685Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 14.4433L7.41421 13.0291L11.6569 17.2717L15.8995 13.0291L17.3137 14.4433L11.6569 20.1001L6 14.4433Z",fill:"currentColor"}}]})(e)}var E_=w({"../node_modules/react-icons/cg/index.esm.js"(){Qx()}});function k_(e){return Yx({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 10.44l-.413.56H2.393L2 10.46 7.627 5h.827L14 10.44z"}}]})(e)}var M_,P_=w({"../node_modules/react-icons/vsc/index.esm.js"(){Qx()}}),T_=w({"../node_modules/react-icons/all.js"(){e_(),t_(),r_(),i_(),o_(),l_(),c_(),u_(),d_(),h_(),p_(),f_(),m_(),g_(),v_(),b_(),x_(),__(),w_(),E_(),P_()}}),C_=w({"studio/src/propEditors/utils/propNameTextCSS.tsx"(){mg(),M_=Qm`
  font-weight: 300;
  font-size: 11px;
  color: ${e=>"self"===e.isHighlighted?"#CCC":"#919191"};
  text-shadow: 0.5px 0.5px 2px rgba(0, 0, 0, 0.3);
`}});function A_(e,t){let n=e;for(const e of t)n=n[e];return n}var I_,R_,O_,D_,L_=w({"shared/src/utils/pointerDeep.ts"(){}});function j_(e){return[e.projectId,e.sheetId,e.objectKey,...e.pathToProp]}function z_(e){const t={};return cp(t,e,!0),t}var N_,B_=w({"studio/src/panels/SequenceEditorPanel/whatPropIsHighlighted.ts"(){I_=k(n(771)),R_=k(n(771)),O_=k(n(771)),L_(),xp(),D_=function(){let e=0;const t=new R_.Atom({hasLock:!1});return{replaceLock(n,r){const i=e++,o=t.get();return o.hasLock&&o.cleanup(),t.set({hasLock:!0,lockId:i,cleanup:r,deepPath:z_(j_(n))}),function(){const e=t.get();e.hasLock&&e.lockId===i&&(e.cleanup(),t.set({hasLock:!1}))}},getIsPropHighlightedD(e){const n=A_(t.pointer.deepPath,j_(e));return(0,O_.prism)((()=>{const e=(0,I_.val)(n);return!0===e?"self":e?"descendent":null}))}}}()}});function F_(e,t){(0,N_.useLayoutEffect)((()=>{if(!e)return;if("propWithChildren"!==t.type&&"primitiveProp"!==t.type&&"sheetObject"!==t.type)return;let n=null;const r=b(y({},t.sheetObject.address),{pathToProp:"sheetObject"===t.type?[]:t.pathToProp});function i(){n=D_.replaceLock(r,(()=>{}))}function o(){null==n||n()}return e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",o),()=>{null==n||n(),e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",o)}}),[e])}var U_,V_,H_,W_,G_,$_,q_,K_,X_,Y_=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Left/usePropHighlightMouseEnter.tsx"(){N_=k(nf()),B_()}}),Z_=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Left/AnyCompositeRow.tsx"(){$x(),U_=k(nf()),T_(),mg(),C_(),Y_(),V_=Am.li`
  --depth: ${e=>e.depth};
  margin: 0;
  padding: 0;
  list-style: none;
`,H_=Am.div`
  border-bottom: 1px solid #7695b705;
`,W_=Am(H_)`
  padding-left: calc(8px + var(--depth) * 20px);

  display: flex;
  align-items: stretch;
  color: ${Rx.panel.body.compoudThing.label.color};

  box-sizing: border-box;

  ${e=>e.isSelected&&"background: blue"};
`,G_=Am.span`
  ${M_};
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding-right: 4px;
  line-height: 26px;
  flex-wrap: nowrap;

  ${W_}:hover & {
    color: #ccc;
  }
`,$_=Am.span`
  width: 12px;
  padding: 8px;
  font-size: 9px;
  display: flex;
  align-items: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(${e=>e.isCollapsed?0:90}deg);
  color: #66686a;

  &:hover {
    transform: rotateZ(${e=>e.isCollapsed?15:75}deg);
    color: #c0c4c9;
  }
`,q_=Am.ul`
  margin: 0;
  padding: 0;
  list-style: none;
`,K_=({leaf:e,label:t,children:n,isSelectable:r,isSelected:i,toggleSelect:o,toggleCollapsed:a,isCollapsed:s})=>{const l=Array.isArray(n)&&n.length>0,c=(0,U_.useRef)(null);return F_(c.current,e),e.shouldRender?U_.default.createElement(V_,{depth:e.depth},U_.default.createElement(W_,{ref:c,style:{height:e.nodeHeight+"px"},isSelectable:!0===r,isSelected:!0===i,onClick:o,isEven:e.n%2==0},U_.default.createElement($_,{isCollapsed:s,onClick:a},U_.default.createElement(y_,null)),U_.default.createElement(G_,null,t)),l&&U_.default.createElement(q_,null,n)):null}}});function J_(e){return"compound"===e.type||"enum"===e.type}function Q_(e,t){if(!e)return;const[n,...r]=t;return void 0===n?e:J_(e)?Q_("enum"===e.type?e.cases[n]:e.props[n],r):void 0}function ew(e,t){const n=t.deserializeAndSanitize(e);return void 0===n?t.default:n}function tw(e){return X_.has(e)||X_.set(e,function(e){if("enum"===e.type)throw new Error("Not implemented yet for enums");for(const t in e.props){const n=e.props[t];if(!J_(n))return!0;if(tw(n))return!0}return!1}(e)),X_.get(e)}function*nw(e,t){if("compound"!==e.type){if("enum"===e.type)throw new Error("Not implemented yet");return yield{path:t,conf:e}}for(const n in e.props)yield*nw(e.props[n],[...t,n])}var rw,iw,ow,aw,sw,lw,cw,uw,dw=w({"shared/src/propTypes/utils.ts"(){X_=new WeakMap}}),hw=w({"studio/src/propEditors/DefaultValueIndicator.tsx"(){Ty(),rw=k(nf()),mg(),iw={defaultState:{color:ty(.85,"#C4C4C4")},withStaticOverride:{color:ty(.85,"#C4C4C4")}},ow=Am.div`
  width: 16px;
  margin: 0 0px 0 2px;
  display: flex;
  justify-content: center;
  align-items: center;

  color: ${e=>e.hasStaticOverride?iw.withStaticOverride.color:iw.defaultState.color};
`,aw=Am.rect`
  fill: currentColor;
`,sw=()=>rw.default.createElement("svg",{width:"5",height:"5",viewBox:"0 0 5 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},rw.default.createElement(aw,{width:"5",height:"5"})),lw=e=>rw.default.createElement(ow,{hasStaticOverride:e.hasStaticOverride},rw.default.createElement(sw,null))}});function pw(e,t,n){if(!t||0===t.data.keyframes.length)return uw;const r=cw.get(t.data);if(r&&r[0]===n)return r[1];function i(n){if(!t)return;const r=t.data.keyframes[n];return r&&{kf:r,track:t,itemKey:Rp.forTrackKeyframe(e,t.id,r.id)}}const o=(()=>{const e=t.data.keyframes.findIndex((e=>e.position>=n));if(-1===e)return{prev:i(t.data.keyframes.length-1)};const r=i(e);return r.kf.position===n?{prev:i(e-1),cur:r,next:i(e+1)}:{next:r,prev:i(e-1)}})();return cw.set(t.data,[n,o]),o}var fw=w({"studio/src/propEditors/getNearbyKeyframesOfTrack.tsx"(){jp(),cw=new WeakMap,uw={}}});function mw(e,t){return null==e?null:e instanceof Element&&e.matches(t)?e:mw(e.parentElement,t)}var gw,vw,yw,bw,xw,_w,ww,Sw,Ew=w({"studio/src/utils/selectClosestHTMLAncestor.ts"(){}});function kw(e){const t=gw.default.useContext(ww),n=t.usePresenceFlag(e);return{attrs:{[Sw]:e},flag:n,useRelations(n,r){(0,vw.useEffect)((()=>e&&t.addRelatedFlags(e,n())),[e,...r])}}}function Mw(e){const t=gw.default.useContext(ww),n=yg("PresenceListeners");(0,vw.useEffect)((()=>{let r;if(!e)return;const i=e=>{if(e.target instanceof Node){const i=mw(e.target,`[${Sw}]`);if(i){const e=i.getAttribute(Sw);return void(r!==e&&(r=e,t.setUserHover(e||void 0),n._debug("Updated current hover",{itemKey:e})))}null!=r&&(r=null,t.setUserHover(void 0),n._debug("Cleared current hover"))}};return e.addEventListener("mouseover",i),()=>{e.removeEventListener("mouseover",i),null!=r&&(r=null,n._debug("Cleared current hover as part of cleanup"))}}),[e,t])}var Pw,Tw,Cw,Aw,Iw,Rw,Ow,Dw,Lw,jw,zw,Nw,Bw,Fw,Uw=w({"studio/src/uiComponents/usePresence.tsx"(){var e;gw=k(nf()),vw=k(nf()),wg(),yw=k(n(771)),bw=k(n(771)),pf(),Ew(),L_(),(e=xw||(xw={}))[e.Primary=2]="Primary",e[e.Secondary=1]="Secondary",(_w=(0,yw.prism)((()=>{}))).keepHot(),ww=gw.default.createContext(function(e){const t=new bw.Atom(void 0),n=new bw.Atom({}),r=new bw.Atom({});let i=0;return{addRelatedFlags(e,t){const n=String(++i),o=t.map((t=>{const i={flag:t.flag},o=[t.affects,e,n];return r.setByPointer((e=>A_(e,o)),i),o}));return()=>{for(const e of o)r.setByPointer((t=>A_(t,e)),void 0)}},usePresenceFlag(i){if(e.enabled)return df((0,gw.useMemo)((()=>{if(!i)return _w;const e=t.prism,o=(0,yw.pointerToPrism)(n.pointer[i]),a=(0,yw.pointerToPrism)(r.pointer[i]);return(0,yw.prism)((()=>{if(o.getValue())return 2;{const t=a.getValue(),n=e.getValue(),r=t&&n&&t[n];if(r){let e;for(const t of Object.values(r))t&&(e&&e>=t.flag||(e=t.flag));return e}return}}))}),[i]))},setUserHover(e){const r=t.get();r!==e&&(r&&n.setByPointer((e=>e[r]),!1),t.set(e),e&&n.setByPointer((t=>t[e]),!0))}}}({enabled:!1})),Sw="data-pi-key"}}),Vw=w({"studio/src/propEditors/NextPrevKeyframeCursors.tsx"(){$x(),Ty(),Pw=k(nf()),mg(),Uw(),Uw(),Tw=Am.div`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 16px;
  margin: 0 0px 0 2px;
  position: relative;
  z-index: 0;
  opacity: 0.7;

  &:after {
    position: absolute;
    left: -14px;
    right: -14px;
    top: -2px;
    bottom: -2px;
    content: ' ';
    display: none;
    z-index: -1;
    background: ${ty(.2,"black")};
  }

  &:hover {
    opacity: 1;
    &:after {
      display: block;
    }
  }
`,Cw=Am.div`
  background: none;
  position: relative;
  border: 0;
  transition: transform 0.1s ease-out;
  z-index: 0;
  outline: none;
  cursor: pointer;

  &:after {
    display: none;
    ${Tw}:hover & {
      display: block;
    }
    position: absolute;
    left: -4px;
    right: -4px;
    top: -4px;
    bottom: -4px;
    content: ' ';
    z-index: -1;
  }
`,Aw={offColor:"#555",onColor:"#e0c917"},Iw=Am(Cw)`
  &:hover {
    color: #e0c917;
  }

  color: ${e=>e.presence===xw.Primary?"white":e.isOn?Aw.onColor:Aw.offColor};
`,Rw=Qm`
  pointer-events: none !important;
`,Ow=Am(Cw)`
  color: ${e=>e.flag===xw.Primary?"white":e.available?Aw.onColor:Aw.offColor};

  ${e=>e.available?Ix:Rw};
`,Dw=Am(Ow)`
  transform: translateX(2px);
  ${Tw}:hover & {
    transform: translateX(-7px);
  }
`,Lw=Am(Ow)`
  transform: translateX(-2px);
  ${Tw}:hover & {
    transform: translateX(7px);
  }
`,function(e){const t=Am.g`
    stroke-width: 1;
    ${Ow}:hover & path {
      stroke-width: 3;
    }
  `;e.Prev=()=>Pw.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Pw.default.createElement(t,{transform:"translate(6 3)"},Pw.default.createElement("path",{d:"M4 1L1 4L4 7",stroke:"currentColor"}))),e.Next=()=>Pw.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Pw.default.createElement(t,{transform:"translate(1 3)"},Pw.default.createElement("path",{d:"M1 1L4 4L1 7",stroke:"currentColor"})));const n=Am.g`
    stroke-width: 0;
    ${Iw}:hover & path {
      stroke: currentColor;
      stroke-width: 2;
    }
  `;e.Cur=()=>Pw.default.createElement("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Pw.default.createElement(n,{transform:"translate(1 4)"},Pw.default.createElement("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"currentColor"})))}(jw||(jw={})),zw=e=>{var t,n,r,i,o;const a=kw(null==(t=e.prev)?void 0:t.itemKey),s=kw("on"===(null==(n=e.cur)?void 0:n.type)?e.cur.itemKey:void 0),l=kw(null==(r=e.next)?void 0:r.itemKey);return Pw.default.createElement(Tw,null,Pw.default.createElement(Dw,y({available:!!e.prev,onClick:null==(i=e.prev)?void 0:i.jump,flag:a.flag},a.attrs),Pw.default.createElement(jw.Prev,null)),Pw.default.createElement(Iw,y({isOn:"on"===e.cur.type,onClick:e.cur.toggle,presence:s.flag},s.attrs),Pw.default.createElement(jw.Cur,null)),Pw.default.createElement(Lw,y({available:!!e.next,onClick:null==(o=e.next)?void 0:o.jump,flag:l.flag},l.attrs),Pw.default.createElement(jw.Next,null)))}}});function Hw(e,t,n){const r=function(e,t,n){if(Fw.has(e))return Fw.get(e);{const r=function(e,t,n){return(0,Bw.prism)((()=>{var r;const i=(0,Bw.getPointerParts)(e).path,o=t.getValueByPointer(e),a=Bw.prism.memo("editPropValue",(()=>{let t=null;return{temporarilySetValue(n){t||(t=T().scrub()),t.capture((t=>{t.set(e,n)}))},discardTemporaryValue(){t&&(t.discard(),t=null)},permanentlySetValue(n){t?(t.capture((t=>{t.set(e,n)})),t.commit(),t=null):T().transaction((t=>{t.set(e,n)}))}}}),[]),s={createAsset:e=>t.sheet.project.assetStorage.createAsset(e),getAssetUrl:e=>e.id?t.sheet.project.assetStorage.getAssetUrl(e.id):void 0},l=!0===(0,Bw.val)(js(T().atomP.ephemeral.projects.stateByProjectId[t.address.projectId].stateBySheetId[t.address.sheetId].stateByObjectKey[t.address.objectKey].valuesBeingScrubbed,(0,Bw.getPointerParts)(e).path)),c=[],u=b(y(y({},a),s),{value:o,beingScrubbed:l,contextMenuItems:c,controlIndicators:Nw.default.createElement(Nw.default.Fragment,null)}),d=!J_(n);if(d){const n=zp((0,Bw.val)(t.template.getMapOfValidSequenceTracks_forStudio()),i);if("string"==typeof n){c.push({label:"Make static",callback:()=>{T().transaction((({stateEditors:n})=>{const r=b(y({},t.address),{pathToProp:i});n.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(b(y({},r),{value:t.getValueByPointer(e)}))}))}});const o=n,a=Bw.prism.sub("lcr",(()=>{const e=(0,Bw.val)(t.template.project.pointers.historic.sheetsById[t.address.sheetId].sequence.tracksByObject[t.address.objectKey].trackData[o]),n=(0,Bw.val)(t.sheet.getSequence().positionPrism);return pw(t,e&&{data:e,id:o,sheetObject:t},n)}),[o]);let s;s=u.beingScrubbed?"Sequenced_OnKeyframe_BeingScrubbed":a.cur?"Sequenced_OnKeyframe":!0===(null==(r=a.prev)?void 0:r.kf.connectedRight)?"Sequenced_BeingInterpolated":"Sequened_NotBeingInterpolated";const l=()=>{a.cur?T().transaction((t=>{t.unset(e)})):T().transaction((t=>{t.set(e,u.value)}))},d={cur:a.cur?{type:"on",itemKey:a.cur.itemKey,toggle:l}:{type:"off",toggle:l},prev:void 0!==a.prev?{itemKey:a.prev.itemKey,position:a.prev.kf.position,jump:()=>{t.sheet.getSequence().position=a.prev.kf.position}}:void 0,next:void 0!==a.next?{itemKey:a.next.itemKey,position:a.next.kf.position,jump:()=>{t.sheet.getSequence().position=a.next.kf.position}}:void 0},h=Nw.default.createElement(zw,y({},d));return b(y({},u),{type:"Sequenced",shade:s,nearbyKeyframes:a,controlIndicators:h})}}return c.push({label:"Reset to default",callback:()=>{T().transaction((({unset:t})=>{t(e)}))}}),d&&c.push({label:"Sequence",callback:()=>{T().transaction((({stateEditors:e})=>{const r=b(y({},t.address),{pathToProp:i});e.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(r,n)}))}}),void 0!==zp((0,Bw.val)(t.template.getStaticValues()),i)?b(y({},u),{type:"Static",shade:u.beingScrubbed?"Static_BeingScrubbed":"Static",controlIndicators:Nw.default.createElement(lw,{hasStaticOverride:!0})}):b(y({},u),{type:"Default",shade:"Default",controlIndicators:Nw.default.createElement(lw,{hasStaticOverride:!1})})}))}(e,t,n);return Fw.set(e,r),r}}(e,t,n);return df(r)}var Ww,Gw,$w,qw,Kw,Xw,Yw,Zw,Jw,Qw=w({"studio/src/propEditors/useEditingToolsForSimpleProp.tsx"(){Fs(),Nw=k(nf()),Bw=k(n(771)),I(),Jp(),pf(),dw(),hw(),fw(),Vw(),Fw=new WeakMap}}),eS=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Left/PrimitivePropRow.tsx"(){I(),ct(),L_(),pf(),Ww=k(n(771)),Gw=k(nf()),mg(),Qw(),Vw(),UU(),Z_(),C_(),Y_(),$w={label:{color:"#9a9a9a"}},qw=Am(V_)``,Kw=Am(H_)`
  display: flex;
  color: ${$w.label.color};
  padding-right: 12px;
  align-items: center;
  justify-content: flex-end;
  box-sizing: border-box;
`,Xw=Am.button`
  background: none;
  border: none;
  outline: none;
  display: flex;
  box-sizing: border-box;
  font-size: 14px;
  align-items: center;
  height: 100%;
  margin-left: 12px;
  color: ${e=>e.isSelected?CU[e.graphEditorColor].iconColor:Aw.offColor};

  &:not([disabled]):hover {
    color: white;
  }
`,Yw=()=>Gw.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 640 512"},Gw.default.createElement("g",{transform:"translate(0 100)"},Gw.default.createElement("path",{fill:"currentColor",d:"M368 32h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM208 88h-84.75C113.75 64.56 90.84 48 64 48 28.66 48 0 76.65 0 112s28.66 64 64 64c26.84 0 49.75-16.56 59.25-40h79.73c-55.37 32.52-95.86 87.32-109.54 152h49.4c11.3-41.61 36.77-77.21 71.04-101.56-3.7-8.08-5.88-16.99-5.88-26.44V88zm-48 232H64c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zM576 48c-26.84 0-49.75 16.56-59.25 40H432v72c0 9.45-2.19 18.36-5.88 26.44 34.27 24.35 59.74 59.95 71.04 101.56h49.4c-13.68-64.68-54.17-119.48-109.54-152h79.73c9.5 23.44 32.41 40 59.25 40 35.34 0 64-28.65 64-64s-28.66-64-64-64zm0 272h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"}))),Zw=Am.span`
  margin-right: 4px;
  ${M_};

  ${Kw}:hover & {
    color: #ccc;
  }
`,Jw=({leaf:e})=>{var t;const n=A_(e.sheetObject.propsP,e.pathToProp),r=e.sheetObject,{controlIndicators:i}=Hw(n,r,e.propConf),o=uf((()=>{const t=e.sheetObject.address,n=qe(e.pathToProp);return(0,Ww.val)(T().atomP.historic.projects.stateByProjectId[t.projectId].stateBySheetId[t.sheetId].sequenceEditor.selectedPropsByObject[t.objectKey][n])}),[e]),a=(0,Gw.useRef)(!1),s="string"==typeof o;a.current=s;const l=(0,Gw.useCallback)((()=>{const t=e.sheetObject.address;T().transaction((({stateEditors:n})=>{a.current?n.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removePropFromGraphEditor(b(y({},t),{pathToProp:e.pathToProp})):(n.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.addPropToGraphEditor(b(y({},t),{pathToProp:e.pathToProp})),n.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!0}))}))}),[e]),c=null!=(t=e.propConf.label)?t:e.pathToProp[e.pathToProp.length-1],u=(0,Gw.useRef)(null);return F_(u.current,e),Gw.default.createElement(qw,{depth:e.depth},Gw.default.createElement(Kw,{ref:u,isEven:e.n%2==0,style:{height:e.nodeHeight+"px"},isSelected:!0===s},Gw.default.createElement(Zw,null,c),i,Gw.default.createElement(Xw,{onClick:l,isSelected:!0===s,graphEditorColor:null!=o?o:"1",style:{opacity:1},disabled:!1},Gw.default.createElement(Yw,null))))}}});function tS(e,t){T().transaction((({stateEditors:n})=>{n.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.sequenceEditorCollapsableItems.set(b(y({},t.sheetAddress),{studioSheetItemKey:t.sheetItemKey,isCollapsed:e}))}))}var nS,rS,iS,oS,aS,sS,lS,cS=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/setCollapsedSheetObjectOrCompoundProp.tsx"(){I()}}),uS=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Left/PropWithChildrenRow.tsx"(){nS=k(nf()),Z_(),eS(),cS(),rS=e=>{const t="prop"+e.pathToProp[e.pathToProp.length-1];return e.shouldRender?"propWithChildren"===e.type?nS.default.createElement(iS,{leaf:e,key:t}):nS.default.createElement(Jw,{leaf:e,key:t}):nS.default.createElement(nS.default.Fragment,{key:t})},iS=({leaf:e})=>nS.default.createElement(K_,{leaf:e,label:e.pathToProp[e.pathToProp.length-1],isCollapsed:e.isCollapsed,toggleCollapsed:()=>tS(!e.isCollapsed,{sheetAddress:e.sheetObject.address,sheetItemKey:e.sheetItemKey})},e.children.map((e=>rS(e))))}}),dS=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Left/SheetObjectRow.tsx"(){oS=k(nf()),Z_(),uS(),cS(),I(),aS=({leaf:e})=>oS.default.createElement(K_,{leaf:e,label:e.sheetObject.address.objectKey,isCollapsed:e.isCollapsed,toggleSelect:()=>{T().transaction((({stateEditors:t})=>{t.studio.historic.panels.outline.selection.set([e.sheetObject])}))},toggleCollapsed:()=>tS(!e.isCollapsed,{sheetAddress:e.sheetObject.address,sheetItemKey:e.sheetItemKey})},e.children.map((e=>rS(e))))}});function hS(e){return sS.has(e)||sS.set(e,(lS++).toString()),sS.get(e)}var pS,fS,mS,gS,vS,yS,bS,xS,_S=w({"shared/src/utils/uniqueKeyForAnyObject.ts"(){sS=new WeakMap,lS=0}}),wS=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Left/SheetRow.tsx"(){pf(),pS=k(nf()),dS(),Z_(),cS(),_S(),fS=({leaf:e})=>uf((()=>pS.default.createElement(K_,{leaf:e,label:e.sheet.address.sheetId,isCollapsed:e.isCollapsed,toggleCollapsed:()=>{tS(!e.isCollapsed,{sheetAddress:e.sheet.address,sheetItemKey:e.sheetItemKey})}},e.children.map((e=>pS.default.createElement(aS,{key:"sheetObject-"+hS(e.sheetObject),leaf:e}))))),[e])}}),SS=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Left/Left.tsx"(){pf(),mS=k(n(771)),gS=k(nf()),mg(),wS(),vS=Am.div`
  position: absolute;
  left: 0;
  overflow-x: visible;
`,yS=Am.ul`
  margin: 0;
  padding: 0;
  list-style: none;
`,bS=({layoutP:e})=>uf((()=>{const t=(0,mS.val)(e.tree),n=(0,mS.val)(e.leftDims.width);return gS.default.createElement(vS,{style:{width:n+"px",top:t.top+"px"}},gS.default.createElement(yS,null,gS.default.createElement(fS,{leaf:t})))}),[e])}});function ES({clippedSpaceRange:e,clippedSpaceWidth:t,fps:n,gapWidth:r=120},i){const o=1/n,a=t/(n*(e.end-e.start)),s=Math.floor(r/a),l=(s<n?xS(n).find((e=>e>=s)):n*Math.floor(s/n))*o,c=Math.floor(e.start/l),u=Math.ceil(e.end/l);for(let e=c;e<=u;e++){const t=e*l;i(t,t%1==0)}}var kS,MS,PS,TS,CS,AS,IS,RS,OS,DS,LS,jS,zS,NS,BS,FS,US,VS,HS,WS,GS,$S,qS,KS,XS,YS,ZS,JS,QS,eE=w({"studio/src/panels/SequenceEditorPanel/FrameGrid/createGrid.ts"(){Tp(),xS=ds((e=>{const t=[];for(let n=1;n<=e;n++)e%n==0&&t.push(n);return t}))}}),tE=w({"studio/src/panels/SequenceEditorPanel/FrameGrid/FrameGrid.tsx"(){kS=k(n(771)),MS=k(nf()),mg(),eE(),I(),PS=Am.div`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`,TS=Am.canvas`
  position: relative;
  left: 0;
`,CS=e=>{const t=e;return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1},AS=()=>window.devicePixelRatio||1,IS=e=>AS()/CS(e),RS=({layoutP:e,width:t,height:n})=>{const r=(0,MS.useRef)(null),[i,o]=(0,MS.useState)(null),{ctx:a,ratio:s}=(0,MS.useMemo)((()=>{if(!i)return{};const e=i.getContext("2d");return{ctx:e,ratio:IS(e)}}),[i]);return(0,MS.useLayoutEffect)((()=>{if(!a)return;i.width=t*s,i.height=n*s;const r=(0,kS.prism)((()=>{const t=(0,kS.val)(e.sheet).getSequence();return{ctx:a,clippedSpaceRange:(0,kS.val)(e.clippedSpace.range),clippedSpaceWidth:(0,kS.val)(e.clippedSpace.width),unitSpaceToClippedSpace:(0,kS.val)(e.clippedSpace.fromUnitSpace),height:n,leftPadding:(0,kS.val)(e.scaledSpace.leftPadding),fps:t.subUnitsPerUnit,snapToGrid:e=>t.closestGridPosition(e)}})).onChange(T().ticker,(e=>{a.save(),a.scale(s,s),function(e){const{clippedSpaceWidth:t,height:n,ctx:r,unitSpaceToClippedSpace:i,snapToGrid:o}=e;r.clearRect(0,0,t,n),ES(e,((e,t)=>{const a=o(e),s=Math.floor(i(a));r.strokeStyle=t?"rgba(225, 225, 225, 0.04)":"rgba(255, 255, 255, 0.01)",r.beginPath(),r.moveTo(s,0),r.lineTo(s,n),r.stroke(),r.closePath()}))}(e),a.restore()}),!0);return()=>{r()}}),[a,t,n,e]),MS.default.createElement(PS,{ref:r,style:{width:t+"px"}},MS.default.createElement(TS,{ref:o,style:{width:t+"px",height:n+"px"}}))}}}),nE=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/DopeSheetBackground.tsx"(){$x(),lz(),pf(),Ty(),OS=k(nf()),mg(),tE(),DS=Am.div`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: ${()=>Ij.rightBackground};
  overflow: hidden;
  background: ${ty(.01,Jv(.03,Rx.panel.bg))};
  pointer-events: none;
`,LS=({layoutP:e})=>{const t=Wp(e.rightDims.width),n=Wp(e.panelDims.height);return OS.default.createElement(DS,{style:{width:t+"px"}},OS.default.createElement(RS,{width:t,height:n,layoutP:e}))}}}),rE=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/DopeSheet.tsx"(){pf(),jS=k(nf()),mg(),SS(),nE(),YF(),cz(),zS=Am.div`
  position: absolute;
  left: 0;
  right: 0;
`,NS=({layoutP:e})=>{const t=Wp(e.dopeSheetDims.height);return jS.default.createElement(zS,{style:{height:t+"px"}},jS.default.createElement(LS,{layoutP:e}),jS.default.createElement(Wj,null,jS.default.createElement(bS,{layoutP:e}),jS.default.createElement(VF,{layoutP:e})))}}}),iE=w({"shared/src/utils/subPrism.ts"(){BS=k(n(771))}}),oE=w({"studio/src/panels/BasePanel/common.tsx"(){$x(),mg(),FS={get outlinePanel(){return 1},get propsPanel(){return FS.outlinePanel},get sequenceEditorPanel(){return this.outlinePanel-1},get toolbar(){return this.outlinePanel+1},get pluginPanes(){return this.sequenceEditorPanel-1}},US=Rx.panel.bg,VS=Am.span`
  white-space: nowrap;
`,HS=Am.span`
  white-space: nowrap;
  color: ${Rx.panel.head.punctuation.color};
`,WS=Am.div`
  background: ${US};
  flex-grow: 1;
  overflow-y: scroll;
  padding: 0;
`,GS=18,$S=Am.div`
  height: ${GS}px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 0 10px;
  position: relative;
  color: #adadadb3;
  border-bottom: 1px solid rgb(0 0 0 / 13%);
  background-color: #25272b;
  font-size: 10px;
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`,qS=100}}),aE=w({"studio/src/panels/SequenceEditorPanel/layout/tree.ts"(){jp(),KS=k(n(771)),Ge(),oE(),XS=28,YS=(e,t)=>{var n;KS.prism.ensurePrism();let r=GS+XS,i=0;const o=t.atomP.ahistoric.projects.stateByProjectId[e.address.projectId].stateBySheetId[e.address.sheetId].sequence.collapsableItems,a=o.byId[Rp.forSheet()].isCollapsed,s=null!=(n=(0,KS.pointerToPrism)(a).getValue())&&n,l={type:"sheet",isCollapsed:s,sheet:e,children:[],sheetItemKey:Rp.forSheet(),shouldRender:!0,top:GS,depth:0,n:i,nodeHeight:XS,heightIncludingChildren:-1};i+=1;for(const t of Object.values((0,KS.val)(e.objectsP)))t&&c(t,l.children,l.depth+1,!s);function c(e,t,n,a){var s;const l=(0,KS.val)(e.template.getMapOfValidSequenceTracks_forStudio()),c=(0,KS.val)(e.template.configPointer);if(0===Object.keys(l).length)return;const d=o.byId[Rp.forSheetObject(e)].isCollapsed,h=null!=(s=(0,KS.pointerToPrism)(d).getValue())&&s,p={type:"sheetObject",isCollapsed:h,sheetItemKey:Rp.forSheetObject(e),shouldRender:a,top:r,children:[],depth:n,n:i,sheetObject:e,nodeHeight:a?XS:0,heightIncludingChildren:-1};t.push(p),a&&(i+=1,r+=p.nodeHeight),u(e,l,[],c,p.children,n+1,a&&!h),p.heightIncludingChildren=r-p.top}function u(e,t,n,r,i,o,a){for(const[s,l]of Object.entries(t))d(e,l,[...n,s],r.props[s],i,o,a)}function d(e,t,n,a,s,l,c){"compound"===a.type?function(e,t,n,a,s,l,c,d){var h;const p=o.byId[Rp.forSheetObjectProp(e,a)].isCollapsed,f=null!=(h=(0,KS.pointerToPrism)(p).getValue())&&h,m={type:"propWithChildren",isCollapsed:f,propConf:n,pathToProp:a,sheetItemKey:Rp.forSheetObjectProp(e,a),sheetObject:e,shouldRender:d,top:r,children:[],nodeHeight:d?XS:0,heightIncludingChildren:-1,depth:c,trackMapping:t,n:i};l.push(m),d&&(r+=m.nodeHeight,i+=1),u(e,t,a,s,m.children,c+1,d&&!f),m.heightIncludingChildren=r-m.top}(e,t,a,n,a,s,l,c):"enum"===a.type?He.warn("Prop type enum is not yet supported in the sequence editor"):function(e,t,n,o,a,s,l){const c={type:"primitiveProp",propConf:o,depth:s,sheetItemKey:Rp.forSheetObjectProp(e,n),sheetObject:e,pathToProp:n,shouldRender:l,top:r,nodeHeight:l?XS:0,heightIncludingChildren:l?XS:0,trackId:t,n:i};a.push(c),i+=1,r+=c.nodeHeight}(e,t,n,a,s,l,c)}return l.heightIncludingChildren=r-l.top,l}}});var sE,lE,cE,uE,dE,hE,pE,fE=w({"studio/src/panels/SequenceEditorPanel/layout/layout.ts"(){I(),iE(),_v(),ZS=k(n(771)),aE(),Tp(),JS=.2,QS={start:0,end:10}}});function mE(e){const{fullSecondStampsContainer:t,sequencePositionFormatter:n,snapToGrid:r,unitSpaceToClippedSpace:i}=e;let o="";ES(e,((e,t)=>{const a=r(e),s=i(a);o+=t?gE(n.formatFullUnitForGrid(a),s,"full-unit"):gE(n.formatSubUnitForGrid(a),s,"sub-unit")})),t.innerHTML=o}function gE(e,t,n){return`<span class="${n}" style="transform: translate3d(${t.toFixed(1)}px, -50%, 0);">${e}</span>`}var vE,yE,bE,xE,_E,wE,SE,EE,kE,ME,PE,TE,CE,AE,IE,RE,OE,DE=w({"studio/src/panels/SequenceEditorPanel/FrameGrid/StampsGrid.tsx"(){sE=k(n(771)),Ty(),lE=k(nf()),mg(),eE(),I(),cE=Am.div`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`,uE={fullUnitStampColor:"#6a6a6a",stampFontSize:"10px",get subUnitStampColor(){return Jv(.2,uE.fullUnitStampColor)}},dE=Am.div`
  position: absolute;
  top: 0;
  height: 100%;
  left: 0;
  overflow: hidden;
  z-index: 2;
  will-change: transform;
  pointer-events: none;
`,hE=Am.div`
  position: absolute;
  top: 0;
  left: 0;

  & > span {
    position: absolute;
    display: block;
    top: 9px;
    left: -10px;
    color: ${uE.fullUnitStampColor};
    text-align: center;
    font-size: ${uE.stampFontSize};
    width: 20px;

    &.full-unit {
      color: ${uE.fullUnitStampColor};
    }

    &.sub-unit {
      color: ${uE.subUnitStampColor};
    }
  }

  pointer-events: none;
`,pE=({layoutP:e,width:t})=>{const n=(0,lE.useRef)(null),[r,i]=(0,lE.useState)(null);return(0,lE.useLayoutEffect)((()=>{if(r)return(0,sE.prism)((()=>{const t=(0,sE.val)(e.sheet).getSequence();return{fullSecondStampsContainer:r,clippedSpaceRange:(0,sE.val)(e.clippedSpace.range),clippedSpaceWidth:(0,sE.val)(e.clippedSpace.width),unitSpaceToClippedSpace:(0,sE.val)(e.clippedSpace.fromUnitSpace),leftPadding:(0,sE.val)(e.scaledSpace.leftPadding),fps:t.subUnitsPerUnit,sequencePositionFormatter:t.positionFormatter,snapToGrid:e=>t.closestGridPosition(e)}})).onChange(T().ticker,mE,!0)}),[r,t,e]),lE.default.createElement(cE,{ref:n,style:{width:t+"px"}},lE.default.createElement(dE,{style:{width:t+"px"}},lE.default.createElement(hE,{ref:i})))}}}),LE=w({"studio/src/utils/mousePositionD.ts"(){vE=k(n(771)),yE=(0,vE.prism)((()=>{const[e,t]=vE.prism.state("pos",null);return vE.prism.effect("setupListeners",(()=>{const e=e=>{t(e)};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}}),[]),e})),bE=yE}}),jE=w({"studio/src/panels/SequenceEditorPanel/FrameStampPositionProvider.tsx"(){var e;xE=k(n(771)),LE(),Tp(),_E=k(nf()),(e=wE||(wE={}))[e.hidden=0]="hidden",e[e.locked=1]="locked",e[e.snapped=2]="snapped",e[e.free=3]="free",SE=(0,_E.createContext)(null),EE=0,kE=({children:e,layoutP:t})=>{const n=(0,_E.useMemo)((()=>new xE.Atom([])),[]),r={currentD:(0,_E.useMemo)((()=>(0,xE.prism)((()=>{const e=xE.prism.memo("p",(()=>IE(t)),[t]).getValue(),r=(0,xE.val)(n.pointer);return r.length>0?V(r).position:e}))),[t]),getLock:(0,_E.useCallback)((()=>{const e=EE++;return n.reduce((t=>[...t,{id:e,position:[-1,0]}])),{set:t=>{n.reduce((n=>{const r=n.findIndex((t=>t.id===e));if(-1===r)return console.warn("Lock is already freed. This is a bug."),n;const i=[...n];return i.splice(r,1,{id:e,position:[t,-1===t?0:1]}),i}))},unlock:()=>{n.reduce((t=>t.filter((t=>t.id!==e))))}}}),[])};return _E.default.createElement(SE.Provider,{value:r},e)},ME=()=>(0,_E.useContext)(SE).currentD,PE=()=>{const{getLock:e}=(0,_E.useContext)(SE),t=(0,_E.useRef)();return(0,_E.useLayoutEffect)((()=>()=>{var e;null==(e=t.current)||e.unlock()}),[]),(0,_E.useMemo)((()=>{let n;return(r,i)=>{var o,a;(null==n?void 0:n.shouldLock)!==r&&(r?t.current=e():null==(o=t.current)||o.unlock()),(null==n?void 0:n.pos)!==i&&r&&(null==(a=t.current)||a.set(i)),n={shouldLock:r,pos:i}}}),[e])},TE=(e,t)=>{const{getLock:n}=(0,_E.useContext)(SE),r=(0,_E.useRef)();(0,_E.useLayoutEffect)((()=>{if(e)return r.current=n(),()=>{r.current.unlock()}}),[e,n]),(0,_E.useLayoutEffect)((()=>{e&&r.current.set(t)}),[t,e])},CE=e=>({[AE]:"hide"===e?e:e.toFixed(3)}),AE="data-theatre-lock-framestamp-to",IE=e=>(0,xE.prism)((()=>{const t=(0,xE.val)(e.rightDims),n=(0,xE.val)(e.clippedSpace.toUnitSpace),r=(0,xE.val)(bE);if(!r)return[-1,0];for(const e of r.composedPath()){if(!(e instanceof HTMLElement||e instanceof SVGElement))break;if(e.hasAttribute(AE)){const t=e.getAttribute(AE);if("string"!=typeof t)continue;if("hide"===t)return[-1,0];const n=parseFloat(t);if(isFinite(n)&&n>=0)return[n,2]}}const{clientX:i,clientY:o}=r,{screenX:a,screenY:s,width:l,height:c}=t;return _h(i,a,a+l)&&_h(o,s+16,s+c)?[n(i-a),3]:[-1,0]})),RE=kE}});function zE(){const[e,t]=(0,OE.useState)(!1);return[e,(0,OE.useMemo)((()=>{const e=new Set;return()=>{const n=()=>{e.delete(n),t(e.size>0)};return e.add(n),t(!0),n}}),[])]}var NE,BE,FE,UE,VE,HE,WE,GE,$E,qE,KE,XE,YE,ZE,JE,QE,ek,tk,nk=w({"studio/src/uiComponents/useLockSet.ts"(){OE=k(nf())}}),rk=w({"../node_modules/react-use/esm/useEffectOnce.js"(){NE=k(nf()),BE=function(e){(0,NE.useEffect)(e,[])}}}),ik=w({"../node_modules/react-use/esm/useUnmount.js"(){FE=k(nf()),rk(),UE=function(e){var t=(0,FE.useRef)(e);t.current=e,BE((function(){return function(){return t.current()}}))}}}),ok=w({"../node_modules/react-use/esm/useRafState.js"(){VE=k(nf()),ik(),HE=function(e){var t=(0,VE.useRef)(0),n=(0,VE.useState)(e),r=n[0],i=n[1],o=(0,VE.useCallback)((function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame((function(){i(e)}))}),[]);return UE((function(){cancelAnimationFrame(t.current)})),[r,o]}}}),ak=w({"../node_modules/react-use/esm/misc/util.js"(){WE="undefined"!=typeof window}}),sk=w({"../node_modules/react-use/esm/useWindowSize.js"(){GE=k(nf()),ok(),ak(),$E=function(e,t){void 0===e&&(e=1/0),void 0===t&&(t=1/0);var n=HE({width:WE?window.innerWidth:e,height:WE?window.innerHeight:t}),r=n[0],i=n[1];return(0,GE.useEffect)((function(){if(WE){var e=function(){i({width:window.innerWidth,height:window.innerHeight})};return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}(window,"resize",e),function(){!function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}(window,"resize",e)}}}),[]),r},qE=$E}}),lk=w({"studio/src/panels/BasePanel/BasePanel.tsx"(){KE=k(n(771)),pf(),I(),nk(),XE=k(nf()),sk(),YE=(e,t)=>{const n=e.left/t.width,r=(e.left+e.width)/t.width,i=e.top/t.height,o=(e.height+e.top)/t.height;return{edges:{left:n<=.5?{from:"screenLeft",distance:n}:{from:"screenRight",distance:1-n},right:r<=.5?{from:"screenLeft",distance:r}:{from:"screenRight",distance:1-r},top:i<=.5?{from:"screenTop",distance:i}:{from:"screenBottom",distance:1-i},bottom:o<=.5?{from:"screenTop",distance:o}:{from:"screenBottom",distance:1-o}}}},ZE=XE.default.createContext(null),JE=()=>(0,XE.useContext)(ZE),QE=({panelId:e,children:t,defaultPosition:n,minDims:r})=>{const i=qE(800,200),[o,a]=zE(),{stuff:s}=uf((()=>{var t;const{edges:s}=null!=(t=(0,KE.val)(T().atomP.historic.panelPositions[e]))?t:n,l=Math.floor(i.width*("screenLeft"===s.left.from?s.left.distance:1-s.left.distance)),c=Math.floor(i.width*("screenLeft"===s.right.from?s.right.distance:1-s.right.distance)),u=Math.floor(i.height*("screenTop"===s.top.from?s.top.distance:1-s.top.distance)),d=Math.floor(i.height*("screenTop"===s.bottom.from?s.bottom.distance:1-s.bottom.distance)),h=Math.max(c-l,r.width),p=Math.max(d-u,r.height);return{stuff:{dims:KE.prism.memo("dims",(()=>({width:h,left:l,top:u,height:p})),[h,l,u,p]),panelId:e,minDims:r,boundsHighlighted:o,addBoundsHighlightLock:a}}}),[e,i,o,a]);return XE.default.createElement(ZE.Provider,{value:s},t)}}}),ck=w({"studio/src/uiComponents/useHoverWithoutDescendants.ts"(){ek=k(nf())}});function uk(e){const[t,n]=(0,tk.useState)(null);return(0,tk.useLayoutEffect)((()=>(e&&n(e.getBoundingClientRect()),()=>{n(null)})),[e]),t}var dk,hk,pk,fk,mk,gk,vk,yk,bk,xk,_k,wk,Sk,Ek,kk,Mk,Pk,Tk,Ck,Ak,Ik,Rk,Ok,Dk=w({"studio/src/uiComponents/useBoundingClientRect.ts"(){tk=k(nf())}}),Lk=w({"studio/src/uiComponents/simpleContextMenu/ContextMenu/Item.tsx"(){Cg(),dk=k(nf()),mg(),hk=26,pk=Am.li`
  height: ${hk}px;
  padding: 0 12px;
  margin: 0;
  display: flex;
  align-items: center;
  font-size: 11px;
  font-weight: 400;
  position: relative;
  color: ${e=>e.enabled?"white":"#8f8f8f"};
  cursor: ${e=>e.enabled?"normal":"not-allowed"};

  &:after {
    position: absolute;
    inset: 2px 1px;
    display: block;
    content: ' ';
    pointer-events: none;
    z-index: -1;
    border-radius: 3px;
  }

  &:hover:after {
    background-color: ${e=>e.enabled?"rgba(63, 174, 191, 0.75)":"initial"};
  }
`,fk=Am.span``,mk=e=>dk.default.createElement(pk,{onClick:e.enabled?e.onClick:kg,enabled:e.enabled,title:e.enabled?void 0:"Disabled"},dk.default.createElement(fk,null,e.label))}}),jk=w({"studio/src/uiComponents/useOnKeyDown.ts"(){gk=k(nf())}}),zk=w({"studio/src/uiComponents/simpleContextMenu/ContextMenu/BaseMenu.tsx"(){vk=k(nf()),Lk(),mg(),Ty(),$x(),yk=Am.ul`
  position: absolute;
  min-width: ${190}px;
  z-index: 10000;
  background: ${ty(.2,"#111")};
  backdrop-filter: blur(2px);
  color: white;
  list-style-type: none;
  padding: 2px 0;
  margin: 0;
  border-radius: 1px;
  cursor: default;
  ${Ix};
  border-radius: 3px;
`,bk=Am.div`
  padding: 4px 10px;
  border-bottom: 1px solid #6262626d;
  color: #adadadb3;
  font-size: 11px;
  font-weight: 500;
`,xk=vk.default.forwardRef(((e,t)=>vk.default.createElement(yk,{ref:t},e.displayName?vk.default.createElement(bk,null,e.displayName):null,e.items.map(((t,n)=>vk.default.createElement(mk,{key:`item-${n}`,label:t.label,enabled:!1!==t.enabled,onClick:n=>{t.callback&&t.callback(n),e.onRequestClose()}})))))),_k=xk}}),Nk=w({"studio/src/uiComponents/simpleContextMenu/ContextMenu/ContextMenu.tsx"(){Dk(),wk=k(nf()),Sk=k(nf()),Ek=k(nf()),kk=k(cf()),sk(),Lk(),Gx(),jk(),zk(),Mk=e=>{const[t,n]=(0,Ek.useState)(null),r=uk(t),i=qE();(0,Ek.useLayoutEffect)((()=>{if(!r||!t)return;const n=r.width/2,o=hk/2+(e.displayName?hk:0),a={left:e.clickPoint.clientX-n,top:e.clickPoint.clientY-o};a.left<0?a.left=0:a.left+r.width>i.width&&(a.left=i.width-r.width),a.top<0?a.top=0:a.top+r.height>i.height&&(a.top=i.height-r.height),t.style.left=a.left+"px",t.style.top=a.top+"px";const s=t=>{(t.clientX<a.left-20||t.clientX>a.left+r.width+20||t.clientY<a.top-20||t.clientY>a.top+r.height+20)&&e.onRequestClose()};return window.addEventListener("mousemove",s),()=>{window.removeEventListener("mousemove",s)}}),[r,t,e.clickPoint,i,e.onRequestClose]);const o=(0,Sk.useContext)(_x);!function(e){const t=(0,gk.useRef)(e);t.current=e,(0,gk.useEffect)((()=>{const e=e=>t.current(e);return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[])}((t=>{"Escape"===t.key&&e.onRequestClose()}));const a=(0,wk.useMemo)((()=>{const t=Array.isArray(e.items)?e.items:e.items();return t.length>0?t:[{label:e.displayName?`No actions for ${e.displayName}`:"No actions found",enabled:!1}]}),[e.items]);return(0,kk.createPortal)(Ek.default.createElement(_k,{items:a,onRequestClose:e.onRequestClose,displayName:e.displayName,ref:n}),o)}}}),Bk=w({"studio/src/uiComponents/simpleContextMenu/useRequestContextMenu.ts"(){Pk=k(nf()),Tk=(e,t)=>{const[n,r]=(0,Pk.useState)({isOpen:!1}),i=(0,Pk.useCallback)((()=>r({isOpen:!1})),[]);return(0,Pk.useEffect)((()=>{if(!e||!0===t.disabled)return void r({isOpen:!1});const n=e=>{r({isOpen:!0,event:e}),e.preventDefault(),e.stopPropagation()};return e.addEventListener("contextmenu",n),()=>{e.removeEventListener("contextmenu",n)}}),[e,t.disabled]),[n,i]}}}),Fk=w({"studio/src/uiComponents/form/BasicCheckbox.tsx"(){mg(),Ck=Am.input.attrs({type:"checkbox"})`
  outline: none;
`,Ak=Ck}});function Uk({propConfig:e,editingTools:t,value:n,autoFocus:r}){const i=(0,Ik.useCallback)((e=>{t.permanentlySetValue(Boolean(e.target.checked))}),[e,t]);return Ik.default.createElement(Rk,{checked:n,onChange:i,autoFocus:r})}var Vk,Hk=w({"studio/src/propEditors/simpleEditors/BooleanPropEditor.tsx"(){Ik=k(nf()),mg(),Fk(),Rk=Am(Ak)`
  margin-left: 6px;

  :focus {
    outline: 1px solid #555;
  }
`,Ok=Uk}});function Wk(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}var Gk,$k=w({"../node_modules/react-merge-refs/dist/react-merge-refs.esm.js"(){Vk=Wk}});function qk(e,t,n){(0,Gk.useEffect)((()=>{if(!e||!1===n)return;const r=Array.isArray(e)?e.filter((e=>e)):[e],i=e=>{r.every((t=>!e.composedPath().includes(t)))&&t(e)};return window.addEventListener("mousedown",i,{capture:!0,passive:!1}),()=>{window.removeEventListener("mousedown",i,{capture:!0,passive:!1})}}),[e,n])}var Kk,Xk,Yk,Zk,Jk,Qk,eM,tM,nM,rM,iM,oM=w({"studio/src/uiComponents/useOnClickOutside.ts"(){Gk=k(nf())}}),aM=w({"studio/src/uiComponents/form/BasicNumberInput.tsx"(){Tp(),Kk=k(nf()),Xk=k(nf()),Yk=k(nf()),mg(),$k(),jg(),oM(),Fg(),Zk=Am.div`
  height: 100%;
  width: 100%;
  position: relative;
  z-index: 0;
  box-sizing: border-box;
  display: flex;
  align-items: center;

  &:after {
    position: absolute;
    inset: 1px 0 2px;
    display: block;
    content: ' ';
    background-color: transparent;
    border: 1px solid transparent;
    z-index: -2;
    box-sizing: border-box;
    border-radius: 1px;
  }

  &:hover,
  &.dragging,
  &.editingViaKeyboard {
    &:after {
      background-color: #10101042;
      border-color: #00000059;
    }
  }
`,Jk=Am.input`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: ew-resize;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;

  &:focus {
    cursor: text;
  }
`,Qk=Am.div`
  position: absolute;
  inset: 3px 2px 4px;
  transform: scale(var(--percentage), 1);
  transform-origin: top left;
  background-color: #2d5561;
  z-index: -1;
  border-radius: 2px;
  pointer-events: none;

  ${Zk}.dragging &, ${Zk}.noFocus:hover & {
    background-color: #338198;
  }
`,eM=Am.div`
  display: contents;
`,tM=e=>!0,nM=e=>{var t;const[n]=Ig({mode:"noFocus"}),r=null!=(t=e.isValid)?t:tM,i=(0,Yk.useRef)(e);i.current=e;const o=(0,Yk.useRef)(null);qk(o.current,(()=>{o.current.blur()}),"editingViaKeyboard"===n.current.mode);const a=(0,Yk.useRef)(null),s=(0,Yk.useMemo)((()=>{const t=()=>{const e=n.current,t=parseFloat(e.currentEditedValueInString);isFinite(t)&&r(t)?e.valueBeforeEditing===t?i.current.discardTemporaryValue():i.current.permanentlySetValue(t):i.current.discardTemporaryValue()};let s;return{inputChange:e=>{const t=e.target,{value:o}=t,a=n.current;n.current=b(y({},a),{currentEditedValueInString:o});const s=parseFloat(o);isFinite(s)&&r(s)&&i.current.temporarilySetValue(s)},onBlur:()=>{"editingViaKeyboard"===n.current.mode&&(t(),n.current={mode:"noFocus"}),e.onBlur&&e.onBlur()},transitionToDraggingMode:()=>{var t;const r=i.current.value;s=null==(t=o.current)?void 0:t.getBoundingClientRect().width,n.current={mode:"dragging"};let l=r,c=r;return a.current=document.body.style.cursor,{onDrag(t,n,r,o){const a=r.altKey?o/10:o,l=c+e.nudge({deltaX:a,deltaFraction:a/s,magnitude:1});c=e.range?ml(l,e.range[0],e.range[1]):l,i.current.temporarilySetValue(c)},onDragEnd(e){e?(l===c?i.current.discardTemporaryValue():i.current.permanentlySetValue(c),n.current={mode:"noFocus"}):(i.current.discardTemporaryValue(),n.current={mode:"noFocus"})},onClick(){o.current.focus(),o.current.setSelectionRange(0,100)}}},onInputKeyDown:e=>{"Escape"===e.key?(i.current.discardTemporaryValue(),n.current={mode:"noFocus"},o.current.blur()):"Enter"!==e.key&&"Tab"!==e.key||(t(),o.current.blur())},onClick:e=>{"noFocus"===n.current.mode?(o.current.focus(),e.preventDefault(),e.stopPropagation()):e.stopPropagation()},onFocus:()=>{"noFocus"===n.current.mode?(()=>{const e=i.current.value;n.current={mode:"editingViaKeyboard",currentEditedValueInString:String(e),valueBeforeEditing:e},setTimeout((()=>{o.current.focus(),o.current.setSelectionRange(0,100)}))})():n.current.mode}}}),[]);(0,Kk.useEffect)((()=>()=>{s.onBlur()}),[]);let l="editingViaKeyboard"!==n.current.mode?(c=e.value,isNaN(c)?"NaN":Eh(c)?c.toFixed(0):lp(c,3).toString()):n.current.currentEditedValueInString;var c;"number"==typeof l&&isNaN(l)&&(l="NaN");const u=[o];e.inputRef&&u.push(e.inputRef);const d=Yk.default.createElement(Jk,{key:"input",type:"text",onChange:s.inputChange,value:l,onBlur:s.onBlur,onKeyDown:s.onInputKeyDown,onClick:s.onClick,onFocus:s.onFocus,ref:Vk(u),onMouseDown:e=>{e.stopPropagation()},onDoubleClick:e=>{e.preventDefault(),e.stopPropagation()},autoFocus:e.autoFocus}),{range:h}=e,p=parseFloat(l),f=h?Yk.default.createElement(Qk,{style:{"--percentage":ml((p-h[0])/(h[1]-h[0]),0,1)}}):null,[m,g]=(0,Xk.useState)(null);return zg(m,{debugName:"form/BasicNumberInput",onDragStart:s.transitionToDraggingMode,lockCSSCursorTo:"ew-resize",shouldPointerLock:!0,disabled:"editingViaKeyboard"===n.current.mode}),Yk.default.createElement(Zk,{className:e.className+" "+n.current.mode},Yk.default.createElement(eM,{ref:g},d),f)}}});function sM({propConfig:e,editingTools:t,value:n,autoFocus:r}){const i=(0,rM.useCallback)((t=>e.nudgeFn(b(y({},t),{config:e}))),[e]);return rM.default.createElement(nM,{value:n,temporarilySetValue:t.temporarilySetValue,discardTemporaryValue:t.discardTemporaryValue,permanentlySetValue:t.permanentlySetValue,range:e.range,nudge:i,autoFocus:r})}var lM,cM,uM,dM,hM,pM=w({"studio/src/propEditors/simpleEditors/NumberPropEditor.tsx"(){aM(),rM=k(nf()),iM=sM}});function fM({value:e,onChange:t,options:n,autoFocus:r}){const i=(0,lM.useCallback)((e=>{t(String(e.target.value))}),[t]);return lM.default.createElement(cM,{role:"radiogroup"},Object.keys(n).map(((t,o)=>lM.default.createElement(uM,{key:"label-"+o,"data-checked":e===t},n[t],lM.default.createElement(dM,{type:"radio",checked:e===t,value:t,onChange:i,name:"switchbox",autoFocus:r})))))}var mM,gM,vM,yM,bM,xM=w({"studio/src/uiComponents/form/BasicSwitch.tsx"(){Ty(),lM=k(nf()),mg(),cM=Am.form`
  display: flex;
  flex-direction: row;
  align-items: stretch;
  vertical-align: middle;
  justify-content: stretch;
  height: 24px;
  width: 100%;
`,uM=Am.label`
  padding: 0 0.5em;
  background: transparent;
  /* background: #373748; */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  color: #a7a7a7;
  border: 1px solid transparent;
  box-sizing: border-box;
  border-right-width: 0px;

  & + &:last-child {
    border-right-width: 1px;
  }

  ${cM}:hover > & {
    border-color: #1c2123;
    /* background-color: #373748; */
    /* color: ${Jv(.1,"white")}; */
  }

  &&:hover {
    background-color: #464654;
  }

  &&[data-checked='true'] {
    color: white;
    background: #3f3f4c;
  }
`,dM=Am.input`
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
`,hM=fM}});function _M({value:e,onChange:t,options:n,className:r,autoFocus:i}){const o=(0,mM.useCallback)((e=>{t(String(e.target.value))}),[t]);return mM.default.createElement(gM,null,mM.default.createElement(yM,{className:r,value:e,onChange:o,autoFocus:i},Object.keys(n).map(((e,t)=>mM.default.createElement("option",{key:"option-"+t,value:e},n[e])))),mM.default.createElement(vM,null,mM.default.createElement(S_,null)))}var wM,SM,EM=w({"studio/src/uiComponents/form/BasicSelect.tsx"(){mM=k(nf()),mg(),T_(),gM=Am.div`
  width: 100%;
  position: relative;
`,vM=Am.div`
  position: absolute;
  right: 0px;
  top: 0;
  bottom: 0;
  width: 1.5em;
  font-size: 14px;
  display: flex;
  align-items: center;
  color: #6b7280;
  pointer-events: none;
`,yM=Am.select`
  appearance: none;
  background-color: transparent;
  box-sizing: border-box;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.85);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  text-align: left;
  width: 100%;
  border-radius: 2px;
  /*
  looks like putting percentages in the height of a select box doesn't work in Firefox. Not sure why.
  So we're hard-coding the height to 26px, unlike all other inputs that use a relative height.
  */
  height: 26px /* calc(100% - 4px); */;

  @supports (-moz-appearance: none) {
    /* Ugly hack to remove the extra left padding that shows up only in Firefox */
    text-indent: -2px;
  }

  &:hover,
  &:focus {
    background-color: #10101042;
    border-color: #00000059;
  }
`,bM=_M}});function kM({propConfig:e,editingTools:t,value:n,autoFocus:r}){const i=(0,wM.useCallback)((e=>{t.permanentlySetValue(e)}),[e,t]);return"menu"===e.as?wM.default.createElement(bM,{value:n,onChange:i,options:e.valuesAndLabels,autoFocus:r}):wM.default.createElement(hM,{value:n,onChange:i,options:e.valuesAndLabels,autoFocus:r})}var MM,PM,TM,CM,AM,IM,RM,OM=w({"studio/src/propEditors/simpleEditors/StringLiteralPropEditor.tsx"(){wM=k(nf()),xM(),EM(),SM=kM}}),DM=w({"studio/src/uiComponents/form/BasicStringInput.tsx"(){mg(),MM=k(nf()),PM=k(nf()),$k(),jg(),oM(),TM=Am.input.attrs({type:"text"})`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;
  border: 1px solid transparent;
  box-sizing: border-box;

  &:hover {
    background-color: #10101042;
    border-color: #00000059;
  }

  &:hover,
  &:focus {
    cursor: text;
    background-color: #10101042;
    border-color: #00000059;
  }

  &.invalid {
    border-color: red;
  }
`,CM=e=>!0,AM=e=>{var t,n;const[r]=Ig({mode:"noFocus"}),i=null!=(t=e.isValid)?t:CM,o=(0,PM.useRef)(e);o.current=e;const a=(0,PM.useRef)(null);qk(a.current,(()=>{a.current.blur()}),"editingViaKeyboard"===r.current.mode);const s=(0,PM.useMemo)((()=>{const e=()=>{const e=r.current,t=e.currentEditedValueInString;i(t)?e.valueBeforeEditing===t?o.current.discardTemporaryValue():o.current.permanentlySetValue(t):o.current.discardTemporaryValue()};return{inputChange:e=>{const t=e.target,{value:n}=t,a=r.current;r.current=b(y({},a),{currentEditedValueInString:n}),i(n)&&o.current.temporarilySetValue(n)},onBlur:()=>{var t,n;"editingViaKeyboard"===r.current.mode&&(e(),r.current={mode:"noFocus"}),null==(n=(t=o.current).onBlur)||n.call(t)},onInputKeyDown:t=>{"Escape"===t.key?(o.current.discardTemporaryValue(),r.current={mode:"noFocus"},a.current.blur()):"Enter"!==t.key&&"Tab"!==t.key||(e(),a.current.blur())},onClick:e=>{"noFocus"===r.current.mode?(a.current.focus(),e.preventDefault(),e.stopPropagation()):e.stopPropagation()},onFocus:()=>{"noFocus"===r.current.mode?(()=>{const e=o.current.value;r.current={mode:"editingViaKeyboard",currentEditedValueInString:String(e),valueBeforeEditing:e},setTimeout((()=>{a.current.focus()}))})():r.current.mode}}}),[]);(0,MM.useEffect)((()=>()=>{s.onBlur()}),[]);let l="editingViaKeyboard"!==r.current.mode?e.value:r.current.currentEditedValueInString;const c=[a];return e.inputRef&&c.push(e.inputRef),PM.default.createElement(TM,{key:"input",type:"text",className:`${null!=(n=e.className)?n:""} ${i(l)?"":"invalid"}`,onChange:s.inputChange,value:l,onBlur:s.onBlur,onKeyDown:s.onInputKeyDown,onClick:s.onClick,onFocus:s.onFocus,ref:Vk(c),onMouseDown:e=>{e.stopPropagation()},onDoubleClick:e=>{e.preventDefault(),e.stopPropagation()},autoFocus:e.autoFocus})}}});function LM({editingTools:e,value:t,autoFocus:n}){return IM.default.createElement(AM,{value:t,temporarilySetValue:e.temporarilySetValue,discardTemporaryValue:e.discardTemporaryValue,permanentlySetValue:e.permanentlySetValue,autoFocus:n})}var jM,zM=w({"studio/src/propEditors/simpleEditors/StringPropEditor.tsx"(){IM=k(nf()),DM(),RM=LM}});function NM(e,{removeAlphaIfOpaque:t=!1}={}){const n=(255*e.a|256).toString(16).slice(1);return`#${(255*e.r|256).toString(16).slice(1)+(255*e.g|256).toString(16).slice(1)+(255*e.b|256).toString(16).slice(1)+(t&&"ff"===n?"":n)}`}function BM(e){return b(y({},e),{toString(){return NM(this,{removeAlphaIfOpaque:!0})}})}var FM,UM=w({"shared/src/utils/color.ts"(){jM=/^#*([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i}});function VM(e){const t=(0,FM.useRef)(e),n=(0,FM.useRef)((e=>{t.current&&t.current(e)}));return t.current=e,n.current}var HM,WM,GM,$M,qM,KM,XM,YM,ZM,JM,QM,eP,tP,nP,rP,iP,oP,aP,sP,lP,cP,uP,dP,hP,pP,fP,mP,gP,vP,yP,bP,xP,_P,wP,SP,EP,kP,MP,PP,TP,CP,AP,IP,RP,OP,DP,LP,jP,zP,NP,BP,FP,UP,VP,HP,WP,GP,$P,qP,KP,XP=w({"studio/src/uiComponents/colorPicker/hooks/useEventCallback.ts"(){FM=k(nf())}}),YP=w({"studio/src/uiComponents/colorPicker/utils/clamp.ts"(){HM=(e,t=0,n=1)=>e>n?n:e<t?t:e}}),ZP=w({"studio/src/uiComponents/colorPicker/components/EditingProvider.tsx"(){WM=k(nf()),GM=(0,WM.createContext)(void 0),$M=({children:e})=>{const[t,n]=(0,WM.useState)(!1);return WM.default.createElement(GM.Provider,{value:{editing:t,setEditing:n}},e)},qM=()=>(0,WM.useContext)(GM)}}),JP=w({"studio/src/uiComponents/colorPicker/components/common/Interactive.tsx"(){KM=k(nf()),XP(),YP(),mg(),ZP(),XM=e=>"touches"in e,YM=(e,t)=>{for(let n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]},ZM=e=>e&&e.ownerDocument.defaultView||self,JM=(e,t,n)=>{const r=e.getBoundingClientRect(),i=XM(t)?YM(t.touches,n):t;return{left:HM((i.pageX-(r.left+ZM(e).pageXOffset))/r.width),top:HM((i.pageY-(r.top+ZM(e).pageYOffset))/r.height)}},QM=e=>{!XM(e)&&e.preventDefault()},eP=(e,t)=>t&&!XM(e),tP=Am.div`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  outline: none;
  /* Don't trigger the default scrolling behavior when the event is originating from this element */
  touch-action: none;
`,nP=e=>{var t=e,{onMove:n,onKey:r}=t,i=_(t,["onMove","onKey"]);const o=(0,KM.useRef)(null),a=VM(n),s=VM(r),l=(0,KM.useRef)(null),c=(0,KM.useRef)(!1),{setEditing:u}=qM(),[d,h,p]=(0,KM.useMemo)((()=>{const e=e=>{QM(e),(XM(e)?e.touches.length>0:e.buttons>0)&&o.current?a(JM(o.current,e,l.current)):(u(!1),n(!1))},t=e=>{u(!1),n(!1)};function n(n){const r=c.current,i=o.current,a=ZM(i),s=n?a.addEventListener:a.removeEventListener;s(r?"touchmove":"mousemove",e),s(r?"touchend":"mouseup",t)}return[({nativeEvent:e})=>{const t=o.current;if(t&&(QM(e),!eP(e,c.current)&&t)){if(XM(e)){c.current=!0;const t=e.changedTouches||[];t.length&&(l.current=t[0].identifier)}t.focus(),u(!0),a(JM(t,e,l.current)),n(!0)}},e=>{const t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),s({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[s,a]);return(0,KM.useEffect)((()=>p),[p]),KM.default.createElement(tP,b(y({},i),{onTouchStart:d,onMouseDown:d,ref:o,onKeyDown:h,tabIndex:0,role:"slider"}))},rP=KM.default.memo(nP)}}),QP=w({"studio/src/uiComponents/colorPicker/components/common/Pointer.tsx"(){iP=k(nf()),mg(),JP(),oP=Am(rP)``,aP=Am.div`
  position: absolute;
  z-index: 1;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border: 1px solid #ffffff00;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

  ${oP}:focus & {
    transform: translate(-50%, -50%) scale(1.1);
  }
`,sP=Am.div`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;
`,lP=({className:e,color:t,left:n,top:r=.5})=>{const i={top:100*r+"%",left:100*n+"%"};return iP.default.createElement(aP,{style:i,className:e},iP.default.createElement(sP,{style:{backgroundColor:t}}))}}}),eT=w({"studio/src/uiComponents/colorPicker/utils/round.ts"(){cP=(e,t=0,n=Math.pow(10,t))=>Math.round(n*e)/n}}),tT=w({"studio/src/uiComponents/colorPicker/utils/convert.ts"(){eT(),Math.PI,uP=({h:e,s:t,v:n,a:r})=>{const i=(200-t)*n/100;return{h:cP(e),s:cP(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:cP(i/2),a:cP(r,2)}},dP=e=>{const{h:t,s:n,l:r}=uP(e);return`hsl(${t}, ${n}%, ${r}%)`},hP=e=>{const{h:t,s:n,l:r,a:i}=uP(e);return`hsla(${t}, ${n}%, ${r}%, ${i})`},pP=({h:e,s:t,v:n,a:r})=>{e=e/360*6,t/=100,n/=100;const i=Math.floor(e),o=n*(1-t),a=n*(1-(e-i)*t),s=n*(1-(1-e+i)*t),l=i%6;return{r:cP(255*[n,a,o,o,s,n][l]),g:cP(255*[s,n,n,a,o,o][l]),b:cP(255*[o,o,s,n,n,a][l]),a:cP(r,2)}},fP=({r:e,g:t,b:n,a:r})=>{const i=Math.max(e,t,n),o=i-Math.min(e,t,n),a=o?i===e?(t-n)/o:i===t?2+(n-e)/o:4+(e-t)/o:0;return{h:cP(60*(a<0?a+6:a)),s:cP(i?o/i*100:0),v:cP(i/255*100),a:r}}}}),nT=w({"studio/src/uiComponents/colorPicker/components/common/Hue.tsx"(){mP=k(nf()),JP(),QP(),tT(),YP(),eT(),mg(),gP=Am.div`
  position: relative;
  height: 16px;
  border-radius: 2px;

  background: linear-gradient(
    to right,
    #f00 0%,
    #ff0 17%,
    #0f0 33%,
    #0ff 50%,
    #00f 67%,
    #f0f 83%,
    #f00 100%
  );
`,vP=Am(lP)`
  z-index: 2;
`,yP=({className:e,hue:t,onChange:n})=>mP.default.createElement(gP,{className:e},mP.default.createElement(rP,{onMove:e=>{n({h:360*e.left})},onKey:e=>{n({h:HM(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuetext":cP(t)},mP.default.createElement(vP,{left:t/360,color:dP({h:t,s:100,v:100,a:1})}))),bP=mP.default.memo(yP)}}),rT=w({"studio/src/uiComponents/colorPicker/components/common/Saturation.tsx"(){xP=k(nf()),JP(),QP(),tT(),YP(),eT(),mg(),_P=Am.div`
  position: relative;
  flex-grow: 1;
  border-color: transparent; /* Fixes https://github.com/omgovich/react-colorful/issues/139 */
  border-bottom: 12px solid #000;
  border-radius: 2px;
  background-image: linear-gradient(to top, #000, rgba(0, 0, 0, 0)),
    linear-gradient(to right, #fff, rgba(255, 255, 255, 0));

  // Improve elements rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`,wP=Am(lP)`
  z-index: 3;
`,SP=({hsva:e,onChange:t})=>{const n={backgroundColor:dP({h:e.h,s:100,v:100,a:1})};return xP.default.createElement(_P,{style:n},xP.default.createElement(rP,{onMove:e=>{t({s:100*e.left,v:100-100*e.top})},onKey:n=>{t({s:HM(e.s+100*n.left,0,100),v:HM(e.v-100*n.top,0,100)})},"aria-label":"Color","aria-valuetext":`Saturation ${cP(e.s)}%, Brightness ${cP(e.v)}%`},xP.default.createElement(wP,{top:1-e.v/100,left:e.s/100,color:dP(e)})))},EP=xP.default.memo(SP)}}),iT=w({"studio/src/uiComponents/colorPicker/components/common/Alpha.tsx"(){kP=k(nf()),JP(),QP(),tT(),YP(),eT(),mg(),MP=Am.div`
  position: relative;
  height: 16px;
  border-radius: 2px;
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`,PP=Am.div.attrs((({colorFrom:e,colorTo:t})=>({style:{backgroundImage:`linear-gradient(90deg, ${e}, ${t})`}})))`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;

  // Improve rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`,TP=Am(lP)`
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`,CP=({className:e,hsva:t,onChange:n})=>{const r=hP(Object.assign({},t,{a:0})),i=hP(Object.assign({},t,{a:1}));return kP.default.createElement(MP,{className:e},kP.default.createElement(PP,{colorFrom:r,colorTo:i}),kP.default.createElement(rP,{onMove:e=>{n({a:e.left})},onKey:e=>{n({a:HM(t.a+e.left)})},"aria-label":"Alpha","aria-valuetext":`${cP(100*t.a)}%`},kP.default.createElement(TP,{left:t.a,color:hP(t)})))}}}),oT=w({"studio/src/uiComponents/colorPicker/utils/compare.ts"(){AP=(e,t)=>{if(e===t)return!0;for(const n in e)if(e[n]!==t[n])return!1;return!0}}}),aT=w({"studio/src/uiComponents/colorPicker/hooks/useColorManipulation.ts"(){IP=k(nf()),oT(),XP(),ZP()}}),sT=w({"studio/src/uiComponents/colorPicker/components/common/AlphaColorPicker.tsx"(){RP=k(nf()),nT(),rT(),iT(),aT(),mg(),OP=Am.div`
  position: relative;
  display: flex;
  gap: 4px;
  flex-direction: column;
  width: 200px;
  height: 200px;
  user-select: none;
  cursor: default;
`,DP=e=>{var t=e,{className:n,colorModel:r,color:i=r.defaultColor,temporarilySetValue:o,permanentlySetValue:a,discardTemporaryValue:s}=t,l=_(t,["className","colorModel","color","temporarilySetValue","permanentlySetValue","discardTemporaryValue"]);const[c,u]=function(e,t,n,r){const{editing:i}=qM(),[o,a]=(0,IP.useState)(t),s=VM(n),l=VM(r);let c=i?o:t;const[u,d]=(0,IP.useState)((()=>e.toHsva(c))),h=(0,IP.useRef)({color:c,hsva:u}),p=(0,IP.useRef)({color:c,hsva:u});(0,IP.useEffect)((()=>{i&&a(h.current.color)}),[i]),(0,IP.useEffect)((()=>{let t=e.fromHsva(u);i?AP(u,h.current.hsva)||e.equal(t,h.current.color)||(h.current={hsva:u,color:t},a(t),s(t)):AP(u,p.current.hsva)||e.equal(t,p.current.color)||(p.current={hsva:u,color:t},h.current={hsva:u,color:t},l(t))}),[i,u,e,s,l]),(0,IP.useEffect)((()=>{if(!i&&!e.equal(c,p.current.color)){const t=e.toHsva(c);p.current={hsva:t,color:c},d(t)}}),[i,c,e]);const f=(0,IP.useCallback)((e=>{d((t=>Object.assign({},t,e)))}),[]);return[u,f]}(r,i,o,a);return(0,RP.useEffect)((()=>()=>{s()}),[]),RP.default.createElement(OP,y({},l),RP.default.createElement(EP,{hsva:c,onChange:u}),RP.default.createElement(bP,{hue:c.h,onChange:u}),RP.default.createElement(CP,{hsva:c,onChange:u}))}}}),lT=w({"studio/src/uiComponents/colorPicker/components/RgbaColorPicker.tsx"(){LP=k(nf()),sT(),oT(),tT(),ZP(),jP=e=>({r:e.r/255,g:e.g/255,b:e.b/255,a:e.a}),zP=e=>({r:255*e.r,g:255*e.g,b:255*e.b,a:e.a}),NP={defaultColor:{r:0,g:0,b:0,a:1},toHsva:e=>fP(zP(e)),fromHsva:e=>jP(pP(e)),equal:AP},BP=e=>LP.default.createElement($M,null,LP.default.createElement(DP,b(y({},e),{permanentlySetValue:t=>{e.permanentlySetValue(t)},colorModel:NP})))}}),cT=w({"studio/src/uiComponents/colorPicker/index.ts"(){lT()}}),uT=w({"studio/src/uiComponents/Popover/ArrowContext.tsx"(){FP=k(nf()),UP=(0,FP.createContext)({}),VP=UP}}),dT=w({"studio/src/uiComponents/onPointerOutside.ts"(){}}),hT=w({"studio/src/uiComponents/Popover/TooltipWrapper.tsx"(){HP=k(nf()),WP=k(nf()),sk(),Dk(),uT(),jg(),oM(),dT(),Cg(),Tp(),GP=e=>{var t,n;const r=e.children(),[i,o]=Ig(null),a=r.props.style?y({},r.props.style):{};a.position="absolute";const s=uk(o),l=uk(e.target),c=qE(),[u,d]=(0,WP.useState)({});return(0,WP.useLayoutEffect)((()=>{var t,n,r;if(!s||!o||!l)return;const i=null!=(t=e.verticalGap)?t:8,a={};let u=null!=(n=e.verticalPlacement)?n:"bottom",h=0,p=0;"bottom"===u?l.bottom+s.height+i<c.height?(u="bottom",h=l.bottom+i,a.top="0px"):l.top>s.height+i?(u="top",h=l.top-(s.height+i),a.bottom="0px",a.transform="rotateZ(180deg)"):u="overlay":"top"===u&&(l.top>s.height+i?(u="top",h=l.top-(s.height+i),a.bottom="0px",a.transform="rotateZ(180deg)"):l.bottom+s.height+i<c.height?(u="bottom",h=l.bottom+i,a.top="0px"):u="overlay");let f=0;if("overlay"!==u){const e=l.left+l.width/2;e<s.width/2?(p=i,f=Math.max(e-i,8)):e+s.width/2>c.width?(p=c.width-(i+s.width),f=Math.min(e-p,s.width-8)):(p=e-s.width/2,f=s.width/2),a.left=f+"px"}const{minX:m=-1/0,maxX:g=1/0,minY:v=-1/0,maxY:y=1/0}=null!=(r=e.constraints)?r:{},b=ml(p,m,g-s.width),x=ml(h,v,y+s.height);return o.style.left=b+"px",o.style.top=x+"px",d(a),e.onPointerOutside?function(e,t,n){const r=e.getBoundingClientRect(),i=e=>{(e.clientX<r.left-t||e.clientX>r.left+r.width+t||e.clientY<r.top-t||e.clientY>r.top+r.height+t)&&n(e)};return window.addEventListener("mousemove",i),()=>{window.removeEventListener("mousemove",i)}}(o,e.onPointerOutside.threshold,e.onPointerOutside.callback):void 0}),[s,o,e.target,l,c,e.onPointerOutside]),qk([o,null!=(t=e.target)?t:null],null!=(n=e.onClickOutside)?n:kg),HP.default.createElement(VP.Provider,{value:u},(0,WP.cloneElement)(r,{ref:i,style:a}))}}});function pT(e,t){const{isPointerBeingCaptured:n}=Eg("usePopover"),[r,i]=Ig({isOpen:!1}),o=(0,$P.useRef)(e),a=(0,$P.useCallback)((e=>{r.current={isOpen:!1}}),[]),s=(0,$P.useCallback)(((e,t)=>{var i;const s="function"==typeof o.current?o.current():o.current;r.current={isOpen:!0,clickPoint:{clientX:e.clientX,clientY:e.clientY},target:t,opts:s,onClickOutside:function(){c.childHasFocusRef.current||!1!==s.closeOnClickOutside&&a("clicked outside popover")},onPointerOutside:!1===s.closeWhenPointerIsDistant?void 0:{threshold:null!=(i=s.pointerDistanceThreshold)?i:100,callback:()=>{c.childHasFocusRef.current||n()||a("pointer outside")}}}}),[]),l=(0,$P.useCallback)(((...e)=>{r.current.isOpen?a("toggled"):s(...e)}),[]),c=function(e){const t=(0,$P.useContext)(KP);(0,$P.useEffect)((()=>{if(e.state.isOpen){const n=t.takeFocus();return e._debug("take focus"),()=>{e._debug("release focus"),n.releaseFocus()}}}),[e.state.isOpen]);const n=(0,$P.useRef)(!1);return{childHasFocusRef:n,childPopoverLock:{takeFocus:()=>(n.current=!0,{releaseFocus(){n.current=!1}})}}}({_debug:(...e)=>{},state:i}),[,u]=(0,$P.useContext)(gO);(0,$P.useEffect)((()=>{let e;return i.isOpen&&(e=u()),()=>null==e?void 0:e()}),[i.isOpen]);const d=(0,$P.useContext)(_x);return{node:i.isOpen?(0,qP.createPortal)($P.default.createElement(KP.Provider,{value:c.childPopoverLock},$P.default.createElement(GP,{children:t,target:i.target,onClickOutside:i.onClickOutside,onPointerOutside:i.onPointerOutside,constraints:i.opts.constraints,verticalGap:i.opts.verticalGap})),d):$P.default.createElement($P.default.Fragment,null),open:s,close:a,toggle:l,isOpen:i.isOpen}}var fT,mT,gT,vT,yT,bT,xT,_T,wT,ST,ET,kT,MT,PT,TT,CT,AT,IT,RT,OT,DT=w({"studio/src/uiComponents/Popover/usePopover.tsx"(){Tg(),jg(),$P=k(nf()),qP=k(cf()),Gx(),hT(),kO(),KP=$P.default.createContext({takeFocus:()=>({releaseFocus(){}})})}}),LT=w({"studio/src/uiComponents/Popover/PopoverArrow.tsx"(){fT=k(nf()),mg(),uT(),mT=Am.div`
  position: absolute;
  width: 0;
  height: 0;
  color: var(--popover-arrow-color);
  pointer-events: none;
`,gT=Am.div`
  width: 12px;
  height: 8px;
  position: absolute;
  left: -7px;
  top: -8px;
  text-align: center;
  line-height: 0;
`,vT=Am.path`
  fill: var(--popover-bg);
`,yT=Am.path`
  fill: var(--popover-inner-stroke);
`,bT=Am.path`
  fill: var(--popover-outer-stroke);
`,xT=(0,fT.forwardRef)((({className:e},t)=>{const n=(0,fT.useContext)(VP);return fT.default.createElement(mT,{className:e,ref:t,style:y({},n)},fT.default.createElement(gT,null,fT.default.createElement("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fT.default.createElement(bT,{d:"M6 0L0 6H12L6 0Z"}),fT.default.createElement(yT,{d:"M6 1.5L0 7.5H12L6 1.5Z"}),fT.default.createElement(vT,{d:"M6 3L0 9H12L6 3Z"}))))})),_T=xT}}),jT=w({"studio/src/uiComponents/Popover/BasicPopover.tsx"(){$x(),Ty(),wT=k(nf()),mg(),LT(),ST=ty(.05,"#2a2a31"),ET=Am.div`
  position: absolute;
  --popover-bg: ${ST};
  --popover-inner-stroke: #505159;
  --popover-outer-stroke: #111;

  background: var(--popover-bg);

  color: white;
  padding: 0;
  margin: 0;
  cursor: default;
  ${Ix};
  border-radius: 3px;
  z-index: 10000;
  border: 1px solid var(--popover-inner-stroke);
  box-shadow: 0 0 0 1px var(--popover-outer-stroke), 0 6px 8px -4px black;
  backdrop-filter: blur(8px);

  & a {
    color: inherit;
  }
`,kT=wT.default.forwardRef((({children:e,className:t,showPopoverEdgeTriangle:n=!0},r)=>wT.default.createElement(ET,{className:t,ref:r},n?wT.default.createElement(_T,null):void 0,e))),MT=kT}});function zT({editingTools:e,value:t,autoFocus:n}){const r=(0,PT.useRef)(null),i=(0,PT.useCallback)((t=>{const n=BM(function(e){const t=(e=e.trim().toLowerCase()).match(jM);if(!t)return{r:0,g:0,b:0,a:1};const n=function(e){switch(e.length){case 3:return`${e.repeat(2)}ff`;case 4:const t=e.substr(0,3),n=e[3];return`${t.repeat(2)}${n.repeat(2)}`;case 6:return`${e}ff`}return e}(t[1]);return{r:parseInt(n.substr(0,2),16)/255,g:parseInt(n.substr(2,2),16)/255,b:parseInt(n.substr(4,2),16)/255,a:parseInt(n.substr(6,2),16)/255}}(t));e.permanentlySetValue(n)}),[e]),o=pT({debugName:"RgbaPropEditor"},(()=>PT.default.createElement(RT,null,PT.default.createElement(BP,{color:{r:t.r,g:t.g,b:t.b,a:t.a},temporarilySetValue:t=>{const n=BM(t);e.temporarilySetValue(n)},permanentlySetValue:t=>{const n=BM(t);e.permanentlySetValue(n)},discardTemporaryValue:e.discardTemporaryValue}))));return PT.default.createElement(PT.default.Fragment,null,PT.default.createElement(TT,null,PT.default.createElement(CT,{rgbaColor:t,ref:r,onClick:e=>{o.toggle(e,r.current)}}),PT.default.createElement(AT,{value:NM(t,{removeAlphaIfOpaque:!0}),temporarilySetValue:IT,discardTemporaryValue:IT,permanentlySetValue:i,isValid:e=>!!e.match(jM),autoFocus:n})),o.node)}var NT,BT,FT=w({"studio/src/propEditors/simpleEditors/RgbaPropEditor.tsx"(){UM(),UM(),PT=k(nf()),cT(),mg(),DT(),DM(),jT(),TT=Am.div`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`,CT=Am.div.attrs((e=>({style:{background:NM(e.rgbaColor)}})))`
  height: 18px;
  aspect-ratio: 1;
  border-radius: 99999px;
`,AT=Am(AM)`
  flex: 1;
`,IT=()=>{},RT=Am.div`
  position: absolute;
  background-color: ${ST};
  color: white;
  margin: 0;
  cursor: default;
  border-radius: 3px;
  z-index: 10000;
  backdrop-filter: blur(8px);

  padding: 4px;
  pointer-events: all;

  border: none;
  box-shadow: none;
`,OT=zT}});function UT(e){return NT.createElement("svg",y({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),NT.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.775 2.781a.5.5 0 01.5.5v1.7H4.67c.108-.957.92-1.7 1.905-1.7h6.608a1.917 1.917 0 110 3.834H6.574c-.78 0-1.452-.466-1.751-1.135H2.275v5.03h2.39a2.032 2.032 0 012.023-1.854h6.38a2.031 2.031 0 110 4.063h-6.38c-.83 0-1.543-.497-1.858-1.21H1.775a.5.5 0 01-.5-.5V3.281a.5.5 0 01.5-.5zm4.799 1.5h6.608a.917.917 0 110 1.834H6.574a.917.917 0 110-1.834zm.114 5.875h6.38a1.031 1.031 0 110 2.063h-6.38a1.032 1.032 0 110-2.063z",fill:"currentColor"}))}var VT,HT,WT=w({"studio/src/uiComponents/icons/Outline.tsx"(){NT=k(nf()),BT=UT}});function GT(e){return VT.createElement("svg",y({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),VT.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.5L4 6.654 5.2 5.5 8 8.385 10.8 5.5 12 6.654 8 10.5z",fill:"currentColor"}))}var $T,qT,KT=w({"studio/src/uiComponents/icons/ChevronDown.tsx"(){VT=k(nf()),HT=GT}});function XT(e){return $T.createElement("svg",y({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),$T.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 3c-1.072 0-1.969.904-1.969 1.969 0 1 .929 1.968 1.969 1.968h9A1.969 1.969 0 1012.5 3h-9zm9 1H5.531v1.938H12.5A.969.969 0 0012.5 4zM3.5 9.14a1.969 1.969 0 000 3.938h9a1.969 1.969 0 100-3.937h-9zm9 1H8.406v1.938H12.5a.969.969 0 100-1.937z",fill:"currentColor"}))}var YT,ZT,JT=w({"studio/src/uiComponents/icons/Details.tsx"(){$T=k(nf()),qT=XT}});function QT(e){return YT.createElement("svg",y({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),YT.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.166 7.994a2.26 2.26 0 114.518 0 2.26 2.26 0 01-4.518 0zM2.425 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM5.74 7.994a2.26 2.26 0 114.519 0 2.26 2.26 0 01-4.519 0zM8 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM13.575 5.735a2.26 2.26 0 100 4.519 2.26 2.26 0 000-4.52zm-1.086 2.26a1.085 1.085 0 112.171 0 1.085 1.085 0 01-2.17 0z",fill:"currentColor"}))}var eC,tC,nC=w({"studio/src/uiComponents/icons/Ellipsis.tsx"(){YT=k(nf()),ZT=QT}});function rC(e){return eC.createElement("svg",y({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),eC.createElement("path",{d:"M8.339 4.5l-2.055.644 4.451 1.393v2.748l-2.966.928-2.504-.783V6.738l2.42.758 2.055-.644-4.458-1.395L4 5.858v4.463L7.768 11.5 12 10.175V5.646L8.339 4.5z",fill:"currentColor"}))}var iC,oC,aC=w({"studio/src/uiComponents/icons/Package.tsx"(){eC=k(nf()),tC=rC}});function sC(e){return iC.createElement("svg",y({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),iC.createElement("path",{d:"M8 1.57c-.416 0-.752.36-.752.804v.482c-1.715.372-3.006 1.994-3.006 3.938v.473c0 1.18-.407 2.32-1.14 3.205l-.173.208a.85.85 0 00-.125.864.75.75 0 00.686.475h9.019a.752.752 0 00.686-.475.845.845 0 00-.125-.864l-.174-.208a5.026 5.026 0 01-1.139-3.205v-.473c0-1.944-1.291-3.566-3.006-3.938v-.482c0-.445-.336-.804-.752-.804zm1.063 12.39c.282-.301.44-.71.44-1.138H6.496c0 .428.158.837.44 1.138.281.302.664.47 1.063.47.4 0 .783-.168 1.064-.47z",fill:"currentColor"}))}var lC,cC,uC=w({"studio/src/uiComponents/icons/Bell.tsx"(){iC=k(nf()),oC=sC}});function dC(e){return lC.createElement("svg",y({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),lC.createElement("path",{d:"M6.8 11.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6zm6-7.2h-2.4v-.6A1.8 1.8 0 008.6 2H7.4a1.8 1.8 0 00-1.8 1.8v.6H3.2a.6.6 0 100 1.2h.6v6.6A1.8 1.8 0 005.6 14h4.8a1.8 1.8 0 001.8-1.8V5.6h.6a.6.6 0 100-1.2zm-6-.6a.6.6 0 01.6-.6h1.2a.6.6 0 01.6.6v.6H6.8v-.6zm4.2 8.4a.6.6 0 01-.6.6H5.6a.6.6 0 01-.6-.6V5.6h6v6.6zm-1.8-.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6z",fill:"currentColor"}))}var hC,pC,fC,mC,gC,vC,yC,bC,xC=w({"studio/src/uiComponents/icons/Trash.tsx"(){lC=k(nf()),cC=dC}}),_C=w({"studio/src/uiComponents/icons/index.ts"(){WT(),KT(),JT(),nC(),aC(),uC(),xC()}});function wC({propConfig:e,editingTools:t,value:n,autoFocus:r}){const[i,o]=hC.default.useState();(0,hC.useEffect)((()=>{o(n?t.getAssetUrl(n):void 0)}),[n]);const a=(0,hC.useCallback)((e=>P(this,null,(function*(){const r=e.target.files[0];t.permanentlySetValue({type:"image",id:void 0});const i=yield t.createAsset(r);i?t.permanentlySetValue({type:"image",id:i}):t.permanentlySetValue(n),e.target.value=null}))),[t,n]),s=!(null==n?void 0:n.id);return hC.default.createElement(pC,{empty:s},hC.default.createElement(mC,{empty:s,title:s?"Upload image":`"${n.id}" (Click to upload new image)`},hC.default.createElement(gC,{type:"file",onChange:a,accept:"image/*,.hdr",autoFocus:r}),i?hC.default.createElement(vC,{src:i}):hC.default.createElement(fC,null)),!s&&hC.default.createElement(yC,{title:"Delete image",onClick:()=>{t.permanentlySetValue({type:"image",id:void 0})}},hC.default.createElement(cC,null)))}var SC,EC,kC,MC,PC=w({"studio/src/propEditors/simpleEditors/ImagePropEditor.tsx"(){_C(),hC=k(nf()),mg(),pC=Am.div`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`,fC=Am.div`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`,mC=Am.label`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  ${e=>(e.empty,Qm``)}
`,gC=Am.input.attrs({type:"file"})`
  display: none;
`,vC=Am.img`
  position: absolute;
  inset: 0;
  height: 100%;
  aspect-ratio: 1;

  object-fit: cover;
`,yC=Am.button`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  ${pC}:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`,bC=wC}}),TC=w({"studio/src/propEditors/simpleEditors/simplePropEditorByPropType.ts"(){Hk(),pM(),OM(),zM(),FT(),PC(),SC={number:iM,string:RM,boolean:Ok,stringLiteral:SM,rgba:OT,image:bC}}}),CC=w({"studio/src/panels/DetailPanel/DeterminePropEditorForDetail/rowIndentationFormulaCSS.tsx"(){EC="calc(var(--left-pad) + var(--depth) * var(--step))"}});function AC({pointerToProp:e,obj:t,possibleSequenceTrackIds:n,listOfDescendantTrackIds:r}){return uf((()=>{const n=(0,kC.getPointerParts)(e).path,i=(0,kC.val)(t.sheet.getSequence().positionPrism),o=r.map((e=>({trackId:e,track:(0,kC.val)(t.template.project.pointers.historic.sheetsById[t.address.sheetId].sequence.tracksByObject[t.address.objectKey].trackData[e])}))).filter((({track:e})=>!!e)).map((e=>b(y({},e),{nearbies:pw(t,{id:e.trackId,data:e.track,sheetObject:t},i)}))),a=o.find((({nearbies:e})=>!!e.cur)),s=o.every((({nearbies:e})=>!!e.cur)),l=o.reduce(((e,t)=>t.nearbies.prev&&(void 0===e||t.nearbies.prev.kf.position>e.kf.position)?t.nearbies.prev:e),void 0),c=o.reduce(((e,t)=>t.nearbies.next&&(void 0===e||t.nearbies.next.kf.position<e.kf.position)?t.nearbies.next:e),void 0),u=()=>{s?T().transaction((t=>{t.unset(e)})):T().transaction((t=>{t.set(e,(0,kC.val)(e))}))},d={cur:a?{type:"on",itemKey:Rp.forCompoundPropAggregateKeyframe(t,n,i),toggle:u}:{toggle:u,type:"off"},prev:void 0!==l?{position:l.kf.position,itemKey:Rp.forCompoundPropAggregateKeyframe(t,n,l.kf.position),jump:()=>{t.sheet.getSequence().position=l.kf.position}}:void 0,next:void 0!==c?{position:c.kf.position,itemKey:Rp.forCompoundPropAggregateKeyframe(t,n,c.kf.position),jump:()=>{t.sheet.getSequence().position=c.kf.position}}:void 0};return MC.default.createElement(zw,y({},d))}),[e,t,n,r])}var IC=w({"studio/src/propEditors/useEditingToolsForCompoundProp.tsx"(){I(),Jp(),pf(),kC=k(n(771)),Fs(),MC=k(nf()),hw(),dw(),jp(),L_(),Vw(),fw()}}),RC=w({"studio/src/utils/tightJsonStringify.ts"(){}});function OC(e,t=!0){try{return"string"==typeof e?e:"function"==typeof e||e instanceof Error?e.toString():t?(n=e,JSON.stringify(n,undefined,2).replace(/^([\{\[])\n (\s+)/,"$1$2").replace(/(\n[ ]+[\{\[])\n\s+/g,"$1 ").replace(/\n\s*([\]\}])/g," $1")):JSON.stringify(e)}catch(t){return(null==e?void 0:e.name)||String(e)}var n}var DC,LC,jC,zC,NC,BC=w({"studio/src/utils/devStringify.ts"(){RC()}});function FC(e,t){const n=arguments.length>1,r=OC("function"==typeof e?e():e),i=n?`\nInstead found: ${OC(t)}`:"";throw new NC(`Invariant: ${r}${i}`,t)}var UC,VC,HC=w({"studio/src/utils/invariant.ts"(){BC(),DC=/^\s*at.+node:internal.+/gm,LC=/^\s*(at|[^@]+@) (?:Object\.)?invariant.+/gm,jC=/^\s*(at|[^@]+@).+test\-helpers.+/gm,zC=/^\s*(at|[^@]+@).+(debounce|invariant|iif)\.[tj]s.*/gm,NC=class extends Error{constructor(e,t){var n;super(e),M(this,"found"),void 0!==t&&(this.found=t),this.stack=null==(n=this.stack)?void 0:n.replace(LC,"").replace(zC,"").replace(jC,"").replace(DC,"")}}}});function WC(e){const t=VC.default.memo(VC.default.forwardRef((function(t,n){let r=[];const i={},o={ref:n};for(const e in t){const n=t[e];(0,UC.isPrism)(n)?(r.push(n),i[e]=n):o[e]=n}const a=(0,VC.useRef)(r.length);!function(e,t,n){e||(arguments.length>2?FC(t,n):FC(t))}(a.current===r.length,"expect same number of observable props on every invocation of deriver wrapped component.",{initial:a.current,count:r.length});const s=(0,VC.useMemo)((()=>{return e=i,(0,UC.prism)((()=>{if(Array.isArray(e)){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n].getValue();return t}{const t={};for(const n in e)t[n]=(0,UC.val)(e[n]);return t}}));var e}),r),l=df(s);return l&&VC.default.createElement(e,y(y({},o),l))})));return t.displayName=`deriver(${e.displayName})`,t}var GC,$C,qC,KC,XC,YC,ZC,JC,QC,eA,tA,nA,rA,iA,oA,aA=w({"studio/src/utils/derive-utils.tsx"(){UC=k(n(771)),pf(),VC=k(nf()),HC()}});function sA({propConfig:e,pointerToProp:t,obj:n,SimpleEditorComponent:r}){const i=Hw(t,n,e);return $C.default.createElement(iM,{editingTools:i,propConfig:e,value:i.value})}function lA({pointerToProp:e,obj:t,propConfig:n,visualIndentation:r}){var i;const o=null!=(i=n.label)?i:V((0,GC.getPointerParts)(e).path),a=Object.entries(n.props),s=a.filter((([e,t])=>J_(t))),l=a.filter((([e,t])=>!J_(t))),[c,u]=Ig(null),d=function(e,t,n){return uf((()=>{if(!tw(n))return{type:"AllStatic",beingScrubbed:!1,contextMenuItems:[],controlIndicators:MC.default.createElement(lw,{hasStaticOverride:!1})};const r=(0,kC.getPointerParts)(e).path,i=[],o={beingScrubbed:!!(0,kC.val)(js(T().atomP.ephemeral.projects.stateByProjectId[t.address.projectId].stateBySheetId[t.address.sheetId].stateByObjectKey[t.address.objectKey].valuesBeingScrubbed,(0,kC.getPointerParts)(e).path)),contextMenuItems:i,controlIndicators:MC.default.createElement(MC.default.Fragment,null)},a=zp((0,kC.val)(t.template.getMapOfValidSequenceTracks_forStudio()),r),s=void 0!==a&&0!==Object.keys(a).length,l=[];let c=!0;if(s){c=!1;for(const e of nw(n,[])){if(J_(e.conf))continue;const t=zp(a,e.path);"string"!=typeof t?c=!0:l.push(t)}}if(c&&i.push({label:"Reset all to default",callback:()=>{T().transaction((({unset:t})=>{t(e)}))}},{label:"Sequence all",callback:()=>{T().transaction((({stateEditors:e})=>{for(const{path:i,conf:o}of nw(n,r)){if(J_(o))continue;const r=b(y({},t.address),{pathToProp:i});e.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(r,n)}}))}}),s&&i.push({label:"Make all static",callback:()=>{T().transaction((({stateEditors:i})=>{for(const{path:o,conf:a}of nw(n,[])){if(J_(a))continue;const n=b(y({},t.address),{pathToProp:[...r,...o]}),s=A_(e,o);i.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(b(y({},n),{value:t.getValueByPointer(s)}))}}))}}),s){const n=kC.prism.memo("controlIndicators",(()=>MC.default.createElement(AC,y({},{pointerToProp:e,obj:t,possibleSequenceTrackIds:a,listOfDescendantTrackIds:l}))),[a,l]);return b(y({},o),{type:"HasSequences",controlIndicators:n})}return b(y({},o),{type:"AllStatic",controlIndicators:MC.default.createElement(lw,{hasStaticOverride:!1})})}),[])}(e,t,n),[h]=MO(u,{menuItems:d.contextMenuItems}),p=s.length>0,f=(0,$C.useMemo)((()=>D_.getIsPropHighlightedD(b(y({},t.address),{pathToProp:(0,GC.getPointerParts)(e).path}))),[e]),m=`${t.address.projectId},${t.address.sheetId},${t.address.sheetInstanceId},${t.address.objectKey},${(0,GC.getPointerParts)(e).path.join()}`;(0,$C.useLayoutEffect)((()=>{oA.has(m)||oA.set(m,new GC.Atom(nA(n)))}),[m,n]);const g=oA.get(m),v=uf((()=>g?(0,qC.val)(g.pointer):nA(n)),[g]);return $C.default.createElement(KC,null,h,$C.default.createElement(XC,{style:{"--depth":r-1}},$C.default.createElement(YC,{isVectorProp:nA(n)},$C.default.createElement(ZC,null,d.controlIndicators),$C.default.createElement(JC,{isHighlighted:f,ref:c},$C.default.createElement("span",null,o||"Props")),$C.default.createElement(QC,{isCollapsed:v,onClick:()=>{null==g||g.set(!g.get())}},$C.default.createElement(y_,null))),nA(n)&&v&&$C.default.createElement(rA,null,[...a].map((([n,r])=>$C.default.createElement(sA,{key:"prop-"+n,propConfig:r,pointerToProp:e[n],obj:t}))))),!v&&$C.default.createElement(tA,{style:{"--depth":r},depth:r,lastSubIsComposite:p},[...l,...s].map((([n,i])=>$C.default.createElement(MA,{key:"prop-"+n,propConfig:i,pointerToProp:e[n],obj:t,visualIndentation:r+1})))))}var cA=w({"studio/src/panels/DetailPanel/DeterminePropEditorForDetail/DetailCompoundPropEditor.tsx"(){dw(),GC=k(n(771)),Ie(),Ty(),$C=k(nf()),mg(),CC(),C_(),$x(),jg(),LA(),VD(),IC(),B_(),aA(),pM(),Qw(),pf(),qC=k(n(771)),T_(),KC=Am.div`
  --step: 15px;
  --left-pad: 15px;
  ${Ix};
  --right-width: 60%;
`,XC=Am.div`
  height: 30px;
  display: flex;
  align-items: stretch;
  position: relative;
`,YC=Am.div`
  padding-left: ${EC};
  display: flex;
  align-items: center;
  overflow: hidden;
  ${({isVectorProp:e})=>e?"width: calc(100% - var(--right-width))":""};
`,ZC=Am.div`
  flexshrink: 0;
`,JC=WC(Am.div`
  margin-left: 4px;
  cursor: default;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 4px;
  user-select: none;
  &:hover {
    color: white;
  }
  overflow: hidden;

  ${()=>M_};
`),QC=Am.span`
  width: 28px;
  height: 28px;
  font-size: 9px;
  display: flex;
  align-items: center;
  justify-content: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(${e=>e.isCollapsed?0:90}deg);
  color: #66686a;

  visibility: hidden;
  ${XC}:hover & {
    visibility: visible;
  }

  &:hover {
    transform: rotateZ(${e=>e.isCollapsed?15:75}deg);
    color: #c0c4c9;
  }
`,eA=ty(.05,"#282b2f"),tA=Am.div`
  /* background: ${({depth:e})=>Jv(.03*e,eA)}; */
  /* padding: ${e=>e.lastSubIsComposite?0:"4px"} 0; */
`,nA=e=>{const t=Object.entries(e.props);return t.length<=3&&t.every((([e,t])=>"number"===t.type&&["x","y","z"].includes(e)))},rA=Am.div`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`,iA=$C.default.memo(lA),oA=new Map}});function uA({isHighlighted:e}){return"self"===e?"#1857a4":"descendent"===e?"#0a2f5c":"initial"}var dA,hA,pA,fA,mA,gA,vA,yA=w({"studio/src/panels/DetailPanel/DeterminePropEditorForDetail/getDetailRowHighlightBackground.tsx"(){}});function bA({propConfig:e,pointerToProp:t,editingTools:n,children:r,isPropHighlightedD:i}){var o;const a=null!=(o=e.label)?o:V((0,dA.getPointerParts)(t).path),[s,l]=Ig(null),[c]=MO(l,{menuItems:n.contextMenuItems});return hA.default.createElement(pA,{isHighlighted:i},c,hA.default.createElement(fA,null,hA.default.createElement(gA,null,n.controlIndicators),hA.default.createElement(mA,{isHighlighted:i,ref:s,title:["obj","props",...(0,dA.getPointerParts)(t).path].join(".")},a)),hA.default.createElement(vA,null,r))}var xA,_A,wA,SA=w({"studio/src/panels/DetailPanel/DeterminePropEditorForDetail/SingleRowPropEditor.tsx"(){dA=k(n(771)),VD(),jg(),Tp(),hA=k(nf()),mg(),$x(),C_(),aA(),CC(),yA(),pA=WC(Am.div`
  display: flex;
  height: 30px;
  justify-content: flex-start;
  align-items: stretch;
  // We cannot calculate both the container (details panel) width and the descendant
  // (this) width dynamically. This leads to the container width being calculated
  // without this percentage being taken into consideration leads to horizontal
  // clipping/scrolling--the same way as if we explicitly fixed either the container
  // width, or the descendant width.
  // The correct solution for tabulated UIs with dynamic container widths is to use
  // CSS grid. For now I fixed this issue by just giving a great enough width
  // to the details panel so most things don't break.
  --right-width: 60%;
  position: relative;
  ${Ix};

  /* background-color: ${uA}; */
`),fA=Am.div`
  box-sizing: border-box;
  padding-left: ${EC};
  padding-right: 4px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: stretch;
  gap: 4px;
  flex-grow: 0;
  flex-shrink: 0;
  width: calc(100% - var(--right-width));
`,mA=WC(Am.div`
  text-align: left;
  flex: 1 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  user-select: none;
  cursor: default;

  ${M_};
  &:hover {
    color: white;
  }
`),gA=Am.div`
  flex-basis: 8px;
  flex: 0 0;
  display: flex;
  align-items: center;
`,vA=Am.div`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`}});function EA({propConfig:e,pointerToProp:t,obj:n,SimpleEditorComponent:r}){const i=Hw(t,n,e),o=(0,xA.useMemo)((()=>D_.getIsPropHighlightedD(b(y({},n.address),{pathToProp:(0,_A.getPointerParts)(t).path}))),[t]);return xA.default.createElement(bA,y({},{editingTools:i,propConfig:e,pointerToProp:t,isPropHighlightedD:o}),xA.default.createElement(r,{editingTools:i,propConfig:e,value:i.value}))}var kA,MA,PA,TA,CA,AA,IA,RA,OA,DA=w({"studio/src/panels/DetailPanel/DeterminePropEditorForDetail/DetailSimplePropEditor.tsx"(){xA=k(nf()),Qw(),SA(),_A=k(n(771)),B_(),wA=xA.default.memo(EA)}}),LA=w({"studio/src/panels/DetailPanel/DeterminePropEditorForDetail.tsx"(){kA=k(nf()),TC(),cA(),DA(),MA=({propConfig:e,visualIndentation:t,pointerToProp:n,obj:r})=>{if("compound"===e.type)return kA.default.createElement(iA,{obj:r,visualIndentation:t,pointerToProp:n,propConfig:e});if("enum"===e.type)return kA.default.createElement(kA.default.Fragment,null);{const i=SC[e.type];return kA.default.createElement(wA,{SimpleEditorComponent:i,obj:r,visualIndentation:t,pointerToProp:n,propConfig:e})}}}}),jA=w({"studio/src/panels/DetailPanel/ObjectDetails.tsx"(){PA=k(nf()),LA(),pf(),_S(),I(),mg(),TA=Am.div`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
`,CA=Am.button`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  border-radius: 2px;

  color: #a8a8a9;
  background: rgba(255, 255, 255, 0.1);

  border: none;
  height: 28px;

  &:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  &:active {
    background: rgba(255, 255, 255, 0.2);
  }
`,AA=({objects:e})=>{const t=e[0],n=Wp(t.template.configPointer),r=Wp(t.template._temp_actionsPointer);return PA.default.createElement(PA.default.Fragment,null,PA.default.createElement(MA,{key:hS(t),obj:t,pointerToProp:t.propsP,propConfig:n,visualIndentation:1}),PA.default.createElement(TA,null,r&&Object.entries(r).map((([e,n])=>PA.default.createElement(CA,{key:e,onClick:()=>{n(t.publicApi,T().publicApi)}},e)))))}}}),zA=w({"studio/src/uiComponents/DetailPanelButton.tsx"(){mg(),IA=Am.button`
  text-align: center;
  padding: 8px;
  border-radius: 2px;
  border: 1px solid #627b7b87;
  background-color: #4b787d3d;
  color: #eaeaea;
  font-weight: 400;
  display: block;
  appearance: none;
  flex-grow: 1;
  cursor: ${e=>e.disabled?"none":"pointer"};
  opacity: ${e=>e.disabled?.4:1};

  &:hover {
    background-color: #7dc1c878;
    border-color: #9ebcbf;
  }
`,RA=IA}}),NA=w({"../node_modules/nanoid/url-alphabet/index.js"(){}}),BA=w({"../node_modules/nanoid/index.browser.js"(){NA(),OA=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=63&n[e];t+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return t}}});function FA(){return OA(16)}var UA,VA,HA,WA,GA,$A,qA,KA,XA,YA,ZA=w({"studio/src/StudioStore/generateDiskStateRevision.ts"(){BA()}}),JA=w({"studio/src/uiComponents/Popover/TooltipContext.tsx"(){UA=k(n(771)),jg(),VA=k(nf()),HA=(0,VA.createContext)(null),WA=0,GA=()=>{const e=(0,VA.useMemo)((()=>WA++),[]),{cur:t,set:n}=(0,VA.useContext)(HA),[r,i]=Ig(!1),o=(0,VA.useCallback)(((t,r)=>{n(t?e:-1,r)}),[]);return(0,VA.useEffect)((()=>t.onStale((()=>{const n=t.getValue()===e;r.current!==n&&(r.current=n)}))),[t,e]),[i,o]},$A=({children:e})=>{const t=(0,VA.useMemo)((()=>new UA.Atom(-1)),[]),n=t.prism,r=(0,VA.useMemo)((()=>{let e;return(n,r)=>{const i=void 0!==e;void 0!==e&&(clearTimeout(e),e=void 0),0===r||i?t.set(n):e=setTimeout((()=>{t.set(n),e=void 0}),r)}}),[]);return VA.default.createElement(HA.Provider,{value:{cur:n,set:r}},e)}}});function QA(e,t){const n=!1!==e.enabled,[r,i]=GA(),[o,a]=Ig(null);(0,KA.useEffect)((()=>{if(!n)return;const t=o.current;if(!t)return;const r=()=>{var t;return i(!0,null!=(t=e.enterDelay)?t:400)},a=()=>{var t;return i(!1,null!=(t=e.exitDelay)?t:200)};return t.addEventListener("mouseenter",r),t.addEventListener("mouseleave",a),()=>{t.removeEventListener("mouseenter",r),t.removeEventListener("mouseleave",a)}}),[o,n,e.enterDelay,e.exitDelay]);const s=(0,qA.useContext)(_x);return[n&&r&&a?(0,YA.createPortal)(XA.default.createElement(GP,{children:t,target:a,onClickOutside:kg,verticalPlacement:e.verticalPlacement,verticalGap:e.verticalGap}),s):XA.default.createElement(XA.default.Fragment,null),o,r]}var eI,tI,nI,rI,iI,oI,aI,sI,lI,cI,uI,dI,hI,pI,fI,mI,gI,vI,yI,bI,xI,_I,wI,SI,EI,kI,MI,PI,TI,CI,AI,II,RI,OI,DI,LI,jI,zI,NI,BI,FI,UI,VI,HI,WI,GI,$I,qI,KI,XI,YI,ZI,JI,QI,eR=w({"studio/src/uiComponents/Popover/useTooltip.tsx"(){jg(),qA=k(nf()),KA=k(nf()),XA=k(nf()),hT(),YA=k(cf()),JA(),Gx(),Cg()}}),tR=w({"studio/src/uiComponents/Popover/BasicTooltip.tsx"(){mg(),jT(),eI=Am(MT)`
  padding: 1em;
  max-width: 240px;
  pointer-events: none !important;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: #45464d;
`,tI=eI}}),nR=w({"studio/src/panels/DetailPanel/ProjectDetails/StateConflictRow.tsx"(){pf(),I(),nI=k(nf()),mg(),ZA(),eR(),tR(),zA(),rI=Am.div`
  padding: 8px 10px;
  position: relative;
  background-color: #6d232352;
  &:before {
    position: absolute;
    content: ' ';
    display: block;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #ff000070;
  }
`,iI=Am.div`
  margin-bottom: 1em;
  & a {
    color: inherit;
  }
`,oI=Am.div`
  display: flex;
  gap: 8px;
`,aI=({projectId:e})=>{const t=Wp(T().atomP.ephemeral.coreByProject[e].loadingState);return t&&"browserStateIsNotBasedOnDiskState"===t.type?nI.default.createElement(sI,{loadingState:t,projectId:e}):null},sI=({projectId:e,loadingState:t})=>{const[n,r]=QA({},(()=>nI.default.createElement(tI,null,"The browser's state will override the disk state."))),[i,o]=QA({},(()=>nI.default.createElement(tI,null,"The disk's state will override the browser's state.")));return nI.default.createElement(rI,null,nI.default.createElement(iI,null,"Browser state is not based on disk state."," ",nI.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Learn more.")),nI.default.createElement(oI,null,n,nI.default.createElement(RA,{onClick:()=>{T().transaction((({drafts:n,stateEditors:r})=>{r.coreByProject.historic.revisionHistory.add({projectId:e,revision:t.onDiskState.revisionHistory[0]}),r.coreByProject.historic.revisionHistory.add({projectId:e,revision:FA()}),n.ephemeral.coreByProject[e].loadingState={type:"loaded"}}))},ref:r},"Use browser's state"),i,nI.default.createElement(RA,{onClick:()=>{T().transaction((({drafts:n})=>{n.historic.coreByProject[e]=t.onDiskState,n.ephemeral.coreByProject[e].loadingState={type:"loaded"}}))},ref:o},"Use disk state")))},lI=aI}}),rR=S({"../node_modules/jszip/dist/jszip.min.js"(a,s){var l;l=function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return i(t[a][1][e]||e)}),c,c.exports,e,t,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,a,s,l,c,u=[],d=0,h=e.length,p=h,f="string"!==r.getTypeOf(e);d<e.length;)p=h-d,i=f?(t=e[d++],n=d<h?e[d++]:0,d<h?e[d++]:0):(t=e.charCodeAt(d++),n=d<h?e.charCodeAt(d++):0,d<h?e.charCodeAt(d++):0),a=t>>2,s=(3&t)<<4|n>>4,l=1<p?(15&n)<<2|i>>6:64,c=2<p?63&i:64,u.push(o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(c));return u.join("")},n.decode=function(e){var t,n,r,a,s,l,c=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var h,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&p--,e.charAt(e.length-2)===o.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|p):new Array(0|p);c<e.length;)t=o.indexOf(e.charAt(c++))<<2|(a=o.indexOf(e.charAt(c++)))>>4,n=(15&a)<<4|(s=o.indexOf(e.charAt(c++)))>>2,r=(3&s)<<6|(l=o.indexOf(e.charAt(c++))),h[u++]=t,64!==s&&(h[u++]=n),64!==l&&(h[u++]=r);return h}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var o=i,a=0+n;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length):function(e,t,n,r){var o=i,a=0+n;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),a=e("./stream/GenericWorker"),s=r?"uint8array":"array";function l(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,a,u){var d,h,p=e.file,f=e.compression,m=u!==s.utf8encode,g=o.transformTo("string",u(p.name)),v=o.transformTo("string",s.utf8encode(p.name)),y=p.comment,b=o.transformTo("string",u(y)),x=o.transformTo("string",s.utf8encode(y)),_=v.length!==p.name.length,w=x.length!==y.length,S="",E="",k="",M=p.dir,P=p.date,T={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(T.crc32=e.crc32,T.compressedSize=e.compressedSize,T.uncompressedSize=e.uncompressedSize);var C=0;t&&(C|=8),m||!_&&!w||(C|=2048);var A,I,R=0,O=0;M&&(R|=16),"UNIX"===a?(O=798,R|=(I=A=p.unixPermissions,A||(I=M?16893:33204),(65535&I)<<16)):(O=20,R|=function(e){return 63&(e||0)}(p.dosPermissions)),d=P.getUTCHours(),d<<=6,d|=P.getUTCMinutes(),d<<=5,d|=P.getUTCSeconds()/2,h=P.getUTCFullYear()-1980,h<<=4,h|=P.getUTCMonth()+1,h<<=5,h|=P.getUTCDate(),_&&(E=r(1,1)+r(l(g),4)+v,S+="up"+r(E.length,2)+E),w&&(k=r(1,1)+r(l(b),4)+x,S+="uc"+r(k.length,2)+k);var D="";return D+="\n\0",D+=r(C,2),D+=f.magic,D+=r(d,2),D+=r(h,2),D+=r(T.crc32,4),D+=r(T.compressedSize,4),D+=r(T.uncompressedSize,4),D+=r(g.length,2),D+=r(S.length,2),{fileRecord:c.LOCAL_FILE_HEADER+D+g+S,dirRecord:c.CENTRAL_FILE_HEADER+r(O,2)+D+r(b.length,2)+"\0\0\0\0"+r(R,4)+r(i,4)+g+S+b}}var o=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,t,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(u,a),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t,n=this.streamFiles&&!e.file.dir,o=i(e,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(o.dirRecord),n)this.push({data:(t=e,c.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:o.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n,i,a,s,l,u,d=this.bytesWritten-e,h=(n=this.dirRecords.length,i=d,a=e,s=this.zipComment,l=this.encodeFileName,u=o.transformTo("string",l(s)),c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(n,2)+r(n,2)+r(i,4)+r(a,4)+r(u.length,2)+u);this.push({data:h,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},u.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var o=new i(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),o=e("./utf8"),a=e("./zipEntries"),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var o=0;o<r.length;o++)n.push(c(r[o]));return i.Promise.all(n)})).then((function(e){for(var i=e.shift(),o=i.files,a=0;a<o.length;a++){var s=o[a],l=s.fileNameStr,c=r.resolve(s.fileNameStr);n.file(c,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(n.file(c).unsafeOriginalName=l)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i=o.getTypeOf(t),s=o.extend(n||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=m(e)),s.createFolders&&(r=f(e))&&g.call(this,r,!0);var d,v="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!v),(t instanceof c&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string"),d=t instanceof c||t instanceof a?t:h.isNode&&h.isStream(t)?new p(e,t):o.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var y=new u(e,d,s);this.files[e]=y}var i=e("./utf8"),o=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),h=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(v(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(v(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=g.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(e){(t=new a("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new l(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./ConvertWorker"),o=e("./GenericWorker"),a=e("../base64"),s=e("../support"),l=e("../external"),c=null;if(s.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function u(e,t,n){var a=t;switch(t){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=t,this._mimeType=n,r.checkSupport(a),this._worker=e.pipe(new i(a)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}u.prototype={accumulate:function(e){return function(e,t){return new l.Promise((function(n,i){var o=[],s=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,n){o.push(e),t&&t(n)})).on("error",(function(e){o=[],i(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return a.encode(t);default:return r.transformTo(e,t)}}(l,function(e,t){var n,r=0,i=null,o=0;for(n=0;n<t.length;n++)o+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(o),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(s,o),c);n(e)}catch(e){i(e)}o=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(t,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){a.call(this,"utf-8 decode"),this.leftOver=null}function u(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,n,r,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),o=a=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,o,a=e.length,l=new Array(2*a);for(t=n=0;t<a;)if((i=e[t++])<128)l[n++]=i;else if(4<(o=s[i]))l[n++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<a;)i=i<<6|63&e[t++],o--;1<o?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(c,a),c.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),l=t;a!==t.length&&(i.uint8array?(l=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(l=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(u,a),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),a=e("./external");function s(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=u;var h={};h.string={string:s,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,o.allocBuffer(e.length))}},h.array={string:u,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},h.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return o.newBufferFrom(e)}},h.nodebuffer={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:s},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return h[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&o.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,o,s,c){return a.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var u,d=n.getTypeOf(t);return d?("arraybuffer"===d?t=n.transformTo("uint8array",t):"string"===d&&(c?t=i.decode(t):o&&!0!==s&&(t=l(u=t,r.uint8array?new Uint8Array(u.length):new Array(u.length)))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),a=e("./zipEntry"),s=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!o&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=u;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(u),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=f((function(){t(i,r)}));"error"===a.status&&r(a.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);return this.state!==l?d(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=f(h,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,c=new this(i);++l<n;)u(e[l],l);return c;function u(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(c,a))}),(function(e){r||(r=!0,o.reject(c,e))}))}},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r,a=-1,s=new this(i);++a<t;)r=e[a],this.resolve(r).then((function(e){n||(n=!0,o.resolve(s,e))}),(function(e){n||(n=!0,o.reject(s,e))}));return s}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,d=0,h=8;function p(e){if(!(this instanceof p))return new p(e);this.options=i.assign({level:u,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,f))!==c)throw new Error(a[n]);this._dict_set=!0}}function f(e,t){var n=new p(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}p.prototype.push=function(e,t){var n,a,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(u),s.next_out=0,s.avail_out=u),1!==(n=r.deflate(s,a))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==a||(this.onEnd(c),!(s.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=p,n.deflate=f,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function h(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,l,c,d,h,p=this.strm,f=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?p.input=o.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(f),p.next_out=0,p.avail_out=f),(n=r.inflate(p,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(h="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,h)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&n!==a.Z_STREAM_END&&(0!==p.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(p.output,p.next_out),c=p.next_out-l,d=o.buf2string(p.output,l),p.next_out=c,p.avail_out=f-c,c&&i.arraySet(p.output,p.output,l,c,0),this.onData(d)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(p.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=h,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,i,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),o=a=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,s=t||e.length,c=new Array(2*s);for(n=r=0;n<s;)if((i=e[n++])<128)c[r++]=i;else if(4<(o=a[i]))c[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<s;)i=i<<6|63&e[n++],o--;1<o?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),o=e("./trees"),a=e("./adler32"),s=e("./crc32"),l=e("./messages"),c=0,u=4,d=0,h=-2,p=-1,f=4,m=2,g=8,v=9,y=286,b=30,x=19,_=2*y+1,w=15,S=3,E=258,k=E+S+1,M=42,P=113,T=1,C=2,A=3,I=4;function R(e,t){return e.msg=l[t],t}function O(e){return(e<<1)-(4<e?9:0)}function D(e){for(var t=e.length;0<=--t;)e[t]=0}function L(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function j(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,L(e.strm)}function z(e,t){e.pending_buf[e.pending++]=t}function N(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function B(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-k?e.strstart-(e.w_size-k):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+E,p=c[o+a-1],f=c[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+a]===f&&c[n+a-1]===p&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<h);if(r=E-(h-o),o=h-E,a<r){if(e.match_start=t,s<=(a=r))break;p=c[o+a-1],f=c[o+a]}}}while((t=d[t&u])>l&&0!=--i);return a<=e.lookahead?a:e.lookahead}function F(e){var t,n,r,o,l,c,u,d,h,p,f=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-k)){for(i.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=n=e.hash_size;r=e.head[--t],e.head[t]=f<=r?r-f:0,--n;);for(t=n=f;r=e.prev[--t],e.prev[t]=f<=r?r-f:0,--n;);o+=f}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,d=e.strstart+e.lookahead,p=void 0,(h=o)<(p=c.avail_in)&&(p=h),n=0===p?0:(c.avail_in-=p,i.arraySet(u,c.input,c.next_in,p,d),1===c.state.wrap?c.adler=a(c.adler,u,p,d):2===c.state.wrap&&(c.adler=s(c.adler,u,p,d)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=S)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+S-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<S)););}while(e.lookahead<k&&0!==e.strm.avail_in)}function U(e,t){for(var n,r;;){if(e.lookahead<k){if(F(e),e.lookahead<k&&t===c)return T;if(0===e.lookahead)break}if(n=0,e.lookahead>=S&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-k&&(e.match_length=B(e,n)),e.match_length>=S)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-S),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=S){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(j(e,!1),0===e.strm.avail_out))return T}return e.insert=e.strstart<S-1?e.strstart:S-1,t===u?(j(e,!0),0===e.strm.avail_out?A:I):e.last_lit&&(j(e,!1),0===e.strm.avail_out)?T:C}function V(e,t){for(var n,r,i;;){if(e.lookahead<k){if(F(e),e.lookahead<k&&t===c)return T;if(0===e.lookahead)break}if(n=0,e.lookahead>=S&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=S-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-k&&(e.match_length=B(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===S&&4096<e.strstart-e.match_start)&&(e.match_length=S-1)),e.prev_length>=S&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-S,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-S),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=S-1,e.strstart++,r&&(j(e,!1),0===e.strm.avail_out))return T}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&j(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return T}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<S-1?e.strstart:S-1,t===u?(j(e,!0),0===e.strm.avail_out?A:I):e.last_lit&&(j(e,!1),0===e.strm.avail_out)?T:C}function H(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*_),this.dyn_dtree=new i.Buf16(2*(2*b+1)),this.bl_tree=new i.Buf16(2*(2*x+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(w+1),this.heap=new i.Buf16(2*y+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*y+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?M:P,e.adler=2===t.wrap?0:1,t.last_flush=c,o._tr_init(t),d):R(e,h)}function $(e){var t,n=G(e);return n===d&&((t=e.state).window_size=2*t.w_size,D(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=S-1,t.match_available=0,t.ins_h=0),n}function q(e,t,n,r,o,a){if(!e)return h;var s=1;if(t===p&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||v<o||n!==g||r<8||15<r||t<0||9<t||a<0||f<a)return R(e,h);8===r&&(r=9);var l=new W;return(e.state=l).strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+S-1)/S),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,$(e)}r=[new H(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(F(e),0===e.lookahead&&t===c)return T;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,j(e,!1),0===e.strm.avail_out))return T;if(e.strstart-e.block_start>=e.w_size-k&&(j(e,!1),0===e.strm.avail_out))return T}return e.insert=0,t===u?(j(e,!0),0===e.strm.avail_out?A:I):(e.strstart>e.block_start&&(j(e,!1),e.strm.avail_out),T)})),new H(4,4,8,4,U),new H(4,5,16,8,U),new H(4,6,32,32,U),new H(4,4,16,16,V),new H(8,16,32,32,V),new H(8,16,128,128,V),new H(8,32,128,256,V),new H(32,128,258,1024,V),new H(32,258,258,4096,V)],n.deflateInit=function(e,t){return q(e,t,g,15,8,0)},n.deflateInit2=q,n.deflateReset=$,n.deflateResetKeep=G,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,d):h},n.deflate=function(e,t){var n,i,a,l;if(!e||!e.state||5<t||t<0)return e?R(e,h):h;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==u)return R(e,0===e.avail_out?-5:h);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===M)if(2===i.wrap)e.adler=0,z(i,31),z(i,139),z(i,8),i.gzhead?(z(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),z(i,255&i.gzhead.time),z(i,i.gzhead.time>>8&255),z(i,i.gzhead.time>>16&255),z(i,i.gzhead.time>>24&255),z(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),z(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(z(i,255&i.gzhead.extra.length),z(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(z(i,0),z(i,0),z(i,0),z(i,0),z(i,0),z(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),z(i,3),i.status=P);else{var p=g+(i.w_bits-8<<4)<<8;p|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=32),p+=31-p%31,i.status=P,N(i,p),0!==i.strstart&&(N(i,e.adler>>>16),N(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),L(e),a=i.pending,i.pending!==i.pending_buf_size));)z(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),L(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,z(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),L(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,z(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&L(e),i.pending+2<=i.pending_buf_size&&(z(i,255&e.adler),z(i,e.adler>>8&255),e.adler=0,i.status=P)):i.status=P),0!==i.pending){if(L(e),0===e.avail_out)return i.last_flush=-1,d}else if(0===e.avail_in&&O(t)<=O(n)&&t!==u)return R(e,-5);if(666===i.status&&0!==e.avail_in)return R(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==c&&666!==i.status){var f=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(F(e),0===e.lookahead)){if(t===c)return T;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(j(e,!1),0===e.strm.avail_out))return T}return e.insert=0,t===u?(j(e,!0),0===e.strm.avail_out?A:I):e.last_lit&&(j(e,!1),0===e.strm.avail_out)?T:C}(i,t):3===i.strategy?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=E){if(F(e),e.lookahead<=E&&t===c)return T;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=S&&0<e.strstart&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+E;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=E-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=S?(n=o._tr_tally(e,1,e.match_length-S),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(j(e,!1),0===e.strm.avail_out))return T}return e.insert=0,t===u?(j(e,!0),0===e.strm.avail_out?A:I):e.last_lit&&(j(e,!1),0===e.strm.avail_out)?T:C}(i,t):r[i.level].func(i,t);if(f!==A&&f!==I||(i.status=666),f===T||f===A)return 0===e.avail_out&&(i.last_flush=-1),d;if(f===C&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),L(e),0===e.avail_out))return i.last_flush=-1,d}return t!==u?d:i.wrap<=0?1:(2===i.wrap?(z(i,255&e.adler),z(i,e.adler>>8&255),z(i,e.adler>>16&255),z(i,e.adler>>24&255),z(i,255&e.total_in),z(i,e.total_in>>8&255),z(i,e.total_in>>16&255),z(i,e.total_in>>24&255)):(N(i,e.adler>>>16),N(i,65535&e.adler)),L(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?d:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==M&&69!==t&&73!==t&&91!==t&&103!==t&&t!==P&&666!==t?R(e,h):(e.state=null,t===P?R(e,-3):d):h},n.deflateSetDictionary=function(e,t){var n,r,o,s,l,c,u,p,f=t.length;if(!e||!e.state)return h;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==M||n.lookahead)return h;for(1===s&&(e.adler=a(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&(D(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new i.Buf8(n.w_size),i.arraySet(p,t,f-n.w_size,n.w_size,0),t=p,f=n.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,F(n);n.lookahead>=S;){for(r=n.strstart,o=n.lookahead-(S-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+S-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=S-1,F(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=S-1,n.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,n.wrap=s,d},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,x,_,w,S,E,k,M;n=e.state,r=e.next_in,k=e.input,i=r+(e.avail_in-5),o=e.next_out,M=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,h=n.window,p=n.hold,f=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{f<15&&(p+=k[r++]<<f,f+=8,p+=k[r++]<<f,f+=8),b=m[p&v];t:for(;;){if(p>>>=x=b>>>24,f-=x,0==(x=b>>>16&255))M[o++]=65535&b;else{if(!(16&x)){if(0==(64&x)){b=m[(65535&b)+(p&(1<<x)-1)];continue t}if(32&x){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&b,(x&=15)&&(f<x&&(p+=k[r++]<<f,f+=8),_+=p&(1<<x)-1,p>>>=x,f-=x),f<15&&(p+=k[r++]<<f,f+=8,p+=k[r++]<<f,f+=8),b=g[p&y];n:for(;;){if(p>>>=x=b>>>24,f-=x,!(16&(x=b>>>16&255))){if(0==(64&x)){b=g[(65535&b)+(p&(1<<x)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&b,f<(x&=15)&&(p+=k[r++]<<f,(f+=8)<x&&(p+=k[r++]<<f,f+=8)),l<(w+=p&(1<<x)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=x,f-=x,(x=o-a)<w){if(u<(x=w-x)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=h,(S=0)===d){if(S+=c-x,x<_){for(_-=x;M[o++]=h[S++],--x;);S=o-w,E=M}}else if(d<x){if(S+=c+d-x,(x-=d)<_){for(_-=x;M[o++]=h[S++],--x;);if(S=0,d<_){for(_-=x=d;M[o++]=h[S++],--x;);S=o-w,E=M}}}else if(S+=d-x,x<_){for(_-=x;M[o++]=h[S++],--x;);S=o-w,E=M}for(;2<_;)M[o++]=E[S++],M[o++]=E[S++],M[o++]=E[S++],_-=3;_&&(M[o++]=E[S++],1<_&&(M[o++]=E[S++]))}else{for(S=o-w;M[o++]=M[S++],M[o++]=M[S++],M[o++]=M[S++],2<(_-=3););_&&(M[o++]=M[S++],1<_&&(M[o++]=M[S++]))}break}}break}}while(r<i&&o<s);r-=_=f>>3,p&=(1<<(f-=_<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=f}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),l=1,c=2,u=0,d=-2,h=1,p=852,f=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(p),t.distcode=t.distdyn=new r.Buf32(f),t.sane=1,t.back=-1,u):d}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,v(e)):d}function b(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,y(e))):d}function x(e,t){var n,r;return e?(r=new g,(e.state=r).window=null,(n=b(e,t))!==u&&(e.state=null),n):d}var _,w,S=!0;function E(e){if(S){var t;for(_=new r.Buf32(512),w=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(c,e.lens,0,32,w,0,e.work,{bits:5}),S=!1}e.lencode=_,e.lenbits=9,e.distcode=w,e.distbits=5}function k(e,t,n,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(o=a.wsize-a.wnext)&&(o=i),r.arraySet(a.window,t,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}n.inflateReset=y,n.inflateReset2=b,n.inflateResetKeep=v,n.inflateInit=function(e){return x(e,15)},n.inflateInit2=x,n.inflate=function(e,t){var n,p,f,g,v,y,b,x,_,w,S,M,P,T,C,A,I,R,O,D,L,j,z,N,B=0,F=new r.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(n=e.state).mode&&(n.mode=13),v=e.next_out,f=e.output,b=e.avail_out,g=e.next_in,p=e.input,y=e.avail_in,x=n.hold,_=n.bits,w=y,S=b,j=u;e:for(;;)switch(n.mode){case h:if(0===n.wrap){n.mode=13;break}for(;_<16;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}if(2&n.wrap&&35615===x){F[n.check=0]=255&x,F[1]=x>>>8&255,n.check=o(n.check,F,2,0),_=x=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&x)<<8)+(x>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&x)){e.msg="unknown compression method",n.mode=30;break}if(_-=4,L=8+(15&(x>>>=4)),0===n.wbits)n.wbits=L;else if(L>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<L,e.adler=n.check=1,n.mode=512&x?10:12,_=x=0;break;case 2:for(;_<16;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}if(n.flags=x,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=x>>8&1),512&n.flags&&(F[0]=255&x,F[1]=x>>>8&255,n.check=o(n.check,F,2,0)),_=x=0,n.mode=3;case 3:for(;_<32;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}n.head&&(n.head.time=x),512&n.flags&&(F[0]=255&x,F[1]=x>>>8&255,F[2]=x>>>16&255,F[3]=x>>>24&255,n.check=o(n.check,F,4,0)),_=x=0,n.mode=4;case 4:for(;_<16;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}n.head&&(n.head.xflags=255&x,n.head.os=x>>8),512&n.flags&&(F[0]=255&x,F[1]=x>>>8&255,n.check=o(n.check,F,2,0)),_=x=0,n.mode=5;case 5:if(1024&n.flags){for(;_<16;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}n.length=x,n.head&&(n.head.extra_len=x),512&n.flags&&(F[0]=255&x,F[1]=x>>>8&255,n.check=o(n.check,F,2,0)),_=x=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(y<(M=n.length)&&(M=y),M&&(n.head&&(L=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,p,g,M,L)),512&n.flags&&(n.check=o(n.check,p,M,g)),y-=M,g+=M,n.length-=M),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break e;for(M=0;L=p[g+M++],n.head&&L&&n.length<65536&&(n.head.name+=String.fromCharCode(L)),L&&M<y;);if(512&n.flags&&(n.check=o(n.check,p,M,g)),y-=M,g+=M,L)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break e;for(M=0;L=p[g+M++],n.head&&L&&n.length<65536&&(n.head.comment+=String.fromCharCode(L)),L&&M<y;);if(512&n.flags&&(n.check=o(n.check,p,M,g)),y-=M,g+=M,L)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;_<16;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}if(x!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}_=x=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;_<32;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}e.adler=n.check=m(x),_=x=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=v,e.avail_out=b,e.next_in=g,e.avail_in=y,n.hold=x,n.bits=_,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){x>>>=7&_,_-=7&_,n.mode=27;break}for(;_<3;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}switch(n.last=1&x,_-=1,3&(x>>>=1)){case 0:n.mode=14;break;case 1:if(E(n),n.mode=20,6!==t)break;x>>>=2,_-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}x>>>=2,_-=2;break;case 14:for(x>>>=7&_,_-=7&_;_<32;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}if((65535&x)!=(x>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&x,_=x=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(M=n.length){if(y<M&&(M=y),b<M&&(M=b),0===M)break e;r.arraySet(f,p,g,M,v),y-=M,g+=M,b-=M,v+=M,n.length-=M;break}n.mode=12;break;case 17:for(;_<14;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}if(n.nlen=257+(31&x),x>>>=5,_-=5,n.ndist=1+(31&x),x>>>=5,_-=5,n.ncode=4+(15&x),x>>>=4,_-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;_<3;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}n.lens[U[n.have++]]=7&x,x>>>=3,_-=3}for(;n.have<19;)n.lens[U[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,z={bits:n.lenbits},j=s(0,n.lens,0,19,n.lencode,0,n.work,z),n.lenbits=z.bits,j){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;A=(B=n.lencode[x&(1<<n.lenbits)-1])>>>16&255,I=65535&B,!((C=B>>>24)<=_);){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}if(I<16)x>>>=C,_-=C,n.lens[n.have++]=I;else{if(16===I){for(N=C+2;_<N;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}if(x>>>=C,_-=C,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}L=n.lens[n.have-1],M=3+(3&x),x>>>=2,_-=2}else if(17===I){for(N=C+3;_<N;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}_-=C,L=0,M=3+(7&(x>>>=C)),x>>>=3,_-=3}else{for(N=C+7;_<N;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}_-=C,L=0,M=11+(127&(x>>>=C)),x>>>=7,_-=7}if(n.have+M>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;M--;)n.lens[n.have++]=L}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,z={bits:n.lenbits},j=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,z),n.lenbits=z.bits,j){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,z={bits:n.distbits},j=s(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,z),n.distbits=z.bits,j){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=y&&258<=b){e.next_out=v,e.avail_out=b,e.next_in=g,e.avail_in=y,n.hold=x,n.bits=_,a(e,S),v=e.next_out,f=e.output,b=e.avail_out,g=e.next_in,p=e.input,y=e.avail_in,x=n.hold,_=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;A=(B=n.lencode[x&(1<<n.lenbits)-1])>>>16&255,I=65535&B,!((C=B>>>24)<=_);){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}if(A&&0==(240&A)){for(R=C,O=A,D=I;A=(B=n.lencode[D+((x&(1<<R+O)-1)>>R)])>>>16&255,I=65535&B,!(R+(C=B>>>24)<=_);){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}x>>>=R,_-=R,n.back+=R}if(x>>>=C,_-=C,n.back+=C,n.length=I,0===A){n.mode=26;break}if(32&A){n.back=-1,n.mode=12;break}if(64&A){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&A,n.mode=22;case 22:if(n.extra){for(N=n.extra;_<N;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}n.length+=x&(1<<n.extra)-1,x>>>=n.extra,_-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;A=(B=n.distcode[x&(1<<n.distbits)-1])>>>16&255,I=65535&B,!((C=B>>>24)<=_);){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}if(0==(240&A)){for(R=C,O=A,D=I;A=(B=n.distcode[D+((x&(1<<R+O)-1)>>R)])>>>16&255,I=65535&B,!(R+(C=B>>>24)<=_);){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}x>>>=R,_-=R,n.back+=R}if(x>>>=C,_-=C,n.back+=C,64&A){e.msg="invalid distance code",n.mode=30;break}n.offset=I,n.extra=15&A,n.mode=24;case 24:if(n.extra){for(N=n.extra;_<N;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}n.offset+=x&(1<<n.extra)-1,x>>>=n.extra,_-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===b)break e;if(M=S-b,n.offset>M){if((M=n.offset-M)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}P=M>n.wnext?(M-=n.wnext,n.wsize-M):n.wnext-M,M>n.length&&(M=n.length),T=n.window}else T=f,P=v-n.offset,M=n.length;for(b<M&&(M=b),b-=M,n.length-=M;f[v++]=T[P++],--M;);0===n.length&&(n.mode=21);break;case 26:if(0===b)break e;f[v++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;_<32;){if(0===y)break e;y--,x|=p[g++]<<_,_+=8}if(S-=b,e.total_out+=S,n.total+=S,S&&(e.adler=n.check=n.flags?o(n.check,f,S,v-S):i(n.check,f,S,v-S)),S=b,(n.flags?x:m(x))!==n.check){e.msg="incorrect data check",n.mode=30;break}_=x=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;_<32;){if(0===y)break e;y--,x+=p[g++]<<_,_+=8}if(x!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}_=x=0}n.mode=29;case 29:j=1;break e;case 30:j=-3;break e;case 31:return-4;default:return d}return e.next_out=v,e.avail_out=b,e.next_in=g,e.avail_in=y,n.hold=x,n.bits=_,(n.wsize||S!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&k(e,e.output,e.next_out,S-e.avail_out)?(n.mode=31,-4):(w-=e.avail_in,S-=e.avail_out,e.total_in+=w,e.total_out+=S,n.total+=S,n.wrap&&S&&(e.adler=n.check=n.flags?o(n.check,f,S,e.next_out-S):i(n.check,f,S,e.next_out-S)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==w&&0===S||4===t)&&j===u&&(j=-5),j)},n.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,u},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?d:((n.head=t).done=!1,u):d},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?d:11===n.mode&&i(1,t,r,0)!==n.check?-3:k(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,u):d},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,u,d,h){var p,f,m,g,v,y,b,x,_,w=h.bits,S=0,E=0,k=0,M=0,P=0,T=0,C=0,A=0,I=0,R=0,O=null,D=0,L=new r.Buf16(16),j=new r.Buf16(16),z=null,N=0;for(S=0;S<=15;S++)L[S]=0;for(E=0;E<l;E++)L[t[n+E]]++;for(P=w,M=15;1<=M&&0===L[M];M--);if(M<P&&(P=M),0===M)return c[u++]=20971520,c[u++]=20971520,h.bits=1,0;for(k=1;k<M&&0===L[k];k++);for(P<k&&(P=k),S=A=1;S<=15;S++)if(A<<=1,(A-=L[S])<0)return-1;if(0<A&&(0===e||1!==M))return-1;for(j[1]=0,S=1;S<15;S++)j[S+1]=j[S]+L[S];for(E=0;E<l;E++)0!==t[n+E]&&(d[j[t[n+E]]++]=E);if(y=0===e?(O=z=d,19):1===e?(O=i,D-=257,z=o,N-=257,256):(O=a,z=s,-1),S=k,v=u,C=E=R=0,m=-1,g=(I=1<<(T=P))-1,1===e&&852<I||2===e&&592<I)return 1;for(;;){for(b=S-C,_=d[E]<y?(x=0,d[E]):d[E]>y?(x=z[N+d[E]],O[D+d[E]]):(x=96,0),p=1<<S-C,k=f=1<<T;c[v+(R>>C)+(f-=p)]=b<<24|x<<16|_|0,0!==f;);for(p=1<<S-1;R&p;)p>>=1;if(0!==p?(R&=p-1,R+=p):R=0,E++,0==--L[S]){if(S===M)break;S=t[n+d[E]]}if(P<S&&(R&g)!==m){for(0===C&&(C=P),v+=k,A=1<<(T=S-C);T+C<M&&!((A-=L[T+C])<=0);)T++,A<<=1;if(I+=1<<T,1===e&&852<I||2===e&&592<I)return 1;c[m=R&g]=P<<24|T<<16|v-u|0}}return 0!==R&&(c[v+R]=S-C<<24|64<<16|0),h.bits=P,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var o=0,a=256,s=a+1+29,l=30,c=19,u=2*s+1,d=15,h=16,p=256,f=16,m=17,g=18,v=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_=new Array(2*(s+2));i(_);var w=new Array(2*l);i(w);var S=new Array(512);i(S);var E=new Array(256);i(E);var k=new Array(29);i(k);var M,P,T,C=new Array(l);function A(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function I(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function R(e){return e<256?S[e]:S[256+(e>>>7)]}function O(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function D(e,t,n){e.bi_valid>h-n?(e.bi_buf|=t<<e.bi_valid&65535,O(e,e.bi_buf),e.bi_buf=t>>h-e.bi_valid,e.bi_valid+=n-h):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function L(e,t,n){D(e,n[2*t],n[2*t+1])}function j(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function z(e,t,n){var r,i,o=new Array(d+1),a=0;for(r=1;r<=d;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=j(o[s]++,s))}}function N(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<l;t++)e.dyn_dtree[2*t]=0;for(t=0;t<c;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*p]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function B(e){8<e.bi_valid?O(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function F(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function U(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&F(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!F(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function V(e,t,n){var r,i,o,s,l=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?L(e,i,t):(L(e,(o=E[i])+a+1,t),0!==(s=v[o])&&D(e,i-=k[o],s),L(e,o=R(--r),n),0!==(s=y[o])&&D(e,r-=C[o],s)),l<e.last_lit;);L(e,p,t)}function H(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=u,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)U(e,o,n);for(i=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],U(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,U(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,l=t.dyn_tree,c=t.max_code,h=t.stat_desc.static_tree,p=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,g=t.stat_desc.max_length,v=0;for(o=0;o<=d;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<u;n++)g<(o=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(o=g,v++),l[2*r+1]=o,c<r||(e.bl_count[o]++,a=0,m<=r&&(a=f[r-m]),s=l[2*r],e.opt_len+=s*(o+a),p&&(e.static_len+=s*(h[2*r+1]+a)));if(0!==v){do{for(o=g-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[g]--,v-=2}while(0<v);for(o=g;0!==o;o--)for(r=e.bl_count[o];0!==r;)c<(i=e.heap[--n])||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}(e,t),z(o,c,e.bl_count)}function W(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<l&&i===a||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*f]++):s<=10?e.bl_tree[2*m]++:e.bl_tree[2*g]++,o=i,c=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4))}function G(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<l&&i===a)){if(s<c)for(;L(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==o&&(L(e,i,e.bl_tree),s--),L(e,f,e.bl_tree),D(e,s-3,2)):s<=10?(L(e,m,e.bl_tree),D(e,s-3,3)):(L(e,g,e.bl_tree),D(e,s-11,7));o=i,c=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4)}}i(C);var $=!1;function q(e,t,n,i){var a,s,l;D(e,(o<<1)+(i?1:0),3),s=t,l=n,B(a=e),O(a,l),O(a,~l),r.arraySet(a.pending_buf,a.window,s,l,a.pending),a.pending+=l}n._tr_init=function(e){$||(function(){var e,t,n,r,i,o=new Array(d+1);for(r=n=0;r<28;r++)for(k[r]=n,e=0;e<1<<v[r];e++)E[n++]=r;for(E[n-1]=r,r=i=0;r<16;r++)for(C[r]=i,e=0;e<1<<y[r];e++)S[i++]=r;for(i>>=7;r<l;r++)for(C[r]=i<<7,e=0;e<1<<y[r]-7;e++)S[256+i++]=r;for(t=0;t<=d;t++)o[t]=0;for(e=0;e<=143;)_[2*e+1]=8,e++,o[8]++;for(;e<=255;)_[2*e+1]=9,e++,o[9]++;for(;e<=279;)_[2*e+1]=7,e++,o[7]++;for(;e<=287;)_[2*e+1]=8,e++,o[8]++;for(z(_,s+1,o),e=0;e<l;e++)w[2*e+1]=5,w[2*e]=j(e,5);M=new A(_,v,a+1,s,d),P=new A(w,y,0,l,d),T=new A(new Array(0),b,0,c,7)}(),$=!0),e.l_desc=new I(e.dyn_ltree,M),e.d_desc=new I(e.dyn_dtree,P),e.bl_desc=new I(e.bl_tree,T),e.bi_buf=0,e.bi_valid=0,N(e)},n._tr_stored_block=q,n._tr_flush_block=function(e,t,n,r){var i,o,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),H(e,e.l_desc),H(e,e.d_desc),s=function(e){var t;for(W(e,e.dyn_ltree,e.l_desc.max_code),W(e,e.dyn_dtree,e.d_desc.max_code),H(e,e.bl_desc),t=c-1;3<=t&&0===e.bl_tree[2*x[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?q(e,t,n,r):4===e.strategy||o===i?(D(e,2+(r?1:0),3),V(e,_,w)):(D(e,4+(r?1:0),3),function(e,t,n,r){var i;for(D(e,t-257,5),D(e,n-1,5),D(e,r-4,4),i=0;i<r;i++)D(e,e.bl_tree[2*x[i]+1],3);G(e,e.dyn_ltree,t-1),G(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),V(e,e.dyn_ltree,e.dyn_dtree)),N(e),r&&B(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(E[n]+a+1)]++,e.dyn_dtree[2*R(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){var t;D(e,2,3),L(e,p,_),16===(t=e).bi_valid?(O(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,i,o,a=1,s={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(o="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){i.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(h,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return s[a]=i,n(a),a++},u.clearImmediate=d}function d(e){delete s[e]}function h(e){if(l)setTimeout(h,0,e);else{var n=s[e];if(n){l=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{d(e),l=!1}}}}function p(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&h(+t.data.slice(o.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},"object"==typeof a&&void 0!==s?s.exports=l():(i=[],void 0===(o="function"==typeof(r=l)?r.apply(t,i):r)||(e.exports=o))}}),iR=w({"../node_modules/react-hot-toast/headless/index.mjs"(){cI=k(nf()),uI=k(nf()),dI=e=>"function"==typeof e,hI=(e,t)=>dI(e)?e(t):e,pI=(()=>{let e=0;return()=>(++e).toString()})(),(()=>{let e})(),fI=new Map,mI=e=>{if(fI.has(e))return;let t=setTimeout((()=>{fI.delete(e),xI({type:4,toastId:e})}),1e3);fI.set(e,t)},gI=e=>{let t=fI.get(e);t&&clearTimeout(t)},vI=(e,t)=>{switch(t.type){case 0:return b(y({},e),{toasts:[t.toast,...e.toasts].slice(0,20)});case 1:return t.toast.id&&gI(t.toast.id),b(y({},e),{toasts:e.toasts.map((e=>e.id===t.toast.id?y(y({},e),t.toast):e))});case 2:let{toast:n}=t;return e.toasts.find((e=>e.id===n.id))?vI(e,{type:1,toast:n}):vI(e,{type:0,toast:n});case 3:let{toastId:r}=t;return r?mI(r):e.toasts.forEach((e=>{mI(e.id)})),b(y({},e),{toasts:e.toasts.map((e=>e.id===r||void 0===r?b(y({},e),{visible:!1}):e))});case 4:return void 0===t.toastId?b(y({},e),{toasts:[]}):b(y({},e),{toasts:e.toasts.filter((e=>e.id!==t.toastId))});case 5:return b(y({},e),{pausedAt:t.time});case 6:let i=t.time-(e.pausedAt||0);return b(y({},e),{pausedAt:void 0,toasts:e.toasts.map((e=>b(y({},e),{pauseDuration:e.pauseDuration+i})))})}},yI=[],bI={toasts:[],pausedAt:void 0},xI=e=>{bI=vI(bI,e),yI.forEach((e=>{e(bI)}))},_I={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},wI=(e={})=>{let[t,n]=(0,cI.useState)(bI);(0,cI.useEffect)((()=>(yI.push(n),()=>{let e=yI.indexOf(n);e>-1&&yI.splice(e,1)})),[t]);let r=t.toasts.map((t=>{var n,r;return b(y(y(y({},e),e[t.type]),t),{duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||_I[t.type],style:y(y(y({},e.style),null==(r=e[t.type])?void 0:r.style),t.style)})}));return b(y({},t),{toasts:r})},SI=(e,t="blank",n)=>b(y({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{id:(null==n?void 0:n.id)||pI()}),(kI=(e,t)=>EI("blank")(e,t)).error=(EI=e=>(t,n)=>{let r=SI(t,e,n);return xI({type:2,toast:r}),r.id})("error"),kI.success=EI("success"),kI.loading=EI("loading"),kI.custom=EI("custom"),kI.dismiss=e=>{xI({type:3,toastId:e})},kI.remove=e=>xI({type:4,toastId:e}),kI.promise=(e,t,n)=>{let r=kI.loading(t.loading,y(y({},n),null==n?void 0:n.loading));return e.then((e=>(kI.success(hI(t.success,e),y(y({id:r},n),null==n?void 0:n.success)),e))).catch((e=>{kI.error(hI(t.error,e),y(y({id:r},n),null==n?void 0:n.error))})),e},MI=(e,t)=>{xI({type:1,toast:{id:e,height:t}})},PI=()=>{xI({type:5,time:Date.now()})},TI=e=>{let{toasts:t,pausedAt:n}=wI(e);(0,uI.useEffect)((()=>{if(n)return;let e=Date.now(),r=t.map((t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout((()=>kI.dismiss(t.id)),n);t.visible&&kI.dismiss(t.id)}));return()=>{r.forEach((e=>e&&clearTimeout(e)))}}),[t,n]);let r=(0,uI.useCallback)((()=>{n&&xI({type:6,time:Date.now()})}),[n]),i=(0,uI.useCallback)(((e,n)=>{let{reverseOrder:r=!1,gutter:i=8,defaultPosition:o}=n||{},a=t.filter((t=>(t.position||o)===(e.position||o)&&t.height)),s=a.findIndex((t=>t.id===e.id)),l=a.filter(((e,t)=>t<s&&e.visible)).length;return a.filter((e=>e.visible)).slice(...r?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+i),0)}),[t]);return{toasts:t,handlers:{updateHeight:MI,startPause:PI,endPause:r,calculateOffset:i}}},CI=kI}});function oR(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function aR(e,t){if(t){if(II.test(e))return e.replace(RI,jI)}else if(OI.test(e))return e.replace(DI,jI);return e}function sR(e){return e.replace(zI,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}function lR(e,t){e="string"==typeof e?e:e.source,t=t||"";const n={replace:(t,r)=>(r=(r=r.source||r).replace(NI,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n}function cR(e,t,n){if(e){let e;try{e=decodeURIComponent(sR(n)).replace(BI,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!FI.test(n)&&(n=function(e,t){UI[" "+e]||(VI.test(e)?UI[" "+e]=e+"/":UI[" "+e]=hR(e,"/",!0));const n=-1===(e=UI[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(HI,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(WI,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}function uR(e){let t,n,r=1;for(;r<arguments.length;r++)for(n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function dR(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function hR(e,t,n){const r=e.length;if(0===r)return"";let i=0;for(;i<r;){const o=e.charAt(r-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.slice(0,r-i)}function pR(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function fR(e,t){if(t<1)return"";let n="";for(;t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}function mR(e,t,n,r){const i=t.href,o=t.title?aR(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:i,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:o,text:aR(a)}}function gR(e){return e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function vR(e){let t,n,r="";const i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}function yR(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),pR(t=uR({},yR.defaults,t||{})),n){const r=t.highlight;let i;try{i=XI.lex(e,t)}catch(e){return n(e)}const o=function(e){let o;if(!e)try{t.walkTokens&&yR.walkTokens(i,t.walkTokens),o=QI.parse(i,t)}catch(t){e=t}return t.highlight=r,e?n(e):n(null,o)};if(!r||r.length<3)return o();if(delete t.highlight,!i.length)return o();let a=0;return yR.walkTokens(i,(function(e){"code"===e.type&&(a++,setTimeout((()=>{r(e.text,e.lang,(function(t,n){if(t)return o(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),a--,0===a&&o()}))}),0))})),void(0===a&&o())}function r(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+aR(e.message+"",!0)+"</pre>";throw e}try{const n=XI.lex(e,t);if(t.walkTokens){if(t.async)return Promise.all(yR.walkTokens(n,t.walkTokens)).then((()=>QI.parse(n,t))).catch(r);yR.walkTokens(n,t.walkTokens)}return QI.parse(n,t)}catch(e){r(e)}}var bR,xR,_R,wR,SR,ER,kR,MR,PR,TR,CR,AR,IR,RR,OR,DR,LR,jR,zR,NR,BR,FR,UR,VR,HR=w({"../node_modules/marked/lib/marked.esm.js"(){AI={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},II=/[&<>"']/,RI=/[&<>"']/g,OI=/[<>"']|&(?!#?\w+;)/,DI=/[<>"']|&(?!#?\w+;)/g,LI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jI=e=>LI[e],zI=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,NI=/(^|[^\[])\^/g,BI=/[^\w:]/g,FI=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,UI={},VI=/^[^:]+:\/*[^/]*$/,HI=/^([^:]+:)[\s\S]*$/,WI=/^([^:]+:\/*[^/]*)[\s\S]*$/,GI={exec:function(){}},$I=class{constructor(e){this.options=e||AI}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:hR(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=hR(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(e,[]),text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n,r,i,o,a,s,l,c,u,d,h,p,f=t[1].trim();const m=f.length>1,g={type:"list",raw:"",ordered:m,start:m?+f.slice(0,-1):"",loose:!1,items:[]};f=m?`\\d{1,9}\\${f.slice(-1)}`:`\\${f}`,this.options.pedantic&&(f=m?f:"[*+-]");const v=new RegExp(`^( {0,3}${f})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(p=!1,t=v.exec(e))&&!this.rules.block.hr.test(e);){if(n=t[0],e=e.substring(n.length),c=t[2].split("\n",1)[0],u=e.split("\n",1)[0],this.options.pedantic?(o=2,h=c.trimLeft()):(o=t[2].search(/[^ ]/),o=o>4?1:o,h=c.slice(o),o+=t[1].length),s=!1,!c&&/^ *$/.test(u)&&(n+=u+"\n",e=e.substring(u.length+1),p=!0),!p){const t=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),r=new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),a=new RegExp(`^ {0,${Math.min(3,o-1)}}#`);for(;e&&(d=e.split("\n",1)[0],c=d,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!i.test(c))&&!a.test(c)&&!t.test(c)&&!r.test(e);){if(c.search(/[^ ]/)>=o||!c.trim())h+="\n"+c.slice(o);else{if(s)break;h+="\n"+c}s||c.trim()||(s=!0),n+=d+"\n",e=e.substring(d.length+1)}}g.loose||(l?g.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(h),r&&(i="[ ] "!==r[0],h=h.replace(/^\[[ xX]\] +/,""))),g.items.push({type:"list_item",raw:n,task:!!r,checked:i,loose:!1,text:h}),g.raw+=n}g.items[g.items.length-1].raw=n.trimRight(),g.items[g.items.length-1].text=h.trimRight(),g.raw=g.raw.trimRight();const y=g.items.length;for(a=0;a<y;a++){this.lexer.state.top=!1,g.items[a].tokens=this.lexer.blockTokens(g.items[a].text,[]);const e=g.items[a].tokens.filter((e=>"space"===e.type)),t=e.every((e=>{const t=e.raw.split("");let n=0;for(const e of t)if("\n"===e&&(n+=1),n>1)return!0;return!1}));!g.loose&&e.length&&t&&(g.loose=!0,g.items[a].loose=!0)}return g}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){const n=this.options.sanitizer?this.options.sanitizer(t[0]):aR(t[0]);e.type="paragraph",e.text=n,e.tokens=this.lexer.inline(n)}return e}}def(e){const t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:dR(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n,r,i,o,a=e.align.length;for(n=0;n<a;n++)/^ *-+: *$/.test(e.align[n])?e.align[n]="right":/^ *:-+: *$/.test(e.align[n])?e.align[n]="center":/^ *:-+ *$/.test(e.align[n])?e.align[n]="left":e.align[n]=null;for(a=e.rows.length,n=0;n<a;n++)e.rows[n]=dR(e.rows[n],e.header.length).map((e=>({text:e})));for(a=e.header.length,r=0;r<a;r++)e.header[r].tokens=this.lexer.inline(e.header[r].text);for(a=e.rows.length,r=0;r<a;r++)for(o=e.rows[r],i=0;i<o.length;i++)o[i].tokens=this.lexer.inline(o[i].text);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:aR(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):aR(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=hR(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let r=0,i=0;for(;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),mR(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e||!e.href){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return mR(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;const i=r[1]||r[2]||"";if(!i||i&&(""===n||this.rules.inline.punctuation.exec(n))){const n=r[0].length-1;let i,o,a=n,s=0;const l="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(o=i.length,r[3]||r[4]){a+=o;continue}if((r[5]||r[6])&&n%3&&!((n+o)%3)){s+=o;continue}if(a-=o,a>0)continue;if(o=Math.min(o,o+a+s),Math.min(n,o)%2){const t=e.slice(1,n+r.index+o);return{type:"em",raw:e.slice(0,n+r.index+o+1),text:t,tokens:this.lexer.inlineTokens(t)}}const t=e.slice(2,n+r.index+o-1);return{type:"strong",raw:e.slice(0,n+r.index+o+1),text:t,tokens:this.lexer.inlineTokens(t)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=aR(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,r;return"@"===n[2]?(e=aR(this.options.mangle?t(n[1]):n[1]),r="mailto:"+e):(e=aR(n[1]),r=e),{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,r;if("@"===n[2])e=aR(this.options.mangle?t(n[0]):n[0]),r="mailto:"+e;else{let t;do{t=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=aR(n[0]),r="www."===n[1]?"http://"+e:e}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const n=this.rules.inline.text.exec(e);if(n){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):aR(n[0]):n[0]:aR(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:e}}}},(qI={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:GI,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/})._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,qI._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,qI.def=lR(qI.def).replace("label",qI._label).replace("title",qI._title).getRegex(),qI.bullet=/(?:[*+-]|\d{1,9}[.)])/,qI.listItemStart=lR(/^( *)(bull) */).replace("bull",qI.bullet).getRegex(),qI.list=lR(qI.list).replace(/bull/g,qI.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+qI.def.source+")").getRegex(),qI._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",qI._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,qI.html=lR(qI.html,"i").replace("comment",qI._comment).replace("tag",qI._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),qI.paragraph=lR(qI._paragraph).replace("hr",qI.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qI._tag).getRegex(),qI.blockquote=lR(qI.blockquote).replace("paragraph",qI.paragraph).getRegex(),qI.normal=uR({},qI),qI.gfm=uR({},qI.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),qI.gfm.table=lR(qI.gfm.table).replace("hr",qI.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qI._tag).getRegex(),qI.gfm.paragraph=lR(qI._paragraph).replace("hr",qI.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",qI.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qI._tag).getRegex(),qI.pedantic=uR({},qI.normal,{html:lR("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",qI._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:GI,paragraph:lR(qI.normal._paragraph).replace("hr",qI.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",qI.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),(KI={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:GI,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:GI,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/})._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",KI.punctuation=lR(KI.punctuation).replace(/punctuation/g,KI._punctuation).getRegex(),KI.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,KI.escapedEmSt=/\\\*|\\_/g,KI._comment=lR(qI._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),KI.emStrong.lDelim=lR(KI.emStrong.lDelim).replace(/punct/g,KI._punctuation).getRegex(),KI.emStrong.rDelimAst=lR(KI.emStrong.rDelimAst,"g").replace(/punct/g,KI._punctuation).getRegex(),KI.emStrong.rDelimUnd=lR(KI.emStrong.rDelimUnd,"g").replace(/punct/g,KI._punctuation).getRegex(),KI._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,KI._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,KI._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,KI.autolink=lR(KI.autolink).replace("scheme",KI._scheme).replace("email",KI._email).getRegex(),KI._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,KI.tag=lR(KI.tag).replace("comment",KI._comment).replace("attribute",KI._attribute).getRegex(),KI._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,KI._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,KI._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,KI.link=lR(KI.link).replace("label",KI._label).replace("href",KI._href).replace("title",KI._title).getRegex(),KI.reflink=lR(KI.reflink).replace("label",KI._label).replace("ref",qI._label).getRegex(),KI.nolink=lR(KI.nolink).replace("ref",qI._label).getRegex(),KI.reflinkSearch=lR(KI.reflinkSearch,"g").replace("reflink",KI.reflink).replace("nolink",KI.nolink).getRegex(),KI.normal=uR({},KI),KI.pedantic=uR({},KI.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:lR(/^!?\[(label)\]\((.*?)\)/).replace("label",KI._label).getRegex(),reflink:lR(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",KI._label).getRegex()}),KI.gfm=uR({},KI.normal,{escape:lR(KI.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),KI.gfm.url=lR(KI.gfm.url,"i").replace("email",KI.gfm._extended_email).getRegex(),KI.breaks=uR({},KI.gfm,{br:lR(KI.br).replace("{2,}","*").getRegex(),text:lR(KI.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),XI=class{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||AI,this.options.tokenizer=this.options.tokenizer||new $I,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:qI.normal,inline:KI.normal};this.options.pedantic?(t.block=qI.pedantic,t.inline=KI.pedantic):this.options.gfm&&(t.block=qI.gfm,this.options.breaks?t.inline=KI.breaks:t.inline=KI.gfm),this.tokenizer.rules=t}static get rules(){return{block:qI,inline:KI}}static lex(e,t){return new XI(t).lex(e)}static lexInline(e,t){return new XI(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let n,r,i,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,n)=>t+"    ".repeat(n.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(n):(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(i=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((function(e){r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i)))r=t[t.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),o=i.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,r,i,o,a,s,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+fR("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+fR("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(a||(s=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,s))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e,vR))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e,vR))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((function(e){r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(i,gR))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(s=n.raw.slice(-1)),a=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}},YI=class{constructor(e){this.options=e||AI}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(n=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+aR(r,!0)+'">'+(n?e:aR(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:aR(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,t,n,r){return this.options.headerIds?`<h${t} id="${this.options.headerPrefix+r.slug(n)}">${e}</h${t}>\n`:`<h${t}>${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){if(null===(e=cR(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<a href="'+aR(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(null===(e=cR(this.options.sanitize,this.options.baseUrl,e)))return n;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${t}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}},ZI=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}},JI=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{r++,n=e+"-"+r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}},QI=class{constructor(e){this.options=e||AI,this.options.renderer=this.options.renderer||new YI,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ZI,this.slugger=new JI}static parse(e,t){return new QI(t).parse(e)}static parseInline(e,t){return new QI(t).parseInline(e)}parse(e,t=!0){let n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,x,_="";const w=e.length;for(n=0;n<w;n++)if(d=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]&&(x=this.options.extensions.renderers[d.type].call({parser:this},d),!1!==x||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)))_+=x||"";else switch(d.type){case"space":continue;case"hr":_+=this.renderer.hr();continue;case"heading":_+=this.renderer.heading(this.parseInline(d.tokens),d.depth,sR(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":_+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(c="",l="",o=d.header.length,r=0;r<o;r++)l+=this.renderer.tablecell(this.parseInline(d.header[r].tokens),{header:!0,align:d.align[r]});for(c+=this.renderer.tablerow(l),u="",o=d.rows.length,r=0;r<o;r++){for(s=d.rows[r],l="",a=s.length,i=0;i<a;i++)l+=this.renderer.tablecell(this.parseInline(s[i].tokens),{header:!1,align:d.align[i]});u+=this.renderer.tablerow(l)}_+=this.renderer.table(c,u);continue;case"blockquote":u=this.parse(d.tokens),_+=this.renderer.blockquote(u);continue;case"list":for(h=d.ordered,p=d.start,f=d.loose,o=d.items.length,u="",r=0;r<o;r++)g=d.items[r],v=g.checked,y=g.task,m="",g.task&&(b=this.renderer.checkbox(v),f?g.tokens.length>0&&"paragraph"===g.tokens[0].type?(g.tokens[0].text=b+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=b+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:b}):m+=b),m+=this.parse(g.tokens,f),u+=this.renderer.listitem(m,y,v);_+=this.renderer.list(u,h,p);continue;case"html":_+=this.renderer.html(d.text);continue;case"paragraph":_+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(u=d.tokens?this.parseInline(d.tokens):d.text;n+1<w&&"text"===e[n+1].type;)d=e[++n],u+="\n"+(d.tokens?this.parseInline(d.tokens):d.text);_+=t?this.renderer.paragraph(u):u;continue;default:{const e='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return _}parseInline(e,t){t=t||this.renderer;let n,r,i,o="";const a=e.length;for(n=0;n<a;n++)if(r=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(i=this.options.extensions.renderers[r.type].call({parser:this},r),!1!==i||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)))o+=i||"";else switch(r.type){case"escape":case"text":o+=t.text(r.text);break;case"html":o+=t.html(r.text);break;case"link":o+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":o+=t.image(r.href,r.title,r.text);break;case"strong":o+=t.strong(this.parseInline(r.tokens,t));break;case"em":o+=t.em(this.parseInline(r.tokens,t));break;case"codespan":o+=t.codespan(r.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(r.tokens,t));break;default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return o}},yR.options=yR.setOptions=function(e){var t;return uR(yR.defaults,e),t=yR.defaults,AI=t,yR},yR.getDefaults=oR,yR.defaults=AI,yR.use=function(...e){const t=uR({},...e),n=yR.defaults.extensions||{renderers:{},childTokens:{}};let r;e.forEach((e=>{if(e.extensions&&(r=!0,e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if(e.renderer){const t=n.renderers?n.renderers[e.name]:null;n.renderers[e.name]=t?function(...n){let r=e.renderer.apply(this,n);return!1===r&&(r=t.apply(this,n)),r}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");n[e.level]?n[e.level].unshift(e.tokenizer):n[e.level]=[e.tokenizer],e.start&&("block"===e.level?n.startBlock?n.startBlock.push(e.start):n.startBlock=[e.start]:"inline"===e.level&&(n.startInline?n.startInline.push(e.start):n.startInline=[e.start]))}e.childTokens&&(n.childTokens[e.name]=e.childTokens)}))),e.renderer){const n=yR.defaults.renderer||new YI;for(const t in e.renderer){const r=n[t];n[t]=(...i)=>{let o=e.renderer[t].apply(n,i);return!1===o&&(o=r.apply(n,i)),o}}t.renderer=n}if(e.tokenizer){const n=yR.defaults.tokenizer||new $I;for(const t in e.tokenizer){const r=n[t];n[t]=(...i)=>{let o=e.tokenizer[t].apply(n,i);return!1===o&&(o=r.apply(n,i)),o}}t.tokenizer=n}if(e.walkTokens){const n=yR.defaults.walkTokens;t.walkTokens=function(t){let r=[];return r.push(e.walkTokens.call(this,t)),n&&(r=r.concat(n.call(this,t))),r}}r&&(t.extensions=n),yR.setOptions(t)}))},yR.walkTokens=function(e,t){let n=[];for(const r of e)switch(n=n.concat(t.call(yR,r)),r.type){case"table":for(const e of r.header)n=n.concat(yR.walkTokens(e.tokens,t));for(const e of r.rows)for(const r of e)n=n.concat(yR.walkTokens(r.tokens,t));break;case"list":n=n.concat(yR.walkTokens(r.items,t));break;default:yR.defaults.extensions&&yR.defaults.extensions.childTokens&&yR.defaults.extensions.childTokens[r.type]?yR.defaults.extensions.childTokens[r.type].forEach((function(e){n=n.concat(yR.walkTokens(r[e],t))})):r.tokens&&(n=n.concat(yR.walkTokens(r.tokens,t)))}return n},yR.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");pR(t=uR({},yR.defaults,t||{}));try{const n=XI.lexInline(e,t);return t.walkTokens&&yR.walkTokens(n,t.walkTokens),QI.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+aR(e.message+"",!0)+"</pre>";throw e}},yR.Parser=QI,yR.parser=QI.parse,yR.Renderer=YI,yR.TextRenderer=ZI,yR.Lexer=XI,yR.lexer=XI.lex,yR.Tokenizer=$I,yR.Slugger=JI,yR.parse=yR,yR.options,yR.setOptions,yR.use,yR.walkTokens,yR.parseInline,QI.parse,XI.lex}}),WR=w({"studio/src/uiComponents/Popover/MinimalTooltip.tsx"(){mg(),tR(),bR=Am(tI)`
  padding: 6px;
`,xR=bR}}),GR=w({"studio/src/notify.tsx"(){_R=k(nf()),iR(),mg(),$x(),pf(),I(),HR(),eR(),WR(),wR=({title:e,message:t})=>`${e} ${t}`,SR=(()=>{const e=new Map;return{add:t=>{const n=wR(t);e.has(n)?e.set(n,e.get(n)+1):e.set(n,1)},delete:t=>{const n=wR(t);e.has(n)&&e.get(n)>1?e.set(n,e.get(n)-1):e.delete(n)},clear:()=>{e.clear()},check:t=>e.has(wR(t))}})(),ER=(()=>{const e=new Map;return{add:t=>{e.has(t)?e.set(t,e.get(t)+1):e.set(t,1)},delete:t=>{e.has(t)&&e.get(t)>1?e.set(t,e.get(t)-1):e.delete(t)},clear:()=>{e.clear()},check:t=>e.has(t),get types(){return Array.of(...e.keys())}}})(),kR=Am.div`
  width: 100%;
  border-radius: 4px;
  display: flex;
  gap: 12px;
  ${Ix};
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`,MR=Am.div`
  font-size: 14px;
  font-weight: bold;
  color: #fff;
`,PR=Am.div`
  flex: 1;
  flex-direction: column;
  width: 0;
  display: flex;
  padding: 16px 0;
  gap: 12px;
`,TR=Am.div`
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;

  a {
    color: rgba(255, 255, 255, 0.9);
  }

  em {
    font-style: italic;
  }

  strong {
    font-weight: bold;
    color: #d5d5d5;
  }

  p {
    margin-bottom: 8px;
  }

  code {
    font-family: monospace;
    background: rgba(0, 0, 0, 0.3);
    padding: 1px 1px 2px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    white-space: pre-wrap;
  }

  pre > code {
    white-space: pre;
    display: block;
    overflow: auto;
    padding: 4px;
  }

  pre {
    white-space: pre-wrap;
    margin-bottom: 8px;
  }
`,CR=Am.button`
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding-left: 12px;
  padding-right: 12px;
  border-left: 1px solid rgba(255, 255, 255, 0.05);

  &:hover {
    background: rgba(255, 255, 255, 0.05);
  }
`,AR={info:"#3b82f6",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},IR=Am.div`
  display: flex;
  justify-content: center;
  margin-left: 12px;
  padding-top: 21px;

  ::before {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 999999px;
    background-color: ${({type:e})=>AR[e]};
  }
`,RR=e=>(t,n,r=[],i=!1)=>{!i&&SR.check({title:t,message:n})||(SR.add({title:t,message:n}),ER.add(e),CI.custom((i=>_R.default.createElement(kR,null,_R.default.createElement(IR,{type:e}),_R.default.createElement(PR,null,_R.default.createElement(MR,null,t),_R.default.createElement(TR,{dangerouslySetInnerHTML:{__html:yR.parse(n)}}),r.length>0&&_R.default.createElement(TR,null,_R.default.createElement("span",null,"Docs:"," ",r.map(((e,t)=>_R.default.createElement(_R.Fragment,{key:t},t>0&&", ",_R.default.createElement("a",{target:"_blank",href:e.url},e.title))))))),_R.default.createElement(CR,{onClick:()=>{CI.remove(i.id),SR.delete({title:t,message:n}),ER.delete(e)}},"Close"))),{duration:1/0}))},OR={warning:RR("warning"),success:RR("success"),info:RR("info"),error:RR("error")},DR=Am.div`
  display: flex;
  justify-content: ${({align:e})=>"center"===e?"center":"flex-end"};
  gap: 12px;
`,LR=Am.button`
  position: relative;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
  ${Ix};
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border: none;
  padding: 12px;
  color: #fff;
  overflow: hidden;

  ::before {
    content: '';
    position: absolute;
    inset: 0;
  }

  :hover::before {
    background: ${({danger:e})=>e?"rgba(255, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"};
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`,jR=Am.div`
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: fixed;
  right: 92px;
  top: 50px;
  width: 500px;
  height: 85vh;
  min-height: 400px;
`,zR=Am.div`
  overflow: hidden;
  pointer-events: auto;
  border-radius: 4px;

  & > div {
    display: flex;
    flex-direction: column-reverse;
    gap: 8px;
    overflow: scroll;
    height: 100%;
  }
`,NR=Am.div`
  width: fit-content;
  padding: 8px;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;
`,BR=()=>{const{hasNotifications:e}=UR();return QA({enabled:!e},(()=>_R.default.createElement(xR,null,_R.default.createElement(NR,null,_R.default.createElement(MR,null,"No notifications"),"Notifications will appear here when you get them."))))},FR=()=>{var e;const{toasts:t,handlers:n}=TI(),{startPause:r,endPause:i}=n,o=null!=(e=Wp(T().atomP.ahistoric.pinNotifications))&&e;return _R.default.createElement(jR,null,o?t.length>0&&_R.default.createElement(zR,{onMouseEnter:r,onMouseLeave:i},_R.default.createElement("div",null,t.map((e=>_R.default.createElement("div",{key:e.id},e.message(e)))))):null,_R.default.createElement(DR,{align:"side"},o&&t.length>0&&_R.default.createElement(LR,{onClick:()=>{ER.clear(),SR.clear(),CI.remove()},danger:!0},"Clear")))},UR=()=>{const{toasts:e}=TI();return{hasNotifications:e.length>0}}}});function $R(e,t){var n;const r=Object.values(null!=(n=(0,VR.val)(e.pointers.historic.sheetsById))?n:{}),i=r.flatMap((e=>{var t;return Object.values(null!=(t=null==e?void 0:e.staticOverrides.byObject)?t:{})})).flatMap((e=>Object.values(null!=e?e:{}))),o=[...r.flatMap((e=>{var t,n;return Object.values(null!=(n=null==(t=null==e?void 0:e.sequence)?void 0:t.tracksByObject)?n:{})})).flatMap((e=>{var t;return Object.values(null!=(t=null==e?void 0:e.trackData)?t:{})})).flatMap((e=>null==e?void 0:e.keyframes)).map((e=>null==e?void 0:e.value))];return i.forEach((e=>{R(e,(e=>{o.push(e)}),[])})),o.filter((e=>(null==e?void 0:e.type)&&(t?(null==e?void 0:e.type)==t:"string"==typeof(null==e?void 0:e.type)))).map((e=>e.id)).filter(((e,t,n)=>null!==e&&""!==e&&n.indexOf(e)===t))}var qR,KR,XR,YR,ZR,JR,QR=w({"shared/src/utils/assets.ts"(){VR=k(n(771)),F()}});function eO(e,t){const n=new File([e],t),r=URL.createObjectURL(n),i=Object.assign(document.createElement("a"),{href:r,target:"_blank",rel:"noopener"});i.setAttribute("download",t),i.click(),setTimeout((()=>{URL.revokeObjectURL(r)}),4e4)}var tO,nO=w({"studio/src/panels/DetailPanel/ProjectDetails.tsx"(){I(),jT(),DT(),qR=k(nf()),mg(),zA(),nR(),KR=k(rR()),GR(),QR(),XR=Am.div``,YR=Am.div`
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
`,ZR=Am(MT)`
  display flex;
  flex-direction: column;
  gap: 1em;
  width: 280px;
  padding: 1em;
`,JR=({projects:e})=>{const t=e[0],n=t.address.projectId,r=n.replace(/[^\w\d'_\-]+/g," ").trim(),i=`${r}.theatre-project-state.json`,[o,a]=(0,qR.useState)(!1),s=(0,qR.useCallback)((()=>P(void 0,null,(function*(){var e,n;const o=$R(t),s=new Map;try{yield Promise.all(o.map((e=>P(void 0,null,(function*(){const n=t.assetStorage.getAssetUrl(e),r=yield fetch(n);r.ok&&s.set(e,yield r.blob())})))))}catch(r){return void OR.error("Failed to access assets",`Export aborted. Failed to access assets at ${null!=(n=null==(e=t.config.assets)?void 0:e.baseUrl)?n:"/"}. This is likely due to a CORS issue.`)}if(s.size>0){const e=new KR.default;for(const[t,n]of s)e.file(t,n);eO(yield e.generateAsync({type:"blob"}),`${r}.assets.zip`)}eO(JSON.stringify(T().createContentOfSaveFile(t.address.projectId),null,2),i),a(!0),setTimeout((()=>{a(!1)}),2e3)}))),[t,i]),l=pT({debugName:"ProjectDetails",pointerDistanceThreshold:50},(()=>qR.default.createElement(ZR,null,qR.default.createElement("p",null,"This will create a JSON file with the state of your project. You can commit this file to your git repo and include it in your production bundle."),qR.default.createElement("p",null,"If your project uses assets, this will also create a zip file with all the assets that you can unpack in your public folder."),qR.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Here is a quick guide on how to export to production."))));return qR.default.createElement(qR.default.Fragment,null,l.node,qR.default.createElement(XR,null,qR.default.createElement(lI,{projectId:n}),qR.default.createElement(YR,null,qR.default.createElement(RA,{onMouseEnter:e=>l.open(e,e.target),onClick:o?void 0:s,disabled:o},o?"(Exported)":`Export ${n} to JSON`))))}}});function rO(e){const[t,n]=(0,tO.useState)(!1);return(0,tO.useEffect)((()=>{const r=r=>{const i=t?200:50;let o="left"===e?r.x<i:r.x>window.innerWidth-i;o&&(o=r.y>56),n(!!o)};document.addEventListener("mousemove",r);const i=()=>{n(!1)};return document.addEventListener("mouseleave",i),()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseleave",i)}}),[t]),t}var iO,oO,aO,sO,lO,cO,uO,dO,hO,pO,fO,mO,gO,vO,yO,bO,xO,_O,wO,SO=w({"studio/src/uiComponents/useHotspot.ts"(){tO=k(nf())}}),EO=w({"studio/src/panels/DetailPanel/EmptyState.tsx"(){iO=k(nf()),mg(),_C(),oO=Am.div`
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 24px;
`,aO=Am.div`
  display: flex;
  flex-direction: column;
  gap: 11px;
  color: rgba(255, 255, 255, 0.9);
`,sO=Am.div`
  color: rgba(145, 145, 145, 0.8);
`,lO=Am.a`
  color: #919191;
  font-size: 10px;
  text-decoration-color: #40434a;
  text-underline-offset: 3px;
`,cO=()=>iO.default.createElement(oO,null,iO.default.createElement(aO,null,iO.default.createElement(sO,null,iO.default.createElement(BT,null)),iO.default.createElement("div",null,"Please select an object from the ",iO.default.createElement("u",null,"Outline Menu")," to see its properties.")),iO.default.createElement(lO,{href:"https://www.theatrejs.com/docs/latest/manual/objects",target:"_blank"},"Learn more about Objects"))}}),kO=w({"studio/src/panels/DetailPanel/DetailPanel.tsx"(){xv(),pf(),uO=k(nf()),mg(),H(),oE(),$x(),jA(),nO(),I(),SO(),dO=k(n(771)),EO(),nk(),Uw(),hO=Am.div`
  ${Ix};
  background-color: rgba(40, 43, 47, 0.8);
  position: fixed;
  right: 8px;
  top: 50px;
  // Temporary, see comment about CSS grid in SingleRowPropEditor.
  width: 280px;
  height: fit-content;
  z-index: ${FS.propsPanel};

  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border-radius: 2px;

  display: ${({pin:e})=>e?"block":"none"};

  &:hover {
    display: block;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`,pO=Am.div`
  margin: 0 10px;
  color: #919191;
  font-weight: 500;
  font-size: 10px;
  user-select: none;
  ${Ix};
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,fO=Am.div`
  height: ${"32px"};
  display: flex;
  align-items: center;
`,mO=Am.div`
  ${Ix};
  max-height: calc(100vh - 100px);
  overflow-y: scroll;
  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
  padding: 0;
  user-select: none;

  /* Set the font-size for input values in the detail panel */
  font-size: 12px;
`,gO=(0,uO.createContext)([!1,()=>()=>{}]),vO=e=>{const t=!1!==Wp(T().atomP.ahistoric.pinDetails),n=rO("right");(0,uO.useLayoutEffect)((()=>{bO.set(n)}),[n]),(0,uO.useEffect)((()=>()=>{xO.set(!1),bO.set(!1)}),[]);const[r]=(0,uO.useContext)(gO),i=t||n||r,[o,a]=(0,uO.useState)(null);return Mw(o),uf((()=>{const e=fv(),t=e.find(j);if(t)return uO.default.createElement(hO,{"data-testid":"DetailPanel-Object",pin:i,ref:a,onMouseEnter:()=>{xO.set(!0)},onMouseLeave:()=>{xO.set(!1)}},uO.default.createElement(fO,null,uO.default.createElement(pO,{title:`${t.sheet.address.sheetId}: ${t.sheet.address.sheetInstanceId} > ${t.address.objectKey}`},uO.default.createElement(VS,null,t.sheet.address.sheetId," "),uO.default.createElement(HS,null,":",""),uO.default.createElement(VS,null,t.sheet.address.sheetInstanceId," "),uO.default.createElement(HS,null,""),uO.default.createElement(VS,null,t.address.objectKey))),uO.default.createElement(mO,null,uO.default.createElement(AA,{objects:[t]})));const n=e.find(O);return n?uO.default.createElement(hO,{pin:i},uO.default.createElement(fO,null,uO.default.createElement(pO,{title:`${n.address.projectId}`},uO.default.createElement(VS,null,n.address.projectId," "))),uO.default.createElement(mO,null,uO.default.createElement(JR,{projects:[n]}))):uO.default.createElement(hO,{pin:i,onMouseEnter:()=>{xO.set(!0)},onMouseLeave:()=>{xO.set(!1)}},uO.default.createElement(cO,null))}),[i])},yO=()=>{const e=zE();return uO.default.createElement(gO.Provider,{value:e},uO.default.createElement(vO,null))},bO=new dO.Atom(!1),xO=new dO.Atom(!1),(0,dO.prism)((()=>{const e=(0,dO.val)(xO.prism),t=(0,dO.val)(bO.prism);return e||t}))}});function MO(e,t){const[n,r]=Tk(e,t),[,i]=(0,_O.useContext)(gO);return(0,_O.useEffect)((()=>{var e;let r;return n.isOpen&&(null==(e=t.onOpen)||e.call(t),r=i()),()=>null==r?void 0:r()}),[n.isOpen,t.onOpen]),[n.isOpen?_O.default.createElement(Mk,{items:t.menuItems,displayName:t.displayName,clickPoint:n.event,onRequestClose:r}):wO,r,n.isOpen]}var PO,TO,CO,AO,IO,RO,OO,DO,LO,jO,zO,NO,BO,FO,UO,VO,HO,WO,GO,$O,qO,KO,XO,YO,ZO,JO,QO,eD,tD,nD,rD,iD,oD,aD,sD,lD,cD,uD,dD,hD,pD,fD,mD,gD,vD,yD,bD,xD,_D,wD,SD,ED,kD,MD,PD,TD,CD,AD,ID,RD,OD,DD,LD,jD,zD,ND,BD,FD,UD,VD=w({"studio/src/uiComponents/simpleContextMenu/useContextMenu.tsx"(){_O=k(nf()),Nk(),Bk(),kO(),wO=_O.default.createElement(_O.default.Fragment,null)}}),HD=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/FocusRangeZone/FocusRangeStrip.tsx"(){PO=k(n(771)),pf(),$x(),I(),$D(),VD(),Fg(),jg(),TO=k(nf()),mg(),jE(),CO={enabled:{backgroundColor:"#2C2F34",stroke:"#646568"},disabled:{backgroundColor:"#282a2cc5",stroke:"#595a5d"},hover:{backgroundColor:"#34373D",stroke:"#C8CAC0"},dragging:{backgroundColor:"#3F444A",stroke:"#C8CAC0"},thumbWidth:9,hitZoneWidth:26,rangeStripMinWidth:30},AO=Am.div`
  position: absolute;
  height: ${()=>HO-1}px;
  background-color: ${e=>e.enabled?CO.enabled.backgroundColor:CO.disabled.backgroundColor};
  cursor: grab;
  top: 0;
  left: 0;
  width: ${1e3}px;
  transform-origin: left top;
  &:hover {
    background-color: ${CO.hover.backgroundColor};
  }
  &.dragging {
    background-color: ${CO.dragging.backgroundColor};
    cursor: grabbing !important;
  }
  ${Ix};

  /* covers the one pixel space between the focus range strip and the top strip
  of the sequence editor panel, which would have caused that one pixel to act
  like a panel drag zone */
  &:after {
    display: block;
    content: ' ';
    position: absolute;
    bottom: -1px;
    height: 1px;
    left: 0;
    right: 0;
    background: transparent;
    pointer-events: normal;
    z-index: -1;
  }
`,IO=({layoutP:e})=>{const t=(0,TO.useMemo)((()=>(0,PO.prism)((()=>{const{projectId:t,sheetId:n}=(0,PO.val)(e.sheet).address;return(0,PO.val)(T().atomP.ahistoric.projects.stateByProjectId[t].stateBySheetId[n].sequence.focusRange)}))),[e]),[n,r]=Ig(null),[i]=MO(r,{menuItems:()=>{const n=(0,PO.val)(e.sheet),r=t.getValue();return[{label:"Delete focus range",callback:()=>{T().tempTransaction((({stateEditors:e})=>{e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.unset(y({},n.address))})).commit()}},{label:(null==r?void 0:r.enabled)?"Disable focus range":"Enable focus range",callback:()=>{void 0!==r&&T().tempTransaction((({stateEditors:e})=>{e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(b(y({},n.address),{range:r.range,enabled:!r.enabled}))})).commit()}}]}}),o=Wp(e.scaledSpace.toUnitSpace),a=Wp(e.sheet),s=(0,TO.useMemo)((()=>{let n,r;return{debugName:"FocusRangeStrip",onDragStart(i){let s,l=t.getValue();if(!l)return!1;const c=l.range.start,u=l.range.end;let d=!1;const h=(0,PO.val)(e.sheet).getSequence();return{onDrag(e){if(l=t.getValue(),l){d=!0;const t=o(e),i=c+t;let p=u+t;p<i&&(p=i),[n,r]=function(e,t){let n=0;const[r,i]=e,[o,a]=t;return i-r>a-o?[o,a]:(r<o&&(n=0-r),i>a&&(n=a-i),[r+n,i+n])}([i,p],[0,h.length]).map((e=>h.closestGridPosition(e))),s&&s.discard(),s=T().tempTransaction((({stateEditors:e})=>{var t;e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(b(y({},a.address),{range:{start:n,end:r},enabled:null==(t=null==l?void 0:l.enabled)||t}))}))}},onDragEnd(){l&&(d&&void 0!==s?s.commit():s&&s.discard())}}},lockCSSCursorTo:"grabbing"}}),[a,o]),[l]=zg(r,s);return TE(l,-1),uf((()=>{const r=t.getValue(),o=(null==r?void 0:r.range)||{start:0,end:0};let a,s,c=(0,PO.val)(e.clippedSpace.fromUnitSpace)(o.start),u=(0,PO.val)(e.clippedSpace.fromUnitSpace)(o.end);return c<0&&(c=0),u>(0,PO.val)(e.clippedSpace.width)&&(u=(0,PO.val)(e.clippedSpace.width)),c>u?(s=0,a=0):(s=c,a=(u-c)/1e3),r?TO.default.createElement(TO.default.Fragment,null,i,TO.default.createElement(AO,{id:"range-strip",enabled:r.enabled,className:`${l?"dragging":""} ${r.enabled?"enabled":""}`,ref:n,style:{transform:`translateX(${s}px) scale(${a}, 1)`}})):TO.default.createElement(TO.default.Fragment,null)}),[e,n,t,i,l])}}}),WD=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/FocusRangeZone/FocusRangeThumb.tsx"(){RO=k(n(771)),pf(),I(),$D(),gg(),Fg(),jg(),OO=k(nf()),mg(),jE(),HD(),Qg(),DO=Am.div`
  position: absolute;
  top: 0;
  // the right handle has to be pulled back by its width since its right side indicates its position, not its left side
  left: ${e=>"start"===e.type?0:-CO.thumbWidth}px;
  transform-origin: left top;
  width: ${CO.thumbWidth}px;
  height: ${()=>HO-1}px;
  z-index: 3;

  --bg: ${({enabled:e})=>e?CO.enabled.backgroundColor:CO.disabled.backgroundColor};

  stroke: ${CO.enabled.stroke};
  user-select: none;

  cursor: ${e=>"start"===e.type?"w-resize":"e-resize"};

  // no pointer events unless pointer-root is in normal mode _and_ the
  // focus range is enabled
  #pointer-root & {
    pointer-events: none;
  }

  #pointer-root.normal & {
    pointer-events: auto;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(${sg});
  }

  &.dragging {
    pointer-events: none !important;
  }

  // highlight the handle if it's hovered, or the whole strip is hovverd
  ${()=>AO}:hover ~ &, &:hover {
    --bg: ${CO.hover.backgroundColor};
    stroke: ${CO.hover.stroke};
  }

  // highlight the handle when it's being dragged or the whole strip is being dragged.
  // using dragging.dragging to give this selector priority, as it seems to be overridden
  // by the hover selector above
  &.dragging,
  ${()=>AO}.dragging.dragging ~ & {
    --bg: ${CO.dragging.backgroundColor};
    stroke: ${CO.dragging.stroke};
  }

  #pointer-root.draggingPositionInSequenceEditor &:hover {
    --bg: ${CO.dragging.backgroundColor};
    stroke: #40aaa4;
  }

  background-color: var(--bg);

  // a larger hit zone
  &:before {
    display: block;
    content: ' ';
    position: absolute;
    inset: -8px;
  }
`,LO=Am.div`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    ${e=>"start"===e.type?90:-90}deg,
    var(--bg) 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: ${e=>"start"===e.type?CO.thumbWidth:1-CO.thumbWidth}px;
`,jO=Am.div`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    ${e=>"start"===e.type?-90:90}deg,
    ${()=>WO.backgroundColor} 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: ${e=>"start"===e.type?-12:CO.thumbWidth}px;
`,zO=({layoutP:e,thumbType:t})=>{var n;const[r,i]=Ig(null),o=(0,OO.useMemo)((()=>(0,RO.prism)((()=>{const{projectId:t,sheetId:n}=(0,RO.val)(e.sheet).address;return(0,RO.val)(T().atomP.ahistoric.projects.stateByProjectId[t].stateBySheetId[n].sequence.focusRange)}))),[e]),a=(0,OO.useMemo)((()=>({debugName:"FocusRangeThumb",onDragStart(){let n,r;const a=(0,RO.val)(e.sheet),s={start:0,end:a.getSequence().length};let l=o.getValue()||{range:s,enabled:!1};const c=l.enabled,u=l.range[t],d=(0,RO.val)(e.scaledSpace.toUnitSpace),h=d(CO.rangeStripMinWidth);return{onDrag(e,l,p){var f;let m;const g=Yg.checkIfMouseEventSnapToPos(p,{ignore:i});if(null==g){const t=d(e);m=u+t}else m=g;r=(null==(f=o.getValue())?void 0:f.range)||s,m="start"===t?Math.max(Math.min(m,r.end-h),0):Math.min(Math.max(m,r.start+h),a.getSequence().length);const v=a.getSequence().closestGridPosition(m);void 0!==n&&n.discard(),n=T().tempTransaction((({stateEditors:e})=>{e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(b(y({},a.address),{range:b(y({},r),{[t]:v}),enabled:c}))}))},onDragEnd(e){e?null==n||n.commit():null==n||n.discard()}}}})),[e]),[s]=zg(i,a);dg(s,"draggingPositionInSequenceEditor","start"===t?"w-resize":"e-resize");const l=Wp(o);return TE(s,null!=(n=null==l?void 0:l.range[t])?n:0),uf((()=>{const n=o.getValue();if(!n)return null;const{enabled:i}=n,a=n.range[t];let l=(0,RO.val)(e.clippedSpace.fromUnitSpace)(a);return(l<0||(0,RO.val)(e.clippedSpace.width)<l)&&(l=-1e4),OO.default.createElement(DO,b(y(y({ref:r},Yg.includePositionSnapAttrs(a)),CE(a)),{className:`${s&&"dragging"} ${i&&"enabled"}`,enabled:i,type:t,style:{transform:`translate3d(${l}px, 0, 0)`}}),OO.default.createElement(LO,{type:t,enabled:i}),OO.default.createElement(jO,{type:t}),OO.default.createElement("svg",{viewBox:"0 0 9 18",xmlns:"http://www.w3.org/2000/svg"},OO.default.createElement("line",{x1:"4",y1:"6",x2:"4",y2:"12"}),OO.default.createElement("line",{x1:"6",y1:"6",x2:"6",y2:"12"})))}),[e,r,o,s])}}}),GD=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/FocusRangeZone/FocusRangeZone.tsx"(){NO=k(n(771)),pf(),I(),lk(),$D(),gg(),Fg(),ck(),$g(),jg(),Tp(),BO=k(nf()),mg(),HD(),WD(),oE(),FO=Am.div`
  position: absolute;
  height: ${()=>HO}px;
  left: 0;
  right: 0;
  box-sizing: border-box;
  /* Use the "grab" cursor if the shift key is up, which is the one used on the top strip of the sequence editor */
  cursor: ${e=>e.isShiftDown?"ew-resize":"move"};
`,UO=({layoutP:e})=>{const[t,n]=Ig(null),r=JE(),i=(0,BO.useRef)(r);i.current=r;const o=(0,BO.useMemo)((()=>(0,NO.prism)((()=>{const{projectId:t,sheetId:n}=(0,NO.val)(e.sheet).address;return(0,NO.val)(T().atomP.ahistoric.projects.stateByProjectId[t].stateBySheetId[n].sequence.focusRange)}))),[e]);zg(n,function(e,t){const[n,r]=(0,BO.useState)("none");return dg("none"!==n,"dragging","creating"===n?"ew-resize":"move"),(0,BO.useMemo)((()=>({debugName:"FocusRangeZone",onDragStart(n){const[i,o]=n.shiftKey?["creating",{debugName:"FocusRangeZone/focusRangeCreationGestureHandlers",onDragStart(t){let n;const r=(0,NO.val)(e.clippedSpace.toUnitSpace),i=(0,NO.val)(e.scaledSpace.toUnitSpace),o=(0,NO.val)(e.sheet),a=o.getSequence(),s=t.target.getBoundingClientRect(),l=r(t.clientX-s.left),c=i(CO.rangeStripMinWidth);return{onDrag(e){const t=i(e);let r=l,s=l+t;[r,s]=[ml(r,0,a.length),ml(s,0,a.length)].map((e=>a.closestGridPosition(e))),s<r?[r,s]=[Math.max(Math.min(s,r-c),0),r]:e>0&&(s=Math.min(Math.max(s,r+c),a.length)),n&&n.discard(),n=T().tempTransaction((({stateEditors:e})=>{e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(b(y({},o.address),{range:{start:r,end:s},enabled:!0}))}))},onDragEnd(e){e&&void 0!==n?n.commit():n&&n.discard()}}},lockCSSCursorTo:"ew-resize"}.onDragStart(n)]:["moving-panel",{debugName:"FocusRangeZone/panelMoveGestureHandlers",onDragStart(){let e;const n=t.current,r=t.current.addBoundsHighlightLock();return{onDrag(t,r){const i=b(y({},n.dims),{top:ml(n.dims.top+r,0,window.innerHeight-qS),left:ml(n.dims.left+t,-n.dims.width+qS,window.innerWidth-qS)}),o=YE(i,{width:window.innerWidth,height:window.innerHeight});null==e||e.discard(),e=T().tempTransaction((({stateEditors:e})=>{e.studio.historic.panelPositions.setPanelPosition({position:o,panelId:n.panelId})}))},onDragEnd(t){r(),t?null==e||e.commit():null==e||e.discard()}}},lockCSSCursorTo:"move"}.onDragStart(n)];return r(i),!1!==o&&{onDrag(e,t,n,r,i){o.onDrag(e,t,n,r,i)},onDragEnd(e){var t;r("none"),null==(t=o.onDragEnd)||t.call(o,e)}}}})),[e,t])}(e,i));const a=Vg("Shift"),s=function(e){const[t,n]=(0,ek.useState)(!1);return(0,ek.useEffect)((()=>{if(n(!1),!e)return;const t=t=>{t.target===e?n(!0):n(!1)},r=()=>{n(!1)};return e.addEventListener("mouseenter",t),e.addEventListener("mousemove",t),e.addEventListener("mouseleave",r),()=>{n(!1),e.removeEventListener("mouseenter",t),e.removeEventListener("mousemove",t),e.removeEventListener("mouseleave",r)}}),[e]),t}(n);return(0,BO.useEffect)((()=>{if(!a&&s)return i.current.addBoundsHighlightLock()}),[!a&&s]),uf((()=>BO.default.createElement(FO,{ref:t,isShiftDown:a},BO.default.createElement(IO,{layoutP:e}),BO.default.createElement(zO,{thumbType:"start",layoutP:e}),BO.default.createElement(zO,{thumbType:"end",layoutP:e}))),[e,o,a])}}}),$D=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/TopStrip.tsx"(){pf(),VO=k(nf()),mg(),DE(),jE(),$x(),GD(),HO=18,WO={backgroundColor:"#1f2120eb",borderColor:"#1c1e21"},GO=Am.div`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: ${HO}px;
  box-sizing: border-box;
  background: ${WO.backgroundColor};
  border-bottom: 1px solid ${WO.borderColor};
  ${Ix};
`,$O=({layoutP:e})=>{const t=Wp(e.rightDims.width);return VO.default.createElement(VO.default.Fragment,null,VO.default.createElement(GO,y({},CE("hide")),VO.default.createElement(pE,{layoutP:e,width:t,height:HO}),VO.default.createElement(UO,{layoutP:e})))}}}),qD=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/LengthIndicator/LengthEditorPopover.tsx"(){qO=k(nf()),mg(),pf(),I(),aM(),C_(),KO=e=>isFinite(e)&&e>0,XO=Am.div`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`,YO=Am.div`
  ${M_};
  white-space: nowrap;
`,ZO=({deltaX:e})=>.25*e,JO=({layoutP:e})=>{const t=Wp(e.sheet),n=(0,qO.useMemo)((()=>{let e;return{temporarilySetValue(n){e&&(e.discard(),e=void 0),e=T().tempTransaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.setLength(b(y({},t.address),{length:n}))}))},discardTemporaryValue(){e&&(e.discard(),e=void 0)},permanentlySetValue(n){e&&(e.discard(),e=void 0),T().transaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.setLength(b(y({},t.address),{length:n}))}))}}}),[e,t]),r=(0,qO.useRef)(null);return(0,qO.useLayoutEffect)((()=>{r.current.focus()}),[]),uf((()=>{const e=t.getSequence().length;return qO.default.createElement(XO,null,qO.default.createElement(YO,null,"Sequence length"),qO.default.createElement(nM,b(y({value:e},n),{isValid:KO,inputRef:r,nudge:ZO})))}),[t,n,r])}}}),KD=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/LengthIndicator/LengthIndicator.tsx"(){pf(),QO=k(n(771)),eD=k(nf()),mg(),lz(),$D(),jg(),Fg(),I(),DT(),jE(),T_(),qD(),$x(),jT(),tD={stripNormal:"#0000006c",stripActive:"#000000"},nD=Am.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  z-index: ${()=>Ij.lengthIndicatorStrip};
  pointer-events: none;

  &:after {
    display: block;
    content: ' ';
    position: absolute;
    /* top: ${HO}px; */
    top: 0;
    bottom: 0;
    left: -1px;
    width: 1px;
    background-color: ${tD.stripNormal};
  }

  &:hover:after,
  &.dragging:after {
    background-color: ${tD.stripActive};
  }
`,rD=Am.div`
  position: absolute;
  top: ${HO-15}px;
  width: 100px;
  left: -50px;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
`,iD=Am.div`
  margin-top: 8px;
  font-size: 10px;
  white-space: nowrap;
  padding: 2px 8px;
  border-radius: 2px;
  ${Ix};
  cursor: ew-resize;
  color: #464646;
  background-color: #0000004d;
  display: none;

  ${nD}:hover &, ${nD}.dragging & {
    display: block;
    color: white;
    background-color: ${tD.stripActive};
  }
`,oD=Am.div`
  font-size: 10px;
  white-space: nowrap;
  padding: 1px 2px;
  border-radius: 2px;
  ${Ix};
  justify-content: center;
  align-items: center;
  cursor: ew-resize;
  color: #5d5d5d;
  background-color: #191919;

  ${nD}:hover &, ${nD}.dragging & {
    color: white;
    background-color: ${tD.stripActive};

    & > svg:first-child {
      margin-right: -1px;
    }
  }

  & > svg:first-child {
    margin-right: -4px;
  }
`,aD=Am.div`
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgb(23 23 23 / 43%);
  width: ${1e3}px;
  z-index: ${()=>Ij.lengthIndicatorCover};
  transform-origin: left top;

  ${nD}.dragging ~ &, ${nD}:hover ~ & {
    background-color: rgb(23 23 23 / 60%);
  }
`,sD=({layoutP:e})=>{const[t,n]=Ig(null),[r]=function(e,t){const n=(0,eD.useRef)(t);n.current=t;const r=(0,eD.useMemo)((()=>({debugName:"LengthIndicator/useDragBulge",lockCSSCursorTo:"ew-resize",onDragStart(e){let t;const r=n.current,i=(0,QO.val)(n.current.layoutP.sheet),o=i.getSequence().length,a=(0,QO.val)(r.layoutP.scaledSpace.toUnitSpace);return{onDrag(e,n,r){const s=a(e);t&&(t.discard(),t=void 0),t=T().tempTransaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.setLength(b(y({},i.address),{length:o+s}))}))},onDragEnd(e){e?t&&t.commit():t&&t.discard()}}}})),[]),[i]=zg(e,r);return TE(i,-1),[i]}(n,{layoutP:e}),{node:i,toggle:o,close:a}=pT({debugName:"LengthIndicator"},(()=>eD.default.createElement(MT,null,eD.default.createElement(JO,{layoutP:e,onRequestClose:a}))));return uf((()=>{const a=(0,QO.val)(e.sheet),s=(0,QO.val)(e.rightDims.height),l=a.getSequence(),c=l.length,u=c;let d,h,p=(0,QO.val)(e.clippedSpace.fromUnitSpace)(u),f=(0,QO.val)(e.clippedSpace.width);return p>f?(h=0,d=0):(p<0&&(p=0),h=p,d=(f-p)/1e3),eD.default.createElement(eD.default.Fragment,null,i,eD.default.createElement(nD,{style:{height:s+"px",transform:`translateX(${0===h?-1e4:h}px)`},className:r?"dragging":""},eD.default.createElement(rD,null,eD.default.createElement(oD,y({ref:t,onClick:e=>{o(e,n)}},CE("hide")),eD.default.createElement(a_,null),eD.default.createElement(s_,null)),eD.default.createElement(iD,null,"Sequence length:"," ",l.positionFormatter.formatBasic(c)))),eD.default.createElement(aD,{title:"Length",style:{height:s+"px",transform:`translateX(${h}px) scale(${d}, 1)`}}))}),[e,t,r,i])}}}),XD=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/FrameStamp.tsx"(){pf(),lD=k(n(771)),cD=k(nf()),mg(),DE(),lz(),$D(),jE(),uD=Am.div`
  position: absolute;
  top: 0;
  left: 0;
  margin-top: 0px;
`,dD=Am.div`
  position: absolute;
  top: 16px;
  font-size: ${uE.stampFontSize};
  color: ${uE.fullUnitStampColor};
  text-align: center;
  transform: translateX(-50%);
  background: ${WO.backgroundColor};
  padding: 1px 8px;
  font-variant-numeric: tabular-nums;
  pointer-events: none;
  z-index: ${()=>Ij.currentFrameStamp};
`,hD=Am.div`
  position: absolute;
  top: 5px;
  left: -0px;
  bottom: 0;
  width: 0.5px;
  background: rgba(100, 100, 100, 0.2);
  pointer-events: none;
`,pD=cD.default.memo((({layoutP:e})=>{const[t,n]=Wp(ME()),r=Wp(e.clippedSpace.fromUnitSpace),{sequence:i,formatter:o,clippedSpaceWidth:a}=uf((()=>{const t=(0,lD.val)(e.sheet).getSequence(),n=(0,lD.val)(e.clippedSpace.width);return{sequence:t,formatter:t.positionFormatter,clippedSpaceWidth:n}}),[e]);if(-1==t)return cD.default.createElement(cD.default.Fragment,null);const s=n===wE.free?i.closestGridPosition(t):t,l=r(s),c=l>=0&&l<=a;return cD.default.createElement(cD.default.Fragment,null,cD.default.createElement(uD,null,cD.default.createElement(dD,{style:{opacity:c?1:0,transform:`translate3d(calc(${l}px - 50%), 0, 0)`}},o.formatForPlayhead(s)),cD.default.createElement(hD,{posType:n,style:{opacity:c?1:0,transform:`translate3d(${l}px, 0, 0)`}}))," ")})),fD=pD}}),YD=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/HorizontalScrollbar.tsx"(){pf(),mD=k(n(771)),Dh(),Ty(),gD=k(nf()),mg(),lz(),jE(),$x(),Fg(),vD=Am.div`
  --threadHeight: 6px;
  --bg-inactive: #32353b;
  --bg-active: #5b5c5d;
  position: absolute;
  height: 0;
  width: 100%;
  left: 12px;
  /* bottom: 8px; */
  z-index: ${()=>Ij.horizontalScrollbar};
  ${Ix}
`,yD=Am.div`
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--threadHeight);
`,bD=Am.div`
  position: absolute;
  height: 5px;
  background: var(--bg-inactive);
  cursor: ew-resize;
  z-index: 2;

  &:hover,
  &:active {
    background: var(--bg-active);
  }

  &:after {
    ${Py("absolute","-4px")};
    display: block;
    content: ' ';
  }
`,xD=Am.div`
  position: absolute;
  height: 5px;
  width: 7px;
  left: 0;
  z-index: 2;
  top: 0;
  bottom: 0;
  display: block;

  &:hover:before {
    background: var(--bg-active);
  }

  &:before {
    ${Py("absolute","0")};
    display: block;
    content: ' ';
    background: var(--bg-inactive);
    border-radius: 0 2px 2px 0;
  }

  &:after {
    ${Py("absolute","-4px")};
    display: block;
    content: ' ';
  }
`,_D=Am(xD)`
  left: calc(-1 * 7px);
  cursor: w-resize;
  &:before {
    transform: scaleX(-1);
  }
`,wD=Am(xD)`
  cursor: e-resize;
  left: 0px;
`,SD=Am.div`
  display: ${e=>e.active?"block":"none"};
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 4px;
  transform: translateX(-50%);
  background: #131d1f;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;

  ${_D}:hover &,
  ${wD}:hover &,
  ${bD}:hover ~ ${_D} &,
  ${bD}:hover ~ ${wD} & {
    display: block;
  }
`,ED=({layoutP:e})=>{const t=(0,gD.useCallback)((e=>e.toFixed(2)),[]),n=(0,gD.useMemo)((()=>(0,mD.prism)((()=>{const t=(0,mD.val)(e.rightDims.width)-25,n=(0,mD.val)(e.clippedSpace.range),r=(0,mD.val)(e.sheet).getSequence().length,i=Math.max(n.end,r);return{rightWidth:t,clippedSpaceRange:n,sequenceLength:r,assumedLengthOfSequence:i,rangeStartX:n.start/i*t,rangeEndX:n.end/i*t,bottom:(0,mD.val)(e.horizontalScrollbarDims.bottom)}}))),[e]),{rangeStartX:r,rangeEndX:i,clippedSpaceRange:o,bottom:a}=Wp(n),[s,l]=(0,gD.useState)("nothing"),c=(0,gD.useMemo)((()=>{let t=(0,mD.val)(n),r=()=>{t=(0,mD.val)(n)};const i=e=>e/t.rightWidth*t.assumedLengthOfSequence;return{onRangeDragStart:()=>(r(),{onDrag(n){l("both");const r=i(n),o=Ch(t.clippedSpaceRange,(e=>e+r));(0,mD.val)(e.clippedSpace.setRange)(o)},onDragEnd(){l("nothing")}}),onRangeStartDragStart:()=>(r(),{onDrag(n){l("start");const r=i(n),o={start:t.clippedSpaceRange.start+r,end:t.clippedSpaceRange.end};o.start>o.end-1&&(o.start=o.end-1),o.start<=0&&(o.start=0),(0,mD.val)(e.clippedSpace.setRange)(o)},onDragEnd(){l("nothing")}}),onRangeEndDragStart:()=>(r(),{onDrag(n){l("end");const r=i(n),o={start:t.clippedSpaceRange.start,end:t.clippedSpaceRange.end+r};o.end<o.start+1&&(o.end=o.start+1),o.end>=t.assumedLengthOfSequence&&(o.end=t.assumedLengthOfSequence),(0,mD.val)(e.clippedSpace.setRange)(o)},onDragEnd(){l("nothing")}})}}),[e,n]),[u,d]=(0,gD.useState)(null);zg(u,{debugName:"HorizontalScrollbar/onRangeDrag",onDragStart:c.onRangeDragStart,lockCSSCursorTo:"ew-resize"});const[h,p]=(0,gD.useState)(null);zg(h,{debugName:"HorizontalScrollbar/onRangeStartDrag",onDragStart:c.onRangeStartDragStart,lockCSSCursorTo:"w-resize"});const[f,m]=(0,gD.useState)(null);return zg(f,{debugName:"HorizontalScrollbar/onRangeEndDrag",onDragStart:c.onRangeEndDragStart,lockCSSCursorTo:"e-resize"}),gD.default.createElement(vD,y({style:{bottom:a+8+"px"}},CE("hide")),gD.default.createElement(yD,null,gD.default.createElement(bD,{ref:d,style:{width:i-r+"px",transform:`translate3d(${r}px, 0, 0)`}}),gD.default.createElement(_D,{ref:p,style:{transform:`translate3d(${r}px, 0, 0)`}},gD.default.createElement(SD,{active:"both"===s||"start"===s},t(o.start))),gD.default.createElement(wD,{ref:m,style:{transform:`translate3d(${i}px, 0, 0)`}},gD.default.createElement(SD,{active:"both"===s||"end"===s},t(o.end)))))}}}),ZD=w({"studio/src/uiComponents/RoomToClick.tsx"(){kD=k(nf()),mg(),MD=Am.div`
  position: absolute;
  inset: ${e=>-1*e.room}px;
`,PD=e=>kD.default.createElement(MD,{room:e.room})}}),JD=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/PlayheadPositionPopover.tsx"(){mg(),pf(),aM(),C_(),TD=k(nf()),CD=k(nf()),AD=k(n(771)),bl(),ID=e=>isFinite(e)&&e>=0,RD=Am.div`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`,OD=Am.div`
  ${M_};
  white-space: nowrap;
`,DD=({deltaX:e})=>.25*e,LD=({layoutP:e})=>{const t=(0,AD.val)(e.sheet),n=t.getSequence(),r=(0,TD.useMemo)((()=>{let e;const t=n.position;return{temporarilySetValue(t){e&&(e=void 0),e=ml(t,0,n.length),n.position=e},discardTemporaryValue(){e&&(e=void 0,n.position=t)},permanentlySetValue(t){e&&(e=void 0),n.position=ml(t,0,n.length)}}}),[e,n]),i=(0,TD.useRef)(null);return(0,TD.useLayoutEffect)((()=>{i.current.focus()}),[]),uf((()=>{const e=t.getSequence();return CD.default.createElement(RD,null,CD.default.createElement(OD,null,"Sequence position"),CD.default.createElement(nM,b(y({value:Number(e.position.toFixed(3))},r),{isValid:ID,inputRef:i,nudge:DD})))}),[t,r,i])}}}),QD=w({"studio/src/utils/isMac.ts"(){jD="undefined"!=typeof navigator&&navigator.platform.toUpperCase().indexOf("MAC")>=0}}),eL=w({"studio/src/utils/keyboardUtils.ts"(){QD(),zD=e=>jD?!0===e.metaKey:!0===e.ctrlKey}});var tL,nL,rL,iL,oL,aL,sL,lL,cL,uL,dL,hL=w({"studio/src/UIRoot/useKeyboardShortcuts.ts"(){ND=k(nf()),I(),eL(),xv(),BD=k(n(771)),Xe(),FD=$e((e=>new BD.Atom(void 0))),UD=$e((e=>(0,BD.prism)((()=>{const t=FD(e).prism.getValue();if(t)return t.getValue().isFollowingARange;{const{projectId:t,sheetId:n}=e.address,r=(0,BD.val)(T().atomP.ahistoric.projects.stateByProjectId[t].stateBySheetId[n].sequence.focusRange);if(!r||!r.enabled)return!1;const i=(0,BD.val)(e.pointer.position);return i>=r.range.start&&i<=r.range.end}}))))}}),pL=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/SnapCursor.svg"(){tL="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iMzQiIHZpZXdCb3g9IjAgMCAzNCAzNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMSA3VjFINyIgc3Ryb2tlPSIjNzRGRkRFIiBzdHJva2Utd2lkdGg9IjAuMjUiIC8+CiAgPHBhdGggZD0iTTcgMzNIMUwxIDI3IiBzdHJva2U9IiM3NEZGREUiIHN0cm9rZS13aWR0aD0iMC4yNSIgLz4KICA8cGF0aCBkPSJNMzMgMjdWMzNIMjciIHN0cm9rZT0iIzc0RkZERSIgc3Ryb2tlLXdpZHRoPSIwLjI1IiAvPgogIDxwYXRoIGQ9Ik0yNyAxTDMzIDFWNyIgc3Ryb2tlPSIjNzRGRkRFIiBzdHJva2Utd2lkdGg9IjAuMjUiIC8+Cjwvc3ZnPg=="}}),fL=w({"studio/src/utils/absoluteDims.tsx"(){nL=(e,t=e)=>`\n  left: ${-.5*e}px;\n  top: ${-.5*t}px;\n  width: ${e}px;\n  height: ${t}px;\n`}}),mL=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/DopeSnapHitZoneUI.tsx"(){$x(),gg(),mg(),pL(),fL(),Qg(),jE(),rL={BEING_DRAGGED_CLASS:"beingDragged",CSS:Qm`
    position: absolute;
    ${nL(12)};
    ${Ix};

    &.${"beingDragged"} {
      pointer-events: none !important;
    }
  `,CSS_WHEN_SOMETHING_DRAGGING:Qm`
    pointer-events: auto;
    cursor: var(${sg});

    //  thing
    // This box extends the hitzone so the user does not
    // accidentally leave the hitzone
    &:hover:after {
      position: absolute;
      top: calc(50% - ${17}px);
      left: calc(50% - ${17}px);
      width: ${34}px;
      height: ${34}px;
      display: block;
      content: ' ';
      background: url(${tL}) no-repeat 100% 100%;
      // This icon might also fit: GiConvergenceTarget
    }
  `,reactProps:e=>b(y(y({},CE(e.position)),Yg.includePositionSnapAttrs(e.position)),{className:e.isDragging?rL.BEING_DRAGGED_CLASS:""})}}});function gL(){uL.set({mode:"snapToAll"})}function vL(){uL.set({mode:"snapToNone"})}function yL(e){uL.set({mode:"snapToSome",positions:e})}function bL(e,t){return Object.fromEntries(Object.entries(e).map((([e,n])=>[e,Object.fromEntries(Object.entries(n.trackData).map((([n,r])=>[n,r.keyframes.filter((i=>t(i,{trackId:n,trackData:r,objectKey:e}))).map((e=>e.position))])))])))}var xL,_L,wL,SL,EL,kL,ML,PL,TL,CL,AL,IL,RL,OL,DL,LL,jL,zL,NL,BL,FL,UL,VL,HL,WL,GL,$L,qL,KL,XL,YL,ZL,JL,QL,ej,tj,nj,rj,ij,oj,aj,sj,lj,cj,uj,dj,hj,pj,fj,mj,gj,vj,yj,bj,xj,_j,wj,Sj,Ej,kj,Mj,Pj,Tj,Cj,Aj,Ij,Rj,Oj,Dj,Lj,jj,zj,Nj,Bj,Fj,Uj,Vj,Hj,Wj,Gj,$j,qj,Kj,Xj,Yj=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/KeyframeSnapTarget.tsx"(){iL=k(n(771)),oL=k(n(771)),aL=k(nf()),mg(),mL(),sL=Am.div`
  z-index: 1;
  cursor: ew-resize;

  ${rL.CSS}

  #pointer-root.draggingPositionInSequenceEditor & {
    ${rL.CSS_WHEN_SOMETHING_DRAGGING}
  }
`,lL=Am.div`
  position: absolute;
`,cL=e=>aL.default.createElement(lL,{style:{top:e.leaf.nodeHeight/2+"px",left:`calc(${(0,oL.val)(e.layoutP.scaledSpace.leftPadding)}px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ${e.position}px))`}},aL.default.createElement(sL,y({},rL.reactProps({isDragging:!1,position:e.position})))),uL=new iL.Atom({mode:"snapToNone"}),dL=uL.prism}}),Zj=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/Playhead.tsx"(){ZD(),Fg(),jg(),pf(),xL=k(n(771)),bl(),_L=k(nf()),mg(),lz(),jE(),$x(),DT(),jT(),JD(),hL(),gg(),VD(),I(),jp(),Qg(),Yj(),wL=Am.div`
  --thumbColor: #00e0ff;
  position: absolute;
  top: 0;
  left: 0;
  width: 5px;
  height: 100%;
  z-index: ${()=>Ij.playhead};
  pointer-events: none;

  display: ${e=>e.isVisible?"block":"none"};
`,SL=Am.div`
  position: absolute;
  top: 8px;
  width: 0;
  height: calc(100% - 8px);
  border-left: 1px solid #27e0fd;
  z-index: 10;
  pointer-events: none;

  #pointer-root.draggingPositionInSequenceEditor &:not(.seeking) {
    /* pointer-events: auto; */
    /* cursor: var(${sg}); */

    &:after {
      position: absolute;
      inset: -8px;
      display: block;
      content: ' ';
    }
  }
`,EL=Am.div`
  background-color: var(--thumbColor);
  position: absolute;
  width: 5px;
  height: 13px;
  top: -4px;
  left: -2px;
  z-index: 11;
  cursor: ew-resize;
  --sunblock-color: #1f2b2b;

  ${Ix};

  ${wL}.seeking > & {
    pointer-events: none !important;
  }

  #pointer-root.draggingPositionInSequenceEditor
    ${wL}:not(.seeking)
    > & {
    pointer-events: auto;
    cursor: var(${sg});
  }

  ${wL}.playheadattachedtofocusrange > & {
    top: -8px;
    --sunblock-color: #005662;
    &:before,
    &:after {
      border-bottom-width: 8px;
    }
  }

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-left: 2px solid transparent;
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    right: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-right: 2px solid transparent;
  }
`,kL=Am.div`
  position: absolute;
  left: 1px;
  right: 1px;
  top: 13px;
  border-top: 3px solid var(--thumbColor);
  border-right: 1px solid transparent;
  border-left: 1px solid transparent;
  pointer-events: none;

  /* ${wL}.playheadattachedtofocusrange & {
    top: 10px;
    &:before,
    &:after {
      height: 15px;
    }
  } */

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    left: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 0 100% 0 0;
    border-top: 1px solid var(--thumbColor);
    border-right: 1px solid var(--thumbColor);
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    right: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 100% 0 0 0;
    border-top: 1px solid var(--thumbColor);
    border-left: 1px solid var(--thumbColor);
  }
`,ML=Am.div`
  display: none;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 2px;
  transform: translateX(-50%);
  background: #1a1a1a;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;
  ${EL}:hover &, ${wL}.seeking & {
    display: block;
  }
`,PL=({layoutP:e})=>{const[t,n]=Ig(null),{node:r,toggle:i,close:o}=pT({debugName:"Playhead"},(()=>_L.default.createElement(MT,null,_L.default.createElement(LD,{layoutP:e,onRequestClose:o})))),a=(0,_L.useMemo)((()=>({debugName:"RightOverlay/Playhead",onDragStart(){const r=(0,xL.val)(e.sheet).getSequence(),o=r.position,a=(0,xL.val)(e.scaledSpace.toUnitSpace),s=(0,xL.val)(e.seeker.setIsSeeking);return s(!0),gL(),{onDrag(e,t,i){var s;const l=a(e);r.position=null!=(s=Yg.checkIfMouseEventSnapToPos(i,{ignore:n}))?s:ml(o+l,0,r.length)},onDragEnd(e){s(!1),vL()},onClick(e){i(e,t.current)}}}})),[e,n]),[s]=zg(n,a);dg(s,"draggingPositionInSequenceEditor","ew-resize"),TE(Wp(e.seeker.isSeeking)||s,-1);const[l]=(c={layoutP:e},MO(n,{menuItems:()=>[{label:"Place marker",callback:()=>{T().transaction((({stateEditors:e})=>{const t=(0,xL.val)(c.layoutP.sheet),n=t.getSequence();e.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:t.address,markers:[{id:Ip(10),position:n.position}],snappingFunction:n.closestGridPosition})}))}}]}));var c;return uf((()=>{const n=(0,xL.val)(e.seeker.isSeeking),i=(0,xL.val)(e.sheet).getSequence(),o=(0,xL.val)(UD(i)),a=i.positionPrism.getValue(),s=(0,xL.val)(e.clippedSpace.fromUnitSpace)(a),c=s>=0&&s<=(0,xL.val)(e.clippedSpace.width);return _L.default.createElement(_L.default.Fragment,null,l,r,_L.default.createElement(wL,y({isVisible:c,style:{transform:`translate3d(${s}px, 0, 0)`},className:`${n&&"seeking"} ${o&&"playheadattachedtofocusrange"}`},CE("hide")),_L.default.createElement(EL,y({ref:t},Yg.includePositionSnapAttrs(a)),_L.default.createElement(PD,{room:8}),_L.default.createElement(kL,null),_L.default.createElement(ML,null,i.positionFormatter.formatForPlayhead(i.closestGridPosition(a)))),_L.default.createElement(SL,b(y({},Yg.includePositionSnapAttrs(a)),{className:n?"seeking":""}))))}),[e,t,r])}}}),Jj=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/FocusRangeCurtains.tsx"(){TL=k(n(771)),pf(),I(),$D(),CL=k(nf()),mg(),AL=1e3,IL=Am.div`
  position: absolute;
  top: ${HO}px;
  left: 0;
  opacity: 0.15;
  width: ${AL}px;
  transform-origin: top left;
  pointer-events: none;
  background-color: ${e=>e.enabled?"#000000":"transparent"};
`,RL=({layoutP:e})=>{const t=(0,CL.useMemo)((()=>(0,TL.prism)((()=>{const{projectId:t,sheetId:n}=(0,TL.val)(e.sheet).address;return(0,TL.val)(T().atomP.ahistoric.projects.stateByProjectId[t].stateBySheetId[n].sequence.focusRange)}))),[e]);return uf((()=>{const n=t.getValue();if(!n||!n.enabled)return null;const{range:r}=n,i=(0,TL.val)(e.rightDims.height)-HO,o=(0,TL.val)(e.clippedSpace.fromUnitSpace),a=(0,TL.val)(e.clippedSpace.width),s=[];{let e,t,r=0,i=o(n.range.start);r>i?(t=0,e=0):(i>a&&(i=a),t=r,e=(i-r)/AL),s.push({translateX:t,scaleX:e})}{let e,t,r=o(n.range.end);r>a?(t=0,e=0):(r<0&&(r=0),t=r,e=(a-r)/AL),s.push({translateX:t,scaleX:e})}return CL.default.createElement(CL.default.Fragment,null,s.map((({translateX:e,scaleX:t},n)=>CL.default.createElement(IL,{key:`curtain-${n}`,enabled:!0,style:{height:`${i}px`,transform:`translateX(${e}px) scaleX(${t})`}}))))}),[e,t])},OL=RL}}),Qj=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/Markers/MarkerEditorPopover.tsx"(){DL=k(nf()),mg(),pf(),I(),C_(),DM(),LL=Am.div`
  display: flex;
  gap: 8px;
  /* padding: 4px 8px; */
  height: 28px;
  align-items: center;
`,Am.div`
  ${M_};
  white-space: nowrap;
`,jL=({layoutP:e,marker:t})=>{var n;const r=Wp(e.sheet),i=(0,DL.useMemo)((()=>{let e;return{temporarilySetValue(n){e&&(e.discard(),e=void 0),e=T().tempTransaction((({stateEditors:e})=>{e.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:r.address,markerId:t.id,label:n})}))},discardTemporaryValue(){e&&(e.discard(),e=void 0)},permanentlySetValue(n){e&&(e.discard(),e=void 0),T().transaction((({stateEditors:e})=>{e.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:r.address,markerId:t.id,label:n})}))}}}),[e,r]),o=(0,DL.useRef)(null);return(0,DL.useLayoutEffect)((()=>{o.current.focus()}),[]),DL.default.createElement(LL,null,DL.default.createElement(AM,b(y({value:null!=(n=t.label)?n:""},i),{isValid:()=>!0,inputRef:o})))}}}),ez=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/Markers/MarkerDot.tsx"(){zL=k(n(771)),pf(),I(),gg(),VD(),jg(),NL=k(nf()),mg(),jE(),Fg(),lz(),Qg(),fL(),mL(),Yj(),DT(),jT(),Qj(),BL=Am.div`
  position: absolute;
  // below the sequence ruler "top bar"
  top: 18px;
  z-index: ${()=>Ij.marker};
`,FL=Am.div`
  position: absolute;
  ${nL(12,12)}
  pointer-events: none;
`,UL=NL.default.memo((()=>NL.default.createElement(FL,{children:NL.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},NL.default.createElement("path",{d:"M12 5H0V7H2.71973L5.96237 10.2426L9.20501 7H12V5Z",fill:"#40AAA4"}))}))),VL=Am.div`
  z-index: 1;
  cursor: ew-resize;

  ${rL.CSS}

  // :not dragging marker to ensure that markers don't snap to other markers
  // this works because only one marker track (so this technique is not used by keyframes...)
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) & {
    ${rL.CSS_WHEN_SOMETHING_DRAGGING}
  }

  // "All instances of this component <Mark/> inside #pointer-root when it has the .draggingPositionInSequenceEditor class"
  // ref: https://styled-components.com/docs/basics#pseudoelements-pseudoselectors-and-nesting
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) &,
  #pointer-root.draggingPositionInSequenceEditor
    &.${rL.BEING_DRAGGED_CLASS} {
    pointer-events: auto;
    cursor: var(${sg});
  }

  &:hover
    + ${FL},
    // notice , "or" in CSS
    &.${rL.BEING_DRAGGED_CLASS}
    + ${FL} {
    ${nL(24,24)}
  }
`,HL=({layoutP:e,markerId:t})=>{const n=Wp(e.sheet.address),r=Wp(T().atomP.historic.projects.stateByProjectId[n.projectId].stateBySheetId[n.sheetId].sequenceEditor.markerSet.byId[t]);if(!r)return null;const i=Wp(e.clippedSpace.width),o=Wp(e.clippedSpace.fromUnitSpace)(r.position),a=o<=0||o>i,s=a?-1e4:o,l=a?0:1;return NL.default.createElement(BL,{style:{transform:`translateX(${s}px) scale(${l})`}},NL.default.createElement(WL,{marker:r,layoutP:e}))},WL=({layoutP:e,marker:t})=>{const n=Wp(e.sheet.address),[r,i]=Ig(null),[o]=(a=i,s={sheetAddress:n,markerId:t.id},MO(a,{menuItems:()=>[{label:"Remove marker",callback:()=>{T().transaction((({stateEditors:e})=>{e.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removeMarker({sheetAddress:s.sheetAddress,markerId:s.markerId})}))}}]}));var a,s;const[l]=function(e,t){const n=(0,NL.useRef)(t);n.current=t;const r=(0,NL.useMemo)((()=>({debugName:`MarkerDot/useDragMarker (${t.marker.id})`,onDragStart(r){const i=n.current.marker,o=(0,zL.val)(t.layoutP.scaledSpace.toUnitSpace);let a;return gL(),{onDrag(n,r,s){var l;const c=i,u=Math.max(null!=(l=Yg.checkIfMouseEventSnapToPos(s,{ignore:e}))?l:c.position+o(n),0);null==a||a.discard(),a=T().tempTransaction((({stateEditors:e})=>{e.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:(0,zL.val)(t.layoutP.sheet.address),markers:[b(y({},c),{position:u})],snappingFunction:(0,zL.val)(t.layoutP.sheet).getSequence().closestGridPosition})}))},onDragEnd(e){e?null==a||a.commit():null==a||a.discard(),vL()}}}})),[]),[i]=zg(e,r);return TE(i,t.marker.position),dg(i,"draggingPositionInSequenceEditor draggingMarker","ew-resize"),[i]}(i,{layoutP:e,marker:t}),{node:c,toggle:u,close:d}=pT({debugName:"MarkerPopover"},(()=>NL.default.createElement(MT,null,NL.default.createElement(jL,{marker:t,layoutP:e,onRequestClose:d}))));return NL.default.createElement(NL.default.Fragment,null,o,c,NL.default.createElement(VL,y({title:t.label?`Marker: ${t.label}`:"Marker",ref:r,onClick:e=>{u(e,r.current)}},rL.reactProps({isDragging:l,position:t.position}))),NL.default.createElement(UL,null))}}}),tz=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/Markers/Markers.tsx"(){pf(),I(),GL=k(nf()),ez(),$L=({layoutP:e})=>{const t=Wp(e.sheet.address),n=T().atomP.historic.projects.stateByProjectId[t.projectId].stateBySheetId[t.sheetId].sequenceEditor.markerSet,r=Wp(n.allIds);return GL.default.createElement(GL.default.Fragment,null,r&&Object.keys(r).map((t=>GL.default.createElement(HL,{key:t,layoutP:e,markerId:t}))))}}}),nz=w({"studio/src/panels/SequenceEditorPanel/RightOverlay/RightOverlay.tsx"(){lz(),pf(),qL=k(n(771)),KL=k(nf()),mg(),KD(),XD(),YD(),Zj(),$D(),Jj(),tz(),XL=Am.div`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: ${()=>Ij.rightOverlay};
  overflow: visible;
  pointer-events: none;
`,YL=({layoutP:e})=>uf((()=>{const t=(0,qL.val)(e.rightDims.width);return KL.default.createElement(XL,{style:{width:t+"px"}},KL.default.createElement(PL,{layoutP:e}),KL.default.createElement(ED,{layoutP:e}),KL.default.createElement(fD,{layoutP:e}),KL.default.createElement($O,{layoutP:e}),KL.default.createElement($L,{layoutP:e}),KL.default.createElement(sD,{layoutP:e}),KL.default.createElement(OL,{layoutP:e}))}),[e])}}),rz=w({"studio/src/panels/BasePanel/PanelDragZone.tsx"(){jg(),I(),Fg(),ZL=k(nf()),mg(),lk(),gg(),Tp(),oE(),JL=Am.div`
  cursor: move;
`,QL=e=>{const t=JE(),n=(0,ZL.useRef)(t);n.current=t;const[r,i]=Ig(null),o=(0,ZL.useMemo)((()=>({debugName:"PanelDragZone",lockCursorTo:"move",onDragStart(){const e=n.current;let r;const i=t.addBoundsHighlightLock();return{onDrag(t,n){const i=b(y({},e.dims),{top:ml(e.dims.top+n,0,window.innerHeight-qS),left:ml(e.dims.left+t,-e.dims.width+qS,window.innerWidth-qS)}),o=YE(i,{width:window.innerWidth,height:window.innerHeight});null==r||r.discard(),r=T().tempTransaction((({stateEditors:t})=>{t.studio.historic.panelPositions.setPanelPosition({position:o,panelId:e.panelId})}))},onDragEnd(e){i(),e?null==r||r.commit():null==r||r.discard()}}}})),[]),[a]=zg(i,o);dg(a,"dragging","move");const[s,l]=(0,ZL.useMemo)((()=>{let e;return[function(){if(e){const t=e;e=void 0,t()}e=t.addBoundsHighlightLock()},function(){if(e){const t=e;e=void 0,t()}}]}),[]);return ZL.default.createElement(JL,b(y({},e),{ref:r,onMouseEnter:s,onMouseLeave:l}))}}}),iz=w({"studio/src/panels/BasePanel/PanelResizeHandle.tsx"(){jg(),I(),Fg(),Ty(),ej=k(nf()),mg(),lk(),$x(),Tp(),oE(),tj=Am.div`
  position: absolute;
  ${Ix};
  &:after {
    position: absolute;
    inset: -5px;
    display: block;
    content: ' ';
  }

  opacity: 0;
  background-color: #478698;

  &.isHighlighted {
    opacity: 0.7;
  }

  &.isDragging {
    opacity: 1;
    /* background-color: ${Qv(.2,"#478698")}; */
  }

  &:hover {
    opacity: 1;
  }
`,nj=Am(tj)`
  /**
  The horizintal/vertical resize handles have z-index:-1 and are offset 1px outside of the panel
  to make sure they don't occlude any element that pops out of the panel (like the Playhead in SequenceEditorPanel).

  This means that panels will always need an extra 1px margin for their resize handles to be visible, but that's not a problem
  that we have to deal with right now (if it is at all a problem).
  
   */
  z-index: -1;
`,rj=Am(nj)`
  left: 0px;
  right: 0px;
  height: 1px;
`,ij=Am(rj)`
  top: -1px;
`,oj=Am(rj)`
  bottom: -1px;
`,aj=Am(nj)`
  z-index: -1;
  top: -1px;
  bottom: -1px;
  width: 1px;
`,sj=Am(aj)`
  left: -1px;
`,lj=Am(aj)`
  right: -1px;
`,cj=Am(tj)`
  // The angles have z-index: 10 to make sure they _do_ occlude other elements in the panel.
  z-index: 10;
  width: 8px;
  height: 8px;
`,uj=Am(cj)`
  top: 0;
  left: 0;
`,dj=Am(cj)`
  top: 0;
  right: 0;
`,hj=Am(cj)`
  bottom: 0;
  left: 0;
`,pj=Am(cj)`
  bottom: 0;
  right: 0;
`,fj={Top:ij,TopLeft:uj,TopRight:dj,Bottom:oj,BottomLeft:hj,BottomRight:pj,Left:sj,Right:lj},mj={Top:"ns-resize",Bottom:"ns-resize",Left:"ew-resize",Right:"ew-resize",TopLeft:"nw-resize",TopRight:"ne-resize",BottomLeft:"sw-resize",BottomRight:"se-resize"},gj=({which:e})=>{const t=JE(),n=(0,ej.useRef)(t);n.current=t;const[r,i]=Ig(null),o=(0,ej.useMemo)((()=>({debugName:"PanelResizeHandle",lockCursorTo:mj[e],onDragStart(){let r;const i=n.current,o=t.addBoundsHighlightLock();return{onDrag(t,n){const o=y({},i.dims);if(e.startsWith("Bottom"))o.height=Math.max(o.height+n,i.minDims.height);else if(e.startsWith("Top")){const e=o.top+o.height,t=ml(o.top+n,0,Math.min(e-i.minDims.height,window.innerHeight-qS)),r=e-t;o.height=r,o.top=t}if(e.endsWith("Left")){const e=o.left+o.width,n=Math.min(o.left+t,Math.min(e-i.minDims.width,window.innerWidth-qS)),r=e-n;o.width=r,o.left=n}else e.endsWith("Right")&&(o.width=Math.max(o.width+t,Math.max(i.minDims.width,qS-i.dims.left)));const a=YE(o,{width:window.innerWidth,height:window.innerHeight});null==r||r.discard(),r=T().tempTransaction((({stateEditors:e})=>{e.studio.historic.panelPositions.setPanelPosition({position:a,panelId:i.panelId})}))},onDragEnd(e){o(),e?null==r||r.commit():null==r||r.discard()}}}})),[e]),[a]=zg(i,o),s=fj[e],l=e.length<=6;return ej.default.createElement(s,{ref:r,className:[a?"isDragging":"",t.boundsHighlighted&&l?"isHighlighted":""].join(" "),style:{cursor:mj[e]}})}}}),oz=w({"studio/src/panels/BasePanel/PanelResizers.tsx"(){vj=k(nf()),iz(),yj=e=>vj.default.createElement(vj.default.Fragment,null,vj.default.createElement(gj,{which:"Bottom"}),vj.default.createElement(gj,{which:"Top"}),vj.default.createElement(gj,{which:"Left"}),vj.default.createElement(gj,{which:"Right"}),vj.default.createElement(gj,{which:"TopLeft"}),vj.default.createElement(gj,{which:"TopRight"}),vj.default.createElement(gj,{which:"BottomLeft"}),vj.default.createElement(gj,{which:"BottomRight"}))}}),az=w({"studio/src/panels/BasePanel/PanelWrapper.tsx"(){$x(),bj=k(nf()),mg(),lk(),oz(),xj=Am.div`
  position: absolute;
  user-select: none;
  box-sizing: border-box;
  ${Ix};
  /* box-shadow: 1px 2px 10px -5px black; */

  z-index: 1000;
`,_j=bj.default.forwardRef(((e,t)=>{const n=JE(),r=e,{style:i,children:o}=r,a=_(r,["style","children"]);return bj.default.createElement(xj,b(y({ref:t},a),{style:y({width:n.dims.width+"px",height:n.dims.height+"px",top:n.dims.top+"px",left:n.dims.left+"px"},null!=i?i:{})}),bj.default.createElement(yj,null),o)})),wj=_j}}),sz=w({"studio/src/panels/SequenceEditorPanel/GraphEditorToggle.tsx"(){Sj=k(n(771)),pf(),I(),Ej=k(nf()),mg(),T_(),jE(),kj=Am.button`
  outline: none;
  background-color: #1c1d21;
  border: 1px solid #191919;
  border-radius: 2px;
  display: flex;
  bottom: 14px;
  right: 8px;
  z-index: 1;
  position: absolute;

  padding: 4px 8px;
  display: flex;
  color: #656d77;
  line-height: 20px;
  font-size: 10px;

  &:hover {
    color: white;
  }

  & > svg {
    transition: transform 0.3s;
    transform: rotateZ(0deg);
  }

  &:hover > svg {
    transform: rotateZ(-20deg);
  }

  &.open > svg {
    transform: rotateZ(-180deg);
  }

  &.open:hover > svg {
    transform: rotateZ(-160deg);
  }
`,Mj=({layoutP:e})=>{const t=Wp(e.graphEditorDims.isOpen),n=(0,Ej.useCallback)((()=>{const t=(0,Sj.val)(e.graphEditorDims.isOpen);T().transaction((({stateEditors:e})=>{e.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!t})}))}),[e]);return Ej.default.createElement(kj,y({onClick:n,title:"Toggle graph editor",className:t?"open":""},CE("hide")),Ej.default.createElement(k_,null))}}}),lz=w({"studio/src/panels/SequenceEditorPanel/SequenceEditorPanel.tsx"(){xv(),pf(),_v(),Pj=k(n(771)),Tj=k(nf()),mg(),rE(),UU(),fE(),nz(),lk(),rz(),az(),jE(),H(),Tp(),sz(),oE(),Uw(),Cj=Am(wj)`
  z-index: ${FS.sequenceEditorPanel};
  box-shadow: 2px 2px 0 rgb(0 0 0 / 11%);
`,Aj=Am.div`
  background-color: rgba(40, 43, 47, 0.99);
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  pointer-events: none;
`,Ij=(()=>{const e={rightBackground:0,scrollableArea:0,rightOverlay:0,lengthIndicatorCover:0,lengthIndicatorStrip:0,playhead:0,currentFrameStamp:0,marker:0,horizontalScrollbar:0};let t=-1;for(const n of Object.keys(e))e[n]=t,t++;return e})(),Rj=Am(QL)`
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1;
`,Oj={edges:{left:{from:"screenLeft",distance:.1},right:{from:"screenRight",distance:.2},top:{from:"screenBottom",distance:.4},bottom:{from:"screenBottom",distance:.01}}},Dj={width:800,height:200},Lj=e=>Tj.default.createElement(QE,{panelId:"sequenceEditor",defaultPosition:Oj,minDims:Dj},Tj.default.createElement(jj,null)),jj=()=>{const{dims:e}=JE(),[t,n]=(0,Tj.useState)(null);return Mw(t),uf((()=>{const r=Pj.prism.memo("panelSize",(()=>{const t=e.width,n=e.height;return{width:t,height:n,widthWithoutBorder:t-2,heightWithoutBorder:n-4,screenX:e.left,screenY:e.top}}),[e]),i=Ep(fv().filter((e=>D(e)||j(e))).map((e=>j(e)?e.sheet:e)));if(1!==Ep(i.map((e=>e.template))).length)return Tj.default.createElement(Tj.default.Fragment,null);const o=i[0];if(!o)return Tj.default.createElement(Tj.default.Fragment,null);const a=vv("panelSizeP",r).pointer,s=Pj.prism.memo("key",(()=>JSON.stringify(o.address)),[o]),l=Pj.prism.memo("layout",(()=>function(e,t){const n=T(),r=n.atomP.ahistoric.projects.stateByProjectId[e.address.projectId].stateBySheetId[e.address.sheetId],i=n.atomP.historic.projects.stateByProjectId[e.address.projectId].stateBySheetId[e.address.sheetId];return(0,ZS.prism)((()=>{var o;const a=(s=()=>YS(e,n),l=[],BS.prism.memo("tree",(()=>(0,BS.prism)(s)),l).getValue());var s,l;const c=(0,ZS.val)(t),u=(0,ZS.val)(n.atomP.historic.panels.sequenceEditor.graphEditor),d=(0,ZS.val)(i.sequenceEditor.selectedPropsByObject),h=!!d&&Object.keys(d).length>0,{leftDims:p,rightDims:f,graphEditorDims:m,dopeSheetDims:g,horizontalScrollbarDims:v}=ZS.prism.memo("leftDims",(()=>{var e;const t={width:Math.floor(c.width*JS),height:c.height,screenX:c.screenX,screenY:c.screenY},n={width:c.width-t.width,height:c.height,screenX:c.screenX+t.width,screenY:c.screenY},r=h&&!0===(null==u?void 0:u.isOpen),i=Math.floor((r?ml(null!=(e=null==u?void 0:u.height)?e:.5,.1,.7):0)*c.heightWithoutBorder),o=0+i,a=c.height-o,s={width:c.width,height:a,screenX:c.screenX,screenY:c.screenY};return{leftDims:t,rightDims:n,graphEditorDims:{isAvailable:h,isOpen:r,width:n.width,height:i,screenX:c.screenX,screenY:c.screenY+a,padding:{top:20,bottom:20}},dopeSheetDims:s,horizontalScrollbarDims:{bottom:0}}}),[c,u,h]),x=ZS.prism.memo("graphEditorVerticalSpace",(()=>{const e=m.height-m.padding.top-m.padding.bottom;return{space:e,fromExtremumSpace:t=>t*e,toExtremumSpace:t=>t/e}}),[m]),[_,w]=ZS.prism.state("isSeeking",!1),S={isSeeking:_,setIsSeeking:w},E=null!=(o=(0,ZS.val)(r.sequence.clippedSpaceRange))?o:QS,k=ZS.prism.memo("scaledSpace",(()=>{const e=E.end-E.start,t=f.width,n=e/t,r=t/e;return{fromUnitSpace:e=>e*r,toUnitSpace:e=>e*n,leftPadding:10}}),[E,f.width]),M=ZS.prism.memo("setClippedSpaceRange",(()=>function(t){n.transaction((({stateEditors:n})=>{const r=y({},t);if(r.end<=r.start&&(r.end=r.start+1),r.start<0){const e=r.end-r.start;r.start=0,r.end=e}n.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.clippedSpaceRange.set(b(y({},e.address),{range:r}))}))}),[]),P=ZS.prism.memo("clippedSpace",(()=>({range:E,width:f.width,fromUnitSpace:e=>k.fromUnitSpace(e-E.start)+k.leftPadding,toUnitSpace:e=>k.toUnitSpace(e-k.leftPadding)+E.start,setRange:M})),[E,f.width,k,M]),T=ZS.prism.memo("selection.current",(()=>new ZS.Atom({})),[]);return vv("finalAtom",{sheet:e,tree:a,panelDims:c,leftDims:p,rightDims:f,dopeSheetDims:g,horizontalScrollbarDims:v,seeker:S,unitSpace:{},scaledSpace:k,clippedSpace:P,graphEditorDims:m,graphEditorVerticalSpace:x,selectionAtom:T}).pointer}))}(o,a)),[o,a]).getValue();if(0===(0,Pj.val)(l.tree.children).length)return Tj.default.createElement(Tj.default.Fragment,null);const c=Pj.prism.memo("containerRef",Bj,[]),u=(0,Pj.val)(l.graphEditorDims.isAvailable),d=(0,Pj.val)(l.graphEditorDims.isOpen);return Tj.default.createElement(Cj,{ref:e=>{c(e),e!==t&&n(e)}},Tj.default.createElement(Aj,{style:{width:`${(0,Pj.val)(l.leftDims.width)}px`}}),Tj.default.createElement(RE,{layoutP:l},Tj.default.createElement(zj,{layoutP:l}),Tj.default.createElement(NS,{key:s+"-dopeSheet",layoutP:l}),d&&Tj.default.createElement(RU,{key:s+"-graphEditor",layoutP:l}),u&&Tj.default.createElement(Mj,{layoutP:l}),Tj.default.createElement(YL,{layoutP:l})))}),[e,t])},zj=({layoutP:e})=>uf((()=>{const t=(0,Pj.val)(e.sheet);return Tj.default.createElement(Rj,{style:{width:(0,Pj.val)(e.leftDims.width)}},Tj.default.createElement($S,null,Tj.default.createElement(VS,null,t.address.sheetId," "),Tj.default.createElement(HS,null,":",""),Tj.default.createElement(VS,null,t.address.sheetInstanceId," "),Tj.default.createElement(HS,null,"",">",""),Tj.default.createElement(VS,null,"Sequence")))}),[e]),Nj=Lj,Bj=()=>{let e=null;const t={passive:!1,capture:!1},n=e=>{Math.abs(e.deltaY)<Math.abs(e.deltaX)&&(e.preventDefault(),e.stopPropagation())};return r=>{e!==r&&e&&e.removeEventListener("wheel",n,t),e=r,r&&r.addEventListener("wheel",n,t)}}}}),cz=w({"studio/src/panels/SequenceEditorPanel/VerticalScrollContainer.tsx"(){Cg(),Fj=k(nf()),mg(),lz(),Uj=Am.div`
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  overflow-x: hidden;
  overflow-y: scroll;
  z-index: ${()=>Ij.scrollableArea};

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
`,Vj=(0,Fj.createContext)(kg),Hj=()=>(0,Fj.useContext)(Vj),Wj=e=>{const t=(0,Fj.useRef)(null),n=(0,Fj.useCallback)((e=>{t.current.scrollBy(0,e.deltaY)}),[]);return Fj.default.createElement(Vj.Provider,{value:n},Fj.default.createElement(Uj,{ref:t},e.children))}}});function uz(e,[t,n]){return Math.max(Math.min(e,n),t)}var dz,hz,pz,fz,mz,gz,vz,yz,bz,xz,_z,wz,Sz,Ez,kz,Mz,Pz,Tz,Cz,Az=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/HorizontallyScrollableArea.tsx"(){Fg(),jg(),pf(),Gj=k(n(771)),Tp(),$j=k(nf()),mg(),cz(),$x(),gg(),Qg(),Yj(),qj=Am.div`
  position: absolute;

  right: 0;
  overflow-x: scroll;
  overflow-y: hidden;
  ${Ix};

  // hide the scrollbar on Gecko
  scrollbar-width: none;

  // hide the scrollbar on Webkit/Blink
  &::-webkit-scrollbar {
    display: none;
  }
`,Kj=$j.default.memo((({layoutP:e,children:t,height:n})=>{const{width:r,unitSpaceToScaledSpaceMultiplier:i}=uf((()=>({width:(0,Gj.val)(e.rightDims.width),unitSpaceToScaledSpaceMultiplier:(0,Gj.val)(e.scaledSpace.fromUnitSpace)(1)})),[e]),[o,a]=Ig(null);return function(e,t){const n=Hj();(0,$j.useLayoutEffect)((()=>{if(!t)return;const r=r=>{if(r.ctrlKey){r.preventDefault(),r.stopPropagation();const n=r.clientX-t.getBoundingClientRect().left,o=(0,Gj.val)(e.clippedSpace.toUnitSpace)(n),a=(0,Gj.val)(e.clippedSpace.range),s=1+.03*uz(r.deltaY,[-50,50]),l=Ch(a,(e=>(e-o)*s+o)),c=(0,Gj.val)(e.sheet).getSequence().length,u=c+.25*c;(0,Gj.val)(e.clippedSpace.setRange)((i=[0,u],Ch(l,(e=>uz(e,i)))))}else{var i;if(!r.shiftKey){n(r),r.preventDefault(),r.stopPropagation();const t=(0,Gj.val)(e.scaledSpace.toUnitSpace)(1*r.deltaX),i=(0,Gj.val)(e.clippedSpace.range),o=Ch(i,(e=>e+t));return void(0,Gj.val)(e.clippedSpace.setRange)(o)}{r.preventDefault(),r.stopPropagation();const t=(0,Gj.val)(e.sheet).getSequence().length,n=(0,Gj.val)(e.clippedSpace.range),i=(n.end-n.start)/t,o=.05*uz(r.deltaY||r.deltaX,[-50,50])*i,a=Ch(n,(e=>e+o));(0,Gj.val)(e.clippedSpace.setRange)(a)}}},i={capture:!0,passive:!1};return t.addEventListener("wheel",r,i),()=>{t.removeEventListener("wheel",r,i)}}),[t,e]),zg(t,(0,$j.useMemo)((()=>({onDragStart(t){const r=(0,Gj.val)(e.clippedSpace.range),i=(0,Gj.val)(e.clippedSpace.setRange),o=(0,Gj.val)(e.scaledSpace.toUnitSpace);return t.preventDefault(),t.stopPropagation(),{onDrag(e,t,a,s,l){n({deltaY:-l});const c=-o(e),u=Ch(r,(e=>e+c));i(u)}}},debugName:"HorizontallyScrollableArea Middle Button Drag",buttons:[1],lockCSSCursorTo:"grabbing"})),[e]))}(e,a),function(e,t){const n=(0,$j.useMemo)((()=>({debugName:"HorizontallyScrollableArea",onDragStart(n){if(n.target instanceof HTMLInputElement)return!1;if(n.shiftKey||n.altKey||n.ctrlKey||n.metaKey)return!1;if(n.composedPath().some((e=>e instanceof HTMLElement&&!0===e.draggable)))return!1;const r=n.clientX-t.getBoundingClientRect().left,i=ml((0,Gj.val)(e.clippedSpace.toUnitSpace)(r),0,1/0),o=(0,Gj.val)(e.seeker.setIsSeeking),a=(0,Gj.val)(e.sheet).getSequence();a.position=i;const s=i,l=(0,Gj.val)(e.scaledSpace.toUnitSpace);return o(!0),gL(),{onDrag(e,t,n){const r=l(e);let i=ml(s+r,0,a.length);const o=Yg.checkIfMouseEventSnapToPos(n,{});null!=o&&(i=o),a.position=i},onDragEnd(){o(!1),vL()}}}})),[e,t]),[r]=zg(t,n);dg(r,"draggingPositionInSequenceEditor","ew-resize")}(e,a),function(e,t){(0,$j.useLayoutEffect)((()=>{if(!t)return;const n=(0,Gj.prism)((()=>{const t=(0,Gj.val)(e.clippedSpace.range);return(0,Gj.val)(e.scaledSpace.fromUnitSpace)(t.start)})),r=()=>{const e=n.getValue();t.scrollLeft=e},i=n.onStale(r);r();const o=setTimeout(r,100);return()=>{clearTimeout(o),i()}}),[e,t])}(e,a),$j.default.createElement(qj,{ref:o,style:{width:r+"px",height:n+"px","--unitSpaceToScaledSpaceMultiplier":i}},t)})),Xj=Kj}}),Iz=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/Row.tsx"(){dz=k(nf()),mg(),hz=Am.li`
  margin: 0;
  padding: 0;
  list-style: none;
  box-sizing: border-box;
  position: relative;
`,pz=Am.div`
  box-sizing: border-box;
  width: 100%;
  position: relative;

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -40px;
    top: 0;
    bottom: 0;
    right: 0;
    box-sizing: border-box;
    border-bottom: 1px solid #252b3869;
    background: ${e=>e.isEven?"transparent":"#6b8fb505"};
  }
`,fz=Am.ul`
  margin: 0;
  padding: 0;
  list-style: none;
`,mz=({leaf:e,children:t,node:n,isCollapsed:r})=>{const i=Array.isArray(t)&&t.length>0;return e.shouldRender?dz.default.createElement(hz,null,dz.default.createElement(pz,{style:{height:e.nodeHeight+"px"},isEven:e.n%2==0},n),i&&dz.default.createElement(fz,null,t)):null}}}),Rz=S({"../node_modules/fuzzy/lib/fuzzy.js"(e,t){!function(){var n={};void 0!==e?t.exports=n:this.fuzzy=n,n.simpleFilter=function(e,t){return t.filter((function(t){return n.test(e,t)}))},n.test=function(e,t){return null!==n.match(e,t)},n.match=function(e,t,n){n=n||{};var r,i=0,o=[],a=t.length,s=0,l=0,c=n.pre||"",u=n.post||"",d=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var h=0;h<a;h++)r=t[h],d[h]===e[i]?(r=c+r+u,i+=1,l+=1+l):l=0,s+=l,o[o.length]=r;return i===e.length?(s=d===e?1/0:s,{rendered:o.join(""),score:s}):null},n.filter=function(e,t,r){return t&&0!==t.length?"string"!=typeof e?t:(r=r||{},t.reduce((function(t,i,o,a){var s=i;r.extract&&(s=r.extract(i));var l=n.match(e,s,r);return null!=l&&(t[t.length]={string:l.rendered,score:l.score,index:o,original:i}),t}),[]).sort((function(e,t){return t.score-e.score||e.index-t.index}))):[]}}()}}),Oz=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/CurveEditorPopover/useFreezableMemo.ts"(){gz=k(nf())}}),Dz=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/CurveEditorPopover/colors.ts"(){vz="rgba(26, 28, 30, 0.97);",yz="#272B2F"}});function Lz(e,t,n,r){zg(t,function(t,i){const[o,a]=(0,gz.useState)(!1),s=(0,gz.useRef)(i);return o||(s.current=i),(0,gz.useMemo)((()=>{return t=a,{debugName:"CurveSegmentEditor/useKeyframeDrag",lockCSSCursorTo:"move",onDragStart:()=>(t(!0),{onDrag(t,i){e&&n.onCurveChange(r(t,i))},onDragEnd(e){t(!1),n.onCancelCurveChange()}})};var t}),s.current)}(0,[e,n.onCurveChange,n.onCancelCurveChange]))}var jz,zz,Nz,Bz=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/CurveEditorPopover/CurveSegmentEditor.tsx"(){bz=k(nf()),Fg(),jg(),bl(),mg(),$x(),Oz(),Dz(),1.24,xz=.01,_z=.99/7,wz="#3EAAA4",Sz="#3EAAA4",Ez="#B3B3B3",kz=["goldenrod","cornflowerblue","dodgerblue","lawngreen"],Mz=Am.circle`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.04px;
  pointer-events: none;
  transition: r 0.15s;
  fill: ${"#3eaaa4"};
`,Pz=Am.circle`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.09px;
  cursor: move;
  ${Ix};
  &:hover {
    opacity: 0.4;
  }
  &:hover + ${Mz} {
    fill: ${"#67dfd8"};
  }
`,Tz=e=>{const{curveConnection:{left:t,right:n},backgroundConnections:r}=e,i=Math.min(0,1-n.handles[1],1-t.handles[3]),o=Math.max(1,1-n.handles[1],1-t.handles[3]),a=Math.max(1,o-i),s=e=>(e-i)/a,[l,c]=Ig(null),u=1.24/((null==c?void 0:c.clientWidth)||1),d=1.24/((null==c?void 0:c.clientHeight)||1),[h,p]=Ig(null);Lz(c,p,e,((e,r)=>[ml(t.handles[2]+e*u,0,1),t.handles[3]-r*d,n.handles[0],n.handles[1]]));const[f,m]=Ig(null);Lz(c,m,e,((e,r)=>{const i=ml(n.handles[0]+e*u,0,1),o=n.handles[1]-r*d;return[t.handles[2],t.handles[3],i,o]}));const g=e=>`M0 ${s(1)} C${e.left.handles[2]} ${s(1-e.left.handles[3])} ${e.right.handles[0]} ${s(1-e.right.handles[1])} 1 ${s(0)}`;return bz.default.createElement("svg",{height:"100%",width:"100%",ref:l,viewBox:"-0.12 -0.12 1.24 1.24",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none"},bz.default.createElement("linearGradient",{id:"myGradient",gradientTransform:"rotate(90)"},bz.default.createElement("stop",{offset:s(-1),stopColor:"#3EAAA4"}),bz.default.createElement("stop",{offset:s(0),stopColor:Sz}),bz.default.createElement("stop",{offset:s(.3),stopColor:"#3EAAA4"}),bz.default.createElement("stop",{offset:s(.5),stopColor:"#3EAAA4"}),bz.default.createElement("stop",{offset:s(.7),stopColor:"#3EAAA4"}),bz.default.createElement("stop",{offset:s(1),stopColor:wz}),bz.default.createElement("stop",{offset:s(2),stopColor:"#3EAAA4"})),bz.default.createElement("pattern",{id:"dot-background-pattern-1",width:_z,height:_z/a,y:-i/a},bz.default.createElement("rect",{width:xz,height:xz,fill:Ez,opacity:.3})),bz.default.createElement("rect",{x:0,y:0,width:"1",height:1,fill:"url(#dot-background-pattern-1)"}),bz.default.createElement("pattern",{id:"dot-background-pattern-2",width:_z,height:_z},bz.default.createElement("rect",{width:xz,height:xz,fill:Ez})),bz.default.createElement("rect",{x:0,y:s(0),width:"1",height:s(1)-s(0),fill:"url(#dot-background-pattern-2)"}),t.type&&"bezier"!==t.type?bz.default.createElement(bz.default.Fragment,null,bz.default.createElement("line",{x1:0,y1:s(1),x2:1,y2:s(1),stroke:Ez,strokeWidth:"0.01"}),bz.default.createElement("line",{x1:1,y1:s(1),x2:1,y2:0,stroke:Ez,strokeWidth:"0.01"}),bz.default.createElement("circle",{cx:0,cy:1,r:"0.025",stroke:Sz,strokeWidth:"0.02",fill:yz}),bz.default.createElement("circle",{cx:1,cy:0,r:"0.025",stroke:Sz,strokeWidth:"0.02",fill:yz})):bz.default.createElement(bz.default.Fragment,null,bz.default.createElement("line",{x1:0,y1:s(1),x2:t.handles[2],y2:s(1-t.handles[3]),stroke:Ez,strokeWidth:"0.01"}),bz.default.createElement("line",{x1:1,y1:s(0),x2:n.handles[0],y2:s(1-n.handles[1]),stroke:Ez,strokeWidth:"0.01"}),bz.default.createElement("path",{d:g(e.curveConnection),stroke:"none",fill:"url('#myGradient')",opacity:"0.1"}),r.map(((e,t)=>bz.default.createElement("path",{key:e.objectKey+"/"+e.left.id,d:g(e),stroke:kz[t%kz.length],opacity:.6,strokeWidth:"0.01"}))),bz.default.createElement("path",{d:g(e.curveConnection),stroke:"url('#myGradient')",strokeWidth:"0.02"}),bz.default.createElement("circle",{cx:0,cy:s(1),r:"0.025",stroke:wz,strokeWidth:"0.02",fill:yz}),bz.default.createElement("circle",{cx:1,cy:s(0),r:"0.025",stroke:Sz,strokeWidth:"0.02",fill:yz}),bz.default.createElement(Pz,{ref:h,cx:t.handles[2],cy:s(1-t.handles[3]),fill:wz,opacity:.2}),bz.default.createElement(Mz,{cx:t.handles[2],cy:s(1-t.handles[3])}),bz.default.createElement(Pz,{ref:f,cx:n.handles[0],cy:s(1-n.handles[1]),fill:Sz,opacity:.2}),bz.default.createElement(Mz,{cx:n.handles[0],cy:s(1-n.handles[1])})))},Cz=Tz}});function Fz(e){return e.map((e=>e.toFixed(jz))).join(", ")}function Uz(e){if(!e||(null==e?void 0:e.length)>zz)return null;const t=e.split(",");if(4!==t.length)return null;const n=t.map((e=>Number(e.trim())));return n.every((e=>isFinite(e)))?n[0]<0||n[0]>1||n[2]<0||n[2]>1?null:n:null}function Vz(e,t,n={threshold:.02}){if(!e||!t)return!1;let r=0;for(let n=0;n<4;n++)r+=Math.abs(e[n]-t[n]);return r<n.threshold}var Hz,Wz,Gz,$z,qz,Kz,Xz,Yz,Zz,Jz,Qz,eN,tN,nN,rN,iN,oN,aN,sN,lN,cN,uN,dN,hN,pN,fN,mN=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/CurveEditorPopover/shared.ts"(){jz=3,zz=128,Nz=[{label:"Quad Out",value:"0.250, 0.460, 0.450, 0.940"},{label:"Quad In Out",value:"0.455, 0.030, 0.515, 0.955"},{label:"Quad In",value:"0.550, 0.085, 0.680, 0.530"},{label:"Cubic Out",value:"0.215, 0.610, 0.355, 1.000"},{label:"Cubic In Out",value:"0.645, 0.045, 0.355, 1.000"},{label:"Cubic In",value:"0.550, 0.055, 0.675, 0.190"},{label:"Quart Out",value:"0.165, 0.840, 0.440, 1.000"},{label:"Quart In Out",value:"0.770, 0.000, 0.175, 1.000"},{label:"Quart In",value:"0.895, 0.030, 0.685, 0.220"},{label:"Quint Out",value:"0.230, 1.000, 0.320, 1.000"},{label:"Quint In Out",value:"0.860, 0.000, 0.070, 1.000"},{label:"Quint In",value:"0.755, 0.050, 0.855, 0.060"},{label:"Sine Out",value:"0.390, 0.575, 0.565, 1.000"},{label:"Sine In Out",value:"0.445, 0.050, 0.550, 0.950"},{label:"Sine In",value:"0.470, 0.000, 0.745, 0.715"},{label:"Expo Out",value:"0.190, 1.000, 0.220, 1.000"},{label:"Expo In Out",value:"1.000, 0.000, 0.000, 1.000"},{label:"Expo In",value:"0.780, 0.000, 0.810, 0.00"},{label:"Circ Out",value:"0.075, 0.820, 0.165, 1.000"},{label:"Circ In Out",value:"0.785, 0.135, 0.150, 0.860"},{label:"Circ In",value:"0.600, 0.040, 0.980, 0.335"},{label:"Back Out",value:"0.175, 0.885, 0.320, 1.275"},{label:"Back In Out",value:"0.680, -0.550, 0.265, 1.550"},{label:"Back In",value:"0.600, -0.280, 0.735, 0.045"},{label:"linear",value:"0.5, 0.5, 0.5, 0.5"},{label:"In Out",value:"0.42,0,0.58,1"},{label:"Hold",value:"0, 0, Infinity, Infinity"}]}}),gN=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/CurveEditorPopover/SVGCurveSegment.tsx"(){Hz=k(nf()),Wz=.1,Gz="#4f4f4f",$z="rgba(255, 255, 255, 0.1)",qz=e=>1-e,Kz=e=>{const{easing:t,isSelected:n}=e,r=n?"#F5F5F5":"#888888",i="-0.75 -0.75 2.5 2.5";if(t){const e=[t[0],qz(t[1])],n=[t[2],qz(t[3])];return Hz.default.createElement("svg",{height:"100%",width:"100%",viewBox:i,fill:"none",xmlns:"http://www.w3.org/2000/svg"},Hz.default.createElement("line",{x1:"0",y1:"1",x2:e[0],y2:e[1],stroke:Gz,strokeWidth:"0.1"}),Hz.default.createElement("line",{x1:"1",y1:"0",x2:n[0],y2:n[1],stroke:Gz,strokeWidth:"0.1"}),Hz.default.createElement("circle",{cx:e[0],cy:e[1],r:.1,fill:$z}),Hz.default.createElement("circle",{cx:n[0],cy:n[1],r:.1,fill:$z}),Hz.default.createElement("circle",{cx:e[0],cy:e[1],r:Wz,fill:Gz}),Hz.default.createElement("circle",{cx:n[0],cy:n[1],r:Wz,fill:Gz}),Hz.default.createElement("path",{d:`M0 1 C${e[0]} ${e[1]} ${n[0]} \n        ${n[1]} 1 0`,stroke:r,strokeWidth:"0.08"}),Hz.default.createElement("circle",{cx:0,cy:1,r:Wz,fill:r}),Hz.default.createElement("circle",{cx:1,cy:0,r:Wz,fill:r}))}return Hz.default.createElement("svg",{height:"100%",width:"100%",viewBox:i,fill:"none",xmlns:"http://www.w3.org/2000/svg"},Hz.default.createElement("line",{x1:"0",y1:"1",x2:1,y2:1,stroke:r,strokeWidth:"0.08"}),Hz.default.createElement("line",{x1:"1",y1:"0",x2:1,y2:1,stroke:r,strokeWidth:"0.08"}),Hz.default.createElement("circle",{cx:0,cy:1,r:Wz,fill:r}),Hz.default.createElement("circle",{cx:1,cy:0,r:Wz,fill:r}))}}}),vN=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/CurveEditorPopover/EasingOption.tsx"(){eR(),Xz=k(nf()),mg(),mN(),gN(),$k(),Dz(),jT(),Yz=Am.div`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  aspect-ratio: 1;

  transition: background-color 0.15s;
  background-color: ${yz};
  border-radius: 2px;
  cursor: pointer;
  outline: none;

  ${({isSelected:e})=>e&&Qm`
      background-color: #383d42;
    `}

  &:hover {
    background-color: #31353a;
  }

  &:focus {
    background-color: #383d42;
  }
`,Zz=Am(MT)`
  padding: 0.5em;
  color: white;
  max-width: 240px;
  pointer-events: none !important;
  --popover-bg: black;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: transparent;
  box-shadow: none;
`,Jz=Xz.default.forwardRef(((e,t)=>{const[n,r]=QA({enabled:!0,verticalPlacement:e.tooltipPlacement,verticalGap:0},(()=>Xz.default.createElement(Zz,{showPopoverEdgeTriangle:!1},e.easing.label)));return Xz.default.createElement(Yz,y({ref:Vk([r,t])},e),n,Xz.default.createElement(Kz,{easing:Uz(e.easing.value),isSelected:e.isSelected}))})),Qz=Jz}}),yN=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/CurveEditorPopover/useUIOptionGrid.tsx"(){var e;eN=k(nf()),wN(),(e=tN||(tN={}))[e.Handled=1]="Handled",e[e.Passthrough=0]="Passthrough"}});function bN(e,t,n){var r;null==(r=e.current)||r.discard(),e.current=null;const i=Uz(n);e.current=null===i?function(e){return T().tempTransaction((({stateEditors:t})=>{const{setKeyframeType:n}=t.coreByProject.historic.sheetsById.sequence;for(const{projectId:t,sheetId:r,objectKey:i,trackId:o,left:a}of e)n({projectId:t,sheetId:r,objectKey:i,trackId:o,keyframeId:a.id,keyframeType:"hold"})}))}(t):function(e,t){return T().tempTransaction((({stateEditors:n})=>{const{setHandlesForKeyframe:r,setKeyframeType:i}=n.coreByProject.historic.sheetsById.sequence;for(const{projectId:n,sheetId:o,objectKey:a,trackId:s,left:l,right:c}of e)r({projectId:n,sheetId:o,objectKey:a,trackId:s,keyframeId:l.id,start:[t[0],t[1]]}),r({projectId:n,sheetId:o,objectKey:a,trackId:s,keyframeId:c.id,end:[t[2],t[3]]}),i({projectId:n,sheetId:o,objectKey:a,trackId:s,keyframeId:l.id,keyframeType:"bezier"})}))}(t,i)}function xN(e){var t;null==(t=e.current)||t.discard(),e.current=null}var _N,wN=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/CurveEditorPopover/CurveEditorPopover.tsx"(){var e;nN=k(n(771)),rN=k(nf()),mg(),iN=k(Rz()),I(),Bz(),vN(),mN(),Dz(),jg(),yN(),oN=Am.div`
  background: ${vz};
  display: grid;
  grid-template-areas:
    'search  tween'
    'presets tween';
  grid-template-rows: 32px 1fr;
  grid-template-columns: ${159}px 120px;
  gap: 1px;
  height: 120px;
`,aN=Am.div`
  overflow: auto;
  grid-area: presets;

  display: grid;
  grid-template-columns: repeat(${3}, 1fr);
  grid-auto-rows: min-content;
  gap: 1px;

  overflow-y: scroll;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  &::-webkit-scrollbar {
    /* WebKit */
    width: 0;
    height: 0;
  }
`,sN=Am.input.attrs({type:"text"})`
  background-color: ${yz};
  border: none;
  border-radius: 2px;
  color: rgba(255, 255, 255, 0.8);
  padding: 6px;
  font-size: 12px;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: 100%;
  box-sizing: border-box;

  grid-area: search;

  &:hover {
    background-color: #212121;
  }

  &:focus {
    background-color: rgba(16, 16, 16, 0.26);
    outline: 1px solid rgba(0, 0, 0, 0.35);
  }
`,lN=Am.div`
  grid-area: tween;
  background: ${yz};
`,cN=Am.div`
  grid-column: 1 / 4;
  padding: 6px;
  color: #888888;
`,(e=uN||(uN={}))[e.init=0]="init",e[e.user=1]="user",e[e.auto=2]="auto",e[e.multipleValues=3]="multipleValues",dN=e=>{const t=(0,rN.useMemo)((()=>[e.curveConnection,...e.additionalConnections]),[e.curveConnection,...e.additionalConnections]),n=(0,rN.useRef)(null);(0,rN.useEffect)((()=>{const e=fN(t);return()=>{var t;e(),null==(t=n.current)||t.commit()}}),[n]);const r=[e.curveConnection.left.handles[2],e.curveConnection.left.handles[3],e.curveConnection.right.handles[0],e.curveConnection.right.handles[1]],i=(0,rN.useRef)(null);(0,rN.useLayoutEffect)((()=>{var e,t;null==(e=i.current)||e.select(),null==(t=i.current)||t.focus()}),[i.current]);const[o,a]=(0,rN.useState)(Fz(r)),s=e=>{c(1),a(e.target.value),Uz(e.target.value)&&d(e.target.value)},[l,c]=(0,rN.useState)(0);(0,rN.useEffect)((()=>{2===l?a(Fz(r)):3===l&&""!==o&&a("")}),t);const[u,d]=(0,rN.useState)(Fz(r)),[h,p]=(0,rN.useState)(null);(0,rN.useEffect)((()=>{var e;0!==l&&3!==l&&bN(n,t,null!=(e=null!=h?h:u)?e:"")}),[h,u,l]),t.some(function({left:e,right:t}){return({left:n,right:r})=>e.handles[2]!==n.handles[2]||e.handles[3]!==n.handles[3]||t.handles[0]!==r.handles[0]||t.handles[1]!==r.handles[1]}(e.curveConnection))&&0===l&&c(3);const f=(0,rN.useMemo)((()=>/^[A-Za-z]/.test(o)?iN.default.filter(o,Nz,{extract:e=>e.label}).map((e=>e.original)):Nz),[o]);(0,rN.useEffect)((()=>{1===l&&f[0]&&d(f[0].value)}),[f]);const m=t=>{"Escape"===t.key?(xN(n),e.onRequestClose("key Escape"),t.stopPropagation()):"Enter"===t.key&&(e.onRequestClose("key Enter"),t.stopPropagation())},g=()=>p(null),v=(0,rN.useRef)(Nz.reduce(((e,t)=>(e[t.label]={current:null},e)),{})),[y,b]=Ig(null),[x,_]=(0,rN.useState)(0);(0,rN.useEffect)((()=>{const e=()=>{var e;_(null!=(e=null==b?void 0:b.scrollTop)?e:0)};return null==b||b.addEventListener("scroll",e),()=>null==b?void 0:b.removeEventListener("scroll",e)}),[b]);const w=function(e){var t;const[n,r]=(0,eN.useState)(null),i=t=>{if(null===n)return void(e.items.length>0&&r(0));const i=n+t*e.uiColumns,o=i<0,a=i>e.items.length-1;if(o||a)return e.canVerticleExit&&e.canVerticleExit(o?"top":"bottom")?void r(null):void 0;r(i)},o=t=>{var i;r(null===n?(t%(i=e.items.length)+i)%i:n+t<0?null:Math.min(n+t,e.items.length-1))};return{focusFirstItem(){r(0)},onParentEltKeyDown:e=>{if("ArrowRight"===e.key)o(1);else if("ArrowLeft"===e.key)o(-1);else if("ArrowUp"===e.key)i(-1);else{if("ArrowDown"!==e.key)return 0;i(1)}return 1},gridItems:e.items.map(((t,i)=>e.renderItem({isSelected:i===n,item:t,select(n){r(i),1===e.onSelectItem(t)&&(null==n||n.preventDefault(),null==n||n.stopPropagation())}}))),currentSelection:null!=(t=e.items[null!=n?n:-1])?t:null}}({items:f,uiColumns:3,onSelectItem:r=>(bN(n,t,r.value),e.onRequestClose("selected easing option"),tN.Handled),canVerticleExit(e){var t,n;return"top"===e?(null==(t=i.current)||t.select(),null==(n=i.current)||n.focus(),tN.Handled):tN.Passthrough},renderItem:({item:e,select:t})=>{var n,i;return rN.default.createElement(Qz,{key:e.label,easing:e,tabIndex:0,onKeyDown:m,ref:v.current[e.label],onMouseOver:()=>{return t=e,0===l&&c(2),void p(t.value);var t},onMouseOut:g,onClick:t,tooltipPlacement:(null!=(i=null==(n=v.current[e.label].current)?void 0:n.offsetTop)?i:0)-(null!=x?x:0)<78?"bottom":"top",isSelected:Vz(r,Uz(e.value))})}});return(0,rN.useLayoutEffect)((()=>{var e,t;if(null!==w.currentSelection&&document.activeElement!==i.current){const n=null==(t=null==(e=v.current)?void 0:e[w.currentSelection.label])?void 0:t.current;null==n||n.focus(),d(w.currentSelection.value),/^[A-Za-z]/.test(o)||a(w.currentSelection.value)}}),[w.currentSelection]),rN.default.createElement(oN,null,rN.default.createElement(sN,{value:o,placeholder:3===l?"Multiple easings selected":"Search presets...",onPaste:(S=s,()=>setTimeout(S,undefined)),onChange:s,ref:i,onKeyDown:t=>{var r,i;c(1),"ArrowDown"!==t.key&&"ArrowUp"!==t.key||t.preventDefault(),"ArrowDown"===t.key?(w.focusFirstItem(),null==(i=null==(r=v.current[f[0].label])?void 0:r.current)||i.focus()):"Escape"===t.key?(xN(n),e.onRequestClose("key Escape")):"Enter"===t.key&&e.onRequestClose("key Enter")}}),rN.default.createElement(aN,{ref:y,onKeyDown:e=>w.onParentEltKeyDown(e)},w.gridItems,0===w.gridItems.length?rN.default.createElement(cN,null,"No results found"):void 0),rN.default.createElement(lN,{onClick:()=>{var e;return null==(e=i.current)?void 0:e.focus()}},rN.default.createElement(Cz,{curveConnection:e.curveConnection,backgroundConnections:e.additionalConnections,onCurveChange:e=>{var t,n;c(2);const r=Fz(e);a(r),d(r),null==(t=i.current)||t.select(),null==(n=i.current)||n.focus()},onCancelCurveChange:()=>{}})));var S},({isCurveEditorOpenD:hN,isConnectionEditingInCurvePopover:pN,getLock:fN}=(()=>{const e=new nN.Atom([]);return{getLock:t=>(e.set(t),function(){e.set([])}),isCurveEditorOpenD:(0,nN.prism)((()=>e.prism.getValue().length>0)),isConnectionEditingInCurvePopover:t=>(nN.prism.ensurePrism(),e.prism.getValue().some((({left:e,right:n})=>t.left.id===e.id&&t.right.id===n.id)))}})())}});function SN(e,t){for(const{keyframeId:n}of function(e){var t,n,r;const i=[];for(const[o,a]of Object.entries(null!=(t=null==e?void 0:e.byObjectKey)?t:{}))for(const[e,t]of Object.entries(null!=(n=null==a?void 0:a.byTrackId)?n:{}))for(const n of Object.keys(null!=(r=null==t?void 0:t.byKeyframeId)?r:{}))i.push({objectKey:o,trackId:e,keyframeId:n});return i}(t))if(e.left.id===n)return!0;return!1}function EN(e,t,n){return(0,_N.prism)((()=>{if(void 0===n)return[];let r=[];for(const{objectKey:i,trackId:o}of TN(n)){const a=(0,_N.val)(T().atomP.historic.coreByProject[e].sheetsById[t].sequence.tracksByObject[i].trackData[o]);a&&(r=r.concat(PN(a.keyframes).filter((e=>SN(e,n))).map((({left:n,right:r})=>({left:n,right:r,trackId:o,objectKey:i,sheetId:t,projectId:e})))))}return r}))}function kN(e,t,n){var r;if(void 0===n)return[];let i=[];for(const{objectKey:o,trackId:a,keyframeIds:s}of TN(n))i=i.concat(null!=(r=MN({projectId:e,sheetId:t,objectKey:o,trackId:a,keyframeIds:s}))?r:[]);const o=Ye(i.map((e=>e.pathToProp)));return i.map((({keyframe:e,pathToProp:t})=>({keyframe:e,pathToProp:t.slice(o.length)})))}function MN({projectId:e,sheetId:t,objectKey:n,trackId:r,keyframeIds:i}){const o=(0,_N.val)(T().atomP.historic.coreByProject[e].sheetsById[t].sequence.tracksByObject[n]),a=null==o?void 0:o.trackData[r];if(!a)return null;const s=function(e){const t={};for(const[n,r]of Object.entries(e))t[r]=n;return t}((null==o?void 0:o.trackIdByPropPath)||{})[r];if(!s)return null;const l=[n,...Ke(s)];return i.map((e=>({keyframe:a.keyframes.find((t=>t.id===e)),pathToProp:l}))).filter((({keyframe:e})=>void 0!==e))}function PN(e){return e.map(((t,n)=>({left:t,right:e[n+1]}))).slice(0,-1)}function TN(e){var t,n,r;const i=[];for(const[o,a]of Object.entries(null!=(t=null==e?void 0:e.byObjectKey)?t:{}))for(const[e,t]of Object.entries(null!=(n=null==a?void 0:a.byTrackId)?n:{}))i.push({objectKey:o,trackId:e,keyframeIds:Object.keys(null!=(r=null==t?void 0:t.byKeyframeId)?r:{})});return i}var CN,AN=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/selections.ts"(){_N=k(n(771)),I(),ct()}});var IN,RN,ON,DN,LN,jN=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/useTempTransactionEditingTools.tsx"(){I(),CN=k(nf())}});function zN(e){var t;if("sheetObject"===e.type)return IN.default.createElement(IN.default.Fragment,null,IN.default.createElement(ON,{style:{paddingLeft:e.indent*DN+"px"}},e.sheetObject.address.objectKey),e.children.map(((t,n)=>IN.default.createElement(zN,b(y({key:n},t),{autoFocusInput:e.autoFocusInput&&0===n,indent:e.indent+1})))));if("propWithChildren"===e.type){const n=null!=(t=e.propConfig.label)?t:V(e.pathToProp);return IN.default.createElement(IN.default.Fragment,null,IN.default.createElement(ON,{style:{paddingLeft:e.indent*DN+"px"}},n),e.children.map(((t,n)=>IN.default.createElement(zN,b(y({key:n},t),{autoFocusInput:e.autoFocusInput&&0===n,indent:e.indent+1})))))}return IN.default.createElement(NN,b(y({},e),{autoFocusInput:e.autoFocusInput,indent:e.indent}))}function NN(e){var t;const n=null!=(t=e.propConfig.label)?t:V(e.pathToProp),r=function(e){const t=e.sheetObject;return function(e,t){return(0,CN.useMemo)((()=>function(e,t){let n=null;const r=t=>T().tempTransaction((n=>e(n,t)));function i(){null==n||n.discard(),n=null}const o={createAsset:t.sheet.project.assetStorage.createAsset,getAssetUrl:e=>e.id?t.sheet.project.assetStorage.getAssetUrl(e.id):void 0};return y({temporarilySetValue(e){i(),n=r(e)},discardTemporaryValue:i,permanentlySetValue(e){i(),r(e).commit()}},o)}(e,t)),[])}((({stateEditors:n},r)=>{const i=b(y({},e.keyframe),{value:r});n.coreByProject.historic.sheetsById.sequence.replaceKeyframes(b(y({},t.address),{trackId:e.trackId,keyframes:[i],snappingFunction:t.sheet.getSequence().closestGridPosition}))}),t)}(e);if("enum"===e.propConfig.type)return IN.default.createElement(IN.default.Fragment,null);{const t=SC[e.propConfig.type];return IN.default.createElement(RN,null,IN.default.createElement(ON,null,IN.default.createElement("span",{style:{paddingLeft:e.indent*DN+"px"}},n)),IN.default.createElement(LN,null,IN.default.createElement(t,{editingTools:r,propConfig:e.propConfig,value:ew(e.keyframe.value,e.propConfig),autoFocus:e.autoFocusInput})))}}var BN,FN=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/DeterminePropEditorForSingleKeyframe.tsx"(){IN=k(nf()),mg(),TC(),Ie(),jN(),dw(),RN=Am.div`
  display: flex;
  align-items: stretch;
  min-width: 200px;

  select {
    min-width: 100px;
  }
`,ON=Am.div`
  font-style: normal;
  font-weight: 400;
  font-size: 11px;
  line-height: 13px;
  letter-spacing: 0.01em;
  padding: 6px 6px 6px 0;

  width: 40%;

  color: #919191;

  overflow: hidden;
`,DN=10,LN=Am.div`
  display: flex;
  align-items: center;
  width: 60%;
`}});function UN(e){return pT({debugName:"useKeyframeInlineEditorPopover"},(()=>BN.default.createElement(MT,{showPopoverEdgeTriangle:!0},BN.default.createElement("div",{style:{margin:"1px 2px 1px 10px"}},Array.isArray(e)?e.map(((e,t)=>BN.default.createElement(zN,b(y({key:t},e),{autoFocusInput:0===t,indent:0})))):void 0))))}var VN,HN,WN,GN,$N,qN,KN,XN,YN,ZN,JN,QN,eB,tB,nB,rB,iB,oB,aB,sB,lB,cB,uB,dB,hB,pB,fB,mB,gB,vB,yB,bB,xB=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/useSingleKeyframeInlineEditorPopover.tsx"(){BN=k(nf()),DT(),jT(),FN()}}),_B=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/SingleKeyframeDot.tsx"(){VN=k(nf()),mg(),I(),VD(),Fg(),jg(),HN=k(n(771)),jE(),gg(),Qg(),fL(),wg(),AN(),$x(),Yj(),xB(),Uw(),GN=2+(WN=6),$N={normalColor:"#40AAA4",selectedColor:"#F2C95C",inlineEditorOpenColor:"#FCF3DC",selectedAndInlineEditorOpenColor:"#CBEBEA"},qN=({isSelected:e,isInlineEditorPopoverOpen:t})=>e&&t?$N.inlineEditorOpenColor:e?$N.selectedColor:t?$N.selectedAndInlineEditorOpenColor:$N.normalColor,KN=Am.div`
  position: absolute;
  ${nL(WN)}

  background: ${e=>qN(e)};
  transform: rotateZ(45deg);

  ${e=>e.flag===xw.Primary?"outline: 2px solid white;":""};

  z-index: 1;
  pointer-events: none;
`,XN=Am.div`
  position: absolute;
  ${nL(1.5*WN)}

  background: ${e=>qN(e)};

  ${e=>e.flag===xw.Primary?"outline: 2px solid white;":""};

  z-index: 1;
  pointer-events: none;
`,YN=Am.div`
  z-index: 1;
  cursor: ew-resize;

  position: absolute;
  ${nL(12)};
  ${Ix};

  & + ${KN} {
    ${e=>e.isInlineEditorPopoverOpen?nL(GN):""}
  }

  &:hover + ${KN} {
    ${nL(GN)}
  }
`,ZN=e=>{const t=yg("SingleKeyframeDot",e.keyframe.id),n=kw(e.itemKey),[r,i]=Ig(null),[o]=function(e,t,n){return MO(e,{displayName:"Keyframe",menuItems:()=>{const e=kN(n.leaf.sheetObject.address.projectId,n.leaf.sheetObject.address.sheetId,n.selection);return[{label:e.length>0?"Copy (selection)":"Copy",callback:()=>{e.length>0?T().transaction((t=>{t.stateEditors.studio.ahistoric.setClipboardKeyframes(e)})):T().transaction((e=>{e.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:n.keyframe,pathToProp:n.leaf.pathToProp}])}))}},{label:void 0!==n.selection?"Delete (selection)":"Delete",callback:()=>{n.selection?n.selection.delete():T().transaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.deleteKeyframes(b(y({},n.leaf.sheetObject.address),{keyframeIds:[n.keyframe.id],trackId:n.leaf.trackId}))}))}}]},onOpen(){t._debug("Show keyframe",n)}})}(i,t,e),{node:a,toggle:s,isOpen:l}=UN([{type:"primitiveProp",keyframe:e.keyframe,pathToProp:e.leaf.pathToProp,propConfig:e.leaf.propConf,sheetObject:e.leaf.sheetObject,trackId:e.leaf.trackId}]),[c]=function(e,t,n){const r=(0,VN.useRef)(t);r.current=t;const{onClickFromDrag:i}=n,o=(0,VN.useMemo)((()=>({debugName:"KeyframeDot/useDragKeyframe",onDragStart(t){const n=r.current;if(yL(bL((0,HN.val)(T().atomP.historic.coreByProject[n.leaf.sheetObject.address.projectId].sheetsById[n.leaf.sheetObject.address.sheetId].sequence.tracksByObject),(function(e,{trackId:t,objectKey:r}){var i,o;return e.id!==n.keyframe.id&&!(n.selection&&(null==(o=null==(i=n.selection.byObjectKey[r])?void 0:i.byTrackId[t])?void 0:o.byKeyframeId[e.id]))}))),n.selection){const{selection:r,leaf:o}=n,{sheetObject:a}=o,s=r.getDragHandlers(b(y({},a.address),{domNode:e,positionAtStartOfDrag:n.track.data.keyframes[n.index].position})).onDragStart(t);return s&&b(y({},s),{onClick:i,onDragEnd:(...e)=>{var t;null==(t=s.onDragEnd)||t.call(s,...e),vL()}})}const o=n,a=(0,HN.val)(o.layoutP.scaledSpace.toUnitSpace);let s;return{onDrag(t,n,r){var i;const l=o.track.data.keyframes[o.index],c=Math.max(null!=(i=Yg.checkIfMouseEventSnapToPos(r,{ignore:e}))?i:l.position+a(t),0);null==s||s.discard(),s=void 0,s=T().tempTransaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.replaceKeyframes(b(y({},o.leaf.sheetObject.address),{trackId:o.leaf.trackId,keyframes:[b(y({},l),{position:c})],snappingFunction:(0,HN.val)(o.layoutP.sheet).getSequence().closestGridPosition}))}))},onDragEnd(e){e?null==s||s.commit():null==s||s.discard(),vL()},onClick(e){i(e)}}}})),[i]),[a]=zg(e,o);return TE(a,t.keyframe.position),dg(a,"draggingPositionInSequenceEditor","ew-resize"),[a]}(i,e,{onClickFromDrag(e){s(e,r.current)}}),u=!e.keyframe.type||"bezier"===e.keyframe.type;return VN.default.createElement(VN.default.Fragment,null,VN.default.createElement(YN,y({ref:r,isInlineEditorPopoverOpen:l},n.attrs)),u?VN.default.createElement(KN,{isSelected:!!e.selection,isInlineEditorPopoverOpen:l,flag:n.flag}):VN.default.createElement(XN,{isSelected:!!e.selection,isInlineEditorPopoverOpen:l,flag:n.flag}),a,o)}}}),wB=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/keyframeRowUI/ConnectorLine.tsx"(){Ty(),JN=k(nf()),mg(),_B(),QN=WN/2+1,eB={normalColor:"#365b59",selectedColor:"#8A7842",barColor:e=>{const t=e.isSelected?eB.selectedColor:eB.normalColor;return e.isPopoverOpen?ey(.2,Qv(.2,t)):t},hoverColor:e=>{const t=e.isSelected?eB.selectedColor:eB.normalColor;return e.isPopoverOpen?ey(.2,Qv(.2,t)):ey(.1,Qv(.1,t))}},tB=Am.div`
  position: absolute;
  background: ${eB.barColor};
  height: ${QN}px;
  width: ${1e3}px;

  left: 0;
  top: -${QN/2}px;
  transform-origin: top left;
  z-index: 0;
  cursor: ew-resize;

  &:after {
    display: block;
    position: absolute;
    content: ' ';
    top: -4px;
    bottom: -4px;
    left: 0;
    right: 0;
  }

  &:hover {
    background: ${eB.hoverColor};
  }
`,nB=JN.default.forwardRef(((e,t)=>{const n={isPopoverOpen:e.isPopoverOpen,isSelected:e.isSelected};return JN.default.createElement(tB,b(y({},n),{ref:t,style:{transform:`scaleX(calc(var(--unitSpaceToScaledSpaceMultiplier) * ${e.connectorLengthInUnitSpace/1e3}))`},onClick:t=>{var n;null==(n=e.openPopover)||n.call(e,t)}}),e.children)}))}}),SB=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/BasicKeyframeConnector.tsx"(){I(),VD(),Fg(),jg(),rB=k(n(771)),iB=k(nf()),oB=k(nf()),DT(),jT(),wN(),wB(),Dz(),pf(),AN(),AN(),mg(),aB=Am(MT)`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: ${vz};
`,sB=e=>{const{index:t,track:n}=e,r=n.data.keyframes[t],i=n.data.keyframes[t+1],[o,a]=Ig(null),{node:s,toggle:l,close:c}=pT((()=>{const t=(0,rB.val)(e.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:t.screenX+5,maxX:t.screenX+t.width-5}}}),(()=>iB.default.createElement(lB,b(y({},e),{closePopover:c})))),[u]=function(e,t,n,r){return MO(t,{displayName:"Tween",menuItems:()=>{const t=kN(e.leaf.sheetObject.address.projectId,e.leaf.sheetObject.address.sheetId,e.selection);return[{label:t.length>0?"Copy (selection)":"Copy",callback:()=>{t.length>0?T().transaction((e=>{e.stateEditors.studio.ahistoric.setClipboardKeyframes(t)})):T().transaction((t=>{t.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:n,pathToProp:e.leaf.pathToProp},{keyframe:r,pathToProp:e.leaf.pathToProp}])}))}},{label:e.selection?"Delete (selection)":"Delete",callback:()=>{e.selection?e.selection.delete():T().transaction((({stateEditors:t})=>{t.coreByProject.historic.sheetsById.sequence.deleteKeyframes(b(y({},e.leaf.sheetObject.address),{keyframeIds:[n.id,r.id],trackId:e.leaf.trackId}))}))}}]}})}(e,a,r,i);!function(e,t){const n=(0,oB.useRef)(t);n.current=t;const r=(0,oB.useMemo)((()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(t){const r=n.current;let i;if(r.selection){const{selection:n,leaf:i}=r,{sheetObject:o}=i;return n.getDragHandlers(b(y({},o.address),{domNode:e,positionAtStartOfDrag:r.track.data.keyframes[r.index].position})).onDragStart(t)}const o=r,a=(0,rB.val)(o.layoutP.sheet).getSequence(),s=(0,rB.val)(o.layoutP.scaledSpace.toUnitSpace);return{onDrag(e,t,n){const r=s(e);i&&(i.discard(),i=void 0),i=T().tempTransaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.transformKeyframes(b(y({},o.leaf.sheetObject.address),{trackId:o.leaf.trackId,keyframeIds:[o.keyframe.id,o.track.data.keyframes[o.index+1].id],translate:r,scale:1,origin:0,snappingFunction:a.closestGridPosition}))}))},onDragEnd(e){e?i&&i.commit():i&&i.discard()}}}})),[]);zg(e,r)}(a,e);const d=i.position-r.position,h={isPopoverOpen:uf((()=>pN(b(y({},e.leaf.sheetObject.address),{trackId:e.leaf.trackId,left:r,right:i}))),[e.leaf.sheetObject.address,e.leaf.trackId,r,i]),isSelected:void 0!==e.selection};return iB.default.createElement(iB.default.Fragment,null,iB.default.createElement(nB,b(y({ref:o,connectorLengthInUnitSpace:d},h),{openPopover:e=>{a&&l(e,a)}}),s),u)},lB=iB.default.forwardRef(((e,t)=>{const{index:n,track:{data:r},selection:i}=e,o=r.keyframes[n],a=r.keyframes[n+1],s=e.leaf.trackId,l=e.leaf.sheetObject.address,c=uf((()=>EN(l.projectId,l.sheetId,i).getValue()),[l,i]),u=y({left:o,right:a,trackId:s},l);return iB.default.createElement(aB,{showPopoverEdgeTriangle:!1,ref:t},iB.default.createElement(dN,{curveConnection:u,additionalConnections:c,onRequestClose:e.closePopover}))}))}}),EB=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/KeyframeEditor/SingleKeyframeEditor.tsx"(){cB=k(n(771)),uB=k(nf()),mg(),SB(),_B(),dB=Am.div`
  position: absolute;
`,hB=uB.default.createElement(uB.default.Fragment,null),pB=uB.default.memo((e=>{const{index:t,track:{data:n}}=e,r=n.keyframes[t],i=n.keyframes[t+1],o=r.connectedRight&&!!i;return uB.default.createElement(dB,{style:{top:e.leaf.nodeHeight/2+"px",left:`calc(${(0,cB.val)(e.layoutP.scaledSpace.leftPadding)}px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ${r.position}px))`}},uB.default.createElement(ZN,b(y({},e),{itemKey:e.itemKey})),o?uB.default.createElement(sB,y({},e)):hB)})),fB=pB}});function kB(e,t){return{label:"Paste Keyframes",enabled:t.length>0,callback:()=>{var n;const r=(0,mB.val)(e.layoutP.sheet).getSequence(),i=null==(n=t[0])?void 0:n.pathToProp,o=t.filter((({keyframe:e,pathToProp:t})=>function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(i,t))).map((({keyframe:e,pathToProp:t})=>e));T().transaction((({stateEditors:t})=>{var n;r.position=r.closestGridPosition(r.position);const i=null==(n=function(e){let t=null;for(const n of e)(null===t||n.position<t.position)&&(t=n);return t}(o))?void 0:n.position;for(const n of o)t.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(b(y({},e.leaf.sheetObject.address),{trackId:e.leaf.trackId,position:r.position+n.position-i,handles:n.handles,value:n.value,snappingFunction:r.closestGridPosition,type:n.type}))}))}}}var MB,PB,TB,CB,AB=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/BasicKeyframedTrack/BasicKeyframedTrack.tsx"(){pf(),mB=k(n(771)),gB=k(nf()),mg(),EB(),VD(),jg(),I(),ct(),Yj(),jp(),vB=Am.div`
  position: relative;
  height: 100%;
  width: 100%;
`,(yB=gB.default.memo((e=>{var t;const{layoutP:n,trackData:r,leaf:i}=e,[o,a]=Ig(null),{selectedKeyframeIds:s,selection:l}=uf((()=>{const e=(0,mB.val)(n.selectionAtom),t=(0,mB.val)(e.pointer.current.byObjectKey[i.sheetObject.address.objectKey].byTrackId[i.trackId].byKeyframeId);return t?{selectedKeyframeIds:t,selection:(0,mB.val)(e.pointer.current)}:{selectedKeyframeIds:{},selection:void 0}}),[n,i.trackId]),[c,u,d]=function(e,t){return MO(e,{displayName:"Keyframe Track",menuItems:()=>{var e;const n=null!=(e=(0,mB.val)(T().atomP.ahistoric.clipboard.keyframesWithRelativePaths))?e:[];return[kB(t,n)]}})}(a,e),h=Wp(dL),p="snapToSome"===h.mode?null==(t=h.positions[i.sheetObject.address.objectKey])?void 0:t[i.trackId]:[],f="snapToAll"===h.mode,m=(0,gB.useMemo)((()=>({data:r,id:i.trackId,sheetObject:e.leaf.sheetObject})),[r,i.trackId]),g=r.keyframes.map(((e,t)=>gB.default.createElement(fB,{key:"keyframe-"+e.id,itemKey:Rp.forTrackKeyframe(i.sheetObject,i.trackId,e.id),keyframe:e,index:t,track:m,layoutP:n,leaf:i,selection:!0===s[e.id]?l:void 0}))),v=p.map((e=>gB.default.createElement(cL,{key:"snap-target-"+e,layoutP:n,leaf:i,position:e}))),y=f?r.keyframes.map((e=>gB.default.createElement(cL,{key:`additionalSnapTarget-${e.id}`,layoutP:n,leaf:i,position:e.position}))):null;return gB.default.createElement(vB,{ref:o,style:{background:d?"#444850 ":"unset"}},g,v,gB.default.createElement(gB.default.Fragment,null,y),c)}))).displayName="BasicKeyframedTrack",bB=yB}}),IB=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/PrimitivePropRow.tsx"(){I(),pf(),MB=k(n(771)),PB=k(nf()),Iz(),AB(),wg(),TB=({leaf:e,layoutP:t})=>{const n=yg("PrimitivePropRow",e.pathToProp.join());return uf((()=>{const{sheetObject:r}=e,{trackId:i}=e,o=(0,MB.val)(T().atomP.historic.coreByProject[r.address.projectId].sheetsById[r.address.sheetId].sequence.tracksByObject[r.address.objectKey].trackData[i]);if("BasicKeyframedTrack"!==(null==o?void 0:o.type))return n.errorDev(`trackData type ${null==o?void 0:o.type} is not yet supported on the sequence editor`),PB.default.createElement(mz,{leaf:e,isCollapsed:!1,node:PB.default.createElement("div",null)});{const n=PB.default.createElement(bB,{layoutP:t,trackData:o,leaf:e});return PB.default.createElement(mz,{leaf:e,isCollapsed:!1,node:n})}}),[e,t])}}}),RB=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/AggregatedKeyframeTrack/AggregateKeyframeEditor/iif.tsx"(){}});function OB(e){const{index:t,aggregateKeyframes:n,selection:r}=e;return uf(DB(e),[t,n,r,e.viewModel])}function DB(e){const{index:t,aggregateKeyframes:n,selection:r}=e,{projectId:i,sheetId:o}="sheet"===e.viewModel.type?e.viewModel.sheet.address:e.viewModel.sheetObject.address;return()=>{const a=n[t],s=n[t+1],l=s&&a.keyframes.length===s.keyframes.length&&a.keyframes.every((({track:e},t)=>s.keyframes[t].track===e))?{length:s.position-a.position,selected:a.selected===yF.AllSelected&&s.selected===yF.AllSelected}:null,c=l?a.keyframes.map((({kf:e,track:t},n)=>b(y({},t.sheetObject.address),{trackId:t.id,left:e,right:s.keyframes[n].kf}))):[],u=(()=>{const e=CB.prism.memo("selectedConnections",(()=>EN(i,o,r)),[i,o,r]).getValue();return[...c,...e]})(),d=c.every((e=>pN(e)));return{itemKey:CB.prism.memo("itemKey",(()=>"sheet"===e.viewModel.type?Rp.forSheetAggregateKeyframe(e.viewModel.sheet,a.position):"sheetObject"===e.viewModel.type?Rp.forSheetObjectAggregateKeyframe(e.viewModel.sheetObject,a.position):Rp.forCompoundPropAggregateKeyframe(e.viewModel.sheetObject,e.viewModel.pathToProp,a.position)),[e.viewModel,a.position]),cur:a,connected:l,isAggregateEditingInCurvePopover:d,allConnections:u}}}var LB,jB,zB,NB,BB,FB,UB,VB,HB,WB,GB,$B,qB,KB,XB,YB=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/AggregatedKeyframeTrack/AggregateKeyframeEditor/useAggregateKeyframeEditorUtils.tsx"(){CB=k(n(771)),jp(),$F(),wN(),pf(),AN(),RB()}}),ZB=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/AggregatedKeyframeTrack/AggregateKeyframeEditor/AggregateKeyframeConnector.tsx"(){LB=k(n(771)),jB=k(nf()),wB(),$F(),DT(),jg(),I(),Fg(),wN(),YB(),mg(),jT(),AN(),VD(),ct(),zB=Am(MT)`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: rgba(26, 28, 30, 0.97);
`,NB=jB.default.forwardRef(((e,t)=>{const{allConnections:n}=OB(e);return jB.default.createElement(zB,{showPopoverEdgeTriangle:!1,ref:t},jB.default.createElement(dN,{curveConnection:n[0],additionalConnections:n,onRequestClose:e.closePopover}))})),BB=e=>{const[t,n]=Ig(null),{editorProps:r}=e,[i]=function(e,t){return MO(t,{displayName:"Aggregate Tween",menuItems:()=>{const t=e.utils.allConnections.reduce(((e,t)=>{var n;return e.concat(null!=(n=MN(b(y({},t),{keyframeIds:[t.left.id,t.right.id]})))?n:[])}),[]),n=Ye(t.map((e=>e.pathToProp))),r=t.map((({keyframe:e,pathToProp:t})=>({keyframe:e,pathToProp:t.slice(n.length)}))),i=e.editorProps.viewModel,o="sheet"===i.type?i.sheet.address:i.sheetObject.address;return[{label:"Copy",callback:()=>{if(e.editorProps.selection){const t=kN(o.projectId,o.sheetId,e.editorProps.selection);T().transaction((e=>{e.stateEditors.studio.ahistoric.setClipboardKeyframes(t)}))}else T().transaction((e=>{e.stateEditors.studio.ahistoric.setClipboardKeyframes(r)}))}},{label:"Delete",callback:()=>{e.editorProps.selection?e.editorProps.selection.delete():T().transaction((({stateEditors:t})=>{for(const n of e.utils.allConnections)t.coreByProject.historic.sheetsById.sequence.deleteKeyframes(b(y({},o),{objectKey:n.objectKey,keyframeIds:[n.left.id,n.right.id],trackId:n.trackId}))}))}}]}})}(e,n),[o]=function(e,t){const n=(0,jB.useRef)(t);n.current=t;const r=(0,jB.useMemo)((()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(t){const r=n.current;let i;const o=r.aggregateKeyframes[r.index].keyframes,{selection:a,viewModel:s}=r,l="sheet"===s.type?s.sheet.address:s.sheetObject.address;if(a&&r.aggregateKeyframes[r.index].selected===yF.AllSelected)return a.getDragHandlers(b(y({},l),{domNode:e,positionAtStartOfDrag:r.aggregateKeyframes[r.index].position})).onDragStart(t);const c=r,u=(0,LB.val)(c.layoutP.sheet).getSequence(),d=(0,LB.val)(c.layoutP.scaledSpace.toUnitSpace);return{onDrag(e,t,n){const r=d(e);i&&(i.discard(),i=void 0),i=T().tempTransaction((({stateEditors:e})=>{for(const t of o)e.coreByProject.historic.sheetsById.sequence.transformKeyframes(b(y({},t.track.sheetObject.address),{trackId:t.track.id,keyframeIds:[t.kf.id,t.track.data.keyframes[t.track.data.keyframes.indexOf(t.kf)+1].id],translate:r,scale:1,origin:0,snappingFunction:u.closestGridPosition}))}))},onDragEnd(e){e?i&&i.commit():i&&i.discard()}}}})),[]);return zg(e,r)}(n,e.editorProps),{node:a,toggle:s,close:l}=pT((()=>{const e=(0,LB.val)(r.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:e.screenX+5,maxX:e.screenX+e.width-5}}}),(()=>jB.default.createElement(NB,b(y({},r),{closePopover:l})))),{connected:c,isAggregateEditingInCurvePopover:u}=e.utils;return c||o?jB.default.createElement(jB.default.Fragment,null,jB.default.createElement(nB,{ref:t,connectorLengthInUnitSpace:c?c.length:0,isSelected:!!c&&c.selected,isPopoverOpen:u,openPopover:e=>{n&&s(e,n)}}),a,i):jB.default.createElement(jB.default.Fragment,null)}}});function JB(e){const t={isSelected:e.isSelected,flag:e.flag};return FB.default.createElement(UB,null,e.isAllHere?FB.default.createElement(KB,y({},t)):FB.default.createElement(XB,y({},t)))}var QB,eF,tF=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/AggregatedKeyframeTrack/AggregateKeyframeEditor/AggregateKeyframeVisualDot.tsx"(){FB=k(nf()),$F(),Uw(),mg(),fL(),$x(),UB=Am.div`
  position: absolute;
  ${nL(16)}
  z-index: 1;
`,VB=Am.div`
  z-index: 2;
  cursor: ew-resize;

  position: absolute;
  ${nL(12)};
  ${Ix};

  &:hover
    + ${UB},
    #pointer-root.draggingPositionInSequenceEditor
    &:hover
    + ${UB} {
    ${nL(18)}
  }
`,HB="#F2C95C",WB="#40AAA4",GB="#45747C",$B=e=>e.isSelected===yF.AllSelected?HB:e.isSelected===yF.AtLeastOneUnselected?WB:GB,qB=e=>e.isSelected===yF.AllSelected?HB:e.isSelected===yF.AtLeastOneUnselected?WB:GB,KB=e=>FB.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},FB.default.createElement("rect",{x:"4.46443",y:"10.0078",width:"5",height:"5",transform:"rotate(-45 4.46443 10.0078)",fill:"#212327",stroke:qB(e)}),FB.default.createElement("rect",{x:"3.75732",y:"6.01953",width:"6",height:"6",transform:"rotate(-45 3.75732 6.01953)",fill:$B(e),stroke:e.flag===xw.Primary?"white":void 0,strokeWidth:e.flag===xw.Primary?"2px":void 0})),XB=e=>FB.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},FB.default.createElement("rect",{x:"4.46443",y:"8",width:"5",height:"5",transform:"rotate(-45 4.46443 8)",fill:"#23262B",stroke:e.flag===xw.Primary?"white":$B(e),strokeWidth:e.flag===xw.Primary?"2px":void 0}))}});function nF(e,t){const n=e.children.map((e=>"propWithChildren"===e.type?nF(e,t):rF(e,t))).filter(eF);return 0===n.length?null:{type:"propWithChildren",pathToProp:e.pathToProp,propConfig:e.propConf,children:n}}function rF(e,t){const n=t.find((t=>t.track.id===e.trackId));return n?{type:"primitiveProp",keyframe:n.kf,pathToProp:e.pathToProp,propConfig:e.propConf,sheetObject:e.sheetObject,trackId:e.trackId}:null}function iF(e){var t,n,r,i;const{cur:o}=e.utils,a=UN("sheet"===e.editorProps.viewModel.type?null:"sheetObject"===e.editorProps.viewModel.type?null!=(n=null==(t=function(e,t){const n=e.children.map((e=>"propWithChildren"===e.type?nF(e,t):rF(e,t))).filter(eF);return 0===n.length?null:{type:"sheetObject",sheetObject:e.sheetObject,children:n}}(e.editorProps.viewModel,o.keyframes))?void 0:t.children)?n:null:null!=(i=null==(r=nF(e.editorProps.viewModel,o.keyframes))?void 0:r.children)?i:null),s=kw(e.utils.itemKey);s.useRelations((()=>o.keyframes.map((e=>({affects:e.itemKey,flag:xw.Primary})))),[o.keyframes.map((e=>e.track.id)).join("-")]);const[l,c]=Ig(null),[u]=function(e,t){return MO(t,{displayName:"Aggregate Keyframe",menuItems:()=>{const t=e.editorProps.viewModel,n=e.editorProps.selection;return[{label:n?"Copy (selection)":"Copy",callback:()=>{if(n){const{projectId:e,sheetId:r}="sheet"===t.type?t.sheet.address:t.sheetObject.address,i=kN(e,r,n);T().transaction((e=>{e.stateEditors.studio.ahistoric.setClipboardKeyframes(i)}))}else{const n=e.utils.cur.keyframes.flatMap((e=>{var t;return null!=(t=MN(b(y({},e.track.sheetObject.address),{trackId:e.track.id,keyframeIds:[e.kf.id]})))?t:[]})),r=Ye(["sheet"===t.type?[]:"sheetObject"===t.type?[t.sheetObject.address.objectKey]:"propWithChildren"===t.type?[t.sheetObject.address.objectKey,...t.pathToProp]:[],...n.map((e=>e.pathToProp))]),i=n.map((({keyframe:e,pathToProp:t})=>({keyframe:e,pathToProp:t.slice(r.length)})));T().transaction((e=>{e.stateEditors.studio.ahistoric.setClipboardKeyframes(i)}))}}},{label:n?"Delete (selection)":"Delete",callback:()=>{n?n.delete():T().transaction((({stateEditors:t})=>{for(const n of e.utils.cur.keyframes)t.coreByProject.historic.sheetsById.sequence.deleteKeyframes(b(y({},n.track.sheetObject.address),{keyframeIds:[n.kf.id],trackId:n.track.id}))}))}}]}})}(e,c);return QB.default.createElement(QB.default.Fragment,null,QB.default.createElement(VB,b(y(y({ref:l},s.attrs),Yg.includePositionSnapAttrs(o.position)),{onClick:t=>"sheet"!==e.editorProps.viewModel.type?a.open(t,l.current):null})),QB.default.createElement(JB,{flag:s.flag,isAllHere:o.allHere,isSelected:o.selected}),u,a.node)}var oF,aF,sF,lF,cF,uF,dF,hF,pF,fF,mF,gF,vF,yF,bF,xF,_F,wF=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/AggregatedKeyframeTrack/AggregateKeyframeEditor/AggregateKeyframeDot.tsx"(){QB=k(nf()),jg(),Uw(),VD(),tF(),I(),AN(),ct(),Qg(),xB(),eF=e=>null!==e}}),SF=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/AggregatedKeyframeTrack/AggregateKeyframeEditor/AggregateKeyframeEditor.tsx"(){oF=k(n(771)),aF=k(nf()),mg(),ZB(),YB(),wF(),sF=Am.div`
  position: absolute;
`,lF=aF.default.memo((e=>{const t=OB(e);return aF.default.createElement(sF,{style:{top:e.viewModel.nodeHeight/2+"px",left:`calc(${(0,oF.val)(e.layoutP.scaledSpace.leftPadding)}px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ${t.cur.position}px))`}},aF.default.createElement(iF,{editorProps:e,utils:t}),aF.default.createElement(BB,{editorProps:e,utils:t}))})),cF=lF}}),EF=w({"shared/src/utils/index.ts"(){uF={},dF=[]}});function kF(e){const{layoutP:t,aggregatedKeyframes:n,viewModel:r}=e,i=yg("AggregatedKeyframeTrack"),[o,a]=Ig(null),{selectedPositions:s,selection:l}=function(e,t){return uf((()=>(0,hF.val)(function(e,t){return(0,hF.prism)((()=>{const n=(0,hF.val)(e.selectionAtom),r=(0,hF.val)(n.pointer.current);if(!r)return mF;const i=new Map;for(const[e,n]of t.byPosition){const t=MF(n,r);void 0!==t&&t!==_F&&i.set(e,t)}return{selectedPositions:i,selection:(0,hF.val)(n.pointer.current)}}))}(e,t))),[e,t])}(t,n),[c,u,d]=function(e,t,n){return MO(e,{onOpen:n,displayName:"Aggregate Keyframe Track",menuItems:()=>{var e;const n=null!=(e=(0,hF.pointerToPrism)(T().atomP.ahistoric.clipboard.keyframesWithRelativePaths).getValue())?e:[];return[PF(t,n)]}})}(a,e,(()=>i._debug("see aggregatedKeyframes",e.aggregatedKeyframes))),h=(0,pF.useMemo)((()=>[...n.byPosition.entries()].sort(((e,t)=>e[0]-t[0])).map((([e,t])=>({position:e,keyframes:t,selected:s.get(e),allHere:t.length===n.tracks.length})))),[n,s]),p=Wp(dL),f="snapToAll"===p.mode,m="snapToSome"===p.mode?p.positions:uF,g=(0,pF.useMemo)((()=>{return"sheet"===r.type?(e=m,Ep(r.children.flatMap((t=>rv(t,e))))):rv(r,m);var e}),[m]).map((e=>pF.default.createElement(cL,{key:"snap-target-"+e,layoutP:t,leaf:r,position:e}))),v=(0,pF.useMemo)((()=>h.map((({position:e,keyframes:n},i)=>({position:e,editorProps:{index:i,layoutP:t,viewModel:r,aggregateKeyframes:h,selection:s.has(e)?l:void 0}})))),[h,r,s]),[x]=function(e,t,n){const r=yg("useDragForAggregateKeyframeDot"),i=PE(),o=(0,pF.useMemo)((()=>({debugName:"AggregateKeyframeDot/useDragKeyframe",onDragStart(o){r._debug("onDragStart",{target:o.target});const a=Number(o.target.dataset.pos),s=t(a);if(!s)return r._debug("no props found for ",{positionToFind:a}),!1;i(!0,a);const l=(0,hF.prism)(DB(s)).getValue().cur.keyframes,c="sheet"===s.viewModel.type?s.viewModel.sheet.address:s.viewModel.sheetObject.address;if(yL(bL((0,hF.val)(T().atomP.historic.coreByProject[c.projectId].sheetsById[c.sheetId].sequence.tracksByObject),(function(e,{trackId:t,objectKey:n}){var r,i;return l.every((t=>e.id!==t.kf.id))&&!(s.selection&&(null==(i=null==(r=s.selection.byObjectKey[n])?void 0:r.byTrackId[t])?void 0:i.byKeyframeId[e.id]))}))),s.selection&&0===s.aggregateKeyframes[s.index].selected){const{selection:t,viewModel:r}=s,i=t.getDragHandlers(b(y({},c),{domNode:e,positionAtStartOfDrag:l[0].kf.position})).onDragStart(o);return i&&b(y({},i),{onClick:n.onClickFromDrag,onDragEnd:(...e)=>{var t;null==(t=i.onDragEnd)||t.call(i,...e),vL()}})}const u=s,d=(0,hF.val)(u.layoutP.scaledSpace.toUnitSpace);let h;return{onDrag(e,t,n){var r;const o=Math.max(null!=(r=Yg.checkIfMouseEventSnapToPos(n,{}))?r:l[0].kf.position+d(e),0);i(!0,o),null==h||h.discard(),h=void 0,h=T().tempTransaction((({stateEditors:e})=>{for(const t of l){const n=t.kf;e.coreByProject.historic.sheetsById.sequence.replaceKeyframes(b(y({},t.track.sheetObject.address),{trackId:t.track.id,keyframes:[b(y({},n),{position:o})],snappingFunction:(0,hF.val)(u.layoutP.sheet).getSequence().closestGridPosition}))}}))},onDragEnd(e){i(!1,-1),e?null==h||h.commit():(null==h||h.discard(),n.onClickFromDrag(o)),vL()},onClick(e){n.onClickFromDrag(e)}}}})),[t,n.onClickFromDrag]),[a]=zg(e,o);return dg(a,"draggingPositionInSequenceEditor","ew-resize"),[a]}(a,(e=>{var t;return null==(t=v.find((t=>t.position===e)))?void 0:t.editorProps}),{onClickFromDrag(e){}}),_=v.map(((e,n)=>pF.default.createElement(pF.Fragment,{key:"agg-"+h[n].keyframes[0].kf.id},f&&pF.default.createElement(cL,{layoutP:t,leaf:r,position:e.position}),pF.default.createElement(cF,y({},e.editorProps)))));return pF.default.createElement(fF,{ref:o,style:{background:d?"#444850 ":"unset"}},_,g,c)}function MF(e,t){var n,r,i;let o;for(const{track:a,kf:s}of e){const e=!0===(null==(i=null==(r=null==(n=t.byObjectKey[a.sheetObject.address.objectKey])?void 0:n.byTrackId[a.id])?void 0:r.byKeyframeId)?void 0:i[s.id]);void 0===o?o=e?bF:_F:e?o===_F&&(o=xF):o===bF&&(o=xF)}return o}function PF(e,t){return{label:"Paste Keyframes",enabled:t.length>0,callback:()=>{const n=(0,hF.val)(e.layoutP.sheet).getSequence();"sheet"===e.viewModel.type?function(e,t,n){var r;const{projectId:i,sheetId:o,sheetInstanceId:a}=e.sheet.address;if(t.every((({pathToProp:e})=>0===e.length)))for(const a of e.children.map((e=>e.sheetObject))){const e=(0,hF.pointerToPrism)(T().atomP.historic.coreByProject[i].sheetsById[o].sequence.tracksByObject[a.address.objectKey]).getValue(),s=Object.keys(null!=(r=null==e?void 0:e.trackData)?r:{});TF(a.address,s,t,n)}else{const e=(0,hF.pointerToPrism)(T().atomP.historic.coreByProject[i].sheetsById[o].sequence.tracksByObject).getValue();CF(t.map((({keyframe:t,pathToProp:n})=>{var r,s;const l=n[0],c=n.slice(1),u=qe([...c]),d=(null!=(s=null==(r=null==e?void 0:e[l])?void 0:r.trackIdByPropPath)?s:{})[u];return d?{keyframe:t,trackId:d,address:{objectKey:l,projectId:i,sheetId:o,sheetInstanceId:a}}:null})).filter((e=>null!==e)),n)}}(e.viewModel,t,n):function(e,t,n){var r;const{projectId:i,sheetId:o,objectKey:a}=e.sheetObject.address,s=(0,hF.pointerToPrism)(T().atomP.historic.coreByProject[i].sheetsById[o].sequence.tracksByObject[a]).getValue();if(t.every((({pathToProp:e})=>0===e.length))){const i=Object.keys(null!=(r=null==s?void 0:s.trackData)?r:{});if("sheetObject"===e.type)TF(e.sheetObject.address,i,t,n);else{const r=(null==s?void 0:s.trackIdByPropPath)||{},i=Object.entries(r).filter((([t,n])=>{return void 0!==n&&(r=Ke(t),e.pathToProp.every(((e,t)=>e===r[t])));var r})).map((([e,t])=>t));TF(e.sheetObject.address,i,t,n)}}else{const r=(null==s?void 0:s.trackIdByPropPath)||{},i="propWithChildren"===e.type?e.pathToProp:[];CF(t.map((({keyframe:t,pathToProp:n})=>{const o=qe([...i,...n]),a=r[o];return a?{keyframe:t,trackId:a,address:e.sheetObject.address}:null})).filter((e=>null!==e)),n)}}(e.viewModel,t,n)}}}function TF(e,t,n,r){var i;r.position=r.closestGridPosition(r.position);const o=null==(i=AF(n.map((({keyframe:e})=>e))))?void 0:i.position;T().transaction((({stateEditors:i})=>{for(const a of t)for(const{keyframe:t}of n)i.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(b(y({},e),{trackId:a,position:r.position+t.position-o,handles:t.handles,value:t.value,snappingFunction:r.closestGridPosition,type:t.type}))}))}function CF(e,t){var n;t.position=t.closestGridPosition(t.position);const r=null==(n=AF(e.map((({keyframe:e})=>e))))?void 0:n.position;T().transaction((({stateEditors:n})=>{for(const{keyframe:i,trackId:o,address:a}of e)n.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(b(y({},a),{trackId:o,position:t.position+i.position-r,handles:i.handles,value:i.value,snappingFunction:t.closestGridPosition,type:i.type}))}))}function AF(e){let t=null;for(const n of e)(null===t||n.position<t.position)&&(t=n);return t}var IF,RF,OF,DF,LF,jF,zF,NF,BF,FF,UF,VF,HF,WF,GF,$F=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/AggregatedKeyframeTrack/AggregatedKeyframeTrack.tsx"(){var e;pf(),hF=k(n(771)),pF=k(nf()),mg(),VD(),jg(),SF(),yv(),wg(),YB(),Qg(),Fg(),jE(),gg(),I(),ct(),Yj(),EF(),Yj(),yv(),fF=Am.div`
  position: relative;
  height: 100%;
  width: 100%;
`,mF=Object.freeze({selectedPositions:new Map,selection:void 0}),gF=pF.default.memo(kF),vF=gF,(e=yF||(yF={}))[e.AllSelected=0]="AllSelected",e[e.AtLeastOneUnselected=1]="AtLeastOneUnselected",e[e.NoneSelected=2]="NoneSelected",({AllSelected:bF,AtLeastOneUnselected:xF,NoneSelected:_F}=yF)}}),qF=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/PropWithChildrenRow.tsx"(){pf(),IF=k(nf()),IB(),Iz(),$F(),yv(),wg(),RF=(e,t)=>"propWithChildren"===e.type?IF.default.createElement(OF,{layoutP:t,viewModel:e,key:"prop"+e.pathToProp[e.pathToProp.length-1]}):IF.default.createElement(TB,{layoutP:t,leaf:e,key:"prop"+e.pathToProp[e.pathToProp.length-1]}),OF=({viewModel:e,layoutP:t})=>{const n=yg("RightPropWithChildrenRow",e.pathToProp.join());return uf((()=>{const r=ev(e),i=IF.default.createElement(vF,{layoutP:t,aggregatedKeyframes:r,viewModel:e});return IF.default.createElement(vg,{logger:n},IF.default.createElement(mz,{leaf:e,node:i,isCollapsed:e.isCollapsed},e.children.map((e=>RF(e,t)))))}),[e,t])}}}),KF=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/SheetObjectRow.tsx"(){pf(),DF=k(nf()),qF(),Iz(),yv(),$F(),LF=({leaf:e,layoutP:t})=>uf((()=>{const n=ev(e),r=DF.default.createElement(vF,{layoutP:t,aggregatedKeyframes:n,viewModel:e});return DF.default.createElement(mz,{leaf:e,node:r,isCollapsed:e.isCollapsed},e.children.map((e=>RF(e,t))))}),[e,t])}}),XF=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/SheetRow.tsx"(){pf(),jF=k(nf()),KF(),Iz(),yv(),$F(),zF=({leaf:e,layoutP:t})=>uf((()=>{const n=ev(e),r=jF.default.createElement(vF,{layoutP:t,aggregatedKeyframes:n,viewModel:e});return jF.default.createElement(mz,{leaf:e,node:r,isCollapsed:e.isCollapsed},e.children.map((e=>jF.default.createElement(LF,{layoutP:t,key:"sheetObject-"+e.sheetObject.address.objectKey,leaf:e}))))}),[e,t])}}),YF=w({"studio/src/panels/SequenceEditorPanel/DopeSheet/Right/Right.tsx"(){pf(),NF=k(n(771)),BF=k(nf()),mg(),bv(),Az(),XF(),FF=1e6,UF=Am.ul`
  margin: 0;
  padding: 0;
  list-style: none;
  position: absolute;
  left: 0;
  width: ${FF}px;
`,VF=({layoutP:e})=>uf((()=>{const t=(0,NF.val)(e.tree),n=(0,NF.val)(e.tree.top)+Math.max((0,NF.val)(e.tree.heightIncludingChildren),(0,NF.val)(e.dopeSheetDims.height));return BF.default.createElement(BF.default.Fragment,null,BF.default.createElement(Xj,{layoutP:e,height:n},BF.default.createElement(hv,{layoutP:e,height:n},BF.default.createElement(UF,{style:{top:t.top+"px"}},BF.default.createElement(zF,{leaf:t,layoutP:e})))))}),[e])}});function ZF(e,t,n,r){return 0===n&&(n=1e-4),0===r&&(r=.001),`translate(calc(var(--unitSpaceToScaledSpaceMultiplier) * ${e}px), calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ${t}) * 1px)) scale(calc(var(--unitSpaceToScaledSpaceMultiplier) * ${n}), calc(var(--graphEditorVerticalSpace) * ${-1*r}))`}var JF,QF,eU,tU,nU,rU,iU,oU,aU,sU,lU,cU,uU,dU,hU,pU,fU,mU,gU,vU,yU,bU,xU,_U,wU,SU,EU,kU,MU,PU,TU,CU,AU,IU,RU,OU=w({"studio/src/panels/SequenceEditorPanel/GraphEditor/BasicKeyframedTrack/KeyframeEditor/Curve.tsx"(){dw(),I(),VD(),jg(),HF=k(nf()),mg(),WF=Am.path`
  stroke-width: 2;
  stroke: var(--main-color);
  fill: none;
  vector-effect: non-scaling-stroke;
`,GF=e=>{const{index:t,trackData:n}=e,r=n.keyframes[t],i=n.keyframes[t+1],o=i.position-r.position,[a,s]=Ig(null),[l]=function(e,t){const{index:n,trackData:r}=t,i=r.keyframes[n],o=r.keyframes[n+1];return MO(e,{menuItems:()=>[{label:"Delete",callback:()=>{T().transaction((({stateEditors:e})=>{const{deleteKeyframes:n}=e.coreByProject.historic.sheetsById.sequence;n(b(y({},t.sheetObject.address),{trackId:t.trackId,keyframeIds:[i.id,o.id]}))}))}}]})}(s,e),c=e.isScalar?ew(r.value,e.propConfig):0,u=e.isScalar?ew(i.value,e.propConfig):1,d=e.extremumSpace.fromValueSpace(c),h=e.extremumSpace.fromValueSpace(u)-d,p=ZF(r.position,d,o,h),f=`M 0 0 C ${r.handles[2]} ${r.handles[3]} ${i.handles[0]} ${i.handles[1]} 1 1`;return HF.default.createElement(HF.default.Fragment,null,HF.default.createElement(WF,{ref:a,d:r.type&&"bezier"!==r.type?"M 0 0 L 1 0 L 1 1":f,style:{transform:p}}),l)}}}),DU=w({"studio/src/panels/SequenceEditorPanel/GraphEditor/BasicKeyframedTrack/KeyframeEditor/CurveHandle.tsx"(){I(),VD(),Fg(),jg(),JF=k(n(771)),Tp(),QF=k(nf()),mg(),OU(),$x(),eU=Am.circle`
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  fill: var(--main-color);
  r: 2px;
  pointer-events: none;
`,tU=Am.circle`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  cursor: move;
  ${Ix};
  &:hover {
  }
  &:hover + ${eU} {
    r: 6px;
  }
`,nU=Am.path`
  stroke-width: 1;
  stroke: var(--main-color);
  /* stroke: gray; */
  fill: none;
  vector-effect: non-scaling-stroke;
`,rU=e=>{const[t,n]=Ig(null),{index:r,trackData:i}=e,o=i.keyframes[r],a=i.keyframes[r+1],[s]=function(e,t){return MO(e,{menuItems:()=>[{label:"Delete",callback:()=>{T().transaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.deleteKeyframes(b(y({},t.sheetObject.address),{keyframeIds:[t.keyframe.id],trackId:t.trackId}))}))}}]})}(n,e);!function(e,t){const n=(0,QF.useRef)(t);n.current=t,zg(e,(0,QF.useMemo)((()=>({debugName:"CurveHandler/useOurDrags",lockCSSCursorTo:"move",onDragStart(){let e;const r=n.current,i=(0,JF.val)(r.layoutP.scaledSpace.toUnitSpace),o=(0,JF.val)(r.layoutP.graphEditorVerticalSpace.toExtremumSpace),a=r.extremumSpace.lock();return{onDrag(n,a){e&&(e.discard(),e=void 0);const{index:s,trackData:l}=r,c=l.keyframes[s],u=l.keyframes[s+1];let d=i(n)/(u.position-c.position);const h=o(-a),p=r.extremumSpace.deltaToValueSpace(h),f=t.isScalar?c.value:0,m=p/((t.isScalar?u.value:1)-f);if("left"===r.which){const t=ml(c.handles[2]+d,0,1),n=c.handles[3]+m;e=T().tempTransaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.replaceKeyframes(b(y({},r.sheetObject.address),{snappingFunction:(0,JF.val)(r.layoutP.sheet).getSequence().closestGridPosition,trackId:r.trackId,keyframes:[b(y({},c),{handles:[c.handles[0],c.handles[1],t,n]})]}))}))}else{const t=ml(u.handles[0]+d,0,1),n=u.handles[1]+m;e=T().tempTransaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.replaceKeyframes(b(y({},r.sheetObject.address),{trackId:r.trackId,snappingFunction:(0,JF.val)(r.layoutP.sheet).getSequence().closestGridPosition,keyframes:[b(y({},u),{handles:[t,n,u.handles[2],u.handles[3]]})]}))}))}},onDragEnd(t){a(),t?e&&e.commit():e&&e.discard()}}}})),[]))}(n,e);const l="left"===e.which?o.handles[2]:a.handles[0],c=o.position+(a.position-o.position)*l,u="left"===e.which?o.handles[3]:a.handles[1],d=e.isScalar?o.value:0,h=e.isScalar?a.value:1,p=d+(h-d)*u,f=e.extremumSpace.fromValueSpace(p),m=f-e.extremumSpace.fromValueSpace("left"===e.which?d:h),g=ZF("left"===e.which?o.position:a.position,e.extremumSpace.fromValueSpace("left"===e.which?d:h),c-("left"===e.which?o.position:a.position),m);return QF.default.createElement("g",null,QF.default.createElement(tU,{ref:t,style:{cx:`calc(var(--unitSpaceToScaledSpaceMultiplier) * ${c} * 1px)`,cy:`calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ${f}) * 1px)`}}),QF.default.createElement(eU,{style:{cx:`calc(var(--unitSpaceToScaledSpaceMultiplier) * ${c} * 1px)`,cy:`calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ${f}) * 1px)`}}),QF.default.createElement(nU,{d:"M 0 0 L 1 1",style:{transform:g}}),s)}}}),LU=w({"studio/src/panels/SequenceEditorPanel/GraphEditor/BasicKeyframedTrack/KeyframeEditor/GraphEditorDotScalar.tsx"(){I(),VD(),Fg(),jg(),iU=k(n(771)),oU=k(nf()),mg(),jE(),jE(),$x(),gg(),Qg(),xB(),Uw(),aU=Am.circle`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`,sU=Am.circle`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  ${Ix};

  &:hover + ${aU} {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: move;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(${sg});
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`,lU=e=>{const[t,n]=Ig(null),{index:r,trackData:i}=e,o=i.keyframes[r],[a]=function(e,t){return MO(e,{menuItems:()=>[{label:"Delete",callback:()=>{T().transaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.deleteKeyframes(b(y({},t.sheetObject.address),{keyframeIds:[t.keyframe.id],trackId:t.trackId}))}))}}]})}(n,e),s=kw(e.itemKey),l=o.value,c=e.extremumSpace.fromValueSpace(l),u=UN([{type:"primitiveProp",keyframe:e.keyframe,pathToProp:e.pathToProp,propConfig:e.propConfig,sheetObject:e.sheetObject,trackId:e.trackId}]),d=function(e){const[t,n]=(0,oU.useState)(!1);TE(t,e.props.keyframe.position);const r=(0,oU.useRef)(e.props);r.current=e.props;const i=(0,oU.useMemo)((()=>({debugName:"GraphEditorDotScalar/useDragKeyframe",lockCSSCursorTo:"move",onDragStart(t){n(!0);const i=!!t.altKey,o=r.current,a=(0,iU.val)(o.layoutP.scaledSpace.toUnitSpace),s=(0,iU.val)(o.layoutP.graphEditorVerticalSpace.toExtremumSpace),l=o.extremumSpace.lock();let c;return{onDrag(e,t){const n=o.trackData.keyframes[o.index],r=a(e),l=s(-t),u=o.extremumSpace.deltaToValueSpace(l),d=[],h=b(y({},n),{position:n.position+r,value:n.value+u,handles:[...n.handles]});if(d.push(h),i){const e=o.trackData.keyframes[o.index-1];if(e&&Math.abs(n.value-e.value)>0){const t=b(y({},e),{handles:[...e.handles]});d.push(t),t.handles[3]=(p=e.handles[3],f=e.value,m=e.value,(n.value-f)*p/(h.value-m))}const t=o.trackData.keyframes[o.index+1];if(t&&Math.abs(n.value-t.value)>0){const e=b(y({},t),{handles:[...t.handles]});d.push(e),e.handles[1]=function(e,t,n,r,i){return((t-r)*e+r-t+n-i)/(n-i)}(e.handles[1],e.value,e.value,n.value,h.value)}}var p,f,m;null==c||c.discard(),c=T().tempTransaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.replaceKeyframes(b(y({},o.sheetObject.address),{trackId:o.trackId,keyframes:d,snappingFunction:(0,iU.val)(o.layoutP.sheet).getSequence().closestGridPosition}))}))},onDragEnd(r){n(!1),l(),r?null==c||c.commit():(null==c||c.discard(),e.onDetectedClick(t))}}}})),[]);return zg(e.node,i),dg(t,"draggingPositionInSequenceEditor","move"),t}({node:n,props:e,onDetectedClick:e=>u.toggle(e,e.target instanceof Element?e.target:n)});return oU.default.createElement(oU.default.Fragment,null,oU.default.createElement(sU,b(y(y(y({ref:t,style:{cx:`calc(var(--unitSpaceToScaledSpaceMultiplier) * ${o.position} * 1px)`,cy:`calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ${c}) * 1px)`}},CE(o.position)),Yg.includePositionSnapAttrs(o.position)),s.attrs),{className:d?"beingDragged":""})),oU.default.createElement(aU,{style:{cx:`calc(var(--unitSpaceToScaledSpaceMultiplier) * ${o.position} * 1px)`,cy:`calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ${c}) * 1px)`,fill:s.flag===xw.Primary?"white":void 0}}),u.node,a)}}}),jU=w({"studio/src/panels/SequenceEditorPanel/GraphEditor/BasicKeyframedTrack/KeyframeEditor/GraphEditorDotNonScalar.tsx"(){I(),VD(),Fg(),jg(),cU=k(n(771)),uU=k(nf()),mg(),jE(),jE(),$x(),gg(),Qg(),xB(),Uw(),dU=Am.circle`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`,hU=Am.circle`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  ${Ix};

  &:hover + ${dU} {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: ew-resize;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(${sg});
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`,pU=e=>{const[t,n]=Ig(null),{index:r,trackData:i,itemKey:o}=e,a=i.keyframes[r],[s]=function(e,t){return MO(e,{menuItems:()=>[{label:"Delete",callback:()=>{T().transaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.deleteKeyframes(b(y({},t.sheetObject.address),{keyframeIds:[t.keyframe.id],trackId:t.trackId}))}))}}]})}(n,e),l=kw(o),c="left"===e.which?0:1,u=UN([{type:"primitiveProp",keyframe:e.keyframe,pathToProp:e.pathToProp,propConfig:e.propConfig,sheetObject:e.sheetObject,trackId:e.trackId}]),d=function(e){const[t,n]=(0,uU.useState)(!1);TE(t,e.props.keyframe.position);const r=(0,uU.useRef)(e.props);r.current=e.props;const i=(0,uU.useMemo)((()=>({debugName:"GraphEditorDotNonScalar/useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(t){n(!0);const i=r.current,o=(0,cU.val)(i.layoutP.scaledSpace.toUnitSpace),a=i.extremumSpace.lock();let s;return{onDrag(e,t){const n=i.trackData.keyframes[i.index],r=o(e),a=[],l=b(y({},n),{position:n.position+r,value:n.value,handles:[...n.handles]});a.push(l),null==s||s.discard(),s=T().tempTransaction((({stateEditors:e})=>{e.coreByProject.historic.sheetsById.sequence.replaceKeyframes(b(y({},i.sheetObject.address),{trackId:i.trackId,keyframes:a,snappingFunction:(0,cU.val)(i.layoutP.sheet).getSequence().closestGridPosition}))}))},onDragEnd(r){n(!1),a(),r?null==s||s.commit():(null==s||s.discard(),e.onDetectedClick(t))}}}})),[]);return zg(e.node,i),dg(t,"draggingPositionInSequenceEditor","ew-resize"),t}({node:n,props:e,onDetectedClick:e=>u.toggle(e,e.target instanceof Element?e.target:n)}),h=e.extremumSpace.fromValueSpace(c);return uU.default.createElement(uU.default.Fragment,null,uU.default.createElement(hU,b(y(y(y({ref:t,style:{cx:`calc(var(--unitSpaceToScaledSpaceMultiplier) * ${a.position} * 1px)`,cy:`calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ${h}) * 1px)`}},l.attrs),CE(a.position)),Yg.includePositionSnapAttrs(a.position)),{className:d?"beingDragged":""})),uU.default.createElement(dU,{style:{cx:`calc(var(--unitSpaceToScaledSpaceMultiplier) * ${a.position} * 1px)`,cy:`calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ${h}) * 1px)`,fill:l.flag===xw.Primary?"white":void 0}}),u.node,s)}}}),zU=w({"studio/src/panels/SequenceEditorPanel/GraphEditor/BasicKeyframedTrack/KeyframeEditor/GraphEditorNonScalarDash.tsx"(){fU=k(nf()),mg(),OU(),mU=Am.path`
  stroke-width: 2;
  stroke: var(--main-color);
  stroke-dasharray: 3 2;
  fill: none;
  vector-effect: non-scaling-stroke;
  opacity: 0.3;
`,gU=e=>{const{index:t,trackData:n}=e,r=ZF(n.keyframes[t].position,e.extremumSpace.fromValueSpace(0),0,e.extremumSpace.fromValueSpace(1)-e.extremumSpace.fromValueSpace(0));return fU.default.createElement(fU.default.Fragment,null,fU.default.createElement(mU,{d:"M 0 0 L 1 1",style:{transform:r}}))}}}),NU=w({"studio/src/panels/SequenceEditorPanel/GraphEditor/BasicKeyframedTrack/KeyframeEditor/KeyframeEditor.tsx"(){vU=k(nf()),mg(),OU(),DU(),LU(),jU(),zU(),yU=Am.g`
  /* position: absolute; */
`,bU=vU.default.createElement(vU.default.Fragment,null),xU=e=>{const{index:t,trackData:n,isScalar:r}=e,i=n.keyframes[t],o=n.keyframes[t+1],a=i.connectedRight&&!!o&&o.value!==i.value;return vU.default.createElement(yU,null,a?vU.default.createElement(vU.default.Fragment,null,vU.default.createElement(GF,y({},e)),!i.type||"bezier"===i.type&&vU.default.createElement(vU.default.Fragment,null,vU.default.createElement(rU,b(y({},e),{which:"left"})),vU.default.createElement(rU,b(y({},e),{which:"right"})))):bU,r?vU.default.createElement(lU,y({},e)):vU.default.createElement(vU.default.Fragment,null,vU.default.createElement(pU,b(y({},e),{which:"left"})),vU.default.createElement(pU,b(y({},e),{which:"right"})),vU.default.createElement(gU,y({},e))))}}}),BU=w({"studio/src/panels/SequenceEditorPanel/GraphEditor/BasicKeyframedTrack/BasicKeyframedTrack.tsx"(){jp(),_U=k(nf()),UU(),NU(),dw(),pf(),wU=_U.default.memo((({layoutP:e,trackData:t,sheetObject:n,trackId:r,color:i,pathToProp:o})=>{const a=Q_(Wp(n.template.configPointer),o);if(J_(a))return console.error("Composite prop types cannot be keyframed"),_U.default.createElement(_U.default.Fragment,null);const[s,l]=(0,_U.useState)(!1),c=(0,_U.useMemo)((()=>{const e=new Set;return function(){const t=0===e.size;function n(){const t=e.size>0;e.delete(n),t&&0===e.size&&l(!1)}return e.add(n),t&&l(!0),n}}),[]),u=(0,_U.useMemo)((()=>{const e="number"===a.type?function(e,t){let n=1/0,r=-1/0;function i(e){n=Math.min(e,n),r=Math.max(e,r)}return e.forEach(((n,r)=>{const o=ew(n.value,t);if(i(o),!n.connectedRight)return;const a=e[r+1];if(!a)return;const s=("number"==typeof a.value?a.value:1)-o;i(o+n.handles[3]*s),i(o+a.handles[1]*s)})),[n,r]}(t.keyframes,a):function(e){let t=0,n=1;function r(e){t=Math.min(e,t),n=Math.max(e,n)}return e.forEach(((t,n)=>{if(!t.connectedRight)return;const i=e[n+1];i&&(r(t.handles[3]),r(i.handles[1]))})),[t,n]}(t.keyframes),n=t=>t*(e[1]-e[0]);return{fromValueSpace:t=>(t-e[0])/(e[1]-e[0]),toValueSpace:t=>e[0]+n(t),deltaToValueSpace:n,lock:c}}),[t.keyframes]),d=(0,_U.useRef)(void 0);s||(d.current=u);const h=t.keyframes.map(((s,l)=>_U.default.createElement(xU,{pathToProp:o,propConfig:a,itemKey:Rp.forTrackKeyframe(n,r,s.id),keyframe:s,index:l,trackData:t,layoutP:e,sheetObject:n,trackId:r,isScalar:"number"===a.type,key:s.id,extremumSpace:d.current,color:i})));return _U.default.createElement("g",{style:{"--main-color":CU[i].iconColor}},h)})),SU=wU}}),FU=w({"studio/src/panels/SequenceEditorPanel/GraphEditor/PrimitivePropGraph.tsx"(){I(),pf(),EU=k(n(771)),kU=k(nf()),BU(),MU=e=>uf((()=>{const{sheetObject:t,trackId:n}=e,r=(0,EU.val)(T().atomP.historic.coreByProject[t.address.projectId].sheetsById[t.address.sheetId].sequence.tracksByObject[t.address.objectKey].trackData[n]);return"BasicKeyframedTrack"!==(null==r?void 0:r.type)?(console.error(`trackData type ${null==r?void 0:r.type} is not yet supported on the graph editor`),kU.default.createElement(kU.default.Fragment,null)):kU.default.createElement(SU,b(y({},e),{trackData:r}))}),[e.trackId,e.layoutP])}}),UU=w({"studio/src/panels/SequenceEditorPanel/GraphEditor/GraphEditor.tsx"(){I(),ct(),Jp(),pf(),PU=k(n(771)),TU=k(nf()),mg(),YF(),Az(),FU(),tE(),Ty(),CU={1:{iconColor:"#b98b08"},2:{iconColor:"#70a904"},3:{iconColor:"#2e928a"},4:{iconColor:"#a943bb"},5:{iconColor:"#b90808"},6:{iconColor:"#b4bf0e"}},AU=Am.div`
  position: absolute;
  right: 0;
  bottom: 0;
  background: ${ty(.03,"#1a1c1e")};
`,IU=Am.svg`
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  pointer-events: none;
`,RU=({layoutP:e})=>uf((()=>{const t=(0,PU.val)(e.sheet),n=(0,PU.val)(T().atomP.historic.projects.stateByProjectId[t.address.projectId].stateBySheetId[t.address.sheetId].sequenceEditor.selectedPropsByObject),r=(0,PU.val)(e.graphEditorDims.height),i=(0,PU.val)(e.scaledSpace.fromUnitSpace)(1),o=[];if(n)for(const[r,i]of Object.entries(n)){const n=t.getObject(r);if(!n)continue;const a=(0,PU.val)(n.template.getMapOfValidSequenceTracks_forStudio());for(const[t,s]of Object.entries(i)){const i=Ke(t),l=zp(a,i);l&&o.push(TU.default.createElement(MU,{key:`graph-${r}-${t}`,sheetObject:n,pathToProp:i,layoutP:e,trackId:l,color:s}))}}const a=(0,PU.val)(e.rightDims.width);return TU.default.createElement(AU,{style:{width:a+"px",height:r+"px","--unitSpaceToScaledSpaceMultiplier":i,"--graphEditorVerticalSpace":`${(0,PU.val)(e.graphEditorVerticalSpace.space)}`}},TU.default.createElement(RS,{layoutP:e,width:a,height:r}),TU.default.createElement(Xj,{layoutP:e,height:r},TU.default.createElement(IU,{width:FF,height:r,viewBox:`0 0 ${FF} ${r}`},TU.default.createElement("g",{style:{transform:`translate(${(0,PU.val)(e.scaledSpace.leftPadding)}px, ${(0,PU.val)(e.graphEditorDims.padding.top)}px)`}},o))))}),[e])}});function VU(e,t){return e.length<=t?e:e.substr(0,t-3)+"..."}var HU,WU,GU,$U,qU,KU,XU,YU,ZU,JU,QU,eV,tV,nV,rV=w({"shared/src/utils/ellipsify.ts"(){}}),iV=w({"shared/src/utils/userReadableTypeOfValue.ts"(){rV(),HU=e=>"string"==typeof e?`string("${VU(e,10)}")`:"number"==typeof e?`number(${VU(String(e),10)})`:null===e?"null":void 0===e?"undefined":"boolean"==typeof e?String(e):Array.isArray(e)?"array":"object"==typeof e?"object":"unknown"}}),oV=w({"studio/src/panels/OutlinePanel/BaseItem.tsx"(){WU=k(nf()),mg(),Cg(),$x(),_C(),GU=Am.li`
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;
  align-items: flex-start;
`,$U=Am.div``,qU=Am($U)`
  position: relative;
  margin-top: 2px;
  margin-bottom: 2px;
  margin-left: calc(4px + var(--depth) * 16px);
  padding-left: 4px;
  padding-right: 8px;
  gap: 4px;
  height: 21px;
  line-height: 0;
  box-sizing: border-box;
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  pointer-events: none;
  white-space: nowrap;

  border-radius: 2px;
  box-shadow: 0 3px 4px -1px rgba(0, 0, 0, 0.48);

  color: rgba(255, 255, 255, 0.9);
  background: rgba(40, 43, 47, 0.65);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);

  &.descendant-is-selected {
    background: rgba(29, 53, 59, 0.7);
  }

  ${Ix};
  &:not(.not-selectable):not(.selected):hover {
    background: rgba(59, 63, 69, 0.9);

    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &:not(.not-selectable):not(.selected):active {
    background: rgba(82, 88, 96, 0.9);
    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &.selected {
    background: rgba(30, 88, 102, 0.7);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`,KU=Qm`
  font-weight: 500;
  font-size: 11px;
  & {
  }
`,XU=Am.span`
  ${KU};

  ${Ix};
  position: relative;
  // Compensate for border bottom
  top: 0.5px;
  display: flex;
  height: 20px;
  align-items: center;
  box-sizing: border-box;
`,YU=Am.div`
  font-weight: 500;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  opacity: 0.99;
`,ZU=Am.span`
  font-size: 9px;
  position: relative;
  display: block;
  transition: transform 0.1s ease-out;

  &:hover {
    transform: rotate(-20deg);
  }

  ${GU}.collapsed & {
    transform: rotate(-90deg);

    &:hover {
      transform: rotate(-70deg);
    }
  }
`,JU=Am.ul`
  margin: 0;
  padding: 0;
  list-style: none;

  ${GU}.collapsed & {
    display: none;
  }
`,QU=({label:e,children:t,depth:n,select:r,selectionStatus:i,labelDecoration:o,collapsed:a=!1,setIsCollapsed:s})=>{const l=void 0!==t;return WU.default.createElement(GU,{style:{"--depth":n},className:a?"collapsed":""},WU.default.createElement(qU,{className:i,onClick:null!=r?r:kg,"data-header":!0},WU.default.createElement(YU,null,l?WU.default.createElement(ZU,{onClick:e=>{e.stopPropagation(),e.preventDefault(),null==s||s(!a)}},WU.default.createElement(HT,null)):WU.default.createElement(tC,null)),WU.default.createElement(XU,null,WU.default.createElement("span",null,e)),o),l&&WU.default.createElement(JU,null,t))}}}),aV=w({"studio/src/panels/OutlinePanel/ObjectsList/ObjectItem.tsx"(){I(),eV=k(nf()),oV(),pf(),xv(),tV=({sheetObject:e,depth:t,overrideLabel:n})=>{const r=uf((()=>fv()),[]);return eV.default.createElement(QU,{select:()=>{T().transaction((({stateEditors:t})=>{t.studio.historic.panels.outline.selection.set([e])}))},label:null!=n?n:e.address.objectKey,depth:t,selectionStatus:r.includes(e)?"selected":"not-selected"})}}});function sV(e){var t;const n="namespace"===e.type?`namespace:${e.sheet.address.sheetId}:${e.path.join("/")}`:"Theatre_Project"===e.type?"project":"Theatre_Sheet"===e.type?`sheetInstance:${e.address.sheetId}:${e.address.sheetInstanceId}`:"unknown",r="namespace"===e.type?e.sheet.address.projectId:e.address.projectId;return{collapsed:null!=(t=Wp(T().atomP.ahistoric.projects.stateByProjectId[r].collapsedItemsInOutline[n]))&&t,setCollapsed:(0,nV.useCallback)((e=>{T().transaction((({stateEditors:t})=>{t.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline.set({projectId:r,isCollapsed:e,itemKey:n})}))}),[n])}}var lV,cV,uV,dV,hV,pV=w({"studio/src/panels/OutlinePanel/outlinePanelUtils.ts"(){nV=k(nf()),I(),pf()}});function fV(e){return cV.default.createElement(cV.default.Fragment,null,[...e.namespace.entries()].map((([t,{object:n,nested:r}])=>cV.default.createElement(mV,{key:t,label:t,object:n,nested:r,visualIndentation:e.visualIndentation,path:e.path,sheet:e.sheet}))))}function mV(e){const{nested:t,label:n,object:r,sheet:i}=e,{collapsed:o,setCollapsed:a}=sV({type:"namespace",sheet:i,path:e.path}),s=t&&cV.default.createElement(fV,{namespace:t,path:[...e.path,n],key:"namespaceTree("+n+")",visualIndentation:e.visualIndentation+1,sheet:i}),l=r&&cV.default.createElement(tV,{depth:e.visualIndentation,key:"objectPath("+r.address.objectKey+")",sheetObject:r,overrideLabel:n});return cV.default.createElement(cV.default.Fragment,{key:`${n} - ${e.visualIndentation}`},l,s&&cV.default.createElement(QU,{selectionStatus:"not-selectable",label:n,key:`baseItem(${n})`,depth:e.visualIndentation,children:s,collapsed:o,setIsCollapsed:a}))}function gV(e,t,n=function(e){let t=hV.get(e);return t||(t=e.address.objectKey.split(dV),console.assert(t.length>0,"expected not empty"),hV.set(e,t)),t}(t)){const[r,...i]=n;let o=e.get(r);o||(o={nested:void 0,object:void 0,path:[...n]},e.set(r,o)),0===i.length?(console.assert(!o.object,"expect not to have existing object with same name",{existing:o,object:t}),o.object=t):(o.nested||(o.nested=new Map),gV(o.nested,t,i))}var vV,yV,bV,xV,_V,wV,SV,EV,kV,MV,PV,TV,CV,AV,IV,RV,OV,DV,LV,jV,zV,NV,BV,FV,UV,VV,HV,WV,GV,$V,qV,KV,XV,YV,ZV,JV,QV,eH,tH,nH,rH,iH,oH,aH,sH,lH,cH,uH,dH,hH,pH,fH,mH,gH,vH,yH=w({"studio/src/panels/OutlinePanel/ObjectsList/ObjectsList.tsx"(){pf(),lV=k(n(771)),cV=k(nf()),mg(),aV(),oV(),pV(),Am.li`
  color: ${e=>e.isSelected?"white":"hsl(1, 1%, 80%)"};
`,uV=({sheet:e,depth:t})=>uf((()=>{const n=(0,lV.val)(e.objectsP),r=Object.values(n).filter((e=>null!=e)),i=new Map;return r.forEach((e=>{gV(i,e)})),cV.default.createElement(fV,{namespace:i,visualIndentation:t,path:[],sheet:e})}),[e,t]),dV=/\s*\/\s*/g,hV=new WeakMap}}),bH=w({"studio/src/panels/OutlinePanel/SheetsList/SheetInstanceItem.tsx"(){I(),xv(),pf(),vV=k(nf()),mg(),yH(),oV(),pV(),yV=Am.div`
  display: flex;
`,Am.li`
  color: ${e=>e.isSelected?"white":"hsl(1, 1%, 80%)"};
`,bV=Am.div``,xV=({sheet:e,depth:t})=>{const{collapsed:n,setCollapsed:r}=sV(e),i=(0,vV.useCallback)((()=>{T().transaction((({stateEditors:t})=>{t.studio.historic.panels.outline.selection.set([e])}))}),[e]);return uf((()=>{const o=fv();return vV.default.createElement(QU,{depth:t,select:i,setIsCollapsed:r,collapsed:n,selectionStatus:o.some((t=>t===e))?"selected":o.some((t=>"Theatre_SheetObject"===t.type&&t.sheet===e))?"descendant-is-selected":"not-selected",label:vV.default.createElement(yV,null,e.address.sheetId,": ",e.address.sheetInstanceId)},vV.default.createElement(bV,null,vV.default.createElement(uV,{depth:t+1,sheet:e,key:"objectList"+e.address.sheetInstanceId})))}),[t,n])}}}),xH=w({"studio/src/panels/OutlinePanel/SheetsList/SheetItem.tsx"(){pf(),_V=k(n(771)),wV=k(nf()),mg(),bH(),Am.div`
  display: flex;
`,Am.li`
  color: ${e=>e.isSelected?"white":"hsl(1, 1%, 80%)"};
`,Am.div``,SV=({sheetId:e,depth:t,project:n})=>uf((()=>{const r=(0,_V.val)(n.sheetTemplatesP[e]);if(!r)return wV.default.createElement(wV.default.Fragment,null);const i=(0,_V.val)(r.instancesP);return wV.default.createElement(wV.default.Fragment,null,Object.entries(i).map((([e,n])=>wV.default.createElement(xV,{key:n.address.sheetInstanceId,sheet:n,depth:t}))))}),[t,e,n])}}),_H=w({"studio/src/panels/OutlinePanel/SheetsList/SheetsList.tsx"(){xv(),pf(),EV=k(nf()),xH(),kV=({project:e,depth:t})=>uf((()=>{if(!e)return null;const n=function(e){return Object.keys((0,pv.val)(e.sheetTemplatesP))}(e);return EV.default.createElement(EV.default.Fragment,null,n.map((n=>EV.default.createElement(SV,{depth:t,sheetId:n,key:`sheet-${n}`,project:e}))))}),[e,t])}}),wH=w({"studio/src/panels/OutlinePanel/ProjectsList/ProjectListItem.tsx"(){MV=k(nf()),oV(),_H(),I(),pf(),xv(),PV=k(n(771)),mg(),pV(),TV=Am.div`
  color: #ff6363;
  margin-left: 11px;
  background: #4c282d;
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 10px;
  box-shadow: 0 2px 8px -4px black;
`,CV=({depth:e,project:t})=>{const n=uf((()=>fv()),[]),r=uf((()=>{const e=t.address.projectId,n=(0,PV.val)(T().atomP.ephemeral.coreByProject[e].loadingState);return"browserStateIsNotBasedOnDiskState"===(null==n?void 0:n.type)}),[t]),i=(0,MV.useCallback)((()=>{T().transaction((({stateEditors:e})=>{e.studio.historic.panels.outline.selection.set([t])}))}),[t]),{collapsed:o,setCollapsed:a}=sV(t);return MV.default.createElement(QU,{depth:e,label:t.address.projectId,setIsCollapsed:a,collapsed:o,labelDecoration:r?MV.default.createElement(TV,null,"Has Conflicts"):null,children:MV.default.createElement(kV,{project:t,depth:e+1}),selectionStatus:n.includes(t)?"selected":n.some((e=>e.address.projectId===t.address.projectId))?"descendant-is-selected":"not-selected",select:i})}}}),SH=w({"studio/src/panels/OutlinePanel/ProjectsList/ProjectsList.tsx"(){AV=k(n(771)),pf(),I(),IV=k(nf()),mg(),wH(),RV=Am.ul`
  list-style: none;
  margin: 0;
  padding: 0;
  padding-right: 4px;
`,OV=e=>uf((()=>{const e=(0,AV.val)(T().projectsP);return IV.default.createElement(RV,null,Object.keys(e).map((t=>{const n=e[t];return IV.default.createElement(CV,{depth:0,project:n,key:`projectListItem-${t}`})})))}),[])}}),EH=w({"studio/src/panels/OutlinePanel/OutlinePanel.tsx"(){DV=k(nf()),mg(),oE(),SH(),pf(),I(),SO(),LV=k(n(771)),$x(),jV="44px",zV=Am.div`
  ${Ix};
  background-color: transparent;
  position: absolute;
  left: 8px;
  z-index: ${FS.outlinePanel};

  top: calc(${jV} + 8px);
  height: fit-content;
  max-height: calc(100% - ${jV});
  overflow-y: scroll;
  overflow-x: hidden;
  padding: 0;
  user-select: none;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;

  display: ${({pin:e})=>e?"block":"none"};

  &:hover {
    display: block;
  }

  // Create a small buffer on the bottom to aid selecting the bottom item in a long, scrolling list
  &::after {
    content: '';
    display: block;
    height: 20px;
  }
`,NV=()=>{var e;const t=null==(e=Wp(T().atomP.ahistoric.pinOutline))||e,n=Wp(UV),r=rO("left");return(0,DV.useLayoutEffect)((()=>{BV.set(r)}),[r]),(0,DV.useEffect)((()=>()=>{FV.set(!1),BV.set(!1)}),[]),DV.default.createElement(zV,{pin:t||n,onMouseEnter:()=>{FV.set(!0)},onMouseLeave:()=>{FV.set(!1)}},DV.default.createElement(OV,null))},BV=new LV.Atom(!1),FV=new LV.Atom(!1),UV=(0,LV.prism)((()=>{const e=(0,LV.val)(FV.prism),t=(0,LV.val)(BV.prism);return e||t}))}}),kH=S({"../node_modules/react-error-boundary/dist/react-error-boundary.umd.js"(a,s){var l;l=function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var r=n(t);function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var o={error:null},a=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state=o,t.updatedWithError=!1,t.resetErrorBoundary=function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null==t.props.onReset||(e=t.props).onReset.apply(e,r),t.reset()},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.getDerivedStateFromError=function(e){return{error:e}};var s=a.prototype;return s.reset=function(){this.updatedWithError=!1,this.setState(o)},s.componentDidCatch=function(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,t)},s.componentDidMount=function(){null!==this.state.error&&(this.updatedWithError=!0)},s.componentDidUpdate=function(e){var t,n,r,i,o=this.state.error,a=this.props.resetKeys;null===o||this.updatedWithError?null!==o&&(void 0===(r=e.resetKeys)&&(r=[]),void 0===(i=a)&&(i=[]),r.length!==i.length||r.some((function(e,t){return!Object.is(e,i[t])})))&&(null==(t=(n=this.props).onResetKeysChange)||t.call(n,e.resetKeys,a),this.reset()):this.updatedWithError=!0},s.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,i=t.FallbackComponent,o=t.fallback;if(null!==e){var a={error:e,resetErrorBoundary:this.resetErrorBoundary};if(r.isValidElement(o))return o;if("function"==typeof n)return n(a);if(i)return r.createElement(i,a);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},a}(r.Component);e.ErrorBoundary=a,e.useErrorHandler=function(e){var t=r.useState(null),n=t[0],i=t[1];if(null!=e)throw e;if(null!=n)throw n;return i},e.withErrorBoundary=function(e,t){var n=function(n){return r.createElement(a,t,r.createElement(e,n))},i=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary("+i+")",n},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof a&&void 0!==s?l(a,nf()):(i=[t,n(294)],void 0===(o="function"==typeof(r=l)?r.apply(t,i):r)||(e.exports=o))}}),MH=w({"studio/src/panels/BasePanel/ExtensionPaneWrapper.tsx"(){VV=k(nf()),mg(),oE(),lk(),rz(),az(),HV=k(kH()),T_(),I(),oE(),WV={edges:{left:{from:"screenLeft",distance:.3},right:{from:"screenRight",distance:.3},top:{from:"screenTop",distance:.3},bottom:{from:"screenBottom",distance:.3}}},GV={width:300,height:300},$V=({paneInstance:e})=>VV.default.createElement(QE,{panelId:`pane-${e.instanceId}`,defaultPosition:WV,minDims:GV},VV.default.createElement(eH,{paneInstance:e})),qV=Am(wj)`
  display: flex;
  flex-direction: column;

  box-shadow: 0px 5px 12px -4px rgb(0 0 0 / 22%);
  z-index: ${FS.pluginPanes};
`,KV=Am.div`
  width: 100%;
`,XV=Am.div`
  display: flex;
  align-items: center;
  opacity: 1;
  position: absolute;
  right: 4px;
  top: 0;
  bottom: 0;
`,YV=Am.button`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  font-size: 11px;
  height: 10px;
  width: 18px;
  color: #adadadb3;
  background: transparent;
  border: none;
  cursor: pointer;
  &:hover {
    color: white;
  }
`,ZV=Am(WS)`
  position: relative;
  overflow: hidden;

  &:after {
    z-index: 10;
    position: absolute;
    inset: 0;
    display: block;
    content: ' ';
    pointer-events: none;

    #pointer-root:not(.normal) & {
      pointer-events: auto;
    }
  }
`,JV=Am.div`
  padding: 12px;

  & > pre {
    border: 1px solid #ff62624f;
    background-color: rgb(255 0 0 / 5%);
    margin: 8px 0;
    padding: 8px;
    font-family: monospace;
    overflow: scroll;
    color: #ff9896;
  }
`,QV=e=>VV.default.createElement(JV,null,"An Error occured rendering this pane. Open the console for more info.",VV.default.createElement("pre",null,JSON.stringify({message:e.error.message,stack:e.error.stack},null,2))),eH=({paneInstance:e})=>{const[t,n]=(0,VV.useState)(null),r=e.definition.mount;(0,VV.useLayoutEffect)((()=>{if(!t)return;const n=r({paneId:e.instanceId,node:t});return"function"==typeof n?n:void 0}),[t,r,e.instanceId]);const i=(0,VV.useCallback)((()=>{T().paneManager.destroyPane(e.instanceId)}),[e]);return VV.default.createElement(qV,null,VV.default.createElement(QL,null,VV.default.createElement($S,null,VV.default.createElement(XV,null,VV.default.createElement(YV,{onClick:i,title:"Close Pane"},VV.default.createElement(n_,null))),VV.default.createElement(KV,null,e.instanceId))),VV.default.createElement(HV.ErrorBoundary,{FallbackComponent:QV},VV.default.createElement(ZV,{ref:n})))},tH=$V}}),PH=w({"studio/src/UIRoot/PanelsRoot.tsx"(){EH(),kO(),nH=k(nf()),I(),pf(),MH(),lz(),rH=()=>{const e=Wp(T().paneManager.allPanesD),t=Object.entries(e).map((([e,t])=>nH.default.createElement(tH,{key:`pane-${e}`,paneInstance:t})));return nH.default.createElement(nH.default.Fragment,null,t,nH.default.createElement(NV,null),nH.default.createElement(yO,null),nH.default.createElement(Nj,null))}}}),TH=w({"studio/src/uiComponents/Popover/ErrorTooltip.tsx"(){mg(),tR(),iH=Am(tI)`
  --popover-outer-stroke: #e11c1c;
  --popover-inner-stroke: #2c1c1c;
  --popover-bg: #2c1c1c;
  pointer-events: none !important;
`,oH=iH}}),CH=S({"../node_modules/levenshtein-edit-distance/index.js"(e,t){var n,r;n=[],r=[],t.exports=function(e,t,i){var o,a,s,l,c,u,d,h;if(e===t)return 0;if(o=e.length,a=t.length,0===o)return a;if(0===a)return o;for(i&&(e=e.toLowerCase(),t=t.toLowerCase()),d=0;d<o;)r[d]=e.charCodeAt(d),n[d]=++d;for(h=0;h<a;)for(s=t.charCodeAt(h),l=c=h++,d=-1;++d<o;)u=s===r[d]?c:c+1,c=n[d],n[d]=l=c>l?u>l?l+1:u:u>c?c+1:u;return l}}}),AH=S({"../node_modules/propose/propose.js"(e,t){var n=CH();t.exports=function(){var e,t,r,i,o,a=0,s=arguments[0],l=arguments[1],c=l.length,u=arguments[2];u&&(i=u.threshold,o=u.ignoreCase),void 0===i&&(i=0);for(var d=0;d<c;++d)(e=(t=o?n(s,l[d],!0):n(s,l[d]))>s.length?1-t/l[d].length:1-t/s.length)>a&&(a=e,r=l[d]);return a>=i?r:null}}}),IH=w({"shared/src/utils/didYouMean.ts"(){aH=k(AH())}}),RH=w({"studio/src/uiComponents/toolbar/ToolbarSwitchSelectContainer.ts"(){mg(),Gx(),sH=Am(yx)`
  display: flex;
  height: fit-content;
  backdrop-filter: blur(14px);
  border-radius: 2px;
`,lH=sH}}),OH=w({"studio/src/uiComponents/toolbar/ToolbarIconButton.tsx"(){mg(),$x(),cH=k(nf()),eR(),$k(),WR(),RH(),uH=Am.button`
  ${Ix};
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  width: 32px;
  height: 32px;
  outline: none;

  color: #a8a8a9;

  background: rgba(40, 43, 47, 0.8);
  backdrop-filter: blur(14px);
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 2px;

  svg {
    display: block;
  }

  &:hover {
    background: rgba(59, 63, 69, 0.8);
  }

  &:active {
    background: rgba(82, 88, 96, 0.8);
  }

  &.selected {
    color: rgba(255, 255, 255, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.7);
  }

  // Don't blur if in a button group, because it already blurs. We need to blur
  // on the group-level, otherwise we get seams.
  ${lH} > & {
    backdrop-filter: none;
    filter: none;
    border-radius: 0;

    &:first-child {
      border-top-left-radius: 2px;
      border-bottom-left-radius: 2px;
    }

    &:last-child {
      border-bottom-right-radius: 2px;
      border-top-right-radius: 2px;
    }
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`,dH=cH.default.forwardRef(((e,t)=>{var n=e,{title:r}=n,i=_(n,["title"]);const[o,a]=QA({enabled:"string"==typeof r},(()=>cH.default.createElement(xR,null,r)));return cH.default.createElement(cH.default.Fragment,null,o,cH.default.createElement(uH,y({ref:Vk([a,t])},i))," ")})),hH=dH}}),DH=w({"studio/src/toolbars/ExtensionToolbar/tools/IconButton.tsx"(){pH=k(nf()),OH(),mg(),$x(),fH=Am(hH)`
  ${Ix};
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`,mH=({config:e})=>{var t;return pH.default.createElement(fH,{onClick:e.onClick,title:e.title,dangerouslySetInnerHTML:{__html:null!=(t=e.svgSource)?t:""}})}}});function LH({value:e,label:t,icon:n,onClick:r,isSelected:i}){return gH.default.createElement(gH.default.Fragment,null,gH.default.createElement(hH,{forwardedAs:gx,className:i?"selected":void 0,"aria-label":t,onClick:r,title:t},n))}var jH,zH,NH,BH,FH,UH,VH,HH,WH,GH,$H,qH,KH,XH,YH,ZH,JH,QH,eW,tW,nW,rW,iW,oW=w({"studio/src/uiComponents/toolbar/ToolbarSwitchSelect.tsx"(){gH=k(nf()),Gx(),OH(),RH(),vH=({value:e,onChange:t,options:n})=>gH.default.createElement(lH,null,n.map((({label:n,icon:r,value:i})=>gH.default.createElement(LH,{key:i,value:i,isSelected:e===i,label:n,icon:r,onClick:()=>t(i)}))))}}),aW=w({"studio/src/toolbars/ExtensionToolbar/tools/Switch.tsx"(){jH=k(nf()),mg(),$x(),oW(),zH=Am.div`
  ${Ix};
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`,NH=({config:e})=>jH.default.createElement(vH,{onChange:e.onChange,options:e.options.map((({label:e,value:t,svgSource:n})=>({label:e,value:t,icon:jH.default.createElement(zH,{dangerouslySetInnerHTML:{__html:n}})}))),value:e.value})}}),sW=w({"studio/src/toolbars/ExtensionToolbar/tools/ExtensionFlyoutMenu.tsx"(){BH=k(nf()),mg(),$x(),OH(),zk(),DT(),FH=Am.div`
  ${Ix};
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`,UH=({config:e})=>{const t=(0,BH.useRef)(null),n=pT((()=>{const n=t.current.getBoundingClientRect();return{debugName:"ExtensionFlyoutMenu:"+e.label,constraints:{maxX:n.right,maxY:8,minX:n.left,minY:8},verticalGap:2}}),(()=>BH.default.createElement(_k,{items:e.items.map(((e,t)=>({label:e.label,callback:()=>{var t;try{null==(t=e.onClick)||t.call(e)}catch(e){console.error(e)}}}))),onRequestClose:()=>{n.close("clicked")}})));return BH.default.createElement(FH,null,n.node,BH.default.createElement(hH,{ref:t,onClick:e=>{n.open(e,t.current)}},e.label))}}}),lW=w({"studio/src/toolbars/ExtensionToolbar/Toolset.tsx"(){IH(),iV(),VH=k(nf()),DH(),aW(),sW(),HH=e=>VH.default.createElement(VH.default.Fragment,null,e.config.map(((e,t)=>VH.default.createElement(GH,{config:e,key:t})))),WH={Icon:mH,Switch:NH,Flyout:UH},GH=({config:e})=>{const t=(n=e.type,WH[n]);var n;if(!t)throw new Error(`No tool with tool.type ${HU(e.type)} exists. Did you mean ${function(e,t,n="Did you mean ",r="?"){const i=(0,aH.default)(e,t,{threshold:.7});return i?n+JSON.stringify(i)+r:""}(e.type,Object.keys(WH))}`);return VH.default.createElement(t,{config:e})},$H=HH}}),cW=w({"studio/src/toolbars/ExtensionToolbar/ExtensionToolbar.tsx"(){qH=k(n(771)),pf(),I(),KH=k(nf()),mg(),lW(),XH=Am.div`
  height: 36px;
  /* pointer-events: none; */

  display: flex;
  gap: 0.5rem;
  justify-content: center;
`,YH=Am.div`
  position: abolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`,ZH=({extension:e,toolbarId:t})=>{const n=(0,KH.useMemo)((()=>new qH.Atom([])),[]);(0,KH.useLayoutEffect)((()=>{var r,i;const o=null==(i=null==(r=e.toolbars)?void 0:r[t])?void 0:i.call(r,n.set.bind(n),T().publicApi);if("function"==typeof o)return o}),[e,t]);const r=Wp(n.prism);return KH.default.createElement($H,{config:r})},JH=({toolbarId:e,showLeftDivider:t})=>{var n;const r=[],i=Wp(T().atomP.ephemeral.extensions.byId);let o=!1;for(const[,t]of Object.entries(i))t&&(null==(n=t.toolbars)?void 0:n[e])&&(r.push(KH.default.createElement(KH.default.Fragment,{key:"extensionToolbar-"+t.id},o?KH.default.createElement(YH,null):void 0,KH.default.createElement(ZH,{extension:t,toolbarId:e}))),o=!0);return 0===r.length?null:KH.default.createElement(XH,null,t?KH.default.createElement(YH,null):void 0,r)}}}),uW=w({"studio/src/toolbars/PinButton.tsx"(){mg(),QH=k(nf()),OH(),eW=Am(hH)`
  color: ${({pinned:e})=>e?"rgba(255, 255, 255, 0.8)":"#A8A8A9"};

  border-bottom: 1px solid
    ${({pinned:e})=>e?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.08)"};
`,tW=(0,QH.forwardRef)(((e,t)=>{var n=e,{children:r,hint:i,pinned:o,icon:a,pinHintIcon:s,unpinHintIcon:l}=n,c=_(n,["children","hint","pinned","icon","pinHintIcon","unpinHintIcon"]);const[u,d]=(0,QH.useState)(!1),h=u||i;return QH.default.createElement(eW,b(y({},c),{pinned:o,ref:t,onMouseOver:()=>d(!0),onMouseOut:()=>d(!1)}),QH.default.createElement("div",{style:{pointerEvents:"none",width:"fit-content",height:"fit-content",inset:0}},h&&!o?s:h&&o?l:a),r)})),nW=tW}});function dW(e){return rW.createElement("svg",y({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),rW.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.732 4.048l-.792-.792L7.2 8l4.74 4.744.792-.792L8.781 8l3.951-3.952zm-3.932 0l-.792-.792L3.268 8l4.74 4.744.792-.792L4.848 8 8.8 4.048z",fill:"currentColor"}))}var hW,pW,fW=w({"studio/src/uiComponents/icons/DoubleChevronLeft.tsx"(){rW=k(nf()),iW=dW}});function mW(e){return hW.createElement("svg",y({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),hW.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.694 3.765l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.951-3.951-3.951-3.952zm3.932 0l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.952-3.951-3.952-3.952z",fill:"currentColor"}))}var gW,vW,yW,bW,xW,_W,wW,SW,EW,kW,MW,PW,TW,CW,AW,IW,RW,OW,DW,LW,jW,zW,NW,BW,FW,UW,VW,HW,WW,GW,$W,qW,KW,XW,YW,ZW,JW,QW=w({"studio/src/uiComponents/icons/DoubleChevronRight.tsx"(){hW=k(nf()),pW=mW}}),eG=w({"studio/src/toolbars/MoreMenu/MoreMenu.tsx"(){pf(),I(),gW=k(nf()),mg(),vW=Am.div`
  width: 138px;
  border-radius: 2px;
  background-color: rgba(42, 45, 50, 0.9);
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  pointer-events: auto;
  // makes the edges of the item highlights match the rounded corners
  overflow: hidden;

  @supports not (backdrop-filter: blur()) {
    background-color: rgba(42, 45, 50, 0.98);
  }

  color: rgba(255, 255, 255, 0.9);

  & a {
    // Fix colors of links to not be default
    color: inherit;
  }
`,yW=Am.div`
  position: relative;
  padding: 0px 12px;
  font-weight: 400;
  font-size: 11px;
  height: 32px;
  text-decoration: none;
  user-select: none;
  display: flex;
  flex-direction: row;
  align-items: center;
  cursor: default;
`,bW=Am(yW)`
  &:before {
    position: absolute;
    display: block;
    content: ' ';
    inset: 3px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
    opacity: 0;
  }

  &.secondary {
    color: rgba(255, 255, 255, 0.5);
  }

  &:hover {
    /* background-color: #398995; */
    color: white !important;
    &:before {
      opacity: 1;
    }
  }
`,xW=Am(yW)`
  height: auto;
  min-height: 32px;
  padding-top: 12px;
  padding-bottom: 10px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  gap: 8px;
  color: rgba(255, 255, 255, 0.5);
`,_W=Am.div`
  font-weight: 600;
`,wW=Am.div`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`,SW=Am.div`
  margin-left: 2px;
`,EW=Am.div`
  height: 1px;
  margin: 0 2px;
  background: rgba(255, 255, 255, 0.02);
`,kW=Am.div`
  position: absolute;
  width: 8px;
  height: 8px;
  background: #40aaa4;
  right: 14px;
  top: 12px;
  border-radius: 50%;
`,PW=(MW="0.6.0").match(/^[^\-]+/)[0],TW=gW.default.forwardRef(((e,t)=>{const n=Wp(T().atomP.ahistoric.updateChecker.result.hasUpdates);return gW.default.createElement(vW,{ref:t},gW.default.createElement(bW,{as:"a",href:"https://www.theatrejs.com/docs/latest",className:"",target:"_blank"},"Docs"),gW.default.createElement(bW,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases",className:"",target:"_blank"},"Changelog"),gW.default.createElement(EW,null),gW.default.createElement(bW,{as:"a",href:"https://github.com/theatre-js/theatre",className:"",target:"_blank"},"Github"),gW.default.createElement(bW,{as:"a",href:"https://twitter.com/theatre_js",className:"",target:"_blank"},"Twitter"),gW.default.createElement(bW,{className:"",as:"a",href:"https://discord.gg/bm9f8F9Y9N",target:"_blank"},"Discord"),gW.default.createElement(EW,null),gW.default.createElement(xW,null,gW.default.createElement(_W,null,"Version"),gW.default.createElement(wW,null,gW.default.createElement(SW,null,MW," ",!0===n?"(outdated)":!1===n?"(latest)":""))),!0===n&&gW.default.createElement(gW.default.Fragment,null,gW.default.createElement(EW,null),gW.default.createElement(bW,{as:"a",href:`https://www.theatrejs.com/docs/latest/releases${encodeURIComponent(PW)}`,className:"",target:"_blank"},"Update",gW.default.createElement(kW,null)),gW.default.createElement(bW,{as:"a",href:`https://www.theatrejs.com/docs/latest/releases#${encodeURIComponent(PW)}`,className:"",target:"_blank"},"What's new?")))})),CW=TW}}),tG=w({"studio/src/toolbars/GlobalToolbar.tsx"(){pf(),I(),AW=k(nf()),mg(),eR(),TH(),tR(),IW=k(n(771)),cW(),uW(),_C(),fW(),QW(),OH(),DT(),eG(),GR(),RW=Am.div`
  height: 36px;
  pointer-events: none;

  display: flex;
  justify-content: space-between;
  padding: 12px;
`,OW=Am.div`
  color: white;
  width: 14px;
  height: 14px;
  background: #d00;
  border-radius: 4px;
  text-align: center;
  line-height: 14px;
  font-weight: 600;
  font-size: 8px;
  position: relative;
  left: -6px;
  top: -11px;
  margin-right: -14px;
  box-shadow: 0 4px 6px -4px #00000059;
`,DW=Am.div`
  display: flex;
  gap: 8px;
`,LW=Am.div`
  position: absolute;
  background: ${({type:e})=>"info"===e?"#40aaa4":"#f59e0b"};
  width: 6px;
  height: 6px;
  border-radius: 50%;
  right: -2px;
  top: -2px;
`,Am.div`
  position: absolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`,jW=!1,zW=()=>{var e,t,n;const r=uf((()=>{const e=(0,IW.val)(T().atomP.ephemeral.coreByProject);return Object.entries(e).map((([e,t])=>({projectId:e,state:t}))).filter((({state:e})=>"browserStateIsNotBasedOnDiskState"===e.loadingState.type))}),[]),[i,o]=QA({enabled:r.length>0,enterDelay:r.length>0?0:200},(()=>r.length>0?AW.default.createElement(oH,null,1===r.length?`There is a state conflict in project "${r[0].projectId}". Select the project in the outline below in order to fix it.`:`There are ${r.length} projects that have state conflicts. They are highlighted in the outline below. `):AW.default.createElement(tI,null,"Outline"))),a=null==(e=Wp(T().atomP.ahistoric.pinOutline))||e,s=null==(t=Wp(T().atomP.ahistoric.pinDetails))||t,l=!0===Wp(T().atomP.ahistoric.updateChecker.result.hasUpdates),c=pT((()=>{const e=u.current.getBoundingClientRect();return{debugName:"More Menu",constraints:{maxX:e.right,maxY:8,minX:e.left-140,minY:8},verticalGap:2}}),(()=>AW.default.createElement(CW,null))),u=(0,AW.useRef)(null),d=(0,AW.useMemo)((()=>(window.__IS_VISUAL_REGRESSION_TESTING&&(jW||(jW=!0,console.warn("Visual regression testing enabled, so we're showing the updates badge unconditionally"))),!(!l&&!window.__IS_VISUAL_REGRESSION_TESTING)||l)),[l]),{hasNotifications:h}=UR(),[p,f]=BR();return AW.default.createElement(RW,null,AW.default.createElement(DW,null,i,AW.default.createElement(nW,{ref:o,"data-testid":"OutlinePanel-TriggerButton",onClick:()=>{T().transaction((({stateEditors:e,drafts:t})=>{var n;e.studio.ahistoric.setPinOutline(!(null==(n=t.ahistoric.pinOutline)||n))}))},icon:AW.default.createElement(BT,null),pinHintIcon:AW.default.createElement(pW,null),unpinHintIcon:AW.default.createElement(iW,null),pinned:a}),r.length>0?AW.default.createElement(OW,null,r.length):null,AW.default.createElement(JH,{showLeftDivider:!0,toolbarId:"global"})),AW.default.createElement(DW,null,p,AW.default.createElement(nW,{ref:f,onClick:()=>{T().transaction((({stateEditors:e,drafts:t})=>{var n;e.studio.ahistoric.setPinNotifications(!(null!=(n=t.ahistoric.pinNotifications)&&n))}))},icon:AW.default.createElement(oC,null),pinHintIcon:AW.default.createElement(oC,null),unpinHintIcon:AW.default.createElement(oC,null),pinned:null!=(n=Wp(T().atomP.ahistoric.pinNotifications))&&n},h&&AW.default.createElement(LW,{type:"warning"})),c.node,AW.default.createElement(hH,{ref:u,onClick:e=>{c.toggle(e,u.current)}},AW.default.createElement(ZT,null),d&&AW.default.createElement(LW,{type:"info"})),AW.default.createElement(nW,{ref:o,onClick:()=>{T().transaction((({stateEditors:e,drafts:t})=>{var n;e.studio.ahistoric.setPinDetails(!(null==(n=t.ahistoric.pinDetails)||n))}))},icon:AW.default.createElement(qT,null),pinHintIcon:AW.default.createElement(iW,null),unpinHintIcon:AW.default.createElement(pW,null),pinned:s})))}}}),nG=w({"studio/src/utils/renderInPortalInContext.tsx"(){NW=k(n(771)),pf(),BW=k(nf()),FW=k(cf()),UW=new NW.Atom({set:{},byId:{}}),VW=1,HW=()=>{const e=VW++;return{mountOrRender:function(t,n,r){UW.reduce((i=>({byId:b(y({},i.byId),{[e]:{comp:t,props:n,portalNode:r}}),set:b(y({},i.set),{[e]:!0})})))},unmount:function(){UW.reduce((t=>{const n=y({},t.set),r=y({},t.byId);return delete n[e],{byId:r,set:n}}))}}},WW=()=>{const e=Object.keys(Wp(UW.pointer.set));return BW.default.createElement(BW.default.Fragment,null,e.map((e=>BW.default.createElement(GW,{key:"id-"+e,id:e}))))},GW=({id:e})=>{const{comp:t,portalNode:n,props:r}=Wp(UW.pointer.byId[e]),i=t;return(0,FW.createPortal)(BW.default.createElement(i,y({},r)),n)}}});function rG(){const e=T(),[t,n]=Ig(void 0),r=je();r.configureLogging({min:Pe.DEBUG,dev:ZW,internal:ZW});const i=r.getLogger().named("Theatre.js UIRoot");!function(){const e=T();(0,ND.useEffect)((()=>{const t=t=>{const n=t.composedPath()[0];if(!n||"INPUT"!==n.tagName&&"TEXTAREA"!==n.tagName){if("z"===t.key||"Z"===t.key||"KeyZ"===t.code){if(!zD(t))return;!0===t.shiftKey?e.redo():e.undo()}else if("Space"!==t.code||t.shiftKey||t.metaKey||t.altKey||t.ctrlKey){if(!t.altKey||"\\"!==t.key&&"Backslash"!==t.code&&"IntlBackslash"!==t.code)return;e.transaction((({stateEditors:e,drafts:t})=>{e.studio.ahistoric.setVisibilityState("everythingIsHidden"===t.ahistoric.visibilityState?"everythingIsVisible":"everythingIsHidden")}))}else{const e=function(){const e=Ep(fv().filter((e=>D(e)||j(e))).map((e=>j(e)?e.sheet:e)))[0];if(e)return e.getSequence()}();if(!e)return;if(e.playing)e.pause();else{const{projectId:t,sheetId:n}=e.address,r=(0,BD.prism)((()=>{const r=(0,BD.val)(T().atomP.ahistoric.projects.stateByProjectId[t].stateBySheetId[n].sequence.focusRange);return BD.prism.memo("shouldFollowFocusRange",(()=>{const t=e.position;if(r){const e=t>=r.range.start&&t<=r.range.end;return!r.enabled||!!e}return!0}),[])&&r&&r.enabled?{range:[r.range.start,r.range.end],isFollowingARange:!0}:{range:[0,(0,BD.val)(e.pointer.length)],isFollowingARange:!1}})),i=e.playDynamicRange((0,BD.prism)((()=>(0,BD.val)(r).range)),T().ticker),o=FD(e);i.finally((()=>{o.set(void 0)})),o.set(r)}}t.preventDefault(),t.stopPropagation()}};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[])}();const o=Wp(e.atomP.ahistoric.visibilityState);return(0,qW.useEffect)((()=>("everythingIsHidden"===o&&console.warn("Theatre.js Studio is hidden. Use the keyboard shortcut 'alt + \\' to restore the studio, or call studio.ui.restore()."),()=>{})),[o]),uf((()=>{const r=(0,$W.val)(e.atomP.ahistoric.visibilityState);return(0,$W.val)(e.atomP.ephemeral.initialised)?qW.default.createElement(vg,{logger:i},qW.default.createElement($A,null,qW.default.createElement(Sg,null,qW.default.createElement(JW,null),qW.default.createElement(_x.Provider,{value:n},qW.default.createElement(Lx,{target:!0===window.__IS_VISUAL_REGRESSION_TESTING?void 0:T().ui.containerShadow},qW.default.createElement(qW.default.Fragment,null,qW.default.createElement(KW,null),qW.default.createElement(XW,{className:"everythingIsHidden"===r?"invisible":""},qW.default.createElement(Dx,{ref:t}),qW.default.createElement(zW,null),qW.default.createElement(rH,null),qW.default.createElement(FR,null)))))))):null}),[e,t,n])}var iG,oG,aG,sG,lG=w({"studio/src/UIRoot/UIRoot.tsx"(){I(),pf(),$W=k(n(771)),qW=k(nf()),mg(),PH(),tG(),jg(),Gx(),hL(),gg(),JA(),Tg(),nG(),$x(),Ge(),wg(),GR(),KW="undefined"!=typeof window?og`
  :host {
    contain: strict;
  }
`:{},XW=Am(hg)`
  z-index: 50;
  position: fixed;
  inset: 0;

  &.invisible {
    pointer-events: none !important;
    opacity: 0;
    transform: translateX(1000000px);
  }
`,ZW=/Playground.+Theatre\.js/.test(null!=(YW="undefined"!=typeof document?null==document?void 0:document.title:null)?YW:""),JW=()=>qW.default.createElement(WW,null)}}),cG={};E(cG,{default:()=>sG});var uG=w({"studio/src/UI.ts"(){lG(),iG=k(nf()),oG=k(cf()),aG=k(n(771)),nG(),$x(),cW(),sG=class{constructor(e){this.studio=e,M(this,"containerEl",document.createElement("div")),M(this,"_rendered",!1),M(this,"_renderTimeout"),M(this,"_documentBodyUIIsRenderedIn"),M(this,"containerShadow"),this.containerEl.id="theatrejs-studio-root",this.containerEl.style.cssText="\n      position: fixed;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      pointer-events: none;\n      z-index: 100;\n    ",this.containerShadow=(()=>{if(!0===window.__IS_VISUAL_REGRESSION_TESTING){const e=document.createElement("div");return e.id="theatrejs-faux-shadow-root",document.body.appendChild(e),e}return this.containerEl.attachShadow({mode:"open"})})()}render(){this._rendered||(this._rendered=!0,this._render())}_render(){const e=()=>{document.body?(this._renderTimeout=void 0,this._documentBodyUIIsRenderedIn=document.body,this._documentBodyUIIsRenderedIn.appendChild(this.containerEl),oG.default.render(iG.default.createElement(rG),this.containerShadow)):this._renderTimeout=setTimeout(e,5)};this._renderTimeout=setTimeout(e,10)}hide(){this.studio.transaction((({drafts:e})=>{e.ahistoric.visibilityState="everythingIsHidden"}))}restore(){this.render(),this.studio.transaction((({drafts:e})=>{e.ahistoric.visibilityState="everythingIsVisible"}))}get isHidden(){return"everythingIsHidden"===(0,aG.val)(this.studio.atomP.ahistoric.visibilityState)}renderToolset(e,t){const n=HW();var r;return n.mountOrRender((r=JH,e=>Cx.default.createElement(jx,null,Cx.default.createElement(r,y({},e)))),{toolbarId:e},t),n.unmount}}}}),dG=S({"../node_modules/blob-compare/dist/index.min.js"(n,a){var s;window,s=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._messageId=1,n._messages=new Map,n._worker=e,n._worker.onmessage=n._onMessage.bind(n),n._id=Math.ceil(1e7*Math.random()),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return 0===this._messages.size}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments[3];return new Promise((function(o,a){var s=n._messageId++;n._messages.set(s,[o,a,i]),n._worker.postMessage([s,t,e],r||[])}))}},{key:"postMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2];return new Promise((function(i,o){var a=t._messageId++;t._messages.set(a,[i,o,r]),t._worker.postMessage([a,e],n||[])}))}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._worker.postMessage({eventName:e,args:n})}},{key:"_onMessage",value:function(e){var n;if(!Array.isArray(e.data)&&e.data.eventName)return(n=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(n,[this,e.data.eventName].concat(o(e.data.args)));var r,i=(r=e.data,Array.isArray(r)?r:Array.from(r)),a=i[0],s=i.slice(1);if(1===a)this._onEvent.apply(this,o(s));else{if(0!==a)throw new Error("Wrong message type '"+a+"'");this._onResult.apply(this,o(s))}}},{key:"_onResult",value:function(e,t,n){var i=this._messages.get(e),o=r(i,2),a=o[0],s=o[1];return this._messages.delete(e),1===t?a(n):s(n)}},{key:"_onEvent",value:function(e,t,n){var i=this._messages.get(e),o=r(i,3)[2];o&&o(t,n)}}]),t}(n(2));e.exports=a},function(e,t,n){e.exports=function(){return n(3)('!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=r(1),c=0,l=1,s=0,y=1,p="main",b=function(e){return"object"===(void 0===e?"undefined":i(e))&&"function"==typeof e.then&&"function"==typeof e.catch};var v=function e(t,r){u(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,i,h=(i=e,(r=p)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t),d=self.postMessage.bind(self),m=new(function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(i))}},{key:"operation",value:function(e,t){return h[e]=t,this}}]),t}(f)),g=function(e,t,r){var n=function(t){t&&t instanceof v?w(e,y,t.payload,t.transferable):w(e,y,t)},o=function(t){w(e,s,{message:t.message,stack:t.stack})};try{var i=_(e,t,r);b(i)?i.then(n).catch(o):n(i)}catch(e){o(e)}},_=function(e,t,r){var n=h[r||p];if(!n)throw new Error("Not found handler for this request");return n(t,O.bind(null,e))},w=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d([c,e,t,r],n)},O=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");d([l,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?g.apply(void 0,a(t)):t&&t.eventName&&m.emitLocally.apply(m,[t.eventName].concat(a(t.args)))})),m},e.exports.TransferableResponse=v},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[e][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var c=u.value;c.apply(void 0,r)}}catch(e){i=!0,a=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=o},function(e,t,r){"use strict";r.r(t);var n=r(0);r.n(n)()().operation("binary",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsBinaryString(a)})}(e,t)).operation("buffer",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsArrayBuffer(a)})}(e,t)).operation("compare",({buf1:e,buf2:t})=>(function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),n=new DataView(t);for(var o=e.byteLength;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0})(e,t))}]);',null)}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return r(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=!0,o=!1,a=void 0;try{for(var s,l=this.__listeners[e][Symbol.iterator]();!(i=(s=l.next()).done);i=!0)s.value.apply(void 0,n)}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return this}},{key:"once",value:function(e,t){var n=this;return this.on(e,(function r(){n.off(e,r),t.apply(void 0,arguments)}))}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=i},function(e,t,n){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),n=n.getBlob()}catch(t){n=new Blob([e])}return new Worker(r.createObjectURL(n))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(1),a=n.n(o);n.d(t,"workersEnabled",(function(){return s})),n.d(t,"default",(function(){return l}));let s=Boolean(window.Worker);class l{static toBinaryStringWithWorker(e,t){return P(this,null,(function*(){const n=new i.a(new a.a),r=yield n.exec("binary",{blob:e,chunk:t});return n.terminate(),r}))}static toBinaryStringWithoutWorker(e,t){return n=e,r=t,new Promise(((e,t)=>{const i=new FileReader,o=r?Math.min(r,n.size):n.size,a=n.slice(0,o);i.onload=()=>e(i.result),i.onerror=t,i.readAsBinaryString(a)}));var n,r}static toBinaryString(e,t,n=!0){return n&&s?this.toBinaryStringWithWorker(e,t):this.toBinaryStringWithoutWorker(e,t)}static toArrayBufferWithWorker(e,t){return P(this,null,(function*(){const n=new i.a(new a.a),r=yield n.exec("buffer",{blob:e,chunk:t});return n.terminate(),r}))}static toArrayBufferWithoutWorker(e,t){return n=e,r=t,new Promise(((e,t)=>{const i=new FileReader,o=r?Math.min(r,n.size):n.size,a=n.slice(0,o);i.onload=()=>e(i.result),i.onerror=t,i.readAsArrayBuffer(a)}));var n,r}static toArrayBuffer(e,t,n=!0){return n&&s?this.toArrayBufferWithWorker(e,t):this.toArrayBufferWithoutWorker(e,t)}static compareBuffersWithWorker(e,t){return P(this,null,(function*(){if(e===t)return!0;const n=new i.a(new a.a),r=yield n.exec("compare",{buf1:e,buf2:t},[e,t]);return n.terminate(),r}))}static compareBuffersWithoutWorker(e,t){return function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const n=new DataView(e),r=new DataView(t);for(var i=e.byteLength;i--;)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}(e,t)}static compareBuffers(e,t,n=!0){return n&&s?this.compareBuffersWithWorker(e,t):this.compareBuffersWithoutWorker(e,t)}static sizeEqual(e,t){return e.size===t.size}static typeEqual(e,t){return e.type===t.type}static magicNumbersEqual(e,t,n=!0){return P(this,null,(function*(){if(e===t)return!0;const r=[24,16,14,12,8,6,4];let[i,o]=yield Promise.all([this.toBinaryString(e,24,n),this.toBinaryString(t,24,n)]);for(let e of r)if(i.substring(0,e)===o.substring(0,e))return!0;return!1}))}static bytesEqualWithBinaryString(e,t,n,r=!0){return P(this,null,(function*(){if(e===t)return!0;const[i,o]=yield Promise.all([this.toBinaryString(e,n,r),this.toBinaryString(t,n,r)]);return i===o}))}static bytesEqualWithArrayBuffer(e,t,n,r=!0){return P(this,null,(function*(){if(e===t)return!0;const[i,o]=yield Promise.all([this.toArrayBuffer(e,n,r),this.toArrayBuffer(t,n,r)]);return this.compareBuffers(i,o,r)}))}static isEqual(e,t){return P(this,arguments,(function*(e,t,{methods:n=["size","type","magic","byte"],byte:r="buffer",partial:i=!1,chunks:o=null,worker:a=!0}={}){let s=null;for(let l of n){if(!1===s)break;if(i&&!0===s)break;switch(l){case"byte":case"bytes":case"content":o=o instanceof Array?o:[e.size],s=!0;for(let n of o){let i=!1;i="buffer"===r?yield this.bytesEqualWithArrayBuffer(e,t,n,a):yield this.bytesEqualWithBinaryString(e,t,n,a),i||(s=!1)}break;case"magic":case"headers":case"numbers":case"mime":s=yield this.magicNumbersEqual(e,t,a);break;case"size":case"sizes":s=this.sizeEqual(e,t);break;case"type":case"types":s=this.typeEqual(e,t);break;default:throw new Error("Blob-compare : Unknown comparison method")}}return s}))}}}])},"object"==typeof n&&"object"==typeof a?a.exports=s():(i=[],void 0===(o="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=o))}});E(t,{ToolbarDropdownSelect:()=>Eq,default:()=>Mq}),I(),F();var hG=k(n(771));H();var pG=0,fG=k(n(771));function mG(e){return e}var gG,vG=(e,t=mG)=>{const n=n=>({type:e,payload:t(n)});return n.type=e,n.is=t=>t&&t.type&&t.type===e,n},yG=k(re()),bG=k(Se());Ie();var xG=new Uint8Array(16);function _G(){if(!gG&&!(gG="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gG(xG)}for(var wG=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,SG=function(e){return"string"==typeof e&&wG.test(e)},EG=[],kG=0;kG<256;++kG)EG.push((kG+256).toString(16).substr(1));var MG=function(e,t,n){var r=(e=e||{}).random||(e.rng||_G)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(EG[e[t+0]]+EG[e[t+1]]+EG[e[t+2]]+EG[e[t+3]]+"-"+EG[e[t+4]]+EG[e[t+5]]+"-"+EG[e[t+6]]+EG[e[t+7]]+"-"+EG[e[t+8]]+EG[e[t+9]]+"-"+EG[e[t+10]]+EG[e[t+11]]+EG[e[t+12]]+EG[e[t+13]]+EG[e[t+14]]+EG[e[t+15]]).toLowerCase();if(!SG(n))throw TypeError("Stringified UUID is invalid");return n}(r)},PG={replaceHistory:vG("@history/replaceHistory"),startHistoryFromScratch:vG("@history/startHistoryFromScratch"),undo:vG("@history/undo"),redo:vG("@history/redo")},TG={type:"@history/unknownAction",payload:""},CG={maxNumberOfCommits:100};function AG(e){return{currentCommitHash:void 0,commitsByHash:{},listOfCommitHashes:[],innerState:e}}Ge();var IG,RG,OG={ahistoric:{visibilityState:"everythingIsVisible",theTrigger:{position:{closestCorner:"bottomLeft",distanceFromHorizontalEdge:.02,distanceFromVerticalEdge:.02}},coreByProject:{},projects:{stateByProjectId:{}}},historic:{projects:{stateByProjectId:{}},autoKey:!0,coreByProject:{},panelInstanceDesceriptors:{}},ephemeral:{initialised:!1,coreByProject:{},projects:{stateByProjectId:{}},extensions:{byId:{},paneClasses:{}},showOutline:!1}},DG=vG("@storeBundle/replacePersistentState",(e=>e)),LG=vG("@storeBundle/reduceParts",(e=>e)),jG={historic:PG,replacePersistentState:DG,reduceParts:LG},zG=vG("@storeBundle/setInnerHistoricState",(e=>e)),NG=((e,t=CG)=>{const n=AG(e(void 0,TG));return function(r,i){return PG.startHistoryFromScratch.is(i)?AG(e(void 0,i.payload)):PG.replaceHistory.is(i)?i.payload:PG.undo.is(i)?r?function(e){if(void 0===e.currentCommitHash)return e;const t=e.listOfCommitHashes.findIndex((t=>t===e.currentCommitHash));if(-1===t)throw new Error("This should never happen");const n=e.commitsByHash[e.currentCommitHash],r=(0,bG.default)(e.innerState,n.backwardDiff),i=t-1,o=-1===i?void 0:e.listOfCommitHashes[i];return b(y({},e),{currentCommitHash:o,innerState:r})}(r):n:PG.redo.is(i)?r?function(e){if(0===e.listOfCommitHashes.length)return e;const t=e.listOfCommitHashes.findIndex((t=>t===e.currentCommitHash));if(t===e.listOfCommitHashes.length-1)return e;const n=t+1,r=e.listOfCommitHashes[n],i=e.commitsByHash[r],o=(0,bG.default)(e.innerState,i.forwardDiff);return b(y({},e),{currentCommitHash:r,innerState:o})}(r):n:r?function(e,t,n){if(t===e.innerState)return e;const r=(i=e.innerState,o=t,{forwardDiff:yG.default.diff(i,o,{invertible:!1}),backwardDiff:yG.default.diff(o,i,{invertible:!1}),timestamp:Date.now(),hash:MG()});var i,o;if(0===r.forwardDiff.length)return e;const a=V(e.listOfCommitHashes),s={currentCommitHash:r.hash,commitsByHash:y({},e.commitsByHash),listOfCommitHashes:[...e.listOfCommitHashes],innerState:t};if(e.currentCommitHash!==a){const t=e.listOfCommitHashes.findIndex((t=>t===e.currentCommitHash));e.listOfCommitHashes.slice(t+1).forEach((e=>{delete s.commitsByHash[e]})),s.listOfCommitHashes.splice(t+1,s.listOfCommitHashes.length)}if(s.listOfCommitHashes.push(r.hash),s.commitsByHash[r.hash]=r,s.listOfCommitHashes.length>n.maxNumberOfCommits){const e=s.listOfCommitHashes.length-n.maxNumberOfCommits;s.listOfCommitHashes.slice(0,e).forEach((e=>{delete s.commitsByHash[e]})),s.listOfCommitHashes.splice(0,e)}return s}(r,e(r.innerState,i),t):AG(e(void 0,i))}})(((e=OG.historic,t)=>zG.is(t)?t.payload:e)),BG=(e,t)=>{if(DG.is(t)){const{historic:n,ahistoric:r}=t.payload;return{$persistent:{historic:n,ahistoric:r},ephemeral:(null==e?void 0:e.ephemeral)||OG.ephemeral}}if(e){let{historic:n,ahistoric:r}=e.$persistent,{ephemeral:i}=e;if(LG.is(t)){const o={historic:e.$persistent.historic.innerState,ahistoric:e.$persistent.ahistoric,ephemeral:e.ephemeral},a=t.payload(o);if(a===o)return e;n.innerState!==a.historic&&(n=NG(n,zG(a.historic))),r=a.ahistoric,i=a.ephemeral}else{const r=NG(n,t);if(r===n)return e;n=r}return{$persistent:n===e.$persistent.historic&&r===e.$persistent.ahistoric?e.$persistent:{historic:n,ahistoric:r},ephemeral:i}}return{$persistent:{historic:NG(void 0,{}),ahistoric:OG.ahistoric},ephemeral:OG.ephemeral}},FG=vG("@history/pushTempAction",(e=>e)),UG=vG("@history/discardTempAction",(e=>e)),VG=vG("@history/commitTempAction",(e=>e)),HG=0,WG=(e,t)=>{if(e){let n,{tempActions:r,permanent:i}=e.$temps;if(FG.is(t))r=[...r,t];else if(VG.is(t)){const e=r.find((e=>e.payload.id===t.payload));e?(n=e.payload.originalAction,r=r.filter((e=>e.payload.id!==t.payload))):He.error(`Comitting temp action group ${t.payload} isn't possible as this group doesn't exist`)}else UG.is(t)?r=r.filter((e=>e.payload.id!==t.payload)):n=t;n&&(i=BG(e.$temps.permanent,n));let o={historic:i.$persistent.historic.innerState,ahistoric:i.$persistent.ahistoric,ephemeral:i.ephemeral};for(const e of r)o=e.payload.originalAction.payload(o);return y({$temps:{tempActions:r,permanent:i},$persistent:i.$persistent},o)}{const e=BG(void 0,t);return{$temps:{permanent:e,tempActions:[]},$persistent:e.$persistent,historic:e.$persistent.historic.innerState,ahistoric:e.$persistent.ahistoric,ephemeral:e.ephemeral}}};function GG(e,t){if("object"!=typeof e||null===e)return;if(0===t.length){for(const t of Object.keys(e))delete e[t];return}const n=t.slice(0,t.length-1);let r=e;const i=new WeakMap;for(const e of n){const t=r,n=t[e];if("object"!=typeof n||null===n)return;i.set(n,t),r=n}const o=t.slice().reverse();for(const e of o){if(delete r[e],Object.keys(r).length>0)return;r=i.get(r)}}function $G(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=I$[e],o=i?"function"==typeof i?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+o)}function qG(e){return!!e&&!!e[A$]}function KG(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===R$}(e)||Array.isArray(e)||!!e[C$]||!!e.constructor[C$]||QG(e)||e$(e))}function XG(e,t,n){void 0===n&&(n=!1),0===YG(e)?(n?Object.keys:O$)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function YG(e){var t=e[A$];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:QG(e)?2:e$(e)?3:0}function ZG(e,t){return 2===YG(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function JG(e,t,n){var r=YG(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function QG(e){return k$&&e instanceof Map}function e$(e){return M$&&e instanceof Set}function t$(e){return e.o||e.t}function n$(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=D$(e);delete t[A$];for(var n=O$(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function r$(e,t){return void 0===t&&(t=!1),o$(e)||qG(e)||!KG(e)||(YG(e)>1&&(e.set=e.add=e.clear=e.delete=i$),Object.freeze(e),t&&XG(e,(function(e,t){return r$(t,!0)}),!0)),e}function i$(){$G(2)}function o$(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function a$(e){var t=L$[e];return t||$G(18,e),t}function s$(){return RG||$G(0),RG}function l$(e,t){t&&(a$("Patches"),e.u=[],e.s=[],e.v=t)}function c$(e){u$(e),e.p.forEach(h$),e.p=null}function u$(e){e===RG&&(RG=e.l)}function d$(e){return RG={p:[],l:RG,h:e,m:!0,_:0}}function h$(e){var t=e[A$];0===t.i||1===t.i?t.j():t.O=!0}function p$(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||a$("ES5").S(t,e,r),r?(n[A$].P&&(c$(t),$G(4)),KG(e)&&(e=f$(t,e),t.l||g$(t,e)),t.u&&a$("Patches").M(n[A$],e,t.u,t.s)):e=f$(t,n,[]),c$(t),t.u&&t.v(t.u,t.s),e!==T$?e:void 0}function f$(e,t,n){if(o$(t))return t;var r=t[A$];if(!r)return XG(t,(function(i,o){return m$(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return g$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=n$(r.k):r.o;XG(3===r.i?new Set(i):i,(function(t,o){return m$(e,r,i,t,o,n)})),g$(e,i,!1),n&&e.u&&a$("Patches").R(r,n,e.u,e.s)}return r.o}function m$(e,t,n,r,i,o){if(i===n&&$G(5),qG(i)){var a=f$(e,i,o&&t&&3!==t.i&&!ZG(t.D,r)?o.concat(r):void 0);if(JG(n,r,a),!qG(a))return;e.m=!1}if(KG(i)&&!o$(i)){if(!e.h.F&&e._<1)return;f$(e,i),t&&t.A.l||g$(e,i)}}function g$(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&r$(t,n)}function v$(e,t){var n=e[A$];return(n?t$(n):e)[t]}function y$(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function b$(e){e.P||(e.P=!0,e.l&&b$(e.l))}function x$(e){e.o||(e.o=n$(e.t))}function _$(e,t,n){var r=QG(t)?a$("MapSet").N(t,n):e$(t)?a$("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:s$(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=j$;n&&(i=[r],o=z$);var a=Proxy.revocable(i,o),s=a.revoke,l=a.proxy;return r.k=l,r.j=s,l}(t,n):a$("ES5").J(t,n);return(n?n.A:s$()).p.push(r),r}function w$(e){return qG(e)||$G(22,e),function e(t){if(!KG(t))return t;var n,r=t[A$],i=YG(t);if(r){if(!r.P&&(r.i<4||!a$("ES5").K(r)))return r.t;r.I=!0,n=S$(t,i),r.I=!1}else n=S$(t,i);return XG(n,(function(t,i){r&&function(e,t){return 2===YG(e)?e.get(t):e[t]}(r.t,t)===i||JG(n,t,e(i))})),3===i?new Set(n):n}(e)}function S$(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return n$(e)}ct(),ct(),jp();var E$="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),k$="undefined"!=typeof Map,M$="undefined"!=typeof Set,P$="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,T$=E$?Symbol.for("immer-nothing"):((IG={})["immer-nothing"]=!0,IG),C$=E$?Symbol.for("immer-draftable"):"__$immer_draftable",A$=E$?Symbol.for("immer-state"):"__$immer_state",I$=("undefined"!=typeof Symbol&&Symbol.iterator,{0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"}),R$=""+Object.prototype.constructor,O$="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,D$=Object.getOwnPropertyDescriptors||function(e){var t={};return O$(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},L$={},j$={get:function(e,t){if(t===A$)return e;var n,r,i,o=t$(e);if(!ZG(o,t))return n=e,(i=y$(o,t))?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(n.k):void 0;var a=o[t];return e.I||!KG(a)?a:a===v$(e.t,t)?(x$(e),e.o[t]=_$(e.A.h,a,e)):a},has:function(e,t){return t in t$(e)},ownKeys:function(e){return Reflect.ownKeys(t$(e))},set:function(e,t,n){var r=y$(t$(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=v$(t$(e),t),o=null==i?void 0:i[A$];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,i)&&(void 0!==n||ZG(e.t,t)))return!0;x$(e),b$(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==v$(e.t,t)||t in e.t?(e.D[t]=!1,x$(e),b$(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=t$(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){$G(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){$G(12)}},z$={};XG(j$,(function(e,t){z$[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),z$.deleteProperty=function(e,t){return isNaN(parseInt(t))&&$G(13),j$.deleteProperty.call(this,e[0],t)},z$.set=function(e,t,n){return"length"!==t&&isNaN(parseInt(t))&&$G(14),j$.set.call(this,e[0],t,n,e[0])};var N$=function(){function e(e){var t=this;this.g=P$,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&$G(6),void 0!==r&&"function"!=typeof r&&$G(7),KG(e)){var s=d$(t),l=_$(t,e,void 0),c=!0;try{a=n(l),c=!1}finally{c?c$(s):u$(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return l$(s,r),p$(e,s)}),(function(e){throw c$(s),e})):(l$(s,r),p$(a,s))}if(!e||"object"!=typeof e){if((a=n(e))===T$)return;return void 0===a&&(a=e),t.F&&r$(a,!0),a}$G(21,e)},this.produceWithPatches=function(e,n){return"function"==typeof e?function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))}:[t.produce(e,n,(function(e,t){r=e,i=t})),r,i];var r,i},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){KG(e)||$G(8),qG(e)&&(e=w$(e));var t=d$(this),n=_$(this,e,void 0);return n[A$].C=!0,u$(t),n},t.finishDraft=function(e,t){var n=e&&e[A$];n&&n.C||$G(9),n.I&&$G(10);var r=n.A;return l$(r,t),p$(void 0,r)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!P$&&$G(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var i=a$("Patches").$;return qG(e)?i(e,t):this.produce(e,(function(e){return i(e,t.slice(n+1))}))},e}(),B$=new N$,F$=(B$.produce,B$.produceWithPatches.bind(B$),B$.setAutoFreeze.bind(B$),B$.setUseProxies.bind(B$),B$.applyPatches.bind(B$),B$.createDraft.bind(B$)),U$=B$.finishDraft.bind(B$);fh(),Ih(),dp(),xp(),_p(),UU(),Tp(),H();var V$,H$,W$={create(e){const t={byId:{},allIds:{}};if(e)for(const[n,r]of e)t.byId[n]=r,t.allIds[n]=!0;return t},shallowCopy:e=>({byId:y({},null==e?void 0:e.byId),allIds:y({},null==e?void 0:e.allIds)}),add:(e,t,n)=>({byId:b(y({},null==e?void 0:e.byId),{[t]:n}),allIds:b(y({},null==e?void 0:e.allIds),{[t]:!0})}),merge(e){const t=W$.create();for(let n=0;n<e.length;n++)t.byId=y(y({},t.byId),e[n].byId),t.allIds=y(y({},t.allIds),e[n].allIds);return t},remove(e,t){const n=W$.shallowCopy(e);return delete n.allIds[t],delete n.byId[t],n},filter(e,t){const n=W$.shallowCopy(e);for(const[e,r]of Object.entries(n.byId))t(r)||(delete n.allIds[e],delete n.byId[e]);return n}},G$=e=>(V$=e,H$),$$=()=>{if(void 0===V$)throw new Error("Calling stateEditors outside of a transaction is not allowed.");return V$};function q$(){let e,t;const n=new Promise(((n,i)=>{e=e=>{n(e),r.status="resolved"},t=e=>{i(e),r.status="rejected"}})),r={resolve:e,reject:t,promise:n,status:"pending"};return r}!function(e){let t,n;!function(t){let n,r,i;!function(t){let n,r,i;(n=t.panelPositions||(t.panelPositions={})).setPanelPosition=function(e){const t=$$().historic;null!=t.panelPositions||(t.panelPositions={}),t.panelPositions[e.panelId]=e.position},function(t){let n,r;t._ensure=function(){var e;return null!=(e=$$().historic).panels||(e.panels={}),$$().historic.panels},function(t){let n;var r;t._ensure=function(){const t=e.studio.historic.panels._ensure();return null!=t.outlinePanel||(t.outlinePanel={}),t.outlinePanel},(r=n=t.selection||(t.selection={})).set=function(n){const r=[];for(const t of Ep(n))O(t)?r.push(y({type:"Project"},t.address)):D(t)?(r.push(y({type:"Sheet"},t.template.address)),e.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(t.address)):L(t)?r.push(y({type:"Sheet"},t.address)):j(t)?(r.push(y({type:"SheetObject"},t.template.address)),e.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(t.sheet.address)):z(t)&&r.push(y({type:"SheetObject"},t.address));t._ensure().selection=r},r.unset=function(){t._ensure().selection=[]}}(n=t.outline||(t.outline={})),function(t){let n;t._ensure=function(){const t=e.studio.historic.panels._ensure();return null!=t.sequenceEditor||(t.sequenceEditor={}),t.sequenceEditor},(n=t.graphEditor||(t.graphEditor={})).setIsOpen=function(e){(function(){const e=t._ensure();return null!=e.graphEditor||(e.graphEditor={height:.5,isOpen:!1}),e.graphEditor}()).isOpen=e.isOpen}}(r=t.sequenceEditor||(t.sequenceEditor={}))}(r=t.panels||(t.panels={})),function(t){let n;!function(t){let n;t._ensure=function(e){const t=$$().historic;return t.projects.stateByProjectId[e.projectId]||(t.projects.stateByProjectId[e.projectId]={stateBySheetId:{}}),t.projects.stateByProjectId[e.projectId]},function(t){let n;t._ensure=function(t){const n=e.studio.historic.projects.stateByProjectId._ensure(t);return n.stateBySheetId[t.sheetId]||(n.stateBySheetId[t.sheetId]={selectedInstanceId:void 0,sequenceEditor:{selectedPropsByObject:{}}}),n.stateBySheetId[t.sheetId]},t.setSelectedInstanceId=function(t){e.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(t).selectedInstanceId=t.sheetInstanceId},function(n){function r(t){const n=e.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(t).sequenceEditor;return n.markerSet||(n.markerSet=W$.create()),n.markerSet}n.addPropToGraphEditor=function(e){const{selectedPropsByObject:n}=t._ensure(e).sequenceEditor;n[e.objectKey]||(n[e.objectKey]={});const r=n[e.objectKey],i=qe(e.pathToProp),o=new Set(Object.keys(CU));for(const[e,t]of Object.entries(w$(n)))for(const[e,n]of Object.entries(t))o.delete(n);const a=o.size>0?o.values().next().value:Object.keys(CU)[0];r[i]=a},n.removePropFromGraphEditor=function(e){const{selectedPropsByObject:n}=t._ensure(e).sequenceEditor;if(!n[e.objectKey])return;const r=n[e.objectKey],i=qe(e.pathToProp);r[i]&&GG(n,[e.objectKey,i])},n.replaceMarkers=function(e){const t=r(e.sheetAddress),n=e.markers.filter((e=>!!isFinite(e.position))).map((t=>b(y({},t),{position:e.snappingFunction(t.position)}))),i=Th(n,"id");let o=W$.filter(t,(e=>e&&!i[e.id]));const a=Th(Object.values(o.byId),"position");n.forEach((({position:e})=>{const t=a[e];t&&(o=W$.remove(o,t.id))})),Object.assign(t,W$.merge([o,W$.create(n.map((e=>[e.id,e])))]))},n.removeMarker=function(e){const t=r(e.sheetAddress);Object.assign(t,W$.remove(t,e.markerId))},n.updateMarker=function(e){const t=r(e.sheetAddress).byId[e.markerId];void 0!==t&&(t.label=e.label)}}(n=t.sequenceEditor||(t.sequenceEditor={}))}(n=t.stateBySheetId||(t.stateBySheetId={}))}(n=t.stateByProjectId||(t.stateByProjectId={}))}(i=t.projects||(t.projects={}))}(n=t.historic||(t.historic={})),function(t){let n;t.setShowOutline=function(e){$$().ephemeral.showOutline=e},function(t){let n;!function(t){let n;t._ensure=function(e){const t=$$().ephemeral;return t.projects.stateByProjectId[e.projectId]||(t.projects.stateByProjectId[e.projectId]={stateBySheetId:{}}),t.projects.stateByProjectId[e.projectId]},function(t){let n;t._ensure=function(t){const n=e.studio.ephemeral.projects.stateByProjectId._ensure(t);return n.stateBySheetId[t.sheetId]||(n.stateBySheetId[t.sheetId]={stateByObjectKey:{}}),n.stateBySheetId[t.sheetId]},function(t){let n;t._ensure=function(t){var n;const r=e.studio.ephemeral.projects.stateByProjectId.stateBySheetId._ensure(t).stateByObjectKey;return null!=r[n=t.objectKey]||(r[n]={}),r[t.objectKey]},function(t){function n(t){const n=e.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey._ensure(t);return null!=n.valuesBeingScrubbed||(n.valuesBeingScrubbed={}),n.valuesBeingScrubbed}t._ensure=n,t.flag=function(e){cp(n(e),e.pathToProp,!0)}}(n=t.propsBeingScrubbed||(t.propsBeingScrubbed={}))}(n=t.stateByObjectKey||(t.stateByObjectKey={}))}(n=t.stateBySheetId||(t.stateBySheetId={}))}(n=t.stateByProjectId||(t.stateByProjectId={}))}(n=t.projects||(t.projects={}))}(r=t.ephemeral||(t.ephemeral={})),function(t){let n;t.setPinOutline=function(e){$$().ahistoric.pinOutline=e},t.setPinDetails=function(e){$$().ahistoric.pinDetails=e},t.setPinNotifications=function(e){$$().ahistoric.pinNotifications=e},t.setVisibilityState=function(e){$$().ahistoric.visibilityState=e},t.setClipboardKeyframes=function(e){const t=Ye(e.map((e=>e.pathToProp))),n=e.map((({keyframe:e,pathToProp:n})=>({keyframe:e,pathToProp:n.slice(t.length)}))),r=$$();r.ahistoric.clipboard?r.ahistoric.clipboard.keyframesWithRelativePaths=n:r.ahistoric.clipboard={keyframesWithRelativePaths:n}},function(t){let n;!function(t){let n;var r;let i;t._ensure=function(e){const t=$$().ahistoric;return t.projects.stateByProjectId[e.projectId]||(t.projects.stateByProjectId[e.projectId]={stateBySheetId:{}}),t.projects.stateByProjectId[e.projectId]},(r=n=t.collapsedItemsInOutline||(t.collapsedItemsInOutline={}))._ensure=function(t){const n=e.studio.ahistoric.projects.stateByProjectId._ensure(t);return n.collapsedItemsInOutline||(n.collapsedItemsInOutline={}),n.collapsedItemsInOutline},r.set=function(t){const n=e.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline._ensure(t);t.isCollapsed?n[t.itemKey]=!0:delete n[t.itemKey]},function(t){let n;t._ensure=function(t){const n=e.studio.ahistoric.projects.stateByProjectId._ensure(t);return n.stateBySheetId[t.sheetId]||(n.stateBySheetId[t.sheetId]={}),n.stateBySheetId[t.sheetId]},function(t){let n;var r;let i,o;t._ensure=function(t){const n=e.studio.ahistoric.projects.stateByProjectId.stateBySheetId._ensure(t);return n.sequence||(n.sequence={}),n.sequence},(r=n=t.focusRange||(t.focusRange={})).set=function(t){e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(t).focusRange={range:t.range,enabled:t.enabled}},r.unset=function(t){e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(t).focusRange=void 0},(i=t.clippedSpaceRange||(t.clippedSpaceRange={})).set=function(t){e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(t).clippedSpaceRange=y({},t.range)},(o=t.sequenceEditorCollapsableItems||(t.sequenceEditorCollapsableItems={})).set=function(t){const n=function(t){const n=e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(t);let r=n.collapsableItems;return r||(r=n.collapsableItems=W$.create()),r}(t);Object.assign(n,W$.add(n,t.studioSheetItemKey,{isCollapsed:t.isCollapsed}))}}(n=t.sequence||(t.sequence={}))}(i=t.stateBySheetId||(t.stateBySheetId={}))}(n=t.stateByProjectId||(t.stateByProjectId={}))}(n=t.projects||(t.projects={}))}(i=t.ahistoric||(t.ahistoric={}))}(t=e.studio||(e.studio={})),function(t){let n;!function(t){let n,r;(n=t.revisionHistory||(t.revisionHistory={})).add=function(e){const t=$$().historic.coreByProject[e.projectId].revisionHistory;t.unshift(e.revision),t.length>50&&(t.length=50)},function(t){let n,r;t._ensure=function(e){const t=$$().historic.coreByProject[e.projectId].sheetsById;return t[e.sheetId]||(t[e.sheetId]={staticOverrides:{byObject:{}}}),t[e.sheetId]},function(t){function n(t){const n=e.coreByProject.historic.sheetsById._ensure(t);return null!=n.sequence||(n.sequence={subUnitsPerUnit:30,length:10,type:"PositionalSequence",tracksByObject:{}}),n.sequence}function r(t){var n;const r=e.coreByProject.historic.sheetsById.sequence._ensure(t).tracksByObject;return null!=r[n=t.objectKey]||(r[n]={trackData:{},trackIdByPropPath:{}}),r[t.objectKey]}function i(e){return r(e).trackData[e.trackId]}function o(e){const t=i(e);if(t)return t.keyframes.find((t=>t.id===e.keyframeId))}function a(e){const t=i(e);if(!t)return;const n=w$(t.keyframes),r=e.keyframes.filter((e=>!("number"==typeof e.value&&!isFinite(e.value)||!e.handles.every((e=>isFinite(e)))))).map((t=>b(y({},t),{position:e.snappingFunction(t.position)}))),o=Th(r,"id"),a=n.filter((e=>!o[e.id])),s=Th(a,"position");r.forEach((({position:e})=>{const t=s[e];t&&ap(a,t)}));const l=mp([...a,...r],"position");t.keyframes=l}t._ensure=n,t.setLength=function(e){n(e).length=ml(parseFloat(e.length.toFixed(2)),.01,1/0)},t.setPrimitivePropAsSequenced=function(e,t){const n=r(e),i=qe(e.pathToProp);if("string"==typeof n.trackIdByPropPath[i])return;const o=Ip(10),a={type:"BasicKeyframedTrack",__debugName:`${e.objectKey}:${i}`,keyframes:[]};n.trackData[o]=a,n.trackIdByPropPath[i]=o},t.setPrimitivePropAsStatic=function(t){const n=r(t),i=qe(t.pathToProp),o=n.trackIdByPropPath[i];"string"==typeof o&&(delete n.trackIdByPropPath[i],delete n.trackData[o],e.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(t))},t.setCompoundPropAsStatic=function(t){const n=r(t);for(const e of Object.keys(n.trackIdByPropPath)){const r=JSON.parse(e),i=t.pathToProp.every(((e,t)=>r[t]===e));if(i){const t=n.trackIdByPropPath[e];if("string"!=typeof t)continue;delete n.trackIdByPropPath[e],delete n.trackData[t]}}e.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfCompoundProp(t)},t.setKeyframeAtPosition=function(e){const t=e.snappingFunction(e.position),n=i(e);if(!n)return;const{keyframes:r}=n,o=r.findIndex((e=>e.position===t));if(-1!==o)return void(r[o].value=e.value);const a=uh(r,(e=>e.position<t));if(-1===a)return void r.unshift({id:Lp(),position:t,connectedRight:!0,handles:e.handles||[.5,1,.5,0],type:e.type||"bezier",value:e.value});const s=r[a];r.splice(a+1,0,{id:Lp(),position:t,connectedRight:s.connectedRight,handles:e.handles||[.5,1,.5,0],type:e.type||"bezier",value:e.value})},t.unsetKeyframeAtPosition=function(e){const t=i(e);if(!t)return;const{keyframes:n}=t,r=n.findIndex((t=>t.position===e.position));-1!==r&&n.splice(r,1)},t.transformKeyframes=function(e){const t=i(e);if(!t)return;const n=w$(t.keyframes).filter((t=>e.keyframeIds.includes(t.id))).map((t=>{const n=t.position,r=e.snappingFunction(function(e,{scale:t,origin:n,translate:r}){return r+(n+(e-n)*t)}(n,e));return b(y({},t),{position:r})}));a(b(y({},e),{keyframes:n}))},t.setTweenBetweenKeyframes=function(e){const t=i(e);t&&(t.keyframes=t.keyframes.map(((n,r)=>{const i=t.keyframes[r-1],o=e.keyframeIds.includes(n.id),a=e.keyframeIds.includes(null==i?void 0:i.id);return o&&!a?b(y({},n),{handles:[n.handles[0],n.handles[1],e.handles[0],e.handles[1]]}):o&&a?b(y({},n),{handles:[e.handles[2],e.handles[3],e.handles[0],e.handles[1]]}):a?b(y({},n),{handles:[e.handles[2],e.handles[3],n.handles[2],n.handles[3]]}):n})))},t.setHandlesForKeyframe=function(e){var t,n,r,i,a,s,l,c;const u=o(e);u&&(u.handles=[null!=(n=null==(t=e.end)?void 0:t[0])?n:u.handles[0],null!=(i=null==(r=e.end)?void 0:r[1])?i:u.handles[1],null!=(s=null==(a=e.start)?void 0:a[0])?s:u.handles[2],null!=(c=null==(l=e.start)?void 0:l[1])?c:u.handles[3]])},t.deleteKeyframes=function(e){const t=i(e);t&&(t.keyframes=t.keyframes.filter((t=>-1===e.keyframeIds.indexOf(t.id))))},t.setKeyframeType=function(e){const t=o(e);t&&(t.type=e.keyframeType)},t.replaceKeyframes=a}(n=t.sequence||(t.sequence={})),function(t){let n;!function(t){function n(t){var n;const r=e.coreByProject.historic.sheetsById._ensure(t).staticOverrides.byObject;return null!=r[n=t.objectKey]||(r[n]={}),r[t.objectKey]}t.setValueOfCompoundProp=function(e){const t=n(e);cp(t,e.pathToProp,e.value)},t.setValueOfPrimitiveProp=function(e){const t=n(e);cp(t,e.pathToProp,e.value)},t.unsetValueOfPrimitiveProp=function(t){const n=e.coreByProject.historic.sheetsById._ensure(t).staticOverrides.byObject[t.objectKey];n&&GG(n,t.pathToProp)}}(n=t.byObject||(t.byObject={}))}(r=t.staticOverrides||(t.staticOverrides={}))}(r=t.sheetsById||(t.sheetsById={}))}(n=t.historic||(t.historic={}))}(n=e.coreByProject||(e.coreByProject={}))}(H$||(H$={}));var K$=k(n(771));Mn(),ul();var X$,Y$,Z$=("function"==typeof(Y$=("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:e).Symbol)?Y$.observable?X$=Y$.observable:(X$=Y$("observable"),Y$.observable=X$):X$="@@observable",X$),J$={INIT:"@@redux/INIT"};function Q$(e,t,n){var r;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(Q$)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,o=t,a=[],s=a,l=!1;function c(){s===a&&(s=a.slice())}function u(){return o}function d(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return c(),s.push(e),function(){if(t){t=!1,c();var n=s.indexOf(e);s.splice(n,1)}}}function h(e){if(!rl(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,o=i(o,e)}finally{l=!1}for(var t=a=s,n=0;n<t.length;n++)(0,t[n])();return e}return h({type:J$.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,h({type:J$.INIT})}})[Z$]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[Z$]=function(){return this},e},r}function eq(){}"string"==typeof eq.name&&"isCrushed"!==eq.name&&function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}("You are currently using minified code outside of NODE_ENV === 'production'. This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) to ensure you have the correct code for your production build."),Ge(),nh(),ZA(),H(),Fs(),F(),Jp();var tq=k(n(771));function nq(e){if("boolean"==typeof e||"string"==typeof e||"number"==typeof e)return e;if(rl(e)){const t={};let n=!1;for(const[r,i]of Object.entries(e))void 0!==nq(i)&&(t[r]=i,n=!0);if(n)return t}}function rq(e,t,n){for(const[r,i]of Object.entries(e.props))if("compound"===i.type)rq(i,[...t,r],n);else{if("enum"===i.type)throw new Error("Not yet implemented");n(i,[...t,r])}}function iq(e,t,n){return{set:(n,r)=>{e();const i=nq(r);if(void 0===i)return;const{root:o,path:a}=(0,tq.getPointerParts)(n);if(!j(o))throw new Error("Only setting props of SheetObject-s is supported in a transaction so far");{const e=o.template.getMapOfValidSequenceTracks_forStudio().getValue(),r=Q_(o.template.staticConfig,a);if(!r)throw new Error(`Object ${o.address.objectKey} does not have a prop at ${JSON.stringify(a)}`);const s=(n,r,i)=>{if(null==n)return;if(void 0===nq(r.deserializeAndSanitize(n)))throw new Error(`Invalid value ${HU(n)} for object.props${i.map((e=>`[${JSON.stringify(e)}]`)).join("")} is invalid`);const a=b(y({},o.address),{pathToProp:i}),s=js(e,i);if("string"==typeof s){const e=o.sheet.getSequence();e.position=e.closestGridPosition(e.position),t.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(b(y({},a),{trackId:s,position:e.position,value:n,snappingFunction:e.closestGridPosition,type:"bezier"}))}else t.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(b(y({},a),{value:n}))};if("compound"===r.type){const e=(0,tq.getPointerParts)(n).path,t=e.length;rq(r,e,((e,n)=>{const r=n.slice(t),o=zp(i,r);if(void 0===o)throw new Error(`Property object.props${n.map((e=>`[${JSON.stringify(e)}]`)).join("")} is required but not provided`);s(o,e,n)}))}else{if("enum"===r.type)throw new Error("Enums aren't implemented yet");s(i,r,a)}}},unset:n=>{e();const{root:r,path:i}=(0,tq.getPointerParts)(n);if(!j(r))throw new Error("Only setting props of SheetObject-s is supported in a transaction so far");{const e=r.template.getMapOfValidSequenceTracks_forStudio().getValue(),o=zp(r.template.getDefaultValues().getValue(),i),a=Q_(r.template.staticConfig,i),s=(n,i)=>{const o=b(y({},r.address),{pathToProp:i}),s=js(e,i);"string"==typeof s?t.coreByProject.historic.sheetsById.sequence.unsetKeyframeAtPosition(b(y({},o),{trackId:s,position:r.sheet.getSequence().positionSnappedToGrid})):void 0!==a&&t.coreByProject.historic.sheetsById.staticOverrides.byObject.unsetValueOfPrimitiveProp(o)};"compound"===a.type?R(o,((e,t)=>{s(e,t)}),(0,tq.getPointerParts)(n).path):s(o,i)}},get drafts(){return e(),n},get stateEditors(){return t}}}dw(),Tp(),iV();var oq=k(n(771)),aq=class{constructor(){M(this,"_values",{})}get(e,t){if(this.has(e))return this._values[e];{const n=t();return this._values[e]=n,n}}has(e){return this._values.hasOwnProperty(e)}};H(),xv(),I(),Tp(),Dp();var sq=k(n(771));EF();var lq=k(n(771));I();var cq=18e5,uq=36e5;var dq=e=>new Promise((t=>setTimeout(t,e)));function hq(e){if("object"!=typeof e)return!1;const t=e;return"boolean"==typeof t.hasUpdates&&(!0===t.hasUpdates&&"string"==typeof t.newVersion&&"string"==typeof t.releasePage||!1===t.hasUpdates)}var pq,fq=k(gf());function mq(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function gq(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=mq(n);return(e,n)=>r.then((r=>n(r.transaction(t,e).objectStore(t))))}function vq(){return pq||(pq=gq("keyval-store","keyval")),pq}function yq(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},mq(e.transaction)}QR(),GR();var bq="undefined"!=typeof window?(uG(),cG):null,xq="undefined"!=typeof window?dG():null,_q="__TheatreJS_StudioBundle",wq=k(nf());mg();var Sq=Am.div``,Eq=e=>wq.default.createElement(Sq,null);GR();var kq=new class{constructor(){M(this,"ui"),M(this,"publicApi"),M(this,"address"),M(this,"_projectsProxy",new fG.PointerProxy(new fG.Atom({}).pointer)),M(this,"projectsP",this._projectsProxy.pointer),M(this,"_store",new class{constructor(){M(this,"_reduxStore"),M(this,"_atom"),M(this,"atomP"),this._reduxStore=function(e){const t=[];{const n="object"==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__(e.devtoolsOptions):yn;t.push(n)}const n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}(...t);return Q$(e.rootReducer,void 0,n)}({rootReducer:WG,devtoolsOptions:{name:"Theatre.js Studio"}}),this._atom=function(e){let t=e.getState();const n=new K$.Atom(t);return e.subscribe((()=>{const r=e.getState();n.set(r),t=r})),n}(this._reduxStore),this.atomP=this._atom.pointer}initialize(e){const t=q$();return!0===e.usePersistentStorage?((e,t,n)=>{const r=n+".persistent",i=()=>e.getState().$persistent;!function(){const n=localStorage.getItem(r);if(n){let r,o=!0;try{r=JSON.parse(n),o=!1}catch(e){He.warn("Could not parse Theatre's persisted state. This must be a bug. Please report it.")}finally{o||(i=r,e.dispatch(jG.replacePersistentState(i))),t()}}else t();var i}();let o=i();const a=()=>{const e=i();e!==o&&(o=e,localStorage.setItem(r,JSON.stringify(e)))};e.subscribe(Zd(a,1e3)),window&&window.addEventListener("beforeunload",a)})(this._reduxStore,(()=>{this.tempTransaction((({drafts:e})=>{e.ephemeral.initialised=!0})).commit(),t.resolve()}),e.persistenceKey):(this.tempTransaction((({drafts:e})=>{e.ephemeral.initialised=!0})).commit(),t.resolve()),t.promise}getState(){return this._reduxStore.getState()}__dev_startHistoryFromScratch(e){this._reduxStore.dispatch(jG.historic.startHistoryFromScratch(jG.reduceParts((t=>b(y({},t),{historic:e})))))}tempTransaction(e){const t=(()=>{const e=HG++;return{push:t=>FG({id:e,originalAction:t}),discard:()=>UG(e),commit:()=>VG(e)}})();let n;const r=t.push(jG.reduceParts((t=>{const r={historic:F$(t.historic),ahistoric:F$(t.ahistoric),ephemeral:F$(t.ephemeral)};let i=!0;const o=iq((()=>{if(!i)throw new Error("You seem to have called the transaction api after studio.transaction() has finished running")}),G$(r),r);try{return e(o),i=!1,{historic:U$(r.historic),ahistoric:U$(r.ahistoric),ephemeral:U$(r.ephemeral)}}catch(e){return n=e,t}finally{G$(void 0)}})));if(this._reduxStore.dispatch(r),n)throw this._reduxStore.dispatch(t.discard()),n;return{commit:()=>{this._reduxStore.dispatch(t.commit())},discard:()=>{this._reduxStore.dispatch(t.discard())}}}undo(){this._reduxStore.dispatch(jG.historic.undo())}redo(){this._reduxStore.dispatch(jG.historic.redo())}createContentOfSaveFile(e){if(!this._reduxStore.getState().$persistent.historic.innerState.coreByProject[e])throw new Error(`Project ${e} has not been initialized.`);const t=FA();this.tempTransaction((({stateEditors:n})=>{n.coreByProject.historic.revisionHistory.add({projectId:e,revision:t})})).commit();const n=this._reduxStore.getState().$persistent.historic.innerState.coreByProject[e];return y({},n)}}),M(this,"_corePrivateApi"),M(this,"_cache",new aq),M(this,"paneManager"),M(this,"_coreAtom",new fG.Atom({})),M(this,"_initializedDeferred",q$()),M(this,"_initializeFnCalled",!1),M(this,"_didWarnAboutNotInitializing",!1),M(this,"_coreBits"),M(this,"_rafDriver"),this.address={studioId:Ip(10)},this.publicApi=new class{constructor(e){M(this,"ui",{hide(){T().ui.hide()},get isHidden(){return T().ui.isHidden},restore(){T().ui.restore()},renderToolset:(e,t)=>T().ui.renderToolset(e,t)}),M(this,"_cache",new aq)}initialize(e){return T().initialize(e)}extend(e){T().extend(e)}transaction(e){return T().transaction((({set:t,unset:n})=>e({set:t,unset:n})))}_getSelectionPrism(){return this._cache.get("_getSelectionPrism()",(()=>(0,oq.prism)((()=>fv().filter((e=>"Theatre_SheetObject"===e.type||"Theatre_Sheet"===e.type)).map((e=>e.publicApi))))))}_getSelection(){return this._getSelectionPrism().getValue()}setSelection(e){const t=[...e].filter((e=>B(e)||N(e))).map((e=>T().corePrivateAPI(e)));T().transaction((({stateEditors:e})=>{e.studio.historic.panels.outline.selection.set(t)}))}onSelectionChange(e){const t=T();return this._getSelectionPrism().onChange(t.ticker,e,!0)}get selection(){return this._getSelection()}scrub(){return T().scrub()}getStudioProject(){const e=T().core;if(!e)throw new Error("You're calling studio.getStudioProject() before `@theatre/core` is loaded. To fix this:\n1. Check if `@theatre/core` is import/required in your bundle.\n2. Check the stack trace of this error and make sure the funciton that calls getStudioProject() is run after `@theatre/core` is loaded.");return T().getStudioProject(e)}debouncedScrub(e=1e3){let t;const n=Zd((()=>{const e=t;e&&(t=void 0,e.commit())}),e);return{capture:e=>{t||(t=this.scrub());let r=!0;try{t.capture(e),r=!1}finally{if(r){const e=t;t=void 0,e.discard()}else n()}}}}createPane(e){return T().paneManager.createPane(e)}destroyPane(e){return T().paneManager.destroyPane(e)}createContentOfSaveFile(e){return T().createContentOfSaveFile(e)}}(this),"undefined"!=typeof window&&(this.ui=new bq.default(this)),this._attachToIncomingProjects(),this.paneManager=new class{constructor(e){this._studio=e,M(this,"_cache",new aq),this._instantiatePanesAsTheyComeIn()}_instantiatePanesAsTheyComeIn(){const e=this._getAllPanes();e.onStale((()=>{e.getValue()}))}_getAllPanes(){return this._cache.get("_getAllPanels()",(()=>(0,sq.prism)((()=>{if(!(0,sq.val)(this._studio.coreP))return{};const e=(0,sq.val)(this._studio.atomP.historic.panelInstanceDesceriptors),t=(0,sq.val)(this._studio.atomP.ephemeral.extensions.paneClasses),n={};for(const r of Object.values(e)){if(!r)continue;const e=t[r.paneClass];if(!e)continue;const{instanceId:i}=r,{extensionId:o,classDefinition:a}=e,s=sq.prism.memo(`instance-${r.instanceId}`,(()=>({extensionId:o,instanceId:i,definition:a})),dF);n[i]=s}return n}))))}get allPanesD(){return this._getAllPanes()}createPane(e){if(!this._studio.core)throw new Error("Can't create a pane because @theatre/core is not yet loaded");const t=(0,sq.val)(this._studio.atomP.ephemeral.extensions.paneClasses[e].extensionId),n=(0,sq.val)(this._studio.atomP.historic.panelInstanceDesceriptors);let r;for(let t=1;t<1e3&&(r=`${e} #${t}`,n[r]);t++);if(!t)throw new Error(`Pane class "${e}" is not registered.`);return this._studio.transaction((({drafts:t})=>{t.historic.panelInstanceDesceriptors[r]={instanceId:r,paneClass:e}})),this._getAllPanes().getValue()[r]}destroyPane(e){if(!this._studio.core)throw new Error("Can't do this yet because @theatre/core is not yet loaded");this._studio.transaction((({drafts:t})=>{delete t.historic.panelInstanceDesceriptors[e]}))}}(this),"undefined"!=typeof window&&setTimeout((()=>{this._initializeFnCalled||(console.error("You seem to have imported '@theatre/studio' but haven't initialized it. You can initialize the studio by:\n```\nimport studio from '@theatre/studio'\nstudio.initialize()\n```\n\n* If you didn't mean to import '@theatre/studio', this means that your bundler is not tree-shaking it. This is most likely a bundler misconfiguration.\n\n* If you meant to import '@theatre/studio' without showing its UI, you can do that by running:\n\n```\nimport studio from '@theatre/studio'\nstudio.initialize()\nstudio.ui.hide()\n```\n"),this._didWarnAboutNotInitializing=!0)}),100)}get ticker(){if(!this._rafDriver)throw new Error("`studio.ticker` was read before studio.initialize() was called.");return this._rafDriver.ticker}get atomP(){return this._store.atomP}initialize(e){return P(this,null,(function*(){if(!this._coreBits)throw new Error("You seem to have imported `@theatre/studio` without importing `@theatre/core`. Make sure to include an import of `@theatre/core` before calling `studio.initializer()`.");if(this._initializeFnCalled)return this._initializedDeferred.promise;this._initializeFnCalled=!0,this._didWarnAboutNotInitializing&&console.warn("You seem to have imported '@theatre/studio' but called `studio.initialize()` after some delay.\nTheatre.js projects remain in pending mode (won't play their sequences) until the studio is initialized, so you should place the `studio.initialize()` line right after the import line:\n\n```\nimport studio from '@theatre/studio'\n// ... and other imports\n\nstudio.initialize()\n```\n");const t={persistenceKey:"theatre-0.4",usePersistentStorage:!0};if("string"==typeof(null==e?void 0:e.persistenceKey)&&(t.persistenceKey=e.persistenceKey),!1!==(null==e?void 0:e.usePersistentStorage)&&"undefined"!=typeof window||(t.usePersistentStorage=!1),null==e?void 0:e.__experimental_rafDriver){if("Theatre_RafDriver_PublicAPI"!==e.__experimental_rafDriver.type)throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` must be either be undefined, or the return type of core.createRafDriver()");const t=this._coreBits.privateAPI(e.__experimental_rafDriver);if(!t)throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` seems to come from a different version of `@theatre/core` than the version that is attached to `@theatre/studio`");this._rafDriver=t}else this._rafDriver=this._coreBits.getCoreRafDriver();try{yield this._store.initialize(t)}catch(e){return void this._initializedDeferred.reject(e)}this._initializedDeferred.resolve(),this.ui&&(this.ui.render(),function(){P(this,null,(function*(){for(yield dq(500),yield function(){return P(this,null,(function*(){const e=T().atomP.ahistoric.visibilityState;if("everythingIsVisible"===(0,lq.val)(e))return;const t=q$(),n=(0,lq.pointerToPrism)(e).onStale((()=>{"everythingIsVisible"===(0,lq.val)(e)&&(n(),t.resolve(void 0))}));return t.promise}))}();;){const e=(0,lq.val)(T().atomP.ahistoric.updateChecker);if(e&&"error"!==e.result){const t=e.lastChecked,n=Date.now(),r=Math.abs(n-t);r<cq&&(yield dq(cq-r))}try{const e=yield fetch(new Request("https://updates.theatrejs.com/updates/0.6.0"));if(!e.ok)throw new Error(`HTTP Error ${e.statusText}`);{const t=yield e.json();if(!hq(t))throw new Error("Bad response");T().transaction((({drafts:e})=>{e.ahistoric.updateChecker={lastChecked:Date.now(),result:y({},t)}})),yield dq(1e3)}}catch(e){yield dq(uq)}}}))}())}))}get initialized(){return this._initializedDeferred.promise}_attachToIncomingProjects(){const e=(0,fG.pointerToPrism)(this.projectsP),t=e=>{for(const t of Object.values(e))t.isAttachedToStudio||t.attachToStudio(this)};e.onStale((()=>{t(e.getValue())})),t(e.getValue())}setCoreBits(e){this._coreBits=e,this._corePrivateApi=e.privateAPI,this._coreAtom.setByPointer((e=>e.core),e.coreExports),this._setProjectsP(e.projectsP)}_setProjectsP(e){this._projectsProxy.setPointer(e)}scrub(){return new class{constructor(e){this._studio=e,M(this,"_id"),M(this,"_state",{type:"Ready"}),this._id=String(pG++)}get status(){return this._state.type}reset(){const{_state:e}=this;if("Ready"!==e.type){if("Captured"!==e.type)throw"Committed"===e.type?new Error("This scrub is already committed and can't be reset."):new Error("This scrub is already discarded and can't be reset.");this._state={type:"Ready"},e.transaction.discard(),e.flagsTransaction.discard()}}commit(){const{_state:e}=this;if("Captured"!==e.type){if("Ready"===e.type)return void console.warn("Scrub is empty. Nothing to commit.");throw"Committed"===e.type?new Error("This scrub is already committed."):new Error("This scrub is already discarded and can't be comitted.")}e.transaction.commit(),e.flagsTransaction.discard(),this._state={type:"Committed"}}capture(e){if("Captured"===this._state.type&&this.reset(),"Ready"!==this._state.type)throw"Committed"===this._state.type?new Error("This scrub is already committed and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.commit()"):new Error("This scrub is already discarded and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.discard()");{let t=!0;try{this._state=y({type:"Captured"},this._capture(e)),t=!1}finally{t&&(console.error("This scrub's callback threw an error. We're undo-ing all of the changes made by this scrub, and marking it as discarded."),this._state={type:"Discarded"})}}}_capture(e){const t=[];return{transaction:this._studio.tempTransaction((n=>{let r=!0;const i={set:(e,i)=>{if(!r)throw new Error("You seem to have called the scrub api after scrub.capture()");const{root:o,path:a}=(0,hG.getPointerParts)(e);if(!j(o))throw new Error("We can only scrub props of Sheet Objects for now");n.set(e,i),t.push(e)}};try{e(i)}finally{r=!1}})),flagsTransaction:this._studio.tempTransaction((({stateEditors:e})=>{t.forEach((t=>{const{root:n,path:r}=(0,hG.getPointerParts)(t);j(n)&&R(n.template.getDefaultsAtPointer(t),((t,r)=>{e.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey.propsBeingScrubbed.flag(b(y({},n.address),{pathToProp:r}))}),r)}))}))}}discard(){const{_state:e}=this;if("Captured"!==e.type&&"Ready"!==e.type)throw"Committed"===e.type?new Error("This scrub is already committed and can't be discarded."):new Error("This scrub is already discarded");"Captured"===e.type&&(e.transaction.discard(),e.flagsTransaction.discard()),this._state={type:"Discarded"}}}(this)}tempTransaction(e){return this._store.tempTransaction(e)}transaction(e){return this.tempTransaction(e).commit()}__dev_startHistoryFromScratch(e){return this._store.__dev_startHistoryFromScratch(e)}get corePrivateAPI(){return this._corePrivateApi}get core(){return this._coreAtom.get().core}get coreP(){return this._coreAtom.pointer.core}extend(e){if(!e||"object"!=typeof e)throw new Error("Extensions must be JS objects");if("string"!=typeof e.id)throw new Error("extension.id must be a string");this.transaction((({drafts:t})=>{var n;if(t.ephemeral.extensions.byId[e.id]){const n=t.ephemeral.extensions.byId[e.id];if(e===n||(0,fq.default)(e,n))return;throw new Error(`Extension id "${e.id}" is already defined`)}t.ephemeral.extensions.byId[e.id]=e;const r=t.ephemeral.extensions.paneClasses;null==(n=e.panes)||n.forEach((t=>{if("string"!=typeof t.class)throw new Error("pane.class must be a string");if(t.class.length<3)throw new Error("pane.class should be a string with 3 or more characters");const n=r[t.class];if(n)throw new Error(`Pane class "${t.class}" already exists and is supplied by extension ${n}`);r[t.class]={extensionId:e.id,classDefinition:t}}))}))}getStudioProject(e){return this._cache.get("getStudioProject",(()=>e.getProject("Studio")))}getExtensionSheet(e,t){return this._cache.get("extensionSheet-"+e,(()=>this.getStudioProject(t).sheet("Extension "+e)))}undo(){this._store.undo()}redo(){this._store.redo()}createContentOfSaveFile(e){return this._store.createContentOfSaveFile(e)}createAssetStorage(e,t){return P(this,null,(function*(){if("undefined"==typeof window)return{getAssetUrl:()=>"",createAsset:()=>Promise.resolve(null)};if(!("indexedDB"in window))return console.log("This browser doesn't support IndexedDB."),{getAssetUrl:e=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")},createAsset:e=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")}};const n=(e=>{const t=gq(`theatrejs-${e}`,"default-store");return{set:(e,n)=>function(e,t,n=vq()){return n("readwrite",(n=>(n.put(t,e),mq(n.transaction))))}(e,n,t),get:e=>function(e,t=vq()){return t("readonly",(t=>mq(t.get(e))))}(e,t),del:e=>function(e,t=vq()){return t("readwrite",(t=>(t.delete(e),mq(t.transaction))))}(e,t),keys:()=>function(e=vq()){return e("readonly",(e=>{if(e.getAllKeys)return mq(e.getAllKeys());const t=[];return yq(e,(e=>t.push(e.key))).then((()=>t))}))}(t),entries:()=>function(e=vq()){return e("readonly",(t=>{if(t.getAll&&t.getAllKeys)return Promise.all([mq(t.getAllKeys()),mq(t.getAll())]).then((([e,t])=>e.map(((e,n)=>[e,t[n]]))));const n=[];return e("readonly",(e=>yq(e,(e=>n.push([e.key,e.value]))).then((()=>n))))}))}(t),values:()=>function(e=vq()){return e("readonly",(e=>{if(e.getAll)return mq(e.getAll());const t=[];return yq(e,(e=>t.push(e.value))).then((()=>t))}))}(t)}})(`${e.address.projectId}-assets`),r=$R(e),i=yield n.keys();yield Promise.all(i.map((e=>P(this,null,(function*(){r.includes(e)||(yield n.del(e))}))))),yield Promise.all(i.map((r=>P(this,null,(function*(){var i,o;const a=`${t}/${r}`;try{(yield fetch(a,{method:"HEAD"})).ok&&(yield n.del(r))}catch(t){OR.error("Failed to access assets",`Failed to access assets at ${null!=(o=null==(i=e.config.assets)?void 0:i.baseUrl)?o:"/"}. This is likely due to a CORS issue.`)}})))));const o=new Map(yield n.entries()),a=new Map;return{getAssetUrl:e=>o.has(e)?(e=>{const t=o.get(e);if(!t)throw new Error(`Asset with id ${e} not found`);return(e=>{if(a.has(e))return a.get(e);{const t=URL.createObjectURL(e);return a.set(e,t),t}})(t)})(e):`${t}/${e}`,createAsset:r=>P(this,null,(function*(){var i,a,s;const l=$R(e);let c=!1;if(l.includes(r.name)){let n;try{n=null!=(i=o.get(r.name))?i:yield fetch(`${t}/${r.name}`).then((e=>e.ok?e.blob():void 0))}catch(t){return OR.error("Failed to access assets",`Failed to access assets at ${null!=(s=null==(a=e.config.assets)?void 0:a.baseUrl)?s:"/"}. This is likely due to a CORS issue.`),Promise.resolve(null)}if(n){if(c=yield xq.isEqual(r,n),c)return r.name;{const e=t=>{const n=prompt(t,r.name);return null!==n&&(""===n?e("Asset name cannot be empty. Please choose a different file name for this asset."):l.includes(n)?(console.log(l),e("An asset with this name already exists. Please choose a different file name for this asset.")):(r=new File([r],n,{type:r.type}),!0))};if(!e("An asset with this name already exists. Please choose a different file name for this asset."))return null}}}return o.set(r.name,r),yield n.set(r.name,r),r.name}))}}))}};a=kq;var Mq=kq.publicApi;!function(){if("undefined"==typeof window)return;const e=window[_q];if(void 0!==e)throw"object"==typeof e&&e&&"string"==typeof e.version?new Error("It seems that the module '@theatre/studio' is loaded more than once. This could have two possible causes:\n1. You might have two separate versions of Theatre.js in node_modules.\n2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.\n\nNote that it **is okay** to import '@theatre/studio' multiple times. But those imports should point to the same module."):new Error(`The variable window.${_q} seems to be already set by a module other than @theatre/core.`);const t=new class{constructor(e){this._studio=e,M(this,"_coreBundle")}get type(){return"Theatre_StudioBundle"}registerCoreBundle(e){if(this._coreBundle)throw new Error("StudioBundle.coreBundle is already registered. This is a bug.");let t;this._coreBundle=e,e.getBitsForStudio(this._studio,(e=>{t=e})),this._studio.setCoreBits(t)}}(kq);window[_q]=t;const n=window.__TheatreJS_CoreBundle;n&&null!==n&&"Theatre_CoreBundle"===n.type&&t.registerCoreBundle(n)}(),"undefined"!=typeof window&&(window.__TheatreJS_Notifications={notify:OR})},408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function M(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+T(l,0):o,_(a)?(i="",null!=e&&(i=e.replace(P,"$&/")+"/"),C(a,t,i,"",(function(e){return e}))):null!=a&&(M(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var u=o+T(s=e[c],c);l+=C(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=C(s=s.value,t,i,u=o+T(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},294:(e,t,n)=>{"use strict";e.exports=n(408)},381:(e,t,n)=>{e=n.nmd(e);var r=Object.create,i=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))d.call(t,n)&&p(e,n,t[n]);if(c)for(var n of c(t))h.call(t,n)&&p(e,n,t[n]);return e},m=(e,t)=>o(e,s(t)),g=e=>i(e,"__esModule",{value:!0}),v=(e,t)=>function(){return t||(0,e[Object.keys(e)[0]])((t={exports:{}}).exports,t),t.exports},y=(e,t)=>{for(var n in g(e),t)i(e,n,{get:t[n],enumerable:!0})},b=e=>((e,t,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of l(t))d.call(e,r)||"default"===r||i(e,r,{get:()=>t[r],enumerable:!(n=a(t,r))||n.enumerable});return e})(g(i(null!=e?r(u(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),x=(e,t,n)=>(p(e,"symbol"!=typeof t?t+"":t,n),n),_=v({"../node_modules/timing-function/lib/UnitBezier.js"(e,t){t.exports=function(){function e(e,t,n,r){this.set(e,t,n,r)}return e.prototype.set=function(e,t,n,r){this._cx=3*e,this._bx=3*(n-e)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*t,this._by=3*(r-t)-this._cy,this._ay=1-this._cy-this._by},e.epsilon=1e-6,e.prototype._sampleCurveX=function(e){return((this._ax*e+this._bx)*e+this._cx)*e},e.prototype._sampleCurveY=function(e){return((this._ay*e+this._by)*e+this._cy)*e},e.prototype._sampleCurveDerivativeX=function(e){return(3*this._ax*e+2*this._bx)*e+this._cx},e.prototype._solveCurveX=function(e,t){var n,r,i,o,a,s;for(i=void 0,o=void 0,a=void 0,s=void 0,n=void 0,r=void 0,a=e,r=0;r<8;){if(s=this._sampleCurveX(a)-e,Math.abs(s)<t)return a;if(n=this._sampleCurveDerivativeX(a),Math.abs(n)<t)break;a-=s/n,r++}if((a=e)<(i=0))return i;if(a>(o=1))return o;for(;i<o;){if(s=this._sampleCurveX(a),Math.abs(s-e)<t)return a;e>s?i=a:o=a,a=.5*(o-i)+i}return a},e.prototype.solve=function(e,t){return this._sampleCurveY(this._solveCurveX(e,t))},e.prototype.solveSimple=function(e){return this._sampleCurveY(this._solveCurveX(e,1e-6))},e}()}}),w=v({"../node_modules/levenshtein-edit-distance/index.js"(e,t){var n,r;n=[],r=[],t.exports=function(e,t,i){var o,a,s,l,c,u,d,h;if(e===t)return 0;if(o=e.length,a=t.length,0===o)return a;if(0===a)return o;for(i&&(e=e.toLowerCase(),t=t.toLowerCase()),d=0;d<o;)r[d]=e.charCodeAt(d),n[d]=++d;for(h=0;h<a;)for(s=t.charCodeAt(h),l=c=h++,d=-1;++d<o;)u=s===r[d]?c:c+1,c=n[d],n[d]=l=c>l?u>l?l+1:u:u>c?c+1:u;return l}}}),S=v({"../node_modules/propose/propose.js"(e,t){var n=w();t.exports=function(){var e,t,r,i,o,a=0,s=arguments[0],l=arguments[1],c=l.length,u=arguments[2];u&&(i=u.threshold,o=u.ignoreCase),void 0===i&&(i=0);for(var d=0;d<c;++d)(e=(t=o?n(s,l[d],!0):n(s,l[d]))>s.length?1-t/l[d].length:1-t/s.length)>a&&(a=e,r=l[d]);return a>=i?r:null}}}),E=v({"../node_modules/fast-deep-equal/index.js"(e,t){"use strict";t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}}});y(t,{createRafDriver:()=>xi,getProject:()=>oa,notify:()=>gi,onChange:()=>sa,types:()=>Mi,val:()=>la});var k={};y(k,{createRafDriver:()=>xi,getProject:()=>oa,notify:()=>gi,onChange:()=>sa,types:()=>Mi,val:()=>la});var M=b(n(771)),P=new class{constructor(){x(this,"atom",new M.Atom({projects:{}}))}add(e,t){this.atom.setByPointer((t=>t.projects[e]),t)}get(e){return this.atom.get().projects[e]}has(e){return!!this.get(e)}},T=new WeakMap;function C(e){return T.get(e)}function A(e,t){T.set(e,t)}var I,R=[],O=Array.isArray,D="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,L="object"==typeof self&&self&&self.Object===Object&&self,j=D||L||Function("return this")(),z=j.Symbol,N=Object.prototype,B=N.hasOwnProperty,F=N.toString,U=z?z.toStringTag:void 0,V=Object.prototype.toString,H=z?z.toStringTag:void 0,W=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":H&&H in Object(e)?function(e){var t=B.call(e,U),n=e[U];try{e[U]=void 0;var r=!0}catch(e){}var i=F.call(e);return r&&(t?e[U]=n:delete e[U]),i}(e):function(e){return V.call(e)}(e)},G=function(e){return null!=e&&"object"==typeof e},$=function(e){return"symbol"==typeof e||G(e)&&"[object Symbol]"==W(e)},q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K=/^\w*$/,X=function(e,t){if(O(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!$(e))||K.test(e)||!q.test(e)||null!=t&&e in Object(t)},Y=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Z=function(e){if(!Y(e))return!1;var t=W(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},J=j["__core-js_shared__"],Q=(I=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"",ee=Function.prototype.toString,te=function(e){if(null!=e){try{return ee.call(e)}catch(e){}try{return e+""}catch(e){}}return""},ne=/^\[object .+?Constructor\]$/,re=Function.prototype,ie=Object.prototype,oe=re.toString,ae=ie.hasOwnProperty,se=RegExp("^"+oe.call(ae).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),le=function(e){return!(!Y(e)||(t=e,Q&&Q in t))&&(Z(e)?se:ne).test(te(e));var t},ce=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return le(n)?n:void 0},ue=ce(Object,"create"),de=Object.prototype.hasOwnProperty,he=Object.prototype.hasOwnProperty;function pe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pe.prototype.clear=function(){this.__data__=ue?ue(null):{},this.size=0},pe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},pe.prototype.get=function(e){var t=this.__data__;if(ue){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return de.call(t,e)?t[e]:void 0},pe.prototype.has=function(e){var t=this.__data__;return ue?void 0!==t[e]:he.call(t,e)},pe.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ue&&void 0===t?"__lodash_hash_undefined__":t,this};var fe=pe,me=function(e,t){return e===t||e!=e&&t!=t},ge=function(e,t){for(var n=e.length;n--;)if(me(e[n][0],t))return n;return-1},ve=Array.prototype.splice;function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ye.prototype.clear=function(){this.__data__=[],this.size=0},ye.prototype.delete=function(e){var t=this.__data__,n=ge(t,e);return!(n<0||(n==t.length-1?t.pop():ve.call(t,n,1),--this.size,0))},ye.prototype.get=function(e){var t=this.__data__,n=ge(t,e);return n<0?void 0:t[n][1]},ye.prototype.has=function(e){return ge(this.__data__,e)>-1},ye.prototype.set=function(e,t){var n=this.__data__,r=ge(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var be=ye,xe=ce(j,"Map"),_e=function(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map};function we(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}we.prototype.clear=function(){this.size=0,this.__data__={hash:new fe,map:new(xe||be),string:new fe}},we.prototype.delete=function(e){var t=_e(this,e).delete(e);return this.size-=t?1:0,t},we.prototype.get=function(e){return _e(this,e).get(e)},we.prototype.has=function(e){return _e(this,e).has(e)},we.prototype.set=function(e,t){var n=_e(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var Se=we,Ee="Expected a function";function ke(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Ee);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ke.Cache||Se),n}ke.Cache=Se;var Me,Pe,Te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ce=/\\(\\)?/g,Ae=(Me=ke((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Te,(function(e,n,r,i){t.push(r?i.replace(Ce,"$1"):n||e)})),t}),(function(e){return 500===Pe.size&&Pe.clear(),e})),Pe=Me.cache,Me),Ie=z?z.prototype:void 0,Re=Ie?Ie.toString:void 0,Oe=function e(t){if("string"==typeof t)return t;if(O(t))return function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(t,e)+"";if($(t))return Re?Re.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n},De=function(e){return null==e?"":Oe(e)},Le=function(e,t){return O(e)?e:X(e,t)?[e]:Ae(De(e))},je=function(e){if("string"==typeof e||$(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},ze=function(e,t){for(var n=0,r=(t=Le(t,e)).length;null!=e&&n<r;)e=e[je(t[n++])];return n&&n==r?e:void 0},Ne=function(e,t,n){var r=null==e?void 0:ze(e,t);return void 0===r?n:r},Be=class{constructor(){x(this,"_values",{})}get(e,t){if(this.has(e))return this._values[e];{const n=t();return this._values[e]=n,n}}has(e){return this._values.hasOwnProperty(e)}},Fe=b(n(771)),Ue=function(){try{var e=ce(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ve=function(e,t,n){"__proto__"==t&&Ue?Ue(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},He=Object.prototype.hasOwnProperty,We=function(e,t,n){var r=e[t];He.call(e,t)&&me(r,n)&&(void 0!==n||t in e)||Ve(e,t,n)},Ge=/^(?:0|[1-9]\d*)$/,$e=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Ge.test(e))&&e>-1&&e%1==0&&e<t},qe=function(e,t,n){return null==e?e:function(e,t,n,r){if(!Y(e))return e;for(var i=-1,o=(t=Le(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=je(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=Y(u)?u:$e(t[i+1])?[]:{})}We(s,l,c),s=s[l]}return e}(e,t,n)},Ke=new WeakMap;function Xe(e){if(Ke.has(e))return Ke.get(e);const t="compound"===e.type?function(e){const t={};for(const[n,r]of Object.entries(e.props))t[n]=Xe(r);return t}(e):"enum"===e.type?function(e){const t={$case:e.defaultCase};for(const[n,r]of Object.entries(e.cases))t[n]=Xe(r);return t}(e):e.default;return Ke.set(e,t),t}var Ye=b(n(771)),Ze=b(_());var Je=(0,Ye.prism)((()=>{})),Qe={beforeFirstKeyframe:e=>({started:!0,validFrom:-1/0,validTo:e.position,der:(0,Ye.prism)((()=>({left:e.value,progression:0})))}),lastKeyframe:e=>({started:!0,validFrom:e.position,validTo:1/0,der:(0,Ye.prism)((()=>({left:e.value,progression:0})))}),between(e,t,n){if(!e.connectedRight)return{started:!0,validFrom:e.position,validTo:t.position,der:(0,Ye.prism)((()=>({left:e.value,progression:0})))};const r=n=>(n-e.position)/(t.position-e.position);if(!e.type||"bezier"===e.type){const i=new Ze.default(e.handles[2],e.handles[3],t.handles[0],t.handles[1]),o=(0,Ye.prism)((()=>{const o=r(n.getValue()),a=i.solveSimple(o);return{left:e.value,right:t.value,progression:a}}));return{started:!0,validFrom:e.position,validTo:t.position,der:o}}const i=(0,Ye.prism)((()=>{const i=r(n.getValue()),o=Math.floor(i);return{left:e.value,right:t.value,progression:o}}));return{started:!0,validFrom:e.position,validTo:t.position,der:i}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:Je}};function et(e,t,n){const r=n.get(e);if(r&&r.override===t)return r.merged;const i=f({},e);for(const r of Object.keys(t)){const o=t[r],a=e[r];i[r]="object"==typeof o&&"object"==typeof a?et(a,o,n):void 0===o?a:o}return n.set(e,{override:t,merged:i}),i}function tt(e,t){let n=e;for(const e of t)n=n[e];return n}var nt=b(n(771)),rt=b(n(771)),it=b(n(771)),ot=/\s/,at=/^\s+/,st=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&ot.test(e.charAt(t)););return t}(e)+1).replace(at,""):e},lt=/^[-+]0x[0-9a-f]+$/i,ct=/^0b[01]+$/i,ut=/^0o[0-7]+$/i,dt=parseInt,ht=function(e){if("number"==typeof e)return e;if($(e))return NaN;if(Y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=st(e);var n=ct.test(e);return n||ut.test(e)?dt(e.slice(2),n?2:8):lt.test(e)?NaN:+e},pt=1/0,ft=function(e){var t=function(e){return e?(e=ht(e))===pt||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0},mt=function(e){return e},gt=ce(j,"WeakMap"),vt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},yt=Object.prototype,bt=function(e){return G(e)&&"[object Arguments]"==W(e)},xt=Object.prototype,_t=xt.hasOwnProperty,wt=xt.propertyIsEnumerable,St=bt(function(){return arguments}())?bt:function(e){return G(e)&&_t.call(e,"callee")&&!wt.call(e,"callee")},Et=t&&!t.nodeType&&t,kt=Et&&e&&!e.nodeType&&e,Mt=kt&&kt.exports===Et?j.Buffer:void 0,Pt=(Mt?Mt.isBuffer:void 0)||function(){return!1},Tt={};Tt["[object Float32Array]"]=Tt["[object Float64Array]"]=Tt["[object Int8Array]"]=Tt["[object Int16Array]"]=Tt["[object Int32Array]"]=Tt["[object Uint8Array]"]=Tt["[object Uint8ClampedArray]"]=Tt["[object Uint16Array]"]=Tt["[object Uint32Array]"]=!0,Tt["[object Arguments]"]=Tt["[object Array]"]=Tt["[object ArrayBuffer]"]=Tt["[object Boolean]"]=Tt["[object DataView]"]=Tt["[object Date]"]=Tt["[object Error]"]=Tt["[object Function]"]=Tt["[object Map]"]=Tt["[object Number]"]=Tt["[object Object]"]=Tt["[object RegExp]"]=Tt["[object Set]"]=Tt["[object String]"]=Tt["[object WeakMap]"]=!1;var Ct,At=t&&!t.nodeType&&t,It=At&&e&&!e.nodeType&&e,Rt=It&&It.exports===At&&D.process,Ot=function(){try{return It&&It.require&&It.require("util").types||Rt&&Rt.binding&&Rt.binding("util")}catch(e){}}(),Dt=Ot&&Ot.isTypedArray,Lt=Dt?(Ct=Dt,function(e){return Ct(e)}):function(e){return G(e)&&vt(e.length)&&!!Tt[W(e)]},jt=Object.prototype.hasOwnProperty,zt=function(e,t){var n=O(e),r=!n&&St(e),i=!n&&!r&&Pt(e),o=!n&&!r&&!i&&Lt(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!jt.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||$e(c,l))||s.push(c);return s},Nt=function(e,t){return function(n){return e(t(n))}},Bt=Nt(Object.keys,Object),Ft=Object.prototype.hasOwnProperty,Ut=function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||yt))return Bt(e);var t,n,r=[];for(var i in Object(e))Ft.call(e,i)&&"constructor"!=i&&r.push(i);return r},Vt=function(e){return null!=(t=e)&&vt(t.length)&&!Z(t)?zt(e):Ut(e);var t},Ht=Nt(Object.getPrototypeOf,Object),Wt=Function.prototype,Gt=Object.prototype,$t=Wt.toString,qt=Gt.hasOwnProperty,Kt=$t.call(Object),Xt=function(e){if(!G(e)||"[object Object]"!=W(e))return!1;var t=Ht(e);if(null===t)return!0;var n=qt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&$t.call(n)==Kt},Yt=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}(e,t,n)},Zt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Jt=function(e){return Zt.test(e)},Qt="\\ud800-\\udfff",en="["+Qt+"]",tn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",nn="\\ud83c[\\udffb-\\udfff]",rn="[^"+Qt+"]",on="(?:\\ud83c[\\udde6-\\uddff]){2}",an="[\\ud800-\\udbff][\\udc00-\\udfff]",sn="(?:"+tn+"|"+nn+")?",ln="[\\ufe0e\\ufe0f]?",cn=ln+sn+"(?:\\u200d(?:"+[rn,on,an].join("|")+")"+ln+sn+")*",un="(?:"+[rn+tn+"?",tn,on,an,en].join("|")+")",dn=RegExp(nn+"(?="+nn+")|"+un+cn,"g"),hn=function(e){return Jt(e)?function(e){return e.match(dn)||[]}(e):function(e){return e.split("")}(e)},pn=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ht(n))==n?n:0),void 0!==t&&(t=(t=ht(t))==t?t:0),function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}(ht(e),t,n)};function fn(e){var t=this.__data__=new be(e);this.size=t.size}fn.prototype.clear=function(){this.__data__=new be,this.size=0},fn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},fn.prototype.get=function(e){return this.__data__.get(e)},fn.prototype.has=function(e){return this.__data__.has(e)},fn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof be){var r=n.__data__;if(!xe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Se(r)}return n.set(e,t),this.size=n.size,this};var mn=fn,gn=Object.prototype.propertyIsEnumerable,vn=Object.getOwnPropertySymbols,yn=vn?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(vn(e),(function(t){return gn.call(e,t)})))}:function(){return[]},bn=function(e){return function(e,t,n){var r=t(e);return O(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Vt,yn)},xn=ce(j,"DataView"),_n=ce(j,"Promise"),wn=ce(j,"Set"),Sn="[object Map]",En="[object Promise]",kn="[object Set]",Mn="[object WeakMap]",Pn="[object DataView]",Tn=te(xn),Cn=te(xe),An=te(_n),In=te(wn),Rn=te(gt),On=W;(xn&&On(new xn(new ArrayBuffer(1)))!=Pn||xe&&On(new xe)!=Sn||_n&&On(_n.resolve())!=En||wn&&On(new wn)!=kn||gt&&On(new gt)!=Mn)&&(On=function(e){var t=W(e),n="[object Object]"==t?e.constructor:void 0,r=n?te(n):"";if(r)switch(r){case Tn:return Pn;case Cn:return Sn;case An:return En;case In:return kn;case Rn:return Mn}return t});var Dn=On,Ln=j.Uint8Array;function jn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Se;++t<n;)this.add(e[t])}jn.prototype.add=jn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},jn.prototype.has=function(e){return this.__data__.has(e)};var zn,Nn,Bn,Fn,Un,Vn,Hn,Wn,Gn=jn,$n=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},qn=function(e,t){return e.has(t)},Kn=function(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=2&n?new Gn:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var f=e[d],m=t[d];if(r)var g=a?r(m,f,d,t,e,o):r(f,m,d,e,t,o);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!$n(t,(function(e,t){if(!qn(p,t)&&(f===e||i(f,e,n,r,o)))return p.push(t)}))){h=!1;break}}else if(f!==m&&!i(f,m,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h},Xn=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},Yn=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Zn=z?z.prototype:void 0,Jn=Zn?Zn.valueOf:void 0,Qn=Object.prototype.hasOwnProperty,er="[object Arguments]",tr="[object Array]",nr="[object Object]",rr=Object.prototype.hasOwnProperty,ir=function(e,t,n,r,i,o){var a=O(e),s=O(t),l=a?tr:Dn(e),c=s?tr:Dn(t),u=(l=l==er?nr:l)==nr,d=(c=c==er?nr:c)==nr,h=l==c;if(h&&Pt(e)){if(!Pt(t))return!1;a=!0,u=!1}if(h&&!u)return o||(o=new mn),a||Lt(e)?Kn(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Ln(e),new Ln(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return me(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Xn;case"[object Set]":var l=1&r;if(s||(s=Yn),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=Kn(s(e),s(t),r,i,o,a);return a.delete(e),u;case"[object Symbol]":if(Jn)return Jn.call(e)==Jn.call(t)}return!1}(e,t,l,n,r,i,o);if(!(1&n)){var p=u&&rr.call(e,"__wrapped__"),f=d&&rr.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,g=f?t.value():t;return o||(o=new mn),i(m,g,n,r,o)}}return!!h&&(o||(o=new mn),function(e,t,n,r,i,o){var a=1&n,s=bn(e),l=s.length;if(l!=bn(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:Qn.call(t,u)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);for(var f=a;++c<l;){var m=e[u=s[c]],g=t[u];if(r)var v=a?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o))},or=function e(t,n,r,i,o){return t===n||(null==t||null==n||!G(t)&&!G(n)?t!=t&&n!=n:ir(t,n,r,i,e,o))},ar=function(e){return e==e&&!Y(e)},sr=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},lr=function(e){var t=function(e){for(var t=Vt(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ar(i)]}return t}(e);return 1==t.length&&t[0][2]?sr(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new mn;if(r)var h=r(c,u,l,e,t,d);if(!(void 0===h?or(u,c,3,r,d):h))return!1}}return!0}(n,e,t)}},cr=function(e,t){return null!=e&&t in Object(e)},ur=function(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=Le(t,e)).length,o=!1;++r<i;){var a=je(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&vt(i)&&$e(a,i)&&(O(e)||St(e))}(e,t,cr)},dr=function(e){return function(t){return null==t?void 0:t[e]}},hr=function(e){return X(e)?dr(je(e)):function(e){return function(t){return ze(t,e)}}(e)},pr=function(e){return"function"==typeof e?e:null==e?mt:"object"==typeof e?O(e)?(t=e[0],n=e[1],X(t)&&ar(n)?sr(je(t),n):function(e){var r=Ne(e,t);return void 0===r&&r===n?ur(e,t):or(n,r,3)}):lr(e):hr(e);var t,n},fr=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e},mr=function(){return j.Date.now()},gr=Math.max,vr=Math.min,yr=function(e,t){var n={};return t=pr(t),function(e,t){e&&fr(e,t,Vt)}(e,(function(e,r,i){Ve(n,r,t(e,r,i))})),n},br=Math.floor,xr=function(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=br(t/2))&&(e+=e)}while(t);return n},_r=dr("length"),wr="\\ud800-\\udfff",Sr="["+wr+"]",Er="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",kr="\\ud83c[\\udffb-\\udfff]",Mr="[^"+wr+"]",Pr="(?:\\ud83c[\\udde6-\\uddff]){2}",Tr="[\\ud800-\\udbff][\\udc00-\\udfff]",Cr="(?:"+Er+"|"+kr+")?",Ar="[\\ufe0e\\ufe0f]?",Ir=Ar+Cr+"(?:\\u200d(?:"+[Mr,Pr,Tr].join("|")+")"+Ar+Cr+")*",Rr="(?:"+[Mr+Er+"?",Er,Pr,Tr,Sr].join("|")+")",Or=RegExp(kr+"(?="+kr+")|"+Rr+Ir,"g"),Dr=function(e){return Jt(e)?function(e){for(var t=Or.lastIndex=0;Or.test(e);)++t;return t}(e):_r(e)},Lr=Math.ceil,jr=function(e,t,n){e=De(e);var r=(t=ft(t))?Dr(e):0;return t&&r<t?function(e,t){var n=(t=void 0===t?" ":Oe(t)).length;if(n<2)return n?xr(t,e):t;var r=xr(t,Lr(e/Dr(t)));return Jt(t)?Yt(hn(r),0,e).join(""):r.slice(0,e)}(t-r,n)+e:e};function zr(e){return"compound"===e.type||"enum"===e.type}function Nr(e,t){if(!e)return;const[n,...r]=t;return void 0===n?e:zr(e)?Nr("enum"===e.type?e.cases[n]:e.props[n],r):void 0}function Br(e){return function(t,n){return e(t,n())}}new WeakMap,(Nn=zn||(zn={}))[Nn.GENERAL=1]="GENERAL",Nn[Nn.TODO=2]="TODO",Nn[Nn.TROUBLESHOOTING=4]="TROUBLESHOOTING",(Fn=Bn||(Bn={}))[Fn.INTERNAL=8]="INTERNAL",Fn[Fn.DEV=16]="DEV",Fn[Fn.PUBLIC=32]="PUBLIC",(Vn=Un||(Un={}))[Vn.TRACE=64]="TRACE",Vn[Vn.DEBUG=128]="DEBUG",Vn[Vn.WARN=256]="WARN",Vn[Vn.ERROR=512]="ERROR",(Wn=Hn||(Hn={}))[Wn.ERROR_PUBLIC=545]="ERROR_PUBLIC",Wn[Wn.ERROR_DEV=529]="ERROR_DEV",Wn[Wn._HMM=524]="_HMM",Wn[Wn._TODO=522]="_TODO",Wn[Wn._ERROR=521]="_ERROR",Wn[Wn.WARN_PUBLIC=289]="WARN_PUBLIC",Wn[Wn.WARN_DEV=273]="WARN_DEV",Wn[Wn._KAPOW=268]="_KAPOW",Wn[Wn._WARN=265]="_WARN",Wn[Wn.DEBUG_DEV=145]="DEBUG_DEV",Wn[Wn._DEBUG=137]="_DEBUG",Wn[Wn.TRACE_DEV=81]="TRACE_DEV",Wn[Wn._TRACE=73]="_TRACE";var Fr={_hmm:Ur(524),_todo:Ur(522),_error:Ur(521),errorDev:Ur(529),errorPublic:Ur(545),_kapow:Ur(268),_warn:Ur(265),warnDev:Ur(273),warnPublic:Ur(289),_debug:Ur(137),debugDev:Ur(145),_trace:Ur(73),traceDev:Ur(81)};function Ur(e){return Object.freeze({audience:Vr(e,8)?"internal":Vr(e,16)?"dev":"public",category:Vr(e,4)?"troubleshooting":Vr(e,2)?"todo":"general",level:Vr(e,512)?512:Vr(e,256)?256:Vr(e,128)?128:64})}function Vr(e,t){return(e&t)===t}function Hr(e,t){return(32==(32&t)||(16==(16&t)?e.dev:8==(8&t)&&e.internal))&&e.min<=t}var Wr={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(e,t,n){return this.create({names:[...e.names,{name:t,key:n}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(e){if(e.length<5)return e;const t=e.replace(this.collapseOnRE,"");return this.cssMemo.has(t)||this.cssMemo.set(t,this.css(e)),t},css(e){var t,n,r,i;const o=this.cssMemo.get(e);if(o)return o;let a=`color:${null!=(n=null==(t=this.color)?void 0:t.call(this,e))?n:`hsl(${(e.charCodeAt(0)+e.charCodeAt(e.length-1))%360}, 100%, 60%)`}`;return(null==(r=this.bold)?void 0:r.test(e))&&(a+=";font-weight:600"),(null==(i=this.italic)?void 0:i.test(e))&&(a+=";font-style:italic"),this.cssMemo.set(e,a),a}}};function Gr(e=console,t={}){const n=m(f({},Wr),{includes:f({},Wr.includes)}),r={styled:Kr.bind(n,e),noStyle:Xr.bind(n,e)},i=qr.bind(n);function o(){return n.loggingConsoleStyle&&n.loggerConsoleStyle?r.styled:r.noStyle}return n.create=o(),{configureLogger(e){var t;"console"===e?(n.loggerConsoleStyle=Wr.loggerConsoleStyle,n.create=o()):"console"===e.type?(n.loggerConsoleStyle=null!=(t=e.style)?t:Wr.loggerConsoleStyle,n.create=o()):"keyed"===e.type?(n.creatExt=t=>e.keyed(t.names),n.create=i):"named"===e.type&&(n.creatExt=$r.bind(null,e.named),n.create=i)},configureLogging(e){var t,r,i,a,s;n.includes.dev=null!=(t=e.dev)?t:Wr.includes.dev,n.includes.internal=null!=(r=e.internal)?r:Wr.includes.internal,n.includes.min=null!=(i=e.min)?i:Wr.includes.min,n.include=null!=(a=e.include)?a:Wr.include,n.loggingConsoleStyle=null!=(s=e.consoleStyle)?s:Wr.loggingConsoleStyle,n.create=o()},getLogger:()=>n.create({names:[]})}}function $r(e,t){const n=[];for(let{name:e,key:r}of t.names)n.push(null==r?e:`${e} (${r})`);return e(n)}function qr(e){const t=f(f({},this.includes),this.include(e)),n=this.filtered,r=this.named.bind(this,e),i=this.creatExt(e),o=Hr(t,524),a=Hr(t,522),s=Hr(t,521),l=Hr(t,529),c=Hr(t,545),u=Hr(t,265),d=Hr(t,268),h=Hr(t,273),p=Hr(t,289),m=Hr(t,137),g=Hr(t,145),v=Hr(t,73),y=Hr(t,81),b=o?i.error.bind(i,Fr._hmm):n.bind(e,524),x=a?i.error.bind(i,Fr._todo):n.bind(e,522),_=s?i.error.bind(i,Fr._error):n.bind(e,521),w=l?i.error.bind(i,Fr.errorDev):n.bind(e,529),S=c?i.error.bind(i,Fr.errorPublic):n.bind(e,545),E=d?i.warn.bind(i,Fr._kapow):n.bind(e,268),k=u?i.warn.bind(i,Fr._warn):n.bind(e,265),M=h?i.warn.bind(i,Fr.warnDev):n.bind(e,273),P=p?i.warn.bind(i,Fr.warnPublic):n.bind(e,273),T=m?i.debug.bind(i,Fr._debug):n.bind(e,137),C=g?i.debug.bind(i,Fr.debugDev):n.bind(e,145),A=v?i.trace.bind(i,Fr._trace):n.bind(e,73),I=y?i.trace.bind(i,Fr.traceDev):n.bind(e,81),R={_hmm:b,_todo:x,_error:_,errorDev:w,errorPublic:S,_kapow:E,_warn:k,warnDev:M,warnPublic:P,_debug:T,debugDev:C,_trace:A,traceDev:I,lazy:{_hmm:o?Br(b):b,_todo:a?Br(x):x,_error:s?Br(_):_,errorDev:l?Br(w):w,errorPublic:c?Br(S):S,_kapow:d?Br(E):E,_warn:u?Br(k):k,warnDev:h?Br(M):M,warnPublic:p?Br(P):P,_debug:m?Br(T):T,debugDev:g?Br(C):C,_trace:v?Br(A):A,traceDev:y?Br(I):I},named:r,utilFor:{internal:()=>({debug:R._debug,error:R._error,warn:R._warn,trace:R._trace,named:(e,t)=>R.named(e,t).utilFor.internal()}),dev:()=>({debug:R.debugDev,error:R.errorDev,warn:R.warnDev,trace:R.traceDev,named:(e,t)=>R.named(e,t).utilFor.dev()}),public:()=>({error:R.errorPublic,warn:R.warnPublic,debug(e,t){R._warn(`(public "debug" filtered out) ${e}`,t)},trace(e,t){R._warn(`(public "trace" filtered out) ${e}`,t)},named:(e,t)=>R.named(e,t).utilFor.public()})}};return R}function Kr(e,t){const n=f(f({},this.includes),this.include(t)),r=[];let i="";for(let e=0;e<t.names.length;e++){const{name:n,key:o}=t.names[e];if(i+=` %c${n}`,r.push(this.style.css(n)),null!=o){const e=`%c#${o}`;i+=e,r.push(this.style.css(e))}}const o=this.filtered,a=this.named.bind(this,t),s=[i,...r];return Yr(o,t,n,e,s,function(e){const t=e.slice(0);for(let e=1;e<t.length;e++)t[e]+=";background-color:#e0005a;padding:2px;color:white";return t}(s),a)}function Xr(e,t){const n=f(f({},this.includes),this.include(t));let r="";for(let e=0;e<t.names.length;e++){const{name:n,key:i}=t.names[e];r+=` ${n}`,null!=i&&(r+=`#${i}`)}const i=[r];return Yr(this.filtered,t,n,e,i,i,this.named.bind(this,t))}function Yr(e,t,n,r,i,o,a){const s=Hr(n,524),l=Hr(n,522),c=Hr(n,521),u=Hr(n,529),d=Hr(n,545),h=Hr(n,265),p=Hr(n,268),f=Hr(n,273),m=Hr(n,289),g=Hr(n,137),v=Hr(n,145),y=Hr(n,73),b=Hr(n,81),x=s?r.error.bind(r,...i):e.bind(t,524),_=l?r.error.bind(r,...i):e.bind(t,522),w=c?r.error.bind(r,...i):e.bind(t,521),S=u?r.error.bind(r,...i):e.bind(t,529),E=d?r.error.bind(r,...i):e.bind(t,545),k=p?r.warn.bind(r,...o):e.bind(t,268),M=h?r.warn.bind(r,...i):e.bind(t,265),P=f?r.warn.bind(r,...i):e.bind(t,273),T=m?r.warn.bind(r,...i):e.bind(t,273),C=g?r.info.bind(r,...i):e.bind(t,137),A=v?r.info.bind(r,...i):e.bind(t,145),I=y?r.debug.bind(r,...i):e.bind(t,73),R=b?r.debug.bind(r,...i):e.bind(t,81),O={_hmm:x,_todo:_,_error:w,errorDev:S,errorPublic:E,_kapow:k,_warn:M,warnDev:P,warnPublic:T,_debug:C,debugDev:A,_trace:I,traceDev:R,lazy:{_hmm:s?Br(x):x,_todo:l?Br(_):_,_error:c?Br(w):w,errorDev:u?Br(S):S,errorPublic:d?Br(E):E,_kapow:p?Br(k):k,_warn:h?Br(M):M,warnDev:f?Br(P):P,warnPublic:m?Br(T):T,_debug:g?Br(C):C,debugDev:v?Br(A):A,_trace:y?Br(I):I,traceDev:b?Br(R):R},named:a,utilFor:{internal:()=>({debug:O._debug,error:O._error,warn:O._warn,trace:O._trace,named:(e,t)=>O.named(e,t).utilFor.internal()}),dev:()=>({debug:O.debugDev,error:O.errorDev,warn:O.warnDev,trace:O.traceDev,named:(e,t)=>O.named(e,t).utilFor.dev()}),public:()=>({error:O.errorPublic,warn:O.warnPublic,debug(e,t){O._warn(`(public "debug" filtered out) ${e}`,t)},trace(e,t){O._warn(`(public "trace" filtered out) ${e}`,t)},named:(e,t)=>O.named(e,t).utilFor.public()})}};return O}var Zr=Gr(console,{_debug:function(){},_error:function(){}});Zr.configureLogging({dev:!0,min:Un.TRACE});var Jr=Zr.getLogger().named("Theatre.js (default logger)").utilFor.dev(),Qr=new WeakMap;function ei(e,t,n){for(const[r,i]of Object.entries(t.props))if(!zr(i)){const t=[...e,r];n.set(JSON.stringify(t),n.size),ti(t,i,n)}for(const[r,i]of Object.entries(t.props))if(zr(i)){const t=[...e,r];n.set(JSON.stringify(t),n.size),ti(t,i,n)}}function ti(e,t,n){if("compound"===t.type)ei(e,t,n);else{if("enum"===t.type)throw new Error("Enums aren't supported yet");n.set(JSON.stringify(e),n.size)}}function ni(e){try{return JSON.parse(e)}catch(t){return void Jr.warn(`property ${JSON.stringify(e)} cannot be parsed. Skipping.`)}}var ri=b(n(771));b(S());var ii=class extends Error{},oi=class extends ii{},ai=b(n(771)),si=b(n(771)),li=b(n(771)),ci=b(n(771));function ui(){let e,t;const n=new Promise(((n,i)=>{e=e=>{n(e),r.status="resolved"},t=e=>{i(e),r.status="rejected"}})),r={resolve:e,reject:t,promise:n,status:"pending"};return r}var di=()=>{},hi=b(n(771)),pi=b(n(771)),fi="__TheatreJS_CoreBundle",mi=e=>(...t)=>{var n;switch(e){case"success":case"info":Jr.debug(t.slice(0,2).join("\n"));break;case"warning":Jr.warn(t.slice(0,2).join("\n"))}return"undefined"!=typeof window?null==(n=window.__TheatreJS_Notifications)?void 0:n.notify[e](...t):void 0},gi={warning:mi("warning"),success:mi("success"),info:mi("info"),error:mi("error")};"undefined"!=typeof window&&(window.addEventListener("error",(e=>{gi.error("An error occurred",`<pre>${e.message}</pre>\n\nSee **console** for details.`)})),window.addEventListener("unhandledrejection",(e=>{gi.error("An error occurred",`<pre>${e.reason}</pre>\n\nSee **console** for details.`)})));var vi,yi=b(n(771)),bi=0;function xi(e){var t;const n=new yi.Ticker({onActive(){var t;null==(t=null==e?void 0:e.start)||t.call(e)},onDormant(){var t;null==(t=null==e?void 0:e.stop)||t.call(e)}}),r={tick:e=>{n.tick(e)},id:bi++,name:null!=(t=null==e?void 0:e.name)?t:`CustomRafDriver-${bi}`,type:"Theatre_RafDriver_PublicAPI"};return A(r,{type:"Theatre_RafDriver_PrivateAPI",publicApi:r,ticker:n,start:null==e?void 0:e.start,stop:null==e?void 0:e.stop}),r}function _i(){return vi||function(e){if(vi)throw new Error("`setCoreRafDriver()` is already called.");const t=C(e);vi=t}(function(){let e=null;const t=xi({name:"DefaultCoreRafDriver",start:()=>{if("undefined"!=typeof window){const n=r=>{t.tick(r),e=window.requestAnimationFrame(n)};e=window.requestAnimationFrame(n)}else t.tick(0),setTimeout((()=>t.tick(1)),0)},stop:()=>{"undefined"!=typeof window&&null!==e&&window.cancelAnimationFrame(e)}});return t}()),vi}function wi(){return _i().ticker}var Si=1,Ei=60*Si,ki=60*Ei,Mi={};function Pi(e,t){return e.length<=t?e:e.substr(0,t-3)+"..."}y(Mi,{boolean:()=>Gi,compound:()=>Li,image:()=>ji,number:()=>Ni,rgba:()=>Vi,string:()=>Ki,stringLiteral:()=>Yi});var Ti=e=>"string"==typeof e?`string("${Pi(e,10)}")`:"number"==typeof e?`number(${Pi(String(e),10)})`:null===e?"null":void 0===e?"undefined":"boolean"==typeof e?String(e):Array.isArray(e)?"array":"object"==typeof e?"object":"unknown";function Ci(e){return m(f({},e),{toString(){return function(e,{removeAlphaIfOpaque:t=!1}={}){const n=(255*e.a|256).toString(16).slice(1);return`#${(255*e.r|256).toString(16).slice(1)+(255*e.g|256).toString(16).slice(1)+(255*e.b|256).toString(16).slice(1)+(t&&"ff"===n?"":n)}`}(this,{removeAlphaIfOpaque:!0})}})}function Ai(e){function t(e){return e>=.04045?((e+.055)/1.055)**2.4:e/12.92}return{r:t(e.r),g:t(e.g),b:t(e.b),a:e.a}}function Ii(e){let t=.4122214708*e.r+.5363325363*e.g+.0514459929*e.b,n=.2119034982*e.r+.6806995451*e.g+.1073969566*e.b,r=.0883024619*e.r+.2817188376*e.g+.6299787005*e.b,i=Math.cbrt(t),o=Math.cbrt(n),a=Math.cbrt(r);return{L:.2104542553*i+.793617785*o-.0040720468*a,a:1.9779984951*i-2.428592205*o+.4505937099*a,b:.0259040371*i+.7827717662*o-.808675766*a,alpha:e.a}}var Ri=Symbol("TheatrePropType_Basic");function Oi(e){return"object"==typeof e&&!!e&&"TheatrePropType"===e[Ri]}function Di(e){if("number"==typeof e)return Ni(e);if("boolean"==typeof e)return Gi(e);if("string"==typeof e)return Ki(e);if("object"==typeof e&&e){if(Oi(e))return e;if(Xt(e))return Li(e);throw new oi(`This value is not a valid prop type: ${Ti(e)}`)}throw new oi(`This value is not a valid prop type: ${Ti(e)}`)}var Li=(e,t={})=>{const n=function(e){const t={};for(const n of Object.keys(e)){const r=e[n];Oi(r)?t[n]=r:t[n]=Di(r)}return t}(e),r=new WeakMap;return{type:"compound",props:n,valueType:null,[Ri]:"TheatrePropType",label:t.label,default:yr(n,(e=>e.default)),deserializeAndSanitize:e=>{if("object"!=typeof e||!e)return;if(r.has(e))return r.get(e);const t={};let i=!1;for(const[r,o]of Object.entries(n))if(Object.prototype.hasOwnProperty.call(e,r)){const n=o.deserializeAndSanitize(e[r]);null!=n&&(i=!0,t[r]=n)}return r.set(e,t),i?t:void 0}}},ji=(e,t={})=>({type:"image",default:{type:"image",id:e},valueType:null,[Ri]:"TheatrePropType",label:t.label,interpolate:(e,n,r)=>{var i;return{type:"image",id:(null!=(i=t.interpolate)?i:qi)(e.id,n.id,r)}},deserializeAndSanitize:zi}),zi=e=>{if(!e)return;let t=!0;return"string"==typeof e.id||[null,void 0].includes(e.id)||(t=!1),"image"!==e.type&&(t=!1),t?e:void 0},Ni=(e,t={})=>{var n;return m(f({type:"number",valueType:0,default:e,[Ri]:"TheatrePropType"},t||{}),{label:t.label,nudgeFn:null!=(n=t.nudgeFn)?n:Zi,nudgeMultiplier:"number"==typeof t.nudgeMultiplier?t.nudgeMultiplier:void 0,interpolate:Ui,deserializeAndSanitize:Bi(t.range)})},Bi=e=>e?t=>{if("number"==typeof t&&isFinite(t))return pn(t,e[0],e[1])}:Fi,Fi=e=>"number"==typeof e&&isFinite(e)?e:void 0,Ui=(e,t,n)=>e+n*(t-e),Vi=(e={r:0,g:0,b:0,a:1},t={})=>{const n={};for(const t of["r","g","b","a"])n[t]=Math.min(Math.max(e[t],0),1);return{type:"rgba",valueType:null,default:Ci(n),[Ri]:"TheatrePropType",label:t.label,interpolate:Wi,deserializeAndSanitize:Hi}},Hi=e=>{if(!e)return;let t=!0;for(const n of["r","g","b","a"])Object.prototype.hasOwnProperty.call(e,n)&&"number"==typeof e[n]||(t=!1);if(!t)return;const n={};for(const t of["r","g","b","a"])n[t]=Math.min(Math.max(e[t],0),1);return Ci(n)},Wi=(e,t,n)=>{const r=Ii(Ai(e)),i=Ii(Ai(t));return Ci(function(e){function t(e){return e>=.0031308?1.055*e**(1/2.4)-.055:12.92*e}return function(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,pn(t,0,1)])))}({r:t(e.r),g:t(e.g),b:t(e.b),a:e.a})}(function(e){let t=e.L+.3963377774*e.a+.2158037573*e.b,n=e.L-.1055613458*e.a-.0638541728*e.b,r=e.L-.0894841775*e.a-1.291485548*e.b,i=t*t*t,o=n*n*n,a=r*r*r;return{r:4.0767416621*i-3.3077115913*o+.2309699292*a,g:-1.2684380046*i+2.6097574011*o-.3413193965*a,b:-.0041960863*i-.7034186147*o+1.707614701*a,a:e.alpha}}({L:(1-n)*r.L+n*i.L,a:(1-n)*r.a+n*i.a,b:(1-n)*r.b+n*i.b,alpha:(1-n)*r.alpha+n*i.alpha})))},Gi=(e,t={})=>{var n;return{type:"boolean",default:e,valueType:null,[Ri]:"TheatrePropType",label:t.label,interpolate:null!=(n=t.interpolate)?n:qi,deserializeAndSanitize:$i}},$i=e=>"boolean"==typeof e?e:void 0;function qi(e){return e}var Ki=(e,t={})=>{var n;return{type:"string",default:e,valueType:null,[Ri]:"TheatrePropType",label:t.label,interpolate:null!=(n=t.interpolate)?n:qi,deserializeAndSanitize:Xi}};function Xi(e){return"string"==typeof e?e:void 0}function Yi(e,t,n={}){var r,i;return{type:"stringLiteral",default:e,valuesAndLabels:f({},t),[Ri]:"TheatrePropType",valueType:null,as:null!=(r=n.as)?r:"menu",label:n.label,interpolate:null!=(i=n.interpolate)?i:qi,deserializeAndSanitize(e){if("string"==typeof e)return Object.prototype.hasOwnProperty.call(t,e)?e:void 0}}}var Zi=({config:e,deltaX:t,deltaFraction:n,magnitude:r})=>{var i;const{range:o}=e;return e.nudgeMultiplier||!o||o.includes(1/0)||o.includes(-1/0)?t*r*(null!=(i=e.nudgeMultiplier)?i:1):n*(o[1]-o[0])*r},Ji=e=>e.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function Qi(e,t){return Ji(e)}b(E()),new WeakMap;var eo,to,no=b(n(771)),ro=e=>{return"number"==typeof e&&("number"==typeof(t=e)&&t==ft(t))&&e>=1&&e<=1e3?e:30;var t},io=b(n(771)),oo=b(n(771)),ao=e=>new Promise((t=>setTimeout(t,e)));function so(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function lo(e){return!!e&&!!e[Go]}function co(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===$o}(e)||Array.isArray(e)||!!e[Wo]||!!e.constructor[Wo]||mo(e)||go(e))}function uo(e,t,n){void 0===n&&(n=!1),0===ho(e)?(n?Object.keys:qo)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function ho(e){var t=e[Go];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:mo(e)?2:go(e)?3:0}function po(e,t){return 2===ho(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function fo(e,t,n){var r=ho(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function mo(e){return Fo&&e instanceof Map}function go(e){return Uo&&e instanceof Set}function vo(e){return e.o||e.t}function yo(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Ko(e);delete t[Go];for(var n=qo(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function bo(e,t){return void 0===t&&(t=!1),_o(e)||lo(e)||!co(e)||(ho(e)>1&&(e.set=e.add=e.clear=e.delete=xo),Object.freeze(e),t&&uo(e,(function(e,t){return bo(t,!0)}),!0)),e}function xo(){so(2)}function _o(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function wo(e){var t=Xo[e];return t||so(18,e),t}function So(){return to}function Eo(e,t){t&&(wo("Patches"),e.u=[],e.s=[],e.v=t)}function ko(e){Mo(e),e.p.forEach(To),e.p=null}function Mo(e){e===to&&(to=e.l)}function Po(e){return to={p:[],l:to,h:e,m:!0,_:0}}function To(e){var t=e[Go];0===t.i||1===t.i?t.j():t.O=!0}function Co(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||wo("ES5").S(t,e,r),r?(n[Go].P&&(ko(t),so(4)),co(e)&&(e=Ao(t,e),t.l||Ro(t,e)),t.u&&wo("Patches").M(n[Go],e,t.u,t.s)):e=Ao(t,n,[]),ko(t),t.u&&t.v(t.u,t.s),e!==Ho?e:void 0}function Ao(e,t,n){if(_o(t))return t;var r=t[Go];if(!r)return uo(t,(function(i,o){return Io(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Ro(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=yo(r.k):r.o;uo(3===r.i?new Set(i):i,(function(t,o){return Io(e,r,i,t,o,n)})),Ro(e,i,!1),n&&e.u&&wo("Patches").R(r,n,e.u,e.s)}return r.o}function Io(e,t,n,r,i,o){if(lo(i)){var a=Ao(e,i,o&&t&&3!==t.i&&!po(t.D,r)?o.concat(r):void 0);if(fo(n,r,a),!lo(a))return;e.m=!1}if(co(i)&&!_o(i)){if(!e.h.F&&e._<1)return;Ao(e,i),t&&t.A.l||Ro(e,i)}}function Ro(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&bo(t,n)}function Oo(e,t){var n=e[Go];return(n?vo(n):e)[t]}function Do(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Lo(e){e.P||(e.P=!0,e.l&&Lo(e.l))}function jo(e){e.o||(e.o=yo(e.t))}function zo(e,t,n){var r=mo(t)?wo("MapSet").N(t,n):go(t)?wo("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:So(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=Yo;n&&(i=[r],o=Zo);var a=Proxy.revocable(i,o),s=a.revoke,l=a.proxy;return r.k=l,r.j=s,l}(t,n):wo("ES5").J(t,n);return(n?n.A:So()).p.push(r),r}function No(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return yo(e)}var Bo="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Fo="undefined"!=typeof Map,Uo="undefined"!=typeof Set,Vo="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Ho=Bo?Symbol.for("immer-nothing"):((eo={})["immer-nothing"]=!0,eo),Wo=Bo?Symbol.for("immer-draftable"):"__$immer_draftable",Go=Bo?Symbol.for("immer-state"):"__$immer_state",$o=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),qo="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ko=Object.getOwnPropertyDescriptors||function(e){var t={};return qo(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Xo={},Yo={get:function(e,t){if(t===Go)return e;var n,r,i,o=vo(e);if(!po(o,t))return n=e,(i=Do(o,t))?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(n.k):void 0;var a=o[t];return e.I||!co(a)?a:a===Oo(e.t,t)?(jo(e),e.o[t]=zo(e.A.h,a,e)):a},has:function(e,t){return t in vo(e)},ownKeys:function(e){return Reflect.ownKeys(vo(e))},set:function(e,t,n){var r=Do(vo(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Oo(vo(e),t),o=null==i?void 0:i[Go];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,i)&&(void 0!==n||po(e.t,t)))return!0;jo(e),Lo(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Oo(e.t,t)||t in e.t?(e.D[t]=!1,jo(e),Lo(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=vo(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){so(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){so(12)}},Zo={};uo(Yo,(function(e,t){Zo[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Zo.deleteProperty=function(e,t){return Yo.deleteProperty.call(this,e[0],t)},Zo.set=function(e,t,n){return Yo.set.call(this,e[0],t,n,e[0])};var Jo=new(function(){function e(e){var t=this;this.g=Vo,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&so(6),void 0!==r&&"function"!=typeof r&&so(7),co(e)){var s=Po(t),l=zo(t,e,void 0),c=!0;try{a=n(l),c=!1}finally{c?ko(s):Mo(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return Eo(s,r),Co(e,s)}),(function(e){throw ko(s),e})):(Eo(s,r),Co(a,s))}if(!e||"object"!=typeof e){if((a=n(e))===Ho)return;return void 0===a&&(a=e),t.F&&bo(a,!0),a}so(21,e)},this.produceWithPatches=function(e,n){return"function"==typeof e?function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))}:[t.produce(e,n,(function(e,t){r=e,i=t})),r,i];var r,i},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){co(e)||so(8),lo(e)&&(e=function(e){return lo(e)||so(22,e),function e(t){if(!co(t))return t;var n,r=t[Go],i=ho(t);if(r){if(!r.P&&(r.i<4||!wo("ES5").K(r)))return r.t;r.I=!0,n=No(t,i),r.I=!1}else n=No(t,i);return uo(n,(function(t,i){r&&function(e,t){return 2===ho(e)?e.get(t):e[t]}(r.t,t)===i||fo(n,t,e(i))})),3===i?new Set(n):n}(e)}(e));var t=Po(this),n=zo(this,e,void 0);return n[Go].C=!0,Mo(t),n},t.finishDraft=function(e,t){var n=(e&&e[Go]).A;return Eo(n,t),Co(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Vo&&so(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var i=wo("Patches").$;return lo(e)?i(e,t):this.produce(e,(function(e){return i(e,t.slice(n+1))}))},e}()),Qo=(Jo.produce,Jo.produceWithPatches.bind(Jo),Jo.setAutoFreeze.bind(Jo),Jo.setUseProxies.bind(Jo),Jo.applyPatches.bind(Jo),Jo.createDraft.bind(Jo),Jo.finishDraft.bind(Jo),{currentProjectStateDefinitionVersion:"0.4.0"});function ea(){}function ta(e){var t,n;const r=(null==(t=null==e?void 0:e.logging)?void 0:t.internal)?null!=(n=e.logging.min)?n:Un.WARN:1/0,i=r<=Un.DEBUG,o=r<=Un.ERROR,a=Gr(void 0,{_debug:i?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):ea,_error:o?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):ea});if(e){const{logger:t,logging:n}=e;t&&a.configureLogger(t),n?a.configureLogging(n):a.configureLogging({dev:!1})}return a.getLogger().named("Theatre")}var na=class{get type(){return"Theatre_Project_PublicAPI"}constructor(e,t={}){A(this,new class{constructor(e,t={},n){var r;this.config=t,this.publicApi=n,x(this,"pointers"),x(this,"_pointerProxies"),x(this,"address"),x(this,"_studioReadyDeferred"),x(this,"_assetStorageReadyDeferred"),x(this,"_readyPromise"),x(this,"_sheetTemplates",new oo.Atom({})),x(this,"sheetTemplatesP",this._sheetTemplates.pointer),x(this,"_studio"),x(this,"assetStorage"),x(this,"type","Theatre_Project"),x(this,"_logger"),this._logger=ta({logging:{dev:!0}}).named("Project",e),this._logger.traceDev("creating project"),this.address={projectId:e};const i=new oo.Atom({ahistoric:{ahistoricStuff:""},historic:null!=(r=t.state)?r:{sheetsById:{},definitionVersion:Qo.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=ui(),this.assetStorage={getAssetUrl:e=>{var n;return`${null==(n=t.assets)?void 0:n.baseUrl}/${e}`},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new io.PointerProxy(i.pointer.historic),ahistoric:new io.PointerProxy(i.pointer.ahistoric),ephemeral:new io.PointerProxy(i.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},P.add(e,this),this._studioReadyDeferred=ui(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then((()=>{})),t.state?setTimeout((()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))}),0):"undefined"==typeof window?console.error(`Argument config.state in Theatre.getProject("${e}", config) is empty. You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state`):setTimeout((()=>{if(!this._studio)throw new Error(`Argument config.state in Theatre.getProject("${e}", config) is empty. This is fine while you are using @theatre/core along with @theatre/studio. But since @theatre/studio is not loaded, the state of project "${e}" will be empty.\n\nTo fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state\n`)}),1e3)}attachToStudio(e){if(this._studio){if(this._studio!==e)throw new Error(`Project ${this.address.projectId} is already attached to studio ${this._studio.address.studioId}`);console.warn(`Project ${this.address.projectId} is already attached to studio ${this._studio.address.studioId}`)}else this._studio=e,e.initialized.then((async()=>{var t;await async function(e,t,n){await ao(0),e.transaction((({drafts:e})=>{var r;const i=t.address.projectId;e.ephemeral.coreByProject[i]={lastExportedObject:null,loadingState:{type:"loading"}},e.ahistoric.coreByProject[i]={ahistoricStuff:""};const o=null==(lo(a=e.historic)||so(23,a),r=a[Go].t)?void 0:r.coreByProject[t.address.projectId];var a,s,l;o?n&&-1==o.revisionHistory.indexOf(n.revisionHistory[0])?(s=n,e.ephemeral.coreByProject[i].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:s}):e.ephemeral.coreByProject[i].loadingState={type:"loaded"}:n?(l=n,e.ephemeral.coreByProject[i].loadingState={type:"loaded"},e.historic.coreByProject[i]=l):(e.ephemeral.coreByProject[i].loadingState={type:"loaded"},e.historic.coreByProject[i]={sheetsById:{},definitionVersion:Qo.currentProjectStateDefinitionVersion,revisionHistory:[]})}))}(e,this,this.config.state),this._pointerProxies.historic.setPointer(e.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(e.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(e.atomP.ephemeral.coreByProject[this.address.projectId]),e.createAssetStorage(this,null==(t=this.config.assets)?void 0:t.baseUrl).then((e=>{this.assetStorage=e,this._assetStorageReadyDeferred.resolve(void 0)})),this._studioReadyDeferred.resolve(void 0)}))}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return"resolved"===this._studioReadyDeferred.status&&"resolved"===this._assetStorageReadyDeferred.status}getOrCreateSheet(e,t="default"){let n=this._sheetTemplates.get()[e];return n||(n=new class{constructor(e,t){this.project=e,x(this,"type","Theatre_SheetTemplate"),x(this,"address"),x(this,"_instances",new ri.Atom({})),x(this,"instancesP",this._instances.pointer),x(this,"_objectTemplates",new ri.Atom({})),x(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=m(f({},e.address),{sheetId:t})}getInstance(e){let t=this._instances.get()[e];return t||(t=new class{constructor(e,t){this.template=e,this.instanceId=t,x(this,"_objects",new no.Atom({})),x(this,"_sequence"),x(this,"address"),x(this,"publicApi"),x(this,"project"),x(this,"objectsP",this._objects.pointer),x(this,"type","Theatre_Sheet"),x(this,"_logger"),this._logger=e.project._logger.named("Sheet",t),this._logger._trace("creating sheet"),this.project=e.project,this.address=m(f({},e.address),{sheetInstanceId:this.instanceId}),this.publicApi=new class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(e){A(this,e)}object(e,t,n){const r=C(this),i=Qi(e),o=r.getObject(i),a=null==n?void 0:n.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(o)return a&&o.template._temp_setActions(a),o.publicApi;{const e=Li(t);return r.createObject(i,null,e,a).publicApi}}get sequence(){return C(this).getSequence().publicApi}get project(){return C(this).project.publicApi}get address(){return f({},C(this).address)}detachObject(e){const t=C(this),n=Qi(e);if(!t.getObject(n))return gi.warning(`Couldn't delete object "${n}"`,`There is no object with key "${n}".\n\nTo fix this, make sure you are calling \`sheet.deleteObject("${n}")\` with the correct key.`),void console.warn(`Object key "${n}" does not exist.`);t.deleteObject(n)}}(this)}createObject(e,t,n,r={}){const i=this.template.getObjectTemplate(e,t,n,r).createInstance(this,t,n);return this._objects.setByPointer((t=>t[e]),i),i}getObject(e){return this._objects.get()[e]}deleteObject(e){this._objects.reduce((t=>{const n=f({},t);return delete n[e],n}))}getSequence(){if(!this._sequence){const e=(0,no.prism)((()=>{const e=(0,no.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return"number"==typeof(t=e)&&isFinite(t)&&t>0?t:10;var t})),t=(0,no.prism)((()=>{const e=(0,no.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return ro(e)}));this._sequence=new class{constructor(e,t,n,r,i){this._project=e,this._sheet=t,this._lengthD=n,this._subUnitsPerUnitD=r,x(this,"address"),x(this,"publicApi"),x(this,"_playbackControllerBox"),x(this,"_prismOfStatePointer"),x(this,"_positionD"),x(this,"_positionFormatterD"),x(this,"_playableRangeD"),x(this,"pointer",(0,li.pointer)({root:this,path:[]})),x(this,"$$isPointerToPrismProvider",!0),x(this,"_logger"),x(this,"closestGridPosition",(e=>{const t=1/this.subUnitsPerUnit;return parseFloat((Math.round(e/t)*t).toFixed(3))})),this._logger=e._logger.named("Sheet",t.address.sheetId).named("Instance",t.address.sheetInstanceId),this.address=m(f({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(e){A(this,e)}play(e){const t=C(this);if(t._project.isReady()){const n=(null==e?void 0:e.rafDriver)?C(e.rafDriver).ticker:wi();return t.play(null!=e?e:{},n)}{const e=ui();return e.resolve(!0),e.promise}}pause(){C(this).pause()}get position(){return C(this).position}set position(e){C(this).position=e}async attachAudio(e){const{audioContext:t,destinationNode:n,decodedBuffer:r,gainNode:i}=await async function(e){const t=function(){if(e.audioContext)return Promise.resolve(e.audioContext);const t=new AudioContext;return"running"===t.state||"undefined"==typeof window?Promise.resolve(t):new Promise((e=>{const n=()=>{t.resume()},r=["mousedown","keydown","touchstart"],i={capture:!0,passive:!1};r.forEach((e=>{window.addEventListener(e,n,i)})),t.addEventListener("statechange",(()=>{"running"===t.state&&(r.forEach((e=>{window.removeEventListener(e,n,i)})),e(t))}))}))}(),n=async function(){if(e.source instanceof AudioBuffer)return e.source;const n=ui();if("string"!=typeof e.source)throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let r,i,o;try{r=await fetch(e.source)}catch(t){throw console.error(t),new Error(`Could not fetch '${e.source}'. Network error logged above.`)}try{i=await r.arrayBuffer()}catch(t){throw console.error(t),new Error(`Could not read '${e.source}' as an arrayBuffer.`)}(await t).decodeAudioData(i,n.resolve,n.reject);try{o=await n.promise}catch(t){throw console.error(t),new Error(`Could not decode ${e.source} as an audio file.`)}return o}(),[r,i]=await Promise.all([t,n]),o=e.destinationNode||r.destination,a=r.createGain();return a.connect(o),{audioContext:r,decodedBuffer:i,gainNode:a,destinationNode:o}}(e),o=new class{constructor(e,t,n){this._decodedBuffer=e,this._audioContext=t,this._nodeDestination=n,x(this,"_mainGain"),x(this,"_state",new pi.Atom({position:0,playing:!1})),x(this,"statePointer"),x(this,"_stopPlayCallback",di),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(e,t){const n=ui();let r;this._playing&&this.pause(),this._playing=!0;const i=()=>{null==r||r(),r=this._loopInRange(e.getValue(),t).stop},o=e.onStale(i);return i(),this._stopPlayCallback=()=>{null==r||r(),o(),n.resolve(!1)},n.promise}_loopInRange(e,t){let n=this.getCurrentPosition();const r=e[1]-e[0];(n<e[0]||n>e[1]||n===e[1])&&this._updatePositionInState(e[0]),n=this.getCurrentPosition();const i=this._audioContext.createBufferSource();i.buffer=this._decodedBuffer,i.connect(this._mainGain),i.playbackRate.value=1,i.loop=!0,i.loopStart=e[0],i.loopEnd=e[1];const o=t.time;let a=n-e[0];i.start(0,n);const s=t=>{let n=(Math.max(t-o,0)/1e3*1+a)/r%1*r;this._updatePositionInState(n+e[0]),l()},l=()=>t.onNextTick(s);return t.onThisOrNextTick(s),{stop:()=>{i.stop(),i.disconnect(),t.offThisOrNextTick(s),t.offNextTick(s)}}}get _playing(){return this._state.get().playing}set _playing(e){this._state.setByPointer((e=>e.playing),e)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=di}gotoPosition(e){this._updatePositionInState(e)}_updatePositionInState(e){this._state.reduce((t=>m(f({},t),{position:e})))}getCurrentPosition(){return this._state.get().position}play(e,t,n,r,i){this._playing&&this.pause(),this._playing=!0;let o=this.getCurrentPosition();const a=t[1]-t[0];if("normal"!==r)throw new oi(`Audio-controlled sequences can only be played in the "normal" direction. '${r}' given.`);(o<t[0]||o>t[1]||o===t[1])&&this._updatePositionInState(t[0]),o=this.getCurrentPosition();const s=ui(),l=this._audioContext.createBufferSource();l.buffer=this._decodedBuffer,l.connect(this._mainGain),l.playbackRate.value=n,e>1e3&&(gi.warning("Can't play sequences with audio more than 1000 times",`The sequence will still play, but only 1000 times. The \`iterationCount: ${e}\` provided to \`sequence.play()\`\nis too high for a sequence with audio.\n\nTo fix this, either set \`iterationCount\` to a lower value, or remove the audio from the sequence.`,[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),e=1e3),e>1&&(l.loop=!0,l.loopStart=t[0],l.loopEnd=t[1]);const c=i.time;let u=o-t[0];const d=a*e;l.start(0,o,d-u);const h=e=>{const r=Math.max(e-c,0)/1e3,i=Math.min(r*n+u,d);if(i!==d){let e=i/a%1*a;this._updatePositionInState(e+t[0]),f()}else this._updatePositionInState(t[1]),this._playing=!1,p(),s.resolve(!0)},p=()=>{l.stop(),l.disconnect()};this._stopPlayCallback=()=>{p(),i.offThisOrNextTick(h),i.offNextTick(h),this._playing&&s.resolve(!1)};const f=()=>i.onNextTick(h);return i.onThisOrNextTick(h),s.promise}}(r,t,i);return C(this).replacePlaybackController(o),{audioContext:t,destinationNode:n,decodedBuffer:r,gainNode:i}}get pointer(){return C(this).pointer}}(this),this._playbackControllerBox=new si.Atom(null!=i?i:new class{constructor(){x(this,"_stopPlayCallback",di),x(this,"_state",new hi.Atom({position:0,playing:!1})),x(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=di}gotoPosition(e){this._updatePositionInState(e)}_updatePositionInState(e){this._state.setByPointer((e=>e.position),e)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(e){this._state.setByPointer((e=>e.playing),e)}play(e,t,n,r,i){this.playing&&this.pause(),this.playing=!0;const o=t[1]-t[0];{const e=this.getCurrentPosition();e<t[0]||e>t[1]?"normal"===r||"alternate"===r?this._updatePositionInState(t[0]):"reverse"!==r&&"alternateReverse"!==r||this._updatePositionInState(t[1]):"normal"===r||"alternate"===r?e===t[1]&&this._updatePositionInState(t[0]):e===t[0]&&this._updatePositionInState(t[1])}const a=ui(),s=i.time,l=o*e;let c=this.getCurrentPosition()-t[0];"reverse"!==r&&"alternateReverse"!==r||(c=t[1]-this.getCurrentPosition());const u=i=>{const u=Math.max(i-s,0)/1e3,h=Math.min(u*n+c,l);if(h!==l){const e=Math.floor(h/o);let n=h/o%1*o;if("normal"!==r)if("reverse"===r)n=o-n;else{const t=e%2==0;"alternate"===r?t||(n=o-n):t&&(n=o-n)}this._updatePositionInState(n+t[0]),d()}else{if("normal"===r)this._updatePositionInState(t[1]);else if("reverse"===r)this._updatePositionInState(t[0]);else{const n=(e-1)%2==0;"alternate"===r?n?this._updatePositionInState(t[1]):this._updatePositionInState(t[0]):n?this._updatePositionInState(t[0]):this._updatePositionInState(t[1])}this.playing=!1,a.resolve(!0)}};this._stopPlayCallback=()=>{i.offThisOrNextTick(u),i.offNextTick(u),this.playing&&a.resolve(!1)};const d=()=>i.onNextTick(u);return i.onThisOrNextTick(u),a.promise}playDynamicRange(e,t){this.playing&&this.pause(),this.playing=!0;const n=ui(),r=e.keepHot();n.promise.then(r,r);let i=t.time;const o=t=>{const n=Math.max(t-i,0);i=t;const r=n/1e3,o=this.getCurrentPosition(),s=e.getValue();if(o<s[0]||o>s[1])this.gotoPosition(s[0]);else{let e=o+r;e>s[1]&&(e=s[0]+(e-s[1])),this.gotoPosition(e)}a()};this._stopPlayCallback=()=>{t.offThisOrNextTick(o),t.offNextTick(o),n.resolve(!1)};const a=()=>t.onNextTick(o);return t.onThisOrNextTick(o),n.promise}}),this._prismOfStatePointer=(0,ci.prism)((()=>this._playbackControllerBox.prism.getValue().statePointer)),this._positionD=(0,ci.prism)((()=>{const e=this._prismOfStatePointer.getValue();return(0,ci.val)(e.position)})),this._positionFormatterD=(0,ci.prism)((()=>{const e=(0,ci.val)(this._subUnitsPerUnitD);return new class{constructor(e){this._fps=e}formatSubUnitForGrid(e){const t=e%1,n=1/this._fps;return Math.round(t/n)+"f"}formatFullUnitForGrid(e){let t=e,n="";t>=ki&&(n+=Math.floor(t/ki)+"h",t%=ki),t>=Ei&&(n+=Math.floor(t/Ei)+"m",t%=Ei),t>=Si&&(n+=Math.floor(t/Si)+"s",t%=Si);const r=1/this._fps;return t>=r&&(n+=Math.floor(t/r)+"f",t%=r),0===n.length?"0s":n}formatForPlayhead(e){let t=e,n="";if(t>=ki){const e=Math.floor(t/ki);n+=jr(e.toString(),2,"0")+"h",t%=ki}if(t>=Ei){const e=Math.floor(t/Ei);n+=jr(e.toString(),2,"0")+"m",t%=Ei}else n.length>0&&(n+="00m");if(t>=Si){const e=Math.floor(t/Si);n+=jr(e.toString(),2,"0")+"s",t%=Si}else n+="00s";const r=1/this._fps;if(t>=r){const e=Math.round(t/r);n+=jr(e.toString(),2,"0")+"f",t%=r}else t/r>.98?(n+=jr(1..toString(),2,"0")+"f",t%=r):n+="00f";return 0===n.length?"00s00f":n}formatBasic(e){return e.toFixed(2)+"s"}}(e)}))}pointerToPrism(e){const{path:t}=(0,ai.getPointerParts)(e);if(0===t.length)return(0,ci.prism)((()=>({length:(0,ci.val)(this.pointer.length),playing:(0,ci.val)(this.pointer.playing),position:(0,ci.val)(this.pointer.position)})));if(t.length>1)return(0,ci.prism)((()=>{}));const[n]=t;return"length"===n?this._lengthD:"position"===n?this._positionD:"playing"===n?(0,ci.prism)((()=>(0,ci.val)(this._prismOfStatePointer.getValue().playing))):(0,ci.prism)((()=>{}))}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(e){let t=e;this.pause(),t>this.length&&(t=this.length);const n=this.length;this._playbackControllerBox.get().gotoPosition(t>n?n:t)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,ci.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,ci.prism)((()=>[0,(0,ci.val)(this._lengthD)]))}playDynamicRange(e,t){return this._playbackControllerBox.get().playDynamicRange(e,t)}async play(e,t){const n=this.length,r=e&&e.range?e.range:[0,n],i=e&&"number"==typeof e.iterationCount?e.iterationCount:1,o=e&&void 0!==e.rate?e.rate:1,a=e&&e.direction?e.direction:"normal";return await this._play(i,[r[0],r[1]],o,a,t)}_play(e,t,n,r,i){return this._playbackControllerBox.get().play(e,t,n,r,i)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(e){this.pause();const t=this._playbackControllerBox.get();this._playbackControllerBox.set(e);const n=t.getCurrentPosition();t.destroy(),e.gotoPosition(n)}}(this.template.project,this,e,t)}return this._sequence}}(this,e),this._instances.setByPointer((t=>t[e]),t)),t}getObjectTemplate(e,t,n,r){let i=this._objectTemplates.get()[e];return i||(i=new class{constructor(e,t,n,r,i){this.sheetTemplate=e,x(this,"address"),x(this,"type","Theatre_SheetObjectTemplate"),x(this,"_config"),x(this,"_temp_actions_atom"),x(this,"_cache",new Be),x(this,"project"),this.address=m(f({},e.address),{objectKey:t}),this._config=new Fe.Atom(r),this._temp_actions_atom=new Fe.Atom(i),this.project=e.project}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(e,t,n){return this._config.set(n),new class{constructor(e,t,n){this.sheet=e,this.template=t,this.nativeObject=n,x(this,"$$isPointerToPrismProvider",!0),x(this,"address"),x(this,"publicApi"),x(this,"_initialValue",new rt.Atom({})),x(this,"_cache",new Be),x(this,"_logger"),x(this,"_internalUtilCtx"),this._logger=e._logger.named("SheetObject",t.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=m(f({},t.address),{sheetInstanceId:e.address.sheetInstanceId}),this.publicApi=new class{constructor(e){x(this,"_cache",new Be),x(this,"_keepHotUntapDebounce"),A(this,e)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return C(this).propsP}get sheet(){return C(this).sheet.publicApi}get project(){return C(this).sheet.project.publicApi}get address(){return f({},C(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",(()=>{const e=C(this);return(0,it.prism)((()=>(0,it.val)(e.getValues().getValue())))}))}onValuesChange(e,t){return sa(this._valuesPrism(),e,t)}get value(){const e=this._valuesPrism();if(!e.isHot){null!=this._keepHotUntapDebounce&&this._keepHotUntapDebounce.flush();const t=e.keepHot();this._keepHotUntapDebounce=function(e,t,n){var r,i,o,a,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function f(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=o}function m(){var e=mr();if(f(e))return g(e);s=setTimeout(m,function(e){var n=t-(e-l);return d?vr(n,o-(e-c)):n}(e))}function g(e){return s=void 0,h&&r?p(e):(r=i=void 0,a)}function v(){var e=mr(),n=f(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),u?p(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(m,t),p(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=ht(t)||0,Y(n)&&(u=!!n.leading,o=(d="maxWait"in n)?gr(ht(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),v.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},v.flush=function(){return void 0===s?a:g(mr())},v}((()=>{t(),this._keepHotUntapDebounce=void 0}),5e3)}return this._keepHotUntapDebounce&&this._keepHotUntapDebounce(),e.getValue()}set initialValue(e){C(this).setInitialValue(e)}}(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",(()=>(0,rt.prism)((()=>{const e=et((0,rt.val)(this.template.getDefaultValues()),(0,rt.val)(this._initialValue.pointer),rt.prism.memo("withInitialCache",(()=>new WeakMap),[]));let t,n=et(e,(0,rt.val)(this.template.getStaticValues()),rt.prism.memo("withStatics",(()=>new WeakMap),[]));{const e=rt.prism.memo("seq",(()=>this.getSequencedValues()),[]),r=rt.prism.memo("withSeqsCache",(()=>new WeakMap),[]);t=(0,rt.val)((0,rt.val)(e)),n=et(n,t,r)}return((e,t)=>{const n=nt.prism.memo("finalAtom",(()=>new nt.Atom(t)),[]);return n.set(t),n})(0,n).pointer}))))}getValueByPointer(e){const t=(0,rt.val)(this.getValues()),{path:n}=(0,rt.getPointerParts)(e);return(0,rt.val)(tt(t,n))}pointerToPrism(e){const{path:t}=(0,rt.getPointerParts)(e);return(0,rt.prism)((()=>{const e=(0,rt.val)(this.getValues());return(0,rt.val)(tt(e,t))}))}getSequencedValues(){return(0,rt.prism)((()=>{const e=rt.prism.memo("tracksToProcess",(()=>this.template.getArrayOfValidSequenceTracks()),[]),t=(0,rt.val)(e),n=new rt.Atom({}),r=(0,rt.val)(this.template.configPointer);return rt.prism.effect("processTracks",(()=>{const e=[];for(const{trackId:i,pathToProp:o}of t){const t=this._trackIdToPrism(i),a=Nr(r,o),s=a.deserializeAndSanitize,l=a.interpolate,c=()=>{const e=t.getValue();if(!e)return n.setByPointer((e=>tt(e,o)),void 0);const r=s(e.left),i=void 0===r?a.default:r;if(void 0===e.right)return n.setByPointer((e=>tt(e,o)),i);const c=s(e.right),u=void 0===c?a.default:c;return n.setByPointer((e=>tt(e,o)),l(i,u,e.progression))},u=t.onStale(c);c(),e.push(u)}return()=>{for(const t of e)t()}}),[r,...t]),n.pointer}))}_trackIdToPrism(e){const t=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[e],n=this.sheet.getSequence().positionPrism;return function(e,t,n){return(0,Ye.prism)((()=>{const r=(0,Ye.val)(t),i=Ye.prism.memo("driver",(()=>r?"BasicKeyframedTrack"===r.type?function(e,t,n){return(0,Ye.prism)((()=>{let e=Ye.prism.ref("state",{started:!1}),r=e.current;const i=n.getValue();return(!r.started||i<r.validFrom||r.validTo<=i)&&(e.current=r=function(e,t,n){const r=t.getValue();if(0===n.keyframes.length)return{started:!0,validFrom:-1/0,validTo:1/0,der:Je};let i=0;for(;;){const e=n.keyframes[i];if(!e)return Qe.error;const o=i===n.keyframes.length-1;if(r<e.position)return 0===i?Qe.beforeFirstKeyframe(e):Qe.error;if(e.position===r)return o?Qe.lastKeyframe(e):Qe.between(e,n.keyframes[i+1],t);if(i===n.keyframes.length-1)return Qe.lastKeyframe(e);{const o=i+1;if(n.keyframes[o].position<=r){i=o;continue}return Qe.between(e,n.keyframes[i+1],t)}}}(0,n,t)),r.der.getValue()}))}(0,r,n):(e.logger.error("Track type not yet supported."),(0,Ye.prism)((()=>{}))):(0,Ye.prism)((()=>{}))),[r]);return i.getValue()}))}(this._internalUtilCtx,t,n)}get propsP(){return this._cache.get("propsP",(()=>(0,rt.pointer)({root:this,path:[]})))}validateValue(e,t){}setInitialValue(e){this.validateValue(this.propsP,e),this._initialValue.set(e)}}(e,this,t)}reconfigure(e){this._config.set(e)}_temp_setActions(e){this._temp_actions_atom.set(e)}getDefaultValues(){return this._cache.get("getDefaultValues()",(()=>(0,Fe.prism)((()=>function(e){return Xe(e)}((0,Fe.val)(this.configPointer))))))}getStaticValues(){return this._cache.get("getStaticValues",(()=>(0,Fe.prism)((()=>{var e;const t=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],n=null!=(e=(0,Fe.val)(t.staticOverrides.byObject[this.address.objectKey]))?e:{};return(0,Fe.val)(this.configPointer).deserializeAndSanitize(n)||{}}))))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",(()=>(0,Fe.prism)((()=>{const e=this.project.pointers.historic.sheetsById[this.address.sheetId],t=(0,Fe.val)(e.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!t)return R;const n=[];if(!t)return R;const r=(0,Fe.val)(this.configPointer),i=Object.entries(t);for(const[e,t]of i){const i=ni(e);if(!i)continue;const o=Nr(r,i);o&&!zr(o)&&n.push({pathToProp:i,trackId:t})}const o=function(e){const t=Qr.get(e);if(t)return t;const n=new Map;return Qr.set(e,n),ei([],e,n),n}(r);return n.sort(((e,t)=>{const n=e.pathToProp,r=t.pathToProp;return o.get(JSON.stringify(n))>o.get(JSON.stringify(r))?1:-1})),0===n.length?R:n}))))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",(()=>(0,Fe.prism)((()=>{const e=(0,Fe.val)(this.getArrayOfValidSequenceTracks());let t={};for(const{pathToProp:n,trackId:r}of e)qe(t,n,r);return t}))))}getDefaultsAtPointer(e){const{path:t}=(0,Fe.getPointerParts)(e),n=function(e,t){return 0===t.length?e:Ne(e,t)}(this.getDefaultValues().getValue(),t);return n}}(this,e,t,n,r),this._objectTemplates.setByPointer((t=>t[e]),i)),i}}(this,e),this._sheetTemplates.reduce((t=>m(f({},t),{[e]:n})))),n.getInstance(t)}}(e,t,this))}get ready(){return C(this).ready}get isReady(){return C(this).isReady()}get address(){return f({},C(this).address)}getAssetUrl(e){if(this.isReady)return e.id?C(this).assetStorage.getAssetUrl(e.id):void 0;console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.")}sheet(e,t="default"){const n=Qi(e);return C(this).getOrCreateSheet(n,t).publicApi}},ra=(b(E()),b(n(771))),ia=b(n(771));function oa(e,t={}){const n=P.get(e);if(n)return n.publicApi;const r=ta().named("Project",e);return t.state?(aa(e,t.state),r._debug("deep validated config.state on disk")):r._debug("no config.state"),new na(e,t)}var aa=(e,t)=>{((e,t)=>{if(Array.isArray(t)||null==t||t.definitionVersion!==Qo.currentProjectStateDefinitionVersion)throw new oi(`Error validating conf.state in Theatre.getProject(${JSON.stringify(e)}, conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state`)})(e,t)};function sa(e,t,n){const r=n?C(n).ticker:wi();if((0,ra.isPointer)(e))return(0,ia.pointerToPrism)(e).onChange(r,t,!0);if((0,ia.isPrism)(e))return e.onChange(r,t,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function la(e){if((0,ra.isPointer)(e))return(0,ia.pointerToPrism)(e).getValue();throw new Error("Called val(p) where p is not a pointer.")}!function(){if("undefined"==typeof window)return;const e=window[fi];if(void 0!==e)throw"object"==typeof e&&e&&"string"==typeof e.version?new Error("It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:\n1. You might have two separate versions of Theatre.js in node_modules.\n2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.\n\nNote that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module."):new Error(`The variable window.${fi} seems to be already set by a module other than @theatre/core.`);const t=new class{constructor(){x(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.6.0"}getBitsForStudio(e,t){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=e,t({projectsP:P.atom.pointer.projects,privateAPI:C,coreExports:k,getCoreRafDriver:_i})}};window[fi]=t;const n=window.__TheatreJS_StudioBundle;n&&null!==n&&"Theatre_StudioBundle"===n.type&&n.registerCoreBundle(t)}()},477:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:()=>te,AddEquation:()=>E,AddOperation:()=>Y,AdditiveAnimationBlendMode:()=>At,AdditiveBlending:()=>x,AlphaFormat:()=>Oe,AlwaysDepth:()=>U,AlwaysStencilFunc:()=>on,AmbientLight:()=>Xd,AmbientLightProbe:()=>hh,AnimationClip:()=>bd,AnimationLoader:()=>Td,AnimationMixer:()=>Vh,AnimationObjectGroup:()=>Bh,AnimationUtils:()=>ad,ArcCurve:()=>Ec,ArrayCamera:()=>el,ArrowHelper:()=>Op,Audio:()=>Eh,AudioAnalyser:()=>Ah,AudioContext:()=>ch,AudioListener:()=>Sh,AudioLoader:()=>uh,AxesHelper:()=>Dp,BackSide:()=>m,BasicDepthPacking:()=>jt,BasicShadowMap:()=>u,Bone:()=>Ul,BooleanKeyframeTrack:()=>hd,Box2:()=>ep,Box3:()=>fr,Box3Helper:()=>Tp,BoxBufferGeometry:()=>Bp,BoxGeometry:()=>co,BoxHelper:()=>Pp,BufferAttribute:()=>Ci,BufferGeometry:()=>qi,BufferGeometryLoader:()=>nh,ByteType:()=>Se,Cache:()=>_d,Camera:()=>go,CameraHelper:()=>Ep,CanvasTexture:()=>_c,CapsuleBufferGeometry:()=>Fp,CapsuleGeometry:()=>Gc,CatmullRomCurve3:()=>Ac,CineonToneMapping:()=>ee,CircleBufferGeometry:()=>Up,CircleGeometry:()=>$c,ClampToEdgeWrapping:()=>ue,Clock:()=>vh,Color:()=>Yn,ColorKeyframeTrack:()=>pd,ColorManagement:()=>Hn,CompressedArrayTexture:()=>xc,CompressedTexture:()=>bc,CompressedTextureLoader:()=>Cd,ConeBufferGeometry:()=>Vp,ConeGeometry:()=>Kc,CubeCamera:()=>bo,CubeReflectionMapping:()=>ie,CubeRefractionMapping:()=>oe,CubeTexture:()=>xo,CubeTextureLoader:()=>Id,CubeUVReflectionMapping:()=>le,CubicBezierCurve:()=>Dc,CubicBezierCurve3:()=>Lc,CubicInterpolant:()=>ld,CullFaceBack:()=>s,CullFaceFront:()=>l,CullFaceFrontBack:()=>c,CullFaceNone:()=>a,Curve:()=>wc,CurvePath:()=>Vc,CustomBlending:()=>S,CustomToneMapping:()=>ne,CylinderBufferGeometry:()=>Hp,CylinderGeometry:()=>qc,Cylindrical:()=>Jh,Data3DTexture:()=>sr,DataArrayTexture:()=>or,DataTexture:()=>Vl,DataTextureLoader:()=>Rd,DataUtils:()=>Np,DecrementStencilOp:()=>qt,DecrementWrapStencilOp:()=>Xt,DefaultLoadingManager:()=>Sd,DepthFormat:()=>ze,DepthStencilFormat:()=>Ne,DepthTexture:()=>il,DirectionalLight:()=>Kd,DirectionalLightHelper:()=>_p,DiscreteInterpolant:()=>ud,DodecahedronBufferGeometry:()=>Wp,DodecahedronGeometry:()=>Yc,DoubleSide:()=>g,DstAlphaFactor:()=>L,DstColorFactor:()=>z,DynamicCopyUsage:()=>pn,DynamicDrawUsage:()=>sn,DynamicReadUsage:()=>un,EdgesGeometry:()=>tu,EllipseCurve:()=>Sc,EqualDepth:()=>W,EqualStencilFunc:()=>Qt,EquirectangularReflectionMapping:()=>ae,EquirectangularRefractionMapping:()=>se,Euler:()=>Zr,EventDispatcher:()=>yn,ExtrudeBufferGeometry:()=>Gp,ExtrudeGeometry:()=>Au,FileLoader:()=>Pd,Float16BufferAttribute:()=>zi,Float32BufferAttribute:()=>Ni,Float64BufferAttribute:()=>Bi,FloatType:()=>Te,Fog:()=>dl,FogExp2:()=>ul,FramebufferTexture:()=>yc,FrontSide:()=>f,Frustum:()=>To,GLBufferAttribute:()=>qh,GLSL1:()=>mn,GLSL3:()=>gn,GreaterDepth:()=>$,GreaterEqualDepth:()=>G,GreaterEqualStencilFunc:()=>rn,GreaterStencilFunc:()=>tn,GridHelper:()=>gp,Group:()=>tl,HalfFloatType:()=>Ce,HemisphereLight:()=>Ld,HemisphereLightHelper:()=>mp,HemisphereLightProbe:()=>dh,IcosahedronBufferGeometry:()=>$p,IcosahedronGeometry:()=>Ru,ImageBitmapLoader:()=>sh,ImageLoader:()=>Ad,ImageUtils:()=>Jn,IncrementStencilOp:()=>$t,IncrementWrapStencilOp:()=>Kt,InstancedBufferAttribute:()=>$l,InstancedBufferGeometry:()=>th,InstancedInterleavedBuffer:()=>$h,InstancedMesh:()=>Jl,Int16BufferAttribute:()=>Oi,Int32BufferAttribute:()=>Li,Int8BufferAttribute:()=>Ai,IntType:()=>Me,InterleavedBuffer:()=>pl,InterleavedBufferAttribute:()=>ml,Interpolant:()=>sd,InterpolateDiscrete:()=>St,InterpolateLinear:()=>Et,InterpolateSmooth:()=>kt,InvertStencilOp:()=>Yt,KeepStencilOp:()=>Wt,KeyframeTrack:()=>dd,LOD:()=>Dl,LatheBufferGeometry:()=>qp,LatheGeometry:()=>Wc,Layers:()=>Jr,LessDepth:()=>V,LessEqualDepth:()=>H,LessEqualStencilFunc:()=>en,LessStencilFunc:()=>Jt,Light:()=>Dd,LightProbe:()=>Jd,Line:()=>oc,Line3:()=>rp,LineBasicMaterial:()=>Ql,LineCurve:()=>jc,LineCurve3:()=>zc,LineDashedMaterial:()=>Qu,LineLoop:()=>cc,LineSegments:()=>lc,LinearEncoding:()=>Dt,LinearFilter:()=>ve,LinearInterpolant:()=>cd,LinearMipMapLinearFilter:()=>_e,LinearMipMapNearestFilter:()=>be,LinearMipmapLinearFilter:()=>xe,LinearMipmapNearestFilter:()=>ye,LinearSRGBColorSpace:()=>Vt,LinearToneMapping:()=>J,Loader:()=>Ed,LoaderUtils:()=>eh,LoadingManager:()=>wd,LoopOnce:()=>xt,LoopPingPong:()=>wt,LoopRepeat:()=>_t,LuminanceAlphaFormat:()=>je,LuminanceFormat:()=>Le,MOUSE:()=>i,Material:()=>ki,MaterialLoader:()=>Qd,MathUtils:()=>Rn,Matrix3:()=>Dn,Matrix4:()=>Ur,MaxEquation:()=>T,Mesh:()=>so,MeshBasicMaterial:()=>Mi,MeshDepthMaterial:()=>$s,MeshDistanceMaterial:()=>qs,MeshLambertMaterial:()=>Zu,MeshMatcapMaterial:()=>Ju,MeshNormalMaterial:()=>Yu,MeshPhongMaterial:()=>Ku,MeshPhysicalMaterial:()=>qu,MeshStandardMaterial:()=>$u,MeshToonMaterial:()=>Xu,MinEquation:()=>P,MirroredRepeatWrapping:()=>de,MixOperation:()=>X,MultiplyBlending:()=>w,MultiplyOperation:()=>K,NearestFilter:()=>he,NearestMipMapLinearFilter:()=>ge,NearestMipMapNearestFilter:()=>fe,NearestMipmapLinearFilter:()=>me,NearestMipmapNearestFilter:()=>pe,NeverDepth:()=>F,NeverStencilFunc:()=>Zt,NoBlending:()=>y,NoColorSpace:()=>Ft,NoToneMapping:()=>Z,NormalAnimationBlendMode:()=>Ct,NormalBlending:()=>b,NotEqualDepth:()=>q,NotEqualStencilFunc:()=>nn,NumberKeyframeTrack:()=>fd,Object3D:()=>hi,ObjectLoader:()=>rh,ObjectSpaceNormalMap:()=>Bt,OctahedronBufferGeometry:()=>Kp,OctahedronGeometry:()=>Ou,OneFactor:()=>A,OneMinusDstAlphaFactor:()=>j,OneMinusDstColorFactor:()=>N,OneMinusSrcAlphaFactor:()=>D,OneMinusSrcColorFactor:()=>R,OrthographicCamera:()=>Vo,PCFShadowMap:()=>d,PCFSoftShadowMap:()=>h,PMREMGenerator:()=>Zo,Path:()=>Hc,PerspectiveCamera:()=>vo,Plane:()=>ko,PlaneBufferGeometry:()=>Xp,PlaneGeometry:()=>Io,PlaneHelper:()=>Cp,PointLight:()=>$d,PointLightHelper:()=>dp,Points:()=>mc,PointsMaterial:()=>uc,PolarGridHelper:()=>vp,PolyhedronBufferGeometry:()=>Yp,PolyhedronGeometry:()=>Xc,PositionalAudio:()=>Ch,PropertyBinding:()=>Nh,PropertyMixer:()=>Ih,QuadraticBezierCurve:()=>Nc,QuadraticBezierCurve3:()=>Bc,Quaternion:()=>ur,QuaternionKeyframeTrack:()=>gd,QuaternionLinearInterpolant:()=>md,RED_GREEN_RGTC2_Format:()=>yt,RED_RGTC1_Format:()=>gt,REVISION:()=>r,RGBADepthPacking:()=>zt,RGBAFormat:()=>De,RGBAIntegerFormat:()=>He,RGBA_ASTC_10x10_Format:()=>ht,RGBA_ASTC_10x5_Format:()=>ct,RGBA_ASTC_10x6_Format:()=>ut,RGBA_ASTC_10x8_Format:()=>dt,RGBA_ASTC_12x10_Format:()=>pt,RGBA_ASTC_12x12_Format:()=>ft,RGBA_ASTC_4x4_Format:()=>tt,RGBA_ASTC_5x4_Format:()=>nt,RGBA_ASTC_5x5_Format:()=>rt,RGBA_ASTC_6x5_Format:()=>it,RGBA_ASTC_6x6_Format:()=>ot,RGBA_ASTC_8x5_Format:()=>at,RGBA_ASTC_8x6_Format:()=>st,RGBA_ASTC_8x8_Format:()=>lt,RGBA_BPTC_Format:()=>mt,RGBA_ETC2_EAC_Format:()=>et,RGBA_PVRTC_2BPPV1_Format:()=>Ze,RGBA_PVRTC_4BPPV1_Format:()=>Ye,RGBA_S3TC_DXT1_Format:()=>Ge,RGBA_S3TC_DXT3_Format:()=>$e,RGBA_S3TC_DXT5_Format:()=>qe,RGB_ETC1_Format:()=>Je,RGB_ETC2_Format:()=>Qe,RGB_PVRTC_2BPPV1_Format:()=>Xe,RGB_PVRTC_4BPPV1_Format:()=>Ke,RGB_S3TC_DXT1_Format:()=>We,RGFormat:()=>Ue,RGIntegerFormat:()=>Ve,RawShaderMaterial:()=>Gu,Ray:()=>Fr,Raycaster:()=>Kh,RectAreaLight:()=>Yd,RedFormat:()=>Be,RedIntegerFormat:()=>Fe,ReinhardToneMapping:()=>Q,RepeatWrapping:()=>ce,ReplaceStencilOp:()=>Gt,ReverseSubtractEquation:()=>M,RingBufferGeometry:()=>Zp,RingGeometry:()=>Du,SIGNED_RED_GREEN_RGTC2_Format:()=>bt,SIGNED_RED_RGTC1_Format:()=>vt,SRGBColorSpace:()=>Ut,Scene:()=>hl,ShaderChunk:()=>Ro,ShaderLib:()=>Do,ShaderMaterial:()=>mo,ShadowMaterial:()=>Wu,Shape:()=>nu,ShapeBufferGeometry:()=>Jp,ShapeGeometry:()=>Lu,ShapePath:()=>Lp,ShapeUtils:()=>Pu,ShortType:()=>Ee,Skeleton:()=>Gl,SkeletonHelper:()=>cp,SkinnedMesh:()=>Fl,Source:()=>Qn,Sphere:()=>Rr,SphereBufferGeometry:()=>Qp,SphereGeometry:()=>ju,Spherical:()=>Zh,SphericalHarmonics3:()=>Zd,SplineCurve:()=>Fc,SpotLight:()=>Ud,SpotLightHelper:()=>op,Sprite:()=>Al,SpriteMaterial:()=>gl,SrcAlphaFactor:()=>O,SrcAlphaSaturateFactor:()=>B,SrcColorFactor:()=>I,StaticCopyUsage:()=>hn,StaticDrawUsage:()=>an,StaticReadUsage:()=>cn,StereoCamera:()=>gh,StreamCopyUsage:()=>fn,StreamDrawUsage:()=>ln,StreamReadUsage:()=>dn,StringKeyframeTrack:()=>vd,SubtractEquation:()=>k,SubtractiveBlending:()=>_,TOUCH:()=>o,TangentSpaceNormalMap:()=>Nt,TetrahedronBufferGeometry:()=>ef,TetrahedronGeometry:()=>zu,Texture:()=>nr,TextureLoader:()=>Od,TorusBufferGeometry:()=>tf,TorusGeometry:()=>Nu,TorusKnotBufferGeometry:()=>nf,TorusKnotGeometry:()=>Bu,Triangle:()=>Si,TriangleFanDrawMode:()=>Ot,TriangleStripDrawMode:()=>Rt,TrianglesDrawMode:()=>It,TubeBufferGeometry:()=>rf,TubeGeometry:()=>Fu,TwoPassDoubleSide:()=>v,UVMapping:()=>re,Uint16BufferAttribute:()=>Di,Uint32BufferAttribute:()=>ji,Uint8BufferAttribute:()=>Ii,Uint8ClampedBufferAttribute:()=>Ri,Uniform:()=>Hh,UniformsGroup:()=>Gh,UniformsLib:()=>Oo,UniformsUtils:()=>fo,UnsignedByteType:()=>we,UnsignedInt248Type:()=>Re,UnsignedIntType:()=>Pe,UnsignedShort4444Type:()=>Ae,UnsignedShort5551Type:()=>Ie,UnsignedShortType:()=>ke,VSMShadowMap:()=>p,Vector2:()=>On,Vector3:()=>dr,Vector4:()=>rr,VectorKeyframeTrack:()=>yd,VideoTexture:()=>vc,WebGL1Renderer:()=>cl,WebGL3DRenderTarget:()=>lr,WebGLArrayRenderTarget:()=>ar,WebGLCubeRenderTarget:()=>_o,WebGLMultipleRenderTargets:()=>cr,WebGLRenderTarget:()=>ir,WebGLRenderer:()=>ll,WebGLUtils:()=>Qs,WireframeGeometry:()=>Uu,WrapAroundEnding:()=>Tt,ZeroCurvatureEnding:()=>Mt,ZeroFactor:()=>C,ZeroSlopeEnding:()=>Pt,ZeroStencilOp:()=>Ht,_SRGBAFormat:()=>vn,sRGBEncoding:()=>Lt});const r="149",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,l=2,c=3,u=0,d=1,h=2,p=3,f=0,m=1,g=2,v=2,y=0,b=1,x=2,_=3,w=4,S=5,E=100,k=101,M=102,P=103,T=104,C=200,A=201,I=202,R=203,O=204,D=205,L=206,j=207,z=208,N=209,B=210,F=0,U=1,V=2,H=3,W=4,G=5,$=6,q=7,K=0,X=1,Y=2,Z=0,J=1,Q=2,ee=3,te=4,ne=5,re=300,ie=301,oe=302,ae=303,se=304,le=306,ce=1e3,ue=1001,de=1002,he=1003,pe=1004,fe=1004,me=1005,ge=1005,ve=1006,ye=1007,be=1007,xe=1008,_e=1008,we=1009,Se=1010,Ee=1011,ke=1012,Me=1013,Pe=1014,Te=1015,Ce=1016,Ae=1017,Ie=1018,Re=1020,Oe=1021,De=1023,Le=1024,je=1025,ze=1026,Ne=1027,Be=1028,Fe=1029,Ue=1030,Ve=1031,He=1033,We=33776,Ge=33777,$e=33778,qe=33779,Ke=35840,Xe=35841,Ye=35842,Ze=35843,Je=36196,Qe=37492,et=37496,tt=37808,nt=37809,rt=37810,it=37811,ot=37812,at=37813,st=37814,lt=37815,ct=37816,ut=37817,dt=37818,ht=37819,pt=37820,ft=37821,mt=36492,gt=36283,vt=36284,yt=36285,bt=36286,xt=2200,_t=2201,wt=2202,St=2300,Et=2301,kt=2302,Mt=2400,Pt=2401,Tt=2402,Ct=2500,At=2501,It=0,Rt=1,Ot=2,Dt=3e3,Lt=3001,jt=3200,zt=3201,Nt=0,Bt=1,Ft="",Ut="srgb",Vt="srgb-linear",Ht=0,Wt=7680,Gt=7681,$t=7682,qt=7683,Kt=34055,Xt=34056,Yt=5386,Zt=512,Jt=513,Qt=514,en=515,tn=516,nn=517,rn=518,on=519,an=35044,sn=35048,ln=35040,cn=35045,un=35049,dn=35041,hn=35046,pn=35050,fn=35042,mn="100",gn="300 es",vn=1035;class yn{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const bn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let xn=1234567;const _n=Math.PI/180,wn=180/Math.PI;function Sn(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(bn[255&e]+bn[e>>8&255]+bn[e>>16&255]+bn[e>>24&255]+"-"+bn[255&t]+bn[t>>8&255]+"-"+bn[t>>16&15|64]+bn[t>>24&255]+"-"+bn[63&n|128]+bn[n>>8&255]+"-"+bn[n>>16&255]+bn[n>>24&255]+bn[255&r]+bn[r>>8&255]+bn[r>>16&255]+bn[r>>24&255]).toLowerCase()}function En(e,t,n){return Math.max(t,Math.min(n,e))}function kn(e,t){return(e%t+t)%t}function Mn(e,t,n){return(1-n)*e+n*t}function Pn(e){return 0==(e&e-1)&&0!==e}function Tn(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Cn(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function An(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function In(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var Rn=Object.freeze({__proto__:null,DEG2RAD:_n,RAD2DEG:wn,ceilPowerOfTwo:Tn,clamp:En,damp:function(e,t,n,r){return Mn(e,t,1-Math.exp(-n*r))},degToRad:function(e){return e*_n},denormalize:An,euclideanModulo:kn,floorPowerOfTwo:Cn,generateUUID:Sn,inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},isPowerOfTwo:Pn,lerp:Mn,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},normalize:In,pingpong:function(e,t=1){return t-Math.abs(kn(e,2*t)-t)},radToDeg:function(e){return e*wn},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},seededRandom:function(e){void 0!==e&&(xn=e);let t=xn+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},setQuaternionFromProperEuler:function(e,t,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((t+r)/2),u=a((t+r)/2),d=o((t-r)/2),h=a((t-r)/2),p=o((r-t)/2),f=a((r-t)/2);switch(i){case"XYX":e.set(s*u,l*d,l*h,s*c);break;case"YZY":e.set(l*h,s*u,l*d,s*c);break;case"ZXZ":e.set(l*d,l*h,s*u,s*c);break;case"XZX":e.set(s*u,l*f,l*p,s*c);break;case"YXY":e.set(l*p,s*u,l*f,s*c);break;case"ZYZ":e.set(l*f,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)}});class On{constructor(e=0,t=0){On.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Dn{constructor(){Dn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=o*f+a*v+s*x,i[3]=o*m+a*y+s*_,i[6]=o*g+a*b+s*w,i[1]=l*f+c*v+u*x,i[4]=l*m+c*y+u*_,i[7]=l*g+c*b+u*w,i[2]=d*f+h*v+p*x,i[5]=d*m+h*y+p*_,i[8]=d*g+h*b+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,d=a*s-c*i,h=l*i-o*s,p=t*u+n*d+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(r*l-c*n)*f,e[2]=(a*n-r*o)*f,e[3]=d*f,e[4]=(c*t-r*s)*f,e[5]=(r*i-a*t)*f,e[6]=h*f,e[7]=(n*s-l*t)*f,e[8]=(o*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Ln.makeScale(e,t)),this}rotate(e){return this.premultiply(Ln.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ln.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Ln=new Dn;function jn(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const zn={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Nn(e,t){return new zn[e](t)}function Bn(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Fn(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Un(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const Vn={[Ut]:{[Vt]:Fn},[Vt]:{[Ut]:Un}},Hn={legacyMode:!0,get workingColorSpace(){return Vt},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(Vn[t]&&void 0!==Vn[t][n]){const r=Vn[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Wn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Gn={r:0,g:0,b:0},$n={h:0,s:0,l:0},qn={h:0,s:0,l:0};function Kn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Xn(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class Yn{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ut){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Hn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Hn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Hn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Hn.workingColorSpace){if(e=kn(e,1),t=En(t,0,1),n=En(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Kn(i,r,e+1/3),this.g=Kn(i,r,e),this.b=Kn(i,r,e-1/3)}return Hn.toWorkingColorSpace(this,r),this}setStyle(e,t=Ut){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,Hn.toWorkingColorSpace(this,t),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,Hn.toWorkingColorSpace(this,t),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const r=parseFloat(e[1])/360,i=parseFloat(e[2])/100,o=parseFloat(e[3])/100;return n(e[4]),this.setHSL(r,i,o,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,Hn.toWorkingColorSpace(this,t),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,Hn.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Ut){const n=Wn[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Fn(e.r),this.g=Fn(e.g),this.b=Fn(e.b),this}copyLinearToSRGB(e){return this.r=Un(e.r),this.g=Un(e.g),this.b=Un(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ut){return Hn.fromWorkingColorSpace(Xn(this,Gn),e),En(255*Gn.r,0,255)<<16^En(255*Gn.g,0,255)<<8^En(255*Gn.b,0,255)<<0}getHexString(e=Ut){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Hn.workingColorSpace){Hn.fromWorkingColorSpace(Xn(this,Gn),t);const n=Gn.r,r=Gn.g,i=Gn.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const c=(a+o)/2;if(a===o)s=0,l=0;else{const e=o-a;switch(l=c<=.5?e/(o+a):e/(2-o-a),o){case n:s=(r-i)/e+(r<i?6:0);break;case r:s=(i-n)/e+2;break;case i:s=(n-r)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e,t=Hn.workingColorSpace){return Hn.fromWorkingColorSpace(Xn(this,Gn),t),e.r=Gn.r,e.g=Gn.g,e.b=Gn.b,e}getStyle(e=Ut){return Hn.fromWorkingColorSpace(Xn(this,Gn),e),e!==Ut?`color(${e} ${Gn.r} ${Gn.g} ${Gn.b})`:`rgb(${255*Gn.r|0},${255*Gn.g|0},${255*Gn.b|0})`}offsetHSL(e,t,n){return this.getHSL($n),$n.h+=e,$n.s+=t,$n.l+=n,this.setHSL($n.h,$n.s,$n.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL($n),e.getHSL(qn);const n=Mn($n.h,qn.h,t),r=Mn($n.s,qn.s,t),i=Mn($n.l,qn.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let Zn;Yn.NAMES=Wn;class Jn{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Zn&&(Zn=Bn("canvas")),Zn.width=e.width,Zn.height=e.height;const n=Zn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Zn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Bn("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*Fn(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Fn(t[e]/255)):t[e]=Fn(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Qn{constructor(e=null){this.isSource=!0,this.uuid=Sn(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(er(r[t].image)):e.push(er(r[t]))}else e=er(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function er(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Jn.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let tr=0;class nr extends yn{constructor(e=nr.DEFAULT_IMAGE,t=nr.DEFAULT_MAPPING,n=ue,r=ue,i=ve,o=xe,a=De,s=we,l=nr.DEFAULT_ANISOTROPY,c=Dt){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:tr++}),this.uuid=Sn(),this.name="",this.source=new Qn(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new On(0,0),this.repeat=new On(1,1),this.center=new On(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Dn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==re)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ce:e.x=e.x-Math.floor(e.x);break;case ue:e.x=e.x<0?0:1;break;case de:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ce:e.y=e.y-Math.floor(e.y);break;case ue:e.y=e.y<0?0:1;break;case de:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}nr.DEFAULT_IMAGE=null,nr.DEFAULT_MAPPING=re,nr.DEFAULT_ANISOTROPY=1;class rr{constructor(e=0,t=0,n=0,r=1){rr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],d=s[1],h=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(c-d)<o&&Math.abs(u-f)<o&&Math.abs(p-m)<o){if(Math.abs(c+d)<a&&Math.abs(u+f)<a&&Math.abs(p+m)<a&&Math.abs(l+h+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(h+1)/2,v=(g+1)/2,y=(c+d)/4,b=(u+f)/4,x=(p+m)/4;return e>s&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=x/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=x/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ir extends yn{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new rr(0,0,e,t),this.scissorTest=!1,this.viewport=new rr(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new nr(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ve,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Qn(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class or extends nr{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=he,this.minFilter=he,this.wrapR=ue,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ar extends ir{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new or(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class sr extends nr{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=he,this.minFilter=he,this.wrapR=ue,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lr extends ir{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new sr(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class cr extends ir{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const i=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=i.clone(),this.texture[e].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ur{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const d=i[o+0],h=i[o+1],p=i[o+2],f=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(u!==f||s!==d||l!==h||c!==p){let e=1-a;const t=s*d+l*h+c*p+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+d*i,l=l*e+h*i,c=c*e+p*i,u=u*e+f*i,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[o],d=i[o+1],h=i[o+2],p=i[o+3];return e[t]=a*p+c*u+s*h-l*d,e[t+1]=s*p+c*d+l*u-a*h,e[t+2]=l*p+c*h+a*d-s*u,e[t+3]=c*p-a*u-s*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),d=s(n/2),h=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],d=n+a+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(En(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=i*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class dr{constructor(e=0,t=0,n=0){dr.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(pr.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(pr.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,c=s*n+a*t-i*r,u=s*r+i*n-o*t,d=-i*t-o*n-a*r;return this.x=l*s+d*-i+c*-a-u*-o,this.y=c*s+d*-o+u*-i-l*-a,this.z=u*s+d*-a+l*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return hr.copy(this).projectOnVector(e),this.sub(hr)}reflect(e){return this.sub(hr.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(En(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const hr=new dr,pr=new ur;class fr{constructor(e=new dr(1/0,1/0,1/0),t=new dr(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){const l=e[s],c=e[s+1],u=e[s+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){const l=e.getX(s),c=e.getY(s),u=e.getZ(s);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=gr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)gr.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(gr)}else null===n.boundingBox&&n.computeBoundingBox(),vr.copy(n.boundingBox),vr.applyMatrix4(e.matrixWorld),this.union(vr);const r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,gr),gr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Er),kr.subVectors(this.max,Er),yr.subVectors(e.a,Er),br.subVectors(e.b,Er),xr.subVectors(e.c,Er),_r.subVectors(br,yr),wr.subVectors(xr,br),Sr.subVectors(yr,xr);let t=[0,-_r.z,_r.y,0,-wr.z,wr.y,0,-Sr.z,Sr.y,_r.z,0,-_r.x,wr.z,0,-wr.x,Sr.z,0,-Sr.x,-_r.y,_r.x,0,-wr.y,wr.x,0,-Sr.y,Sr.x,0];return!!Tr(t,yr,br,xr,kr)&&(t=[1,0,0,0,1,0,0,0,1],!!Tr(t,yr,br,xr,kr)&&(Mr.crossVectors(_r,wr),t=[Mr.x,Mr.y,Mr.z],Tr(t,yr,br,xr,kr)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return gr.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(gr).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(mr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),mr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),mr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),mr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),mr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),mr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),mr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),mr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(mr)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const mr=[new dr,new dr,new dr,new dr,new dr,new dr,new dr,new dr],gr=new dr,vr=new fr,yr=new dr,br=new dr,xr=new dr,_r=new dr,wr=new dr,Sr=new dr,Er=new dr,kr=new dr,Mr=new dr,Pr=new dr;function Tr(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){Pr.fromArray(e,o);const a=i.x*Math.abs(Pr.x)+i.y*Math.abs(Pr.y)+i.z*Math.abs(Pr.z),s=t.dot(Pr),l=n.dot(Pr),c=r.dot(Pr);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const Cr=new fr,Ar=new dr,Ir=new dr;class Rr{constructor(e=new dr,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Cr.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ar.subVectors(e,this.center);const t=Ar.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Ar,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Ir.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ar.copy(e.center).add(Ir)),this.expandByPoint(Ar.copy(e.center).sub(Ir))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Or=new dr,Dr=new dr,Lr=new dr,jr=new dr,zr=new dr,Nr=new dr,Br=new dr;class Fr{constructor(e=new dr,t=new dr(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Or)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Or.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Or.copy(this.direction).multiplyScalar(t).add(this.origin),Or.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Dr.copy(e).add(t).multiplyScalar(.5),Lr.copy(t).sub(e).normalize(),jr.copy(this.origin).sub(Dr);const i=.5*e.distanceTo(t),o=-this.direction.dot(Lr),a=jr.dot(this.direction),s=-jr.dot(Lr),l=jr.lengthSq(),c=Math.abs(1-o*o);let u,d,h,p;if(c>0)if(u=o*s-a,d=o*a-s,p=i*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+o*d+2*a)+d*(o*u+d+2*s)+l}else d=i,u=Math.max(0,-(o*d+a)),h=-u*u+d*(d+2*s)+l;else d=-i,u=Math.max(0,-(o*d+a)),h=-u*u+d*(d+2*s)+l;else d<=-p?(u=Math.max(0,-(-o*i+a)),d=u>0?-i:Math.min(Math.max(-i,-s),i),h=-u*u+d*(d+2*s)+l):d<=p?(u=0,d=Math.min(Math.max(-i,-s),i),h=d*(d+2*s)+l):(u=Math.max(0,-(o*i+a)),d=u>0?i:Math.min(Math.max(-i,-s),i),h=-u*u+d*(d+2*s)+l);else d=o>0?-i:i,u=Math.max(0,-(o*d+a)),h=-u*u+d*(d+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(Lr).multiplyScalar(d).add(Dr),h}intersectSphere(e,t){Or.subVectors(e.center,this.origin);const n=Or.dot(this.direction),r=Or.dot(Or)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(a=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Or)}intersectTriangle(e,t,n,r,i){zr.subVectors(t,e),Nr.subVectors(n,e),Br.crossVectors(zr,Nr);let o,a=this.direction.dot(Br);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}jr.subVectors(this.origin,e);const s=o*this.direction.dot(Nr.crossVectors(jr,Nr));if(s<0)return null;const l=o*this.direction.dot(zr.cross(jr));if(l<0)return null;if(s+l>a)return null;const c=-o*jr.dot(Br);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ur{constructor(){Ur.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ur).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Vr.setFromMatrixColumn(e,0).length(),i=1/Vr.setFromMatrixColumn(e,1).length(),o=1/Vr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*a,t[4]=-o*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*c,t[9]=i-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Wr,e,Gr)}lookAt(e,t,n){const r=this.elements;return Kr.subVectors(e,t),0===Kr.lengthSq()&&(Kr.z=1),Kr.normalize(),$r.crossVectors(n,Kr),0===$r.lengthSq()&&(1===Math.abs(n.z)?Kr.x+=1e-4:Kr.z+=1e-4,Kr.normalize(),$r.crossVectors(n,Kr)),$r.normalize(),qr.crossVectors(Kr,$r),r[0]=$r.x,r[4]=qr.x,r[8]=Kr.x,r[1]=$r.y,r[5]=qr.y,r[9]=Kr.y,r[2]=$r.z,r[6]=qr.z,r[10]=Kr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],_=r[0],w=r[4],S=r[8],E=r[12],k=r[1],M=r[5],P=r[9],T=r[13],C=r[2],A=r[6],I=r[10],R=r[14],O=r[3],D=r[7],L=r[11],j=r[15];return i[0]=o*_+a*k+s*C+l*O,i[4]=o*w+a*M+s*A+l*D,i[8]=o*S+a*P+s*I+l*L,i[12]=o*E+a*T+s*R+l*j,i[1]=c*_+u*k+d*C+h*O,i[5]=c*w+u*M+d*A+h*D,i[9]=c*S+u*P+d*I+h*L,i[13]=c*E+u*T+d*R+h*j,i[2]=p*_+f*k+m*C+g*O,i[6]=p*w+f*M+m*A+g*D,i[10]=p*S+f*P+m*I+g*L,i[14]=p*E+f*T+m*R+g*j,i[3]=v*_+y*k+b*C+x*O,i[7]=v*w+y*M+b*A+x*D,i[11]=v*S+y*P+b*I+x*L,i[15]=v*E+y*T+b*R+x*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+i*s*u-r*l*u-i*a*d+n*l*d+r*a*h-n*s*h)+e[7]*(+t*s*h-t*l*d+i*o*d-r*o*h+r*l*c-i*s*c)+e[11]*(+t*l*u-t*a*h-i*o*u+n*o*h+i*a*c-n*l*c)+e[15]*(-r*a*c-t*s*u+t*a*d+r*o*u-n*o*d+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*d*l+f*s*h-a*m*h-u*s*g+a*d*g,y=p*d*l-c*m*l-p*s*h+o*m*h+c*s*g-o*d*g,b=c*f*l-p*u*l+p*a*h-o*f*h-c*a*g+o*u*g,x=p*u*s-c*f*s-p*a*d+o*f*d+c*a*m-o*u*m,_=t*v+n*y+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=v*w,e[1]=(f*d*i-u*m*i-f*r*h+n*m*h+u*r*g-n*d*g)*w,e[2]=(a*m*i-f*s*i+f*r*l-n*m*l-a*r*g+n*s*g)*w,e[3]=(u*s*i-a*d*i-u*r*l+n*d*l+a*r*h-n*s*h)*w,e[4]=y*w,e[5]=(c*m*i-p*d*i+p*r*h-t*m*h-c*r*g+t*d*g)*w,e[6]=(p*s*i-o*m*i-p*r*l+t*m*l+o*r*g-t*s*g)*w,e[7]=(o*d*i-c*s*i+c*r*l-t*d*l-o*r*h+t*s*h)*w,e[8]=b*w,e[9]=(p*u*i-c*f*i-p*n*h+t*f*h+c*n*g-t*u*g)*w,e[10]=(o*f*i-p*a*i+p*n*l-t*f*l-o*n*g+t*a*g)*w,e[11]=(c*a*i-o*u*i-c*n*l+t*u*l+o*n*h-t*a*h)*w,e[12]=x*w,e[13]=(c*f*r-p*u*r+p*n*d-t*f*d-c*n*m+t*u*m)*w,e[14]=(p*a*r-o*f*r-p*n*s+t*f*s+o*n*m-t*a*m)*w,e[15]=(o*u*r-c*a*r+c*n*s-t*u*s-o*n*d+t*a*d)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,d=i*l,h=i*c,p=i*u,f=o*c,m=o*u,g=a*u,v=s*l,y=s*c,b=s*u,x=n.x,_=n.y,w=n.z;return r[0]=(1-(f+g))*x,r[1]=(h+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(h-b)*_,r[5]=(1-(d+g))*_,r[6]=(m+v)*_,r[7]=0,r[8]=(p+y)*w,r[9]=(m-v)*w,r[10]=(1-(d+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Vr.set(r[0],r[1],r[2]).length();const o=Vr.set(r[4],r[5],r[6]).length(),a=Vr.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Hr.copy(this);const s=1/i,l=1/o,c=1/a;return Hr.elements[0]*=s,Hr.elements[1]*=s,Hr.elements[2]*=s,Hr.elements[4]*=l,Hr.elements[5]*=l,Hr.elements[6]*=l,Hr.elements[8]*=c,Hr.elements[9]*=c,Hr.elements[10]*=c,t.setFromRotationMatrix(Hr),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){const a=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),d=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*s,d=(n+r)*l,h=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Vr=new dr,Hr=new Ur,Wr=new dr(0,0,0),Gr=new dr(1,1,1),$r=new dr,qr=new dr,Kr=new dr,Xr=new Ur,Yr=new ur;class Zr{constructor(e=0,t=0,n=0,r=Zr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(En(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-En(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(En(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-En(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(En(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-En(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Xr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Xr,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Yr.setFromEuler(this),this.setFromQuaternion(Yr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Zr.DEFAULT_ORDER="XYZ";class Jr{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Qr=0;const ei=new dr,ti=new ur,ni=new Ur,ri=new dr,ii=new dr,oi=new dr,ai=new ur,si=new dr(1,0,0),li=new dr(0,1,0),ci=new dr(0,0,1),ui={type:"added"},di={type:"removed"};class hi extends yn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Qr++}),this.uuid=Sn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hi.DEFAULT_UP.clone();const e=new dr,t=new Zr,n=new ur,r=new dr(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ur},normalMatrix:{value:new Dn}}),this.matrix=new Ur,this.matrixWorld=new Ur,this.matrixAutoUpdate=hi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=hi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Jr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ti.setFromAxisAngle(e,t),this.quaternion.multiply(ti),this}rotateOnWorldAxis(e,t){return ti.setFromAxisAngle(e,t),this.quaternion.premultiply(ti),this}rotateX(e){return this.rotateOnAxis(si,e)}rotateY(e){return this.rotateOnAxis(li,e)}rotateZ(e){return this.rotateOnAxis(ci,e)}translateOnAxis(e,t){return ei.copy(e).applyQuaternion(this.quaternion),this.position.add(ei.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(si,e)}translateY(e){return this.translateOnAxis(li,e)}translateZ(e){return this.translateOnAxis(ci,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ni.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ri.copy(e):ri.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),ii.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ni.lookAt(ii,ri,this.up):ni.lookAt(ri,ii,this.up),this.quaternion.setFromRotationMatrix(ni),r&&(ni.extractRotation(r.matrixWorld),ti.setFromRotationMatrix(ni),this.quaternion.premultiply(ti.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ui)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(di)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(di)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ni.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ni.multiply(e.parent.matrixWorld)),e.applyMatrix4(ni),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(e,t);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ii,e,oi),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ii,ai,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}hi.DEFAULT_UP=new dr(0,1,0),hi.DEFAULT_MATRIX_AUTO_UPDATE=!0,hi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const pi=new dr,fi=new dr,mi=new dr,gi=new dr,vi=new dr,yi=new dr,bi=new dr,xi=new dr,_i=new dr,wi=new dr;class Si{constructor(e=new dr,t=new dr,n=new dr){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),pi.subVectors(e,t),r.cross(pi);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){pi.subVectors(r,t),fi.subVectors(n,t),mi.subVectors(e,t);const o=pi.dot(pi),a=pi.dot(fi),s=pi.dot(mi),l=fi.dot(fi),c=fi.dot(mi),u=o*l-a*a;if(0===u)return i.set(-2,-1,-1);const d=1/u,h=(l*s-a*c)*d,p=(o*c-a*s)*d;return i.set(1-h-p,p,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,gi),gi.x>=0&&gi.y>=0&&gi.x+gi.y<=1}static getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,gi),s.set(0,0),s.addScaledVector(i,gi.x),s.addScaledVector(o,gi.y),s.addScaledVector(a,gi.z),s}static isFrontFacing(e,t,n,r){return pi.subVectors(n,t),fi.subVectors(e,t),pi.cross(fi).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return pi.subVectors(this.c,this.b),fi.subVectors(this.a,this.b),.5*pi.cross(fi).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Si.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Si.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return Si.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Si.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Si.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,a;vi.subVectors(r,n),yi.subVectors(i,n),xi.subVectors(e,n);const s=vi.dot(xi),l=yi.dot(xi);if(s<=0&&l<=0)return t.copy(n);_i.subVectors(e,r);const c=vi.dot(_i),u=yi.dot(_i);if(c>=0&&u<=c)return t.copy(r);const d=s*u-c*l;if(d<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(vi,o);wi.subVectors(e,i);const h=vi.dot(wi),p=yi.dot(wi);if(p>=0&&h<=p)return t.copy(i);const f=h*l-s*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(yi,a);const m=c*p-h*u;if(m<=0&&u-c>=0&&h-p>=0)return bi.subVectors(i,r),a=(u-c)/(u-c+(h-p)),t.copy(r).addScaledVector(bi,a);const g=1/(m+f+d);return o=f*g,a=d*g,t.copy(n).addScaledVector(vi,o).addScaledVector(yi,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Ei=0;class ki extends yn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ei++}),this.uuid=Sn(),this.name="",this.type="Material",this.blending=b,this.side=f,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=O,this.blendDst=D,this.blendEquation=E,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=H,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=on,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wt,this.stencilZFail=Wt,this.stencilZPass=Wt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==b&&(n.blending=this.blending),this.side!==f&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Mi extends ki{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Yn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=K,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Pi=new dr,Ti=new On;class Ci{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=an,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ti.fromBufferAttribute(this,t),Ti.applyMatrix3(e),this.setXY(t,Ti.x,Ti.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Pi.fromBufferAttribute(this,t),Pi.applyMatrix3(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Pi.fromBufferAttribute(this,t),Pi.applyMatrix4(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Pi.fromBufferAttribute(this,t),Pi.applyNormalMatrix(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Pi.fromBufferAttribute(this,t),Pi.transformDirection(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=An(t,this.array)),t}setX(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=An(t,this.array)),t}setY(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=An(t,this.array)),t}setZ(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=An(t,this.array)),t}setW(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=In(t,this.array),n=In(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=In(t,this.array),n=In(n,this.array),r=In(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=In(t,this.array),n=In(n,this.array),r=In(r,this.array),i=In(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==an&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Ai extends Ci{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Ii extends Ci{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Ri extends Ci{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Oi extends Ci{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Di extends Ci{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Li extends Ci{constructor(e,t,n){super(new Int32Array(e),t,n)}}class ji extends Ci{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class zi extends Ci{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}}class Ni extends Ci{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Bi extends Ci{constructor(e,t,n){super(new Float64Array(e),t,n)}}let Fi=0;const Ui=new Ur,Vi=new hi,Hi=new dr,Wi=new fr,Gi=new fr,$i=new dr;class qi extends yn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Fi++}),this.uuid=Sn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(jn(e)?ji:Di)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Dn).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ui.makeRotationFromQuaternion(e),this.applyMatrix4(Ui),this}rotateX(e){return Ui.makeRotationX(e),this.applyMatrix4(Ui),this}rotateY(e){return Ui.makeRotationY(e),this.applyMatrix4(Ui),this}rotateZ(e){return Ui.makeRotationZ(e),this.applyMatrix4(Ui),this}translate(e,t,n){return Ui.makeTranslation(e,t,n),this.applyMatrix4(Ui),this}scale(e,t,n){return Ui.makeScale(e,t,n),this.applyMatrix4(Ui),this}lookAt(e){return Vi.lookAt(e),Vi.updateMatrix(),this.applyMatrix4(Vi.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hi).negate(),this.translate(Hi.x,Hi.y,Hi.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Ni(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new fr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new dr(-1/0,-1/0,-1/0),new dr(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Wi.setFromBufferAttribute(n),this.morphTargetsRelative?($i.addVectors(this.boundingBox.min,Wi.min),this.boundingBox.expandByPoint($i),$i.addVectors(this.boundingBox.max,Wi.max),this.boundingBox.expandByPoint($i)):(this.boundingBox.expandByPoint(Wi.min),this.boundingBox.expandByPoint(Wi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Rr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new dr,1/0);if(e){const n=this.boundingSphere.center;if(Wi.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Gi.setFromBufferAttribute(n),this.morphTargetsRelative?($i.addVectors(Wi.min,Gi.min),Wi.expandByPoint($i),$i.addVectors(Wi.max,Gi.max),Wi.expandByPoint($i)):(Wi.expandByPoint(Gi.min),Wi.expandByPoint(Gi.max))}Wi.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)$i.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared($i));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)$i.fromBufferAttribute(o,t),a&&(Hi.fromBufferAttribute(e,t),$i.add(Hi)),r=Math.max(r,n.distanceToSquared($i))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ci(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<a;e++)l[e]=new dr,c[e]=new dr;const u=new dr,d=new dr,h=new dr,p=new On,f=new On,m=new On,g=new dr,v=new dr;function y(e,t,n){u.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),p.fromArray(o,2*e),f.fromArray(o,2*t),m.fromArray(o,2*n),d.sub(u),h.sub(u),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-f.y).multiplyScalar(i),v.copy(h).multiplyScalar(f.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)y(n[e+0],n[e+1],n[e+2])}const x=new dr,_=new dr,w=new dr,S=new dr;function E(e){w.fromArray(i,3*e),S.copy(w);const t=l[e];x.copy(t),x.sub(w.multiplyScalar(w.dot(t))).normalize(),_.crossVectors(S,t);const n=_.dot(c[e])<0?-1:1;s[4*e]=x.x,s[4*e+1]=x.y,s[4*e+2]=x.z,s[4*e+3]=n}for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)E(n[e+0]),E(n[e+1]),E(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ci(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new dr,i=new dr,o=new dr,a=new dr,s=new dr,l=new dr,c=new dr,u=new dr;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,p),o.fromBufferAttribute(t,f),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,h),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),s.add(c),l.add(c),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)$i.fromBufferAttribute(e,t),$i.normalize(),e.setXYZ(t,$i.x,$i.y,$i.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let i=0,l=t.length;i<l;i++){a=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new Ci(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new qi,n=this.index.array,r=this.attributes;for(const i in r){const o=e(r[i],n);t.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);o.push(r)}t.morphAttributes[r]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];o.push(r.toJSON(e.data))}o.length>0&&(r[t]=o,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ki=new Ur,Xi=new Fr,Yi=new Rr,Zi=new dr,Ji=new dr,Qi=new dr,eo=new dr,to=new dr,no=new On,ro=new On,io=new On,oo=new dr,ao=new dr;class so extends hi{constructor(e=new qi,t=new Mi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(i&&a){to.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=a[n],s=i[n];0!==r&&(eo.fromBufferAttribute(s,e),o?to.addScaledVector(eo,r):to.addScaledVector(eo.sub(t),r))}t.add(to)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Yi.copy(n.boundingSphere),Yi.applyMatrix4(i),!1===e.ray.intersectsSphere(Yi))return;if(Ki.copy(i).invert(),Xi.copy(e.ray).applyMatrix4(Ki),null!==n.boundingBox&&!1===Xi.intersectsBox(n.boundingBox))return;let o;const a=n.index,s=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,u=n.groups,d=n.drawRange;if(null!==a)if(Array.isArray(r))for(let n=0,i=u.length;n<i;n++){const i=u[n],s=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(a.count,Math.min(i.start+i.count,d.start+d.count));n<r;n+=3){const r=a.getX(n),u=a.getX(n+1),d=a.getX(n+2);o=lo(this,s,e,Xi,l,c,r,u,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}}else for(let n=Math.max(0,d.start),i=Math.min(a.count,d.start+d.count);n<i;n+=3){const i=a.getX(n),s=a.getX(n+1),u=a.getX(n+2);o=lo(this,r,e,Xi,l,c,i,s,u),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}else if(void 0!==s)if(Array.isArray(r))for(let n=0,i=u.length;n<i;n++){const i=u[n],a=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(s.count,Math.min(i.start+i.count,d.start+d.count));n<r;n+=3)o=lo(this,a,e,Xi,l,c,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}else for(let n=Math.max(0,d.start),i=Math.min(s.count,d.start+d.count);n<i;n+=3)o=lo(this,r,e,Xi,l,c,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}function lo(e,t,n,r,i,o,a,s,l){e.getVertexPosition(a,Zi),e.getVertexPosition(s,Ji),e.getVertexPosition(l,Qi);const c=function(e,t,n,r,i,o,a,s){let l;if(l=t.side===m?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side===f,s),null===l)return null;ao.copy(s),ao.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(ao);return c<n.near||c>n.far?null:{distance:c,point:ao.clone(),object:e}}(e,t,n,r,Zi,Ji,Qi,oo);if(c){i&&(no.fromBufferAttribute(i,a),ro.fromBufferAttribute(i,s),io.fromBufferAttribute(i,l),c.uv=Si.getUV(oo,Zi,Ji,Qi,no,ro,io,new On)),o&&(no.fromBufferAttribute(o,a),ro.fromBufferAttribute(o,s),io.fromBufferAttribute(o,l),c.uv2=Si.getUV(oo,Zi,Ji,Qi,no,ro,io,new On));const e={a,b:s,c:l,normal:new dr,materialIndex:0};Si.getNormal(Zi,Ji,Qi,e.normal),c.face=e}return c}class co extends qi{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],c=[],u=[];let d=0,h=0;function p(e,t,n,r,i,o,p,f,m,g,v){const y=o/m,b=p/g,x=o/2,_=p/2,w=f/2,S=m+1,E=g+1;let k=0,M=0;const P=new dr;for(let o=0;o<E;o++){const a=o*b-_;for(let s=0;s<S;s++){const d=s*y-x;P[e]=d*r,P[t]=a*i,P[n]=w,l.push(P.x,P.y,P.z),P[e]=0,P[t]=0,P[n]=f>0?1:-1,c.push(P.x,P.y,P.z),u.push(s/m),u.push(1-o/g),k+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=d+t+S*e,r=d+t+S*(e+1),i=d+(t+1)+S*(e+1),o=d+(t+1)+S*e;s.push(n,r,o),s.push(r,i,o),M+=6}a.addGroup(h,M,v),h+=M,d+=k}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Ni(l,3)),this.setAttribute("normal",new Ni(c,3)),this.setAttribute("uv",new Ni(u,2))}static fromJSON(e){return new co(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function uo(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function ho(e){const t={};for(let n=0;n<e.length;n++){const r=uo(e[n]);for(const e in r)t[e]=r[e]}return t}function po(e){return null===e.getRenderTarget()&&e.outputEncoding===Lt?Ut:Vt}const fo={clone:uo,merge:ho};class mo extends ki{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=uo(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class go extends hi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ur,this.projectionMatrix=new Ur,this.projectionMatrixInverse=new Ur}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class vo extends go{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*wn*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*_n*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*wn*Math.atan(Math.tan(.5*_n*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*_n*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const yo=-90;class bo extends hi{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new vo(yo,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const i=new vo(yo,1,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(-1,0,0),this.add(i);const o=new vo(yo,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new vo(yo,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const s=new vo(yo,1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(0,0,1),this.add(s);const l=new vo(yo,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,d=e.xr.enabled;e.toneMapping=Z,e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class xo extends nr{constructor(e,t,n,r,i,o,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:ie,n,r,i,o,a,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class _o extends ir{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new xo(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:ve}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new co(5,5,5),a=new mo({name:"CubemapFromEquirect",uniforms:uo(n),vertexShader:r,fragmentShader:i,side:m,blending:y});a.uniforms.tEquirect.value=t;const s=new so(o,a),l=t.minFilter;return t.minFilter===xe&&(t.minFilter=ve),new bo(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}const wo=new dr,So=new dr,Eo=new Dn;class ko{constructor(e=new dr(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=wo.subVectors(n,t).cross(So.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(wo),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Eo.getNormalMatrix(e),r=this.coplanarPoint(wo).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Mo=new Rr,Po=new dr;class To{constructor(e=new ko,t=new ko,n=new ko,r=new ko,i=new ko,o=new ko){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-r,u-s,f-d,y-m).normalize(),t[1].setComponents(a+r,u+s,f+d,y+m).normalize(),t[2].setComponents(a+i,u+l,f+h,y+g).normalize(),t[3].setComponents(a-i,u-l,f-h,y-g).normalize(),t[4].setComponents(a-o,u-c,f-p,y-v).normalize(),t[5].setComponents(a+o,u+c,f+p,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Mo.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Mo)}intersectsSprite(e){return Mo.center.set(0,0,0),Mo.radius=.7071067811865476,Mo.applyMatrix4(e.matrixWorld),this.intersectsSphere(Mo)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Po.x=r.normal.x>0?e.max.x:e.min.x,Po.y=r.normal.y>0?e.max.y:e.min.y,Po.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Po)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Co(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Ao(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,a=e.createBuffer();let s;if(e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback(),i instanceof Float32Array)s=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=5131}else s=5123;else if(i instanceof Int16Array)s=5122;else if(i instanceof Uint32Array)s=5125;else if(i instanceof Int32Array)s=5124;else if(i instanceof Int8Array)s=5120;else if(i instanceof Uint8Array)s=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=5121}return{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(function(t,r,i){const o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1),r.onUploadCallback()}(o.buffer,t,i),o.version=t.version)}}}class Io extends qi{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),l=a+1,c=s+1,u=e/a,d=t/s,h=[],p=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*d-o;for(let n=0;n<l;n++){const r=n*u-i;p.push(r,-t,0),f.push(0,0,1),m.push(n/a),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<a;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),o=t+1+l*e;h.push(n,r,o),h.push(r,i,o)}this.setIndex(h),this.setAttribute("position",new Ni(p,3)),this.setAttribute("normal",new Ni(f,3)),this.setAttribute("uv",new Ni(m,2))}static fromJSON(e){return new Io(e.width,e.height,e.widthSegments,e.heightSegments)}}const Ro={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Oo={common:{diffuse:{value:new Yn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Dn},uv2Transform:{value:new Dn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new On(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Yn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Yn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Dn}},sprite:{diffuse:{value:new Yn(16777215)},opacity:{value:1},center:{value:new On(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Dn}}},Do={basic:{uniforms:ho([Oo.common,Oo.specularmap,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.fog]),vertexShader:Ro.meshbasic_vert,fragmentShader:Ro.meshbasic_frag},lambert:{uniforms:ho([Oo.common,Oo.specularmap,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.fog,Oo.lights,{emissive:{value:new Yn(0)}}]),vertexShader:Ro.meshlambert_vert,fragmentShader:Ro.meshlambert_frag},phong:{uniforms:ho([Oo.common,Oo.specularmap,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.fog,Oo.lights,{emissive:{value:new Yn(0)},specular:{value:new Yn(1118481)},shininess:{value:30}}]),vertexShader:Ro.meshphong_vert,fragmentShader:Ro.meshphong_frag},standard:{uniforms:ho([Oo.common,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.roughnessmap,Oo.metalnessmap,Oo.fog,Oo.lights,{emissive:{value:new Yn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ro.meshphysical_vert,fragmentShader:Ro.meshphysical_frag},toon:{uniforms:ho([Oo.common,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.gradientmap,Oo.fog,Oo.lights,{emissive:{value:new Yn(0)}}]),vertexShader:Ro.meshtoon_vert,fragmentShader:Ro.meshtoon_frag},matcap:{uniforms:ho([Oo.common,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.fog,{matcap:{value:null}}]),vertexShader:Ro.meshmatcap_vert,fragmentShader:Ro.meshmatcap_frag},points:{uniforms:ho([Oo.points,Oo.fog]),vertexShader:Ro.points_vert,fragmentShader:Ro.points_frag},dashed:{uniforms:ho([Oo.common,Oo.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ro.linedashed_vert,fragmentShader:Ro.linedashed_frag},depth:{uniforms:ho([Oo.common,Oo.displacementmap]),vertexShader:Ro.depth_vert,fragmentShader:Ro.depth_frag},normal:{uniforms:ho([Oo.common,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,{opacity:{value:1}}]),vertexShader:Ro.meshnormal_vert,fragmentShader:Ro.meshnormal_frag},sprite:{uniforms:ho([Oo.sprite,Oo.fog]),vertexShader:Ro.sprite_vert,fragmentShader:Ro.sprite_frag},background:{uniforms:{uvTransform:{value:new Dn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ro.background_vert,fragmentShader:Ro.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ro.backgroundCube_vert,fragmentShader:Ro.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ro.cube_vert,fragmentShader:Ro.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ro.equirect_vert,fragmentShader:Ro.equirect_frag},distanceRGBA:{uniforms:ho([Oo.common,Oo.displacementmap,{referencePosition:{value:new dr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ro.distanceRGBA_vert,fragmentShader:Ro.distanceRGBA_frag},shadow:{uniforms:ho([Oo.lights,Oo.fog,{color:{value:new Yn(0)},opacity:{value:1}}]),vertexShader:Ro.shadow_vert,fragmentShader:Ro.shadow_frag}};Do.physical={uniforms:ho([Do.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new On(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Yn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new On},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Yn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Yn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ro.meshphysical_vert,fragmentShader:Ro.meshphysical_frag};const Lo={r:0,b:0,g:0};function jo(e,t,n,r,i,o,a){const s=new Yn(0);let l,c,u=!0===o?0:1,d=null,h=0,p=null;function g(t,n){t.getRGB(Lo,po(e)),r.buffers.color.setClear(Lo.r,Lo.g,Lo.b,n,a)}return{getClearColor:function(){return s},setClearColor:function(e,t=1){s.set(e),u=t,g(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,g(s,u)},render:function(r,o){let a=!1,v=!0===o.isScene?o.background:null;v&&v.isTexture&&(v=(o.backgroundBlurriness>0?n:t).get(v));const y=e.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(v=null),null===v?g(s,u):v&&v.isColor&&(g(v,1),a=!0),(e.autoClear||a)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===le)?(void 0===c&&(c=new so(new co(1,1,1),new mo({name:"BackgroundCubeMaterial",uniforms:uo(Do.backgroundCube.uniforms),vertexShader:Do.backgroundCube.vertexShader,fragmentShader:Do.backgroundCube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=o.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=o.backgroundIntensity,c.material.toneMapped=v.encoding!==Lt,d===v&&h===v.version&&p===e.toneMapping||(c.material.needsUpdate=!0,d=v,h=v.version,p=e.toneMapping),c.layers.enableAll(),r.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new so(new Io(2,2),new mo({name:"BackgroundMaterial",uniforms:uo(Do.background.uniforms),vertexShader:Do.background.vertexShader,fragmentShader:Do.background.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=o.backgroundIntensity,l.material.toneMapped=v.encoding!==Lt,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),d===v&&h===v.version&&p===e.toneMapping||(l.material.needsUpdate=!0,d=v,h=v.version,p=e.toneMapping),l.layers.enableAll(),r.unshift(l,l.geometry,l.material,0,0,null))}}}function zo(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=p(null);let c=l,u=!1;function d(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function b(){x(),u=!0,c!==l&&(c=l,d(c.object))}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,b,x){let _=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];return void 0===u&&(u=p(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[a]=u),u}(b,h,l);c!==t&&(c=t,d(c.object)),_=function(e,t,n,r){const i=c.attributes,o=t.attributes;let a=0;const s=n.getAttributes();for(const t in s)if(s[t].location>=0){const n=i[t];let r=o[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;a++}return c.attributesNum!==a||c.index!==r}(i,b,h,x),_&&function(e,t,n,r){const i={},o=t.attributes;let a=0;const s=n.getAttributes();for(const t in s)if(s[t].location>=0){let n=o[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,a++}c.attributes=i,c.attributesNum=a,c.index=r}(i,b,h,x)}else{const e=!0===l.wireframe;c.geometry===b.id&&c.program===h.id&&c.wireframe===e||(c.geometry=b.id,c.program=h.id,c.wireframe=e,_=!0)}null!==x&&n.update(x,34963),(_||u)&&(u=!1,function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const t=o.normalized,a=o.itemSize,l=n.get(o);if(void 0===l)continue;const c=l.buffer,u=l.type,d=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,h=o.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,a/r.locationSize,u,t,l*d,(h+a/r.locationSize*e)*d)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,a/r.locationSize,u,t,a*d,a/r.locationSize*e*d)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}v()}(i,l,h,b),null!==x&&e.bindBuffer(34963,n.get(x).buffer))},reset:b,resetDefaultState:x,dispose:function(){b();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function No(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,a,s),n.update(a,o,s)}}function Bo(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=d>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?e.getParameter(36183):0}}function Fo(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new ko,s=new Dn,l={value:null,needsUpdate:!1};function c(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==o;++t,n+=4)a.copy(e[t]).applyMatrix4(i,s),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,s,u){const d=a.clippingPlanes,h=a.clipIntersection,p=a.clipShadows,f=e.get(a);if(!i||null===d||0===d.length||o&&!p)o?c(null):(l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0);else{const e=o?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=c(d,s,t,u);for(let e=0;e!==t;++e)i[e]=n[e];f.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function Uo(e){let t=new WeakMap;function n(e,t){return t===ae?e.mapping=ie:t===se&&(e.mapping=oe),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(o===ae||o===se){if(t.has(i))return n(t.get(i).texture,i.mapping);{const o=i.image;if(o&&o.height>0){const a=new _o(o.height/2);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}class Vo extends go{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Ho=[.125,.215,.35,.446,.526,.582],Wo=20,Go=new Vo,$o=new Yn;let qo=null;const Ko=(1+Math.sqrt(5))/2,Xo=1/Ko,Yo=[new dr(1,1,1),new dr(-1,1,1),new dr(1,1,-1),new dr(-1,1,-1),new dr(0,Ko,Xo),new dr(0,Ko,-Xo),new dr(Xo,0,Ko),new dr(-Xo,0,Ko),new dr(Ko,Xo,0),new dr(-Ko,Xo,0)];class Zo{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){qo=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=ta(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=ea(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(qo),e.scissorTest=!1,Qo(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ie||e.mapping===oe?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),qo=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ve,minFilter:ve,generateMipmaps:!1,type:Ce,format:De,encoding:Dt,depthBuffer:!1},r=Jo(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Jo(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const o=e-4+1+Ho.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>e-4?s=Ho[a-e+4-1]:0===a&&(s=0),r.push(s);const l=1/(o-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*h),y=new Float32Array(m*p*h),b=new Float32Array(g*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,f*p*e),y.set(d,m*p*e);const i=[e,e,e,e,e,e];b.set(i,g*p*e)}const x=new qi;x.setAttribute("position",new Ci(v,f)),x.setAttribute("uv",new Ci(y,m)),x.setAttribute("faceIndex",new Ci(b,g)),t.push(x),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(Wo),i=new dr(0,1,0);return new mo({name:"SphericalGaussianBlur",defines:{n:Wo,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:y,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new so(this._lodPlanes[0],e);this._renderer.compile(t,Go)}_sceneToCubeUV(e,t,n,r){const i=new vo(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor($o),s.toneMapping=Z,s.autoClear=!1;const u=new Mi({name:"PMREM.Background",side:m,depthWrite:!1,depthTest:!1}),d=new so(new co,u);let h=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,h=!0):(u.color.copy($o),h=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(i.up.set(0,o[t],0),i.lookAt(a[t],0,0)):1===n?(i.up.set(0,0,o[t]),i.lookAt(0,a[t],0)):(i.up.set(0,o[t],0),i.lookAt(0,0,a[t]));const l=this._cubeSize;Qo(r,n*l,t>2?l:0,l,l),s.setRenderTarget(r),h&&s.render(d,i),s.render(e,i)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===ie||e.mapping===oe;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=ta()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=ea());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new so(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const a=this._cubeSize;Qo(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,Go)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=Yo[(t-1)%Yo.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new so(this._lodPlanes[r],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,p=i/h,f=isFinite(i)?1+Math.floor(3*p):Wo;f>Wo&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<Wo;++e){const t=e/p,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<f&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);const{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;const y=this._sizeLods[r];Qo(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(c,Go)}}function Jo(e,t,n){const r=new ir(e,t,n);return r.texture.mapping=le,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Qo(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function ea(){return new mo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:y,depthTest:!1,depthWrite:!1})}function ta(){return new mo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:y,depthTest:!1,depthWrite:!1})}function na(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,a=o===ae||o===se,s=o===ie||o===oe;if(a||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new Zo(e)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const o=i.image;if(a&&o&&o.height>0||s&&o&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(o)){null===n&&(n=new Zo(e));const o=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,o),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function ra(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function ia(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(jn(n)?ji:Di)(n,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const r=e.morphAttributes;for(const e in r){const n=r[e];for(let e=0,r=n.length;e<r;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function oa(e,t,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,d;if(i)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](o,l,a,r*s,c),n.update(l,o,c)}}function aa(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function sa(e,t){return e[0]-t[0]}function la(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ca(e,t,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new rr,s=[];for(let e=0;e<8;e++)s[e]=[e,0];return{update:function(l,c,u,d){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,f=void 0!==p?p.length:0;let m=o.get(c);if(void 0===m||m.count!==f){void 0!==m&&m.texture.dispose();const y=void 0!==c.morphAttributes.position,b=void 0!==c.morphAttributes.normal,x=void 0!==c.morphAttributes.color,_=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],S=c.morphAttributes.color||[];let E=0;!0===y&&(E=1),!0===b&&(E=2),!0===x&&(E=3);let k=c.attributes.position.count*E,M=1;k>t.maxTextureSize&&(M=Math.ceil(k/t.maxTextureSize),k=t.maxTextureSize);const P=new Float32Array(k*M*4*f),T=new or(P,k,M,f);T.type=Te,T.needsUpdate=!0;const C=4*E;for(let I=0;I<f;I++){const R=_[I],O=w[I],D=S[I],L=k*M*4*I;for(let j=0;j<R.count;j++){const z=j*C;!0===y&&(a.fromBufferAttribute(R,j),P[L+z+0]=a.x,P[L+z+1]=a.y,P[L+z+2]=a.z,P[L+z+3]=0),!0===b&&(a.fromBufferAttribute(O,j),P[L+z+4]=a.x,P[L+z+5]=a.y,P[L+z+6]=a.z,P[L+z+7]=0),!0===x&&(a.fromBufferAttribute(D,j),P[L+z+8]=a.x,P[L+z+9]=a.y,P[L+z+10]=a.z,P[L+z+11]=4===D.itemSize?a.w:1)}}function A(){T.dispose(),o.delete(c),c.removeEventListener("dispose",A)}m={count:f,texture:T,size:new On(k,M)},o.set(c,m),c.addEventListener("dispose",A)}let g=0;for(let N=0;N<h.length;N++)g+=h[N];const v=c.morphTargetsRelative?1:1-g;d.getUniforms().setValue(e,"morphTargetBaseInfluence",v),d.getUniforms().setValue(e,"morphTargetInfluences",h),d.getUniforms().setValue(e,"morphTargetsTexture",m.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{const B=void 0===h?0:h.length;let F=r[c.id];if(void 0===F||F.length!==B){F=[];for(let G=0;G<B;G++)F[G]=[G,0];r[c.id]=F}for(let $=0;$<B;$++){const q=F[$];q[0]=$,q[1]=h[$]}F.sort(la);for(let K=0;K<8;K++)K<B&&F[K][1]?(s[K][0]=F[K][0],s[K][1]=F[K][1]):(s[K][0]=Number.MAX_SAFE_INTEGER,s[K][1]=0);s.sort(sa);const U=c.morphAttributes.position,V=c.morphAttributes.normal;let H=0;for(let X=0;X<8;X++){const Y=s[X],Z=Y[0],J=Y[1];Z!==Number.MAX_SAFE_INTEGER&&J?(U&&c.getAttribute("morphTarget"+X)!==U[Z]&&c.setAttribute("morphTarget"+X,U[Z]),V&&c.getAttribute("morphNormal"+X)!==V[Z]&&c.setAttribute("morphNormal"+X,V[Z]),i[X]=J,H+=J):(U&&!0===c.hasAttribute("morphTarget"+X)&&c.deleteAttribute("morphTarget"+X),V&&!0===c.hasAttribute("morphNormal"+X)&&c.deleteAttribute("morphNormal"+X),i[X]=0)}const W=c.morphTargetsRelative?1:1-H;d.getUniforms().setValue(e,"morphTargetBaseInfluence",W),d.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function ua(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==a&&(t.update(l),i.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}const da=new nr,ha=new or,pa=new sr,fa=new xo,ma=[],ga=[],va=new Float32Array(16),ya=new Float32Array(9),ba=new Float32Array(4);function xa(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=ma[i];if(void 0===o&&(o=new Float32Array(i),ma[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function _a(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function wa(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Sa(e,t){let n=ga[t];void 0===n&&(n=new Int32Array(t),ga[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Ea(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ka(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(_a(n,t))return;e.uniform2fv(this.addr,t),wa(n,t)}}function Ma(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(_a(n,t))return;e.uniform3fv(this.addr,t),wa(n,t)}}function Pa(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(_a(n,t))return;e.uniform4fv(this.addr,t),wa(n,t)}}function Ta(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(_a(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),wa(n,t)}else{if(_a(n,r))return;ba.set(r),e.uniformMatrix2fv(this.addr,!1,ba),wa(n,r)}}function Ca(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(_a(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),wa(n,t)}else{if(_a(n,r))return;ya.set(r),e.uniformMatrix3fv(this.addr,!1,ya),wa(n,r)}}function Aa(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(_a(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),wa(n,t)}else{if(_a(n,r))return;va.set(r),e.uniformMatrix4fv(this.addr,!1,va),wa(n,r)}}function Ia(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Ra(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(_a(n,t))return;e.uniform2iv(this.addr,t),wa(n,t)}}function Oa(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(_a(n,t))return;e.uniform3iv(this.addr,t),wa(n,t)}}function Da(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(_a(n,t))return;e.uniform4iv(this.addr,t),wa(n,t)}}function La(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function ja(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(_a(n,t))return;e.uniform2uiv(this.addr,t),wa(n,t)}}function za(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(_a(n,t))return;e.uniform3uiv(this.addr,t),wa(n,t)}}function Na(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(_a(n,t))return;e.uniform4uiv(this.addr,t),wa(n,t)}}function Ba(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||da,i)}function Fa(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||pa,i)}function Ua(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||fa,i)}function Va(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||ha,i)}function Ha(e,t){e.uniform1fv(this.addr,t)}function Wa(e,t){const n=xa(t,this.size,2);e.uniform2fv(this.addr,n)}function Ga(e,t){const n=xa(t,this.size,3);e.uniform3fv(this.addr,n)}function $a(e,t){const n=xa(t,this.size,4);e.uniform4fv(this.addr,n)}function qa(e,t){const n=xa(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Ka(e,t){const n=xa(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Xa(e,t){const n=xa(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Ya(e,t){e.uniform1iv(this.addr,t)}function Za(e,t){e.uniform2iv(this.addr,t)}function Ja(e,t){e.uniform3iv(this.addr,t)}function Qa(e,t){e.uniform4iv(this.addr,t)}function es(e,t){e.uniform1uiv(this.addr,t)}function ts(e,t){e.uniform2uiv(this.addr,t)}function ns(e,t){e.uniform3uiv(this.addr,t)}function rs(e,t){e.uniform4uiv(this.addr,t)}function is(e,t,n){const r=this.cache,i=t.length,o=Sa(n,i);_a(r,o)||(e.uniform1iv(this.addr,o),wa(r,o));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||da,o[e])}function os(e,t,n){const r=this.cache,i=t.length,o=Sa(n,i);_a(r,o)||(e.uniform1iv(this.addr,o),wa(r,o));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||pa,o[e])}function as(e,t,n){const r=this.cache,i=t.length,o=Sa(n,i);_a(r,o)||(e.uniform1iv(this.addr,o),wa(r,o));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||fa,o[e])}function ss(e,t,n){const r=this.cache,i=t.length,o=Sa(n,i);_a(r,o)||(e.uniform1iv(this.addr,o),wa(r,o));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||ha,o[e])}class ls{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Ea;case 35664:return ka;case 35665:return Ma;case 35666:return Pa;case 35674:return Ta;case 35675:return Ca;case 35676:return Aa;case 5124:case 35670:return Ia;case 35667:case 35671:return Ra;case 35668:case 35672:return Oa;case 35669:case 35673:return Da;case 5125:return La;case 36294:return ja;case 36295:return za;case 36296:return Na;case 35678:case 36198:case 36298:case 36306:case 35682:return Ba;case 35679:case 36299:case 36307:return Fa;case 35680:case 36300:case 36308:case 36293:return Ua;case 36289:case 36303:case 36311:case 36292:return Va}}(t.type)}}class cs{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ha;case 35664:return Wa;case 35665:return Ga;case 35666:return $a;case 35674:return qa;case 35675:return Ka;case 35676:return Xa;case 5124:case 35670:return Ya;case 35667:case 35671:return Za;case 35668:case 35672:return Ja;case 35669:case 35673:return Qa;case 5125:return es;case 36294:return ts;case 36295:return ns;case 36296:return rs;case 35678:case 36198:case 36298:case 36306:case 35682:return is;case 35679:case 36299:case 36307:return os;case 35680:case 36300:case 36308:case 36293:return as;case 36289:case 36303:case 36311:case 36292:return ss}}(t.type)}}class us{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}}}const ds=/(\w+)(\])?(\[|\.)?/g;function hs(e,t){e.seq.push(t),e.map[t.id]=t}function ps(e,t,n){const r=e.name,i=r.length;for(ds.lastIndex=0;;){const o=ds.exec(r),a=ds.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){hs(n,void 0===c?new ls(s,e,t):new cs(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new us(s),hs(n,e)),n=e}}}class fs{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);ps(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function ms(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let gs=0;function vs(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let e=i;e<o;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function ys(e,t){const n=function(e){switch(e){case Dt:return["Linear","( value )"];case Lt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function bs(e,t){let n;switch(t){case J:n="Linear";break;case Q:n="Reinhard";break;case ee:n="OptimizedCineon";break;case te:n="ACESFilmic";break;case ne:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function xs(e){return""!==e}function _s(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ws(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Ss=/^[ \t]*#include +<([\w\d./]+)>/gm;function Es(e){return e.replace(Ss,ks)}function ks(e,t){const n=Ro[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Es(n)}const Ms=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ps(e){return e.replace(Ms,Ts)}function Ts(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function Cs(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function As(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===d?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===p&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ie:case oe:t="ENVMAP_TYPE_CUBE";break;case le:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===oe&&(t="ENVMAP_MODE_REFRACTION"),t}(n),f=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case K:t="ENVMAP_BLENDING_MULTIPLY";break;case X:t="ENVMAP_BLENDING_MIX";break;case Y:t="ENVMAP_BLENDING_ADD"}return t}(n),m=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(xs).join("\n")}(n),v=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),y=i.createProgram();let b,x,_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(b=[v].filter(xs).join("\n"),b.length>0&&(b+="\n"),x=[g,v].filter(xs).join("\n"),x.length>0&&(x+="\n")):(b=[Cs(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(xs).join("\n"),x=[g,Cs(n),"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Z?"#define TONE_MAPPING":"",n.toneMapping!==Z?Ro.tonemapping_pars_fragment:"",n.toneMapping!==Z?bs("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ro.encodings_pars_fragment,ys("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(xs).join("\n")),a=Es(a),a=_s(a,n),a=ws(a,n),s=Es(s),s=_s(s,n),s=ws(s,n),a=Ps(a),s=Ps(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,x=["#define varying in",n.glslVersion===gn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===gn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const w=_+x+s,S=ms(i,35633,_+b+a),E=ms(i,35632,w);if(i.attachShader(y,S),i.attachShader(y,E),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(y).trim(),t=i.getShaderInfoLog(S).trim(),n=i.getShaderInfoLog(E).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(y,35714)){r=!1;const t=vs(i,S,"vertex"),n=vs(i,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:b},fragmentShader:{log:n,prefix:x}})}let k,M;return i.deleteShader(S),i.deleteShader(E),this.getUniforms=function(){return void 0===k&&(k=new fs(i,y)),k},this.getAttributes=function(){return void 0===M&&(M=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(i,y)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=gs++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=E,this}let Is=0;class Rs{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Os(e),t.set(e,n)),n}}class Os{constructor(e){this.id=Is++,this.code=e,this.usedTimes=0}}function Ds(e,t,n,r,i,o,a){const s=new Jr,l=new Rs,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(o,s,c,v,y){const x=v.fog,_=y.geometry,w=o.isMeshStandardMaterial?v.environment:null,S=(o.isMeshStandardMaterial?n:t).get(o.envMap||w),E=S&&S.mapping===le?S.image.height:null,k=f[o.type];null!==o.precision&&(p=i.getMaxPrecision(o.precision),p!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",p,"instead."));const M=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,P=void 0!==M?M.length:0;let T,C,A,I,R=0;if(void 0!==_.morphAttributes.position&&(R=1),void 0!==_.morphAttributes.normal&&(R=2),void 0!==_.morphAttributes.color&&(R=3),k){const e=Do[k];T=e.vertexShader,C=e.fragmentShader}else T=o.vertexShader,C=o.fragmentShader,l.update(o),A=l.getVertexShaderID(o),I=l.getFragmentShaderID(o);const O=e.getRenderTarget(),D=o.alphaTest>0,L=o.clearcoat>0,j=o.iridescence>0;return{isWebGL2:u,shaderID:k,shaderName:o.type,vertexShader:T,fragmentShader:C,defines:o.defines,customVertexShaderID:A,customFragmentShaderID:I,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:p,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:h,outputEncoding:null===O?e.outputEncoding:!0===O.isXRRenderTarget?O.texture.encoding:Dt,map:!!o.map,matcap:!!o.matcap,envMap:!!S,envMapMode:S&&S.mapping,envMapCubeUVHeight:E,lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===Bt,tangentSpaceNormalMap:o.normalMapType===Nt,decodeVideoTexture:!!o.map&&!0===o.map.isVideoTexture&&o.map.encoding===Lt,clearcoat:L,clearcoatMap:L&&!!o.clearcoatMap,clearcoatRoughnessMap:L&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:L&&!!o.clearcoatNormalMap,iridescence:j,iridescenceMap:j&&!!o.iridescenceMap,iridescenceThicknessMap:j&&!!o.iridescenceThicknessMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,opaque:!1===o.transparent&&o.blending===b,alphaMap:!!o.alphaMap,alphaTest:D,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!_.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheenColorMap||o.sheenRoughnessMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!x,useFog:!0===o.fog,fogExp2:x&&x.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:P,morphTextureStride:R,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:Z,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===g,flipSided:o.side===m,useDepthPacking:!!o.depthPacking,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.map&&s.enable(4),t.matcap&&s.enable(5),t.envMap&&s.enable(6),t.lightMap&&s.enable(7),t.aoMap&&s.enable(8),t.emissiveMap&&s.enable(9),t.bumpMap&&s.enable(10),t.normalMap&&s.enable(11),t.objectSpaceNormalMap&&s.enable(12),t.tangentSpaceNormalMap&&s.enable(13),t.clearcoat&&s.enable(14),t.clearcoatMap&&s.enable(15),t.clearcoatRoughnessMap&&s.enable(16),t.clearcoatNormalMap&&s.enable(17),t.iridescence&&s.enable(18),t.iridescenceMap&&s.enable(19),t.iridescenceThicknessMap&&s.enable(20),t.displacementMap&&s.enable(21),t.specularMap&&s.enable(22),t.roughnessMap&&s.enable(23),t.metalnessMap&&s.enable(24),t.gradientMap&&s.enable(25),t.alphaMap&&s.enable(26),t.alphaTest&&s.enable(27),t.vertexColors&&s.enable(28),t.vertexAlphas&&s.enable(29),t.vertexUvs&&s.enable(30),t.vertexTangents&&s.enable(31),t.uvsVertexOnly&&s.enable(32),e.push(s.mask),s.disableAll(),t.fog&&s.enable(0),t.useFog&&s.enable(1),t.flatShading&&s.enable(2),t.logarithmicDepthBuffer&&s.enable(3),t.skinning&&s.enable(4),t.morphTargets&&s.enable(5),t.morphNormals&&s.enable(6),t.morphColors&&s.enable(7),t.premultipliedAlpha&&s.enable(8),t.shadowMapEnabled&&s.enable(9),t.physicallyCorrectLights&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.useDepthPacking&&s.enable(13),t.dithering&&s.enable(14),t.specularIntensityMap&&s.enable(15),t.specularColorMap&&s.enable(16),t.transmission&&s.enable(17),t.transmissionMap&&s.enable(18),t.thicknessMap&&s.enable(19),t.sheen&&s.enable(20),t.sheenColorMap&&s.enable(21),t.sheenRoughnessMap&&s.enable(22),t.decodeVideoTexture&&s.enable(23),t.opaque&&s.enable(24),e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Do[t];n=fo.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new As(e,n,t,o),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Ls(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function js(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function zs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ns(){const e=[];let t=0;const n=[],r=[],i=[];function o(n,r,i,o,a,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?r.push(u):!0===a.transparent?i.push(u):n.push(u)},unshift:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?r.unshift(u):!0===a.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||js),r.length>1&&r.sort(t||zs),i.length>1&&i.sort(t||zs)}}}function Bs(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new Ns,e.set(t,[i])):n>=r.length?(i=new Ns,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function Fs(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new dr,color:new Yn};break;case"SpotLight":n={position:new dr,direction:new dr,color:new Yn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new dr,color:new Yn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new dr,skyColor:new Yn,groundColor:new Yn};break;case"RectAreaLight":n={color:new Yn,position:new dr,halfWidth:new dr,halfHeight:new dr}}return e[t.id]=n,n}}}let Us=0;function Vs(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Hs(e,t){const n=new Fs,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)i.probe.push(new dr);const o=new dr,a=new Ur,s=new Ur;return{setup:function(o,a){let s=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,d=0,h=0,p=0,f=0,m=0,g=0,v=0,y=0,b=0;o.sort(Vs);const x=!0!==a?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],a=t.color,_=t.intensity,w=t.distance,S=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=a.r*_*x,l+=a.g*_*x,c+=a.b*_*x;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],_);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=S,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(_*x),e.distance=w,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[h]=e;const o=t.shadow;if(t.map&&(i.spotLightMap[y]=t.map,y++,o.updateMatrices(t),t.castShadow&&b++),i.spotLightMatrix[h]=o.matrix,t.castShadow){const e=r.get(t);e.shadowBias=o.bias,e.shadowNormalBias=o.normalBias,e.shadowRadius=o.radius,e.shadowMapSize=o.mapSize,i.spotShadow[h]=e,i.spotShadowMap[h]=S,v++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(_),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=S,i.pointShadowMatrix[d]=t.shadow.matrix,g++}i.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(_*x),e.groundColor.copy(t.groundColor).multiplyScalar(_*x),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Oo.LTC_FLOAT_1,i.rectAreaLTC2=Oo.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Oo.LTC_HALF_1,i.rectAreaLTC2=Oo.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=c;const _=i.hash;_.directionalLength===u&&_.pointLength===d&&_.spotLength===h&&_.rectAreaLength===p&&_.hemiLength===f&&_.numDirectionalShadows===m&&_.numPointShadows===g&&_.numSpotShadows===v&&_.numSpotMaps===y||(i.directional.length=u,i.spot.length=h,i.rectArea.length=p,i.point.length=d,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+y-b,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=b,_.directionalLength=u,_.pointLength=d,_.spotLength=h,_.rectAreaLength=p,_.hemiLength=f,_.numDirectionalShadows=m,_.numPointShadows=g,_.numSpotShadows=v,_.numSpotMaps=y,i.version=Us++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){const h=e[t];if(h.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),o.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),n++}else if(h.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(h.matrixWorld),o.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),l++}else if(h.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),s.identity(),a.copy(h.matrixWorld),a.premultiply(d),s.extractRotation(a),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(h.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),r++}else if(h.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(d),u++}}},state:i}}function Ws(e,t){const n=new Hs(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Gs(e,t){let n=new WeakMap;return{get:function(r,i=0){const o=n.get(r);let a;return void 0===o?(a=new Ws(e,t),n.set(r,[a])):i>=o.length?(a=new Ws(e,t),o.push(a)):a=o[i],a},dispose:function(){n=new WeakMap}}}class $s extends ki{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=jt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class qs extends ki{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new dr,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Ks="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Xs="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Ys(e,t,n){let r=new To;const i=new On,o=new On,a=new rr,s=new $s({depthPacking:zt}),l=new qs,c={},u=n.maxTextureSize,h={[f]:m,[m]:f,[g]:g},v=new mo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new On},radius:{value:4}},vertexShader:Ks,fragmentShader:Xs}),b=v.clone();b.defines.HORIZONTAL_PASS=1;const x=new qi;x.setAttribute("position",new Ci(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new so(x,v),w=this;function S(n,r){const o=t.update(_);v.defines.VSM_SAMPLES!==n.blurSamples&&(v.defines.VSM_SAMPLES=n.blurSamples,b.defines.VSM_SAMPLES=n.blurSamples,v.needsUpdate=!0,b.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new ir(i.x,i.y)),v.uniforms.shadow_pass.value=n.map.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,o,v,_,null),b.uniforms.shadow_pass.value=n.mapPass.texture,b.uniforms.resolution.value=n.mapSize,b.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,o,b,_,null)}function E(t,n,r,i,o,a){let u=null;const d=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==d)u=d;else if(u=!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=u.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=u.clone(),r[t]=i),u=i}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=a===p?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.map=n.map,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=o),u}function k(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===p)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=E(n,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,c)}}}else if(i.visible){const t=E(n,i,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)k(l[e],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=d,this.render=function(t,n,s){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(y),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let l=0,c=t.length;l<c;l++){const c=t[l],d=c.shadow;if(void 0===d){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===d.autoUpdate&&!1===d.needsUpdate)continue;i.copy(d.mapSize);const f=d.getFrameExtents();if(i.multiply(f),o.copy(d.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/f.x),i.x=o.x*f.x,d.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/f.y),i.y=o.y*f.y,d.mapSize.y=o.y)),null===d.map){const e=this.type!==p?{minFilter:he,magFilter:he}:{};d.map=new ir(i.x,i.y,e),d.map.texture.name=c.name+".shadowMap",d.camera.updateProjectionMatrix()}e.setRenderTarget(d.map),e.clear();const m=d.getViewportCount();for(let e=0;e<m;e++){const t=d.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),h.viewport(a),d.updateMatrices(c,e),r=d.getFrustum(),k(n,s,d.camera,c,this.type)}!0!==d.isPointLightShadow&&this.type===p&&S(d,s),d.needsUpdate=!1}w.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function Zs(e,t,n){const r=n.isWebGL2,i=new function(){let t=!1;const n=new rr;let r=null;const i=new rr(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?_e(2929):we(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case F:e.depthFunc(512);break;case U:e.depthFunc(519);break;case V:e.depthFunc(513);break;case H:e.depthFunc(515);break;case W:e.depthFunc(514);break;case G:e.depthFunc(518);break;case $:e.depthFunc(516);break;case q:e.depthFunc(517);break;default:e.depthFunc(515)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},c=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?_e(2960):we(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}},u=new WeakMap,d=new WeakMap;let h={},p={},f=new WeakMap,v=[],K=null,X=!1,Y=null,Z=null,J=null,Q=null,ee=null,te=null,ne=null,re=!1,ie=null,oe=null,ae=null,se=null,le=null;const ce=e.getParameter(35661);let ue=!1,de=0;const he=e.getParameter(7938);-1!==he.indexOf("WebGL")?(de=parseFloat(/^WebGL (\d)/.exec(he)[1]),ue=de>=1):-1!==he.indexOf("OpenGL ES")&&(de=parseFloat(/^OpenGL ES (\d)/.exec(he)[1]),ue=de>=2);let pe=null,fe={};const me=e.getParameter(3088),ge=e.getParameter(2978),ve=(new rr).fromArray(me),ye=(new rr).fromArray(ge);function be(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return o}const xe={};function _e(t){!0!==h[t]&&(e.enable(t),h[t]=!0)}function we(t){!1!==h[t]&&(e.disable(t),h[t]=!1)}xe[3553]=be(3553,3553,1),xe[34067]=be(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),c.setClear(0),_e(2929),o.setFunc(H),Me(!1),Pe(s),_e(2884),ke(y);const Se={[E]:32774,[k]:32778,[M]:32779};if(r)Se[P]=32775,Se[T]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(Se[P]=e.MIN_EXT,Se[T]=e.MAX_EXT)}const Ee={[C]:0,[A]:1,[I]:768,[O]:770,[B]:776,[z]:774,[L]:772,[R]:769,[D]:771,[N]:775,[j]:773};function ke(t,n,r,i,o,a,s,l){if(t!==y){if(!1===X&&(_e(3042),X=!0),t===S)o=o||n,a=a||r,s=s||i,n===Z&&o===ee||(e.blendEquationSeparate(Se[n],Se[o]),Z=n,ee=o),r===J&&i===Q&&a===te&&s===ne||(e.blendFuncSeparate(Ee[r],Ee[i],Ee[a],Ee[s]),J=r,Q=i,te=a,ne=s),Y=t,re=!1;else if(t!==Y||l!==re){if(Z===E&&ee===E||(e.blendEquation(32774),Z=E,ee=E),l)switch(t){case b:e.blendFuncSeparate(1,771,1,771);break;case x:e.blendFunc(1,1);break;case _:e.blendFuncSeparate(0,769,0,1);break;case w:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case b:e.blendFuncSeparate(770,771,1,771);break;case x:e.blendFunc(770,1);break;case _:e.blendFuncSeparate(0,769,0,1);break;case w:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}J=null,Q=null,te=null,ne=null,Y=t,re=l}}else!0===X&&(we(3042),X=!1)}function Me(t){ie!==t&&(t?e.frontFace(2304):e.frontFace(2305),ie=t)}function Pe(t){t!==a?(_e(2884),t!==oe&&(t===s?e.cullFace(1029):t===l?e.cullFace(1028):e.cullFace(1032))):we(2884),oe=t}function Te(t,n,r){t?(_e(32823),se===n&&le===r||(e.polygonOffset(n,r),se=n,le=r)):we(32823)}return{buffers:{color:i,depth:o,stencil:c},enable:_e,disable:we,bindFramebuffer:function(t,n){return p[t]!==n&&(e.bindFramebuffer(t,n),p[t]=n,r&&(36009===t&&(p[36160]=n),36160===t&&(p[36009]=n)),!0)},drawBuffers:function(r,i){let o=v,a=!1;if(r)if(o=f.get(i),void 0===o&&(o=[],f.set(i,o)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(o.length!==e.length||36064!==o[0]){for(let t=0,n=e.length;t<n;t++)o[t]=36064+t;o.length=e.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(n.isWebGL2?e.drawBuffers(o):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(t){return K!==t&&(e.useProgram(t),K=t,!0)},setBlending:ke,setMaterial:function(e,t){e.side===g?we(2884):_e(2884);let n=e.side===m;t&&(n=!n),Me(n),e.blending===b&&!1===e.transparent?ke(y):ke(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;c.setTest(r),r&&(c.setMask(e.stencilWriteMask),c.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),c.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Te(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?_e(32926):we(32926)},setFlipSided:Me,setCullFace:Pe,setLineWidth:function(t){t!==ae&&(ue&&e.lineWidth(t),ae=t)},setPolygonOffset:Te,setScissorTest:function(e){e?_e(3089):we(3089)},activeTexture:function(t){void 0===t&&(t=33984+ce-1),pe!==t&&(e.activeTexture(t),pe=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===pe?33984+ce-1:pe);let i=fe[r];void 0===i&&(i={type:void 0,texture:void 0},fe[r]=i),i.type===t&&i.texture===n||(pe!==r&&(e.activeTexture(r),pe=r),e.bindTexture(t,n||xe[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=fe[pe];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=d.get(n);void 0===r&&(r=new WeakMap,d.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=d.get(n).get(t);u.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),u.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===ve.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ve.copy(t))},viewport:function(t){!1===ye.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ye.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),h={},pe=null,fe={},p={},f=new WeakMap,v=[],K=null,X=!1,Y=null,Z=null,J=null,Q=null,ee=null,te=null,ne=null,re=!1,ie=null,oe=null,ae=null,se=null,le=null,ve.set(0,0,e.canvas.width,e.canvas.height),ye.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),c.reset()}}}function Js(e,t,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function y(e,t){return v?new OffscreenCanvas(e,t):Bn("canvas")}function b(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Cn:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===m&&(m=y(o,a));const s=n?y(o,a):m;return s.width=o,s.height=a,s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return Pn(e.width)&&Pn(e.height)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==he&&e.minFilter!==ve}function w(t){e.generateMipmap(t)}function S(n,r,i,o,a=!1){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=o===Lt&&!1===a?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||t.get("EXT_color_buffer_float"),l}function E(e,t,n){return!0===_(e,n)||e.isFramebufferTexture&&e.minFilter!==he&&e.minFilter!==ve?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function k(e){return e===he||e===pe||e===me?9728:9729}function M(e){const t=e.target;t.removeEventListener("dispose",M),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=g.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&T(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function P(t){const n=t.target;n.removeEventListener("dispose",P),function(t){const n=t.texture,i=r.get(t),o=r.get(n);if(void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),a.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}function T(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete g.get(i)[n.__cacheKey],a.memory.textures--}let C=0;function A(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){const n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void L(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,i.__webglTexture,33984+t)}const I={[ce]:10497,[ue]:33071,[de]:33648},R={[he]:9728,[pe]:9984,[me]:9986,[ve]:9729,[ye]:9985,[xe]:9987};function O(n,o,a){if(a?(e.texParameteri(n,10242,I[o.wrapS]),e.texParameteri(n,10243,I[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,I[o.wrapR]),e.texParameteri(n,10240,R[o.magFilter]),e.texParameteri(n,10241,R[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===ue&&o.wrapT===ue||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,k(o.magFilter)),e.texParameteri(n,10241,k(o.minFilter)),o.minFilter!==he&&o.minFilter!==ve&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(o.magFilter===he)return;if(o.minFilter!==me&&o.minFilter!==xe)return;if(o.type===Te&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&o.type===Ce&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function D(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",M));const i=n.source;let o=g.get(i);void 0===o&&(o={},g.set(i,o));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===o[s]&&(o[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&T(n)),t.__cacheKey=s,t.__webglTexture=o[s].texture}return r}function L(t,i,a){let l=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=35866),i.isData3DTexture&&(l=32879);const c=D(t,i),d=i.source;n.bindTexture(l,t.__webglTexture,33984+a);const h=r.get(d);if(d.version!==h.__version||!0===c){n.activeTexture(33984+a),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const t=function(e){return!s&&(e.wrapS!==ue||e.wrapT!==ue||e.minFilter!==he&&e.minFilter!==ve)}(i)&&!1===x(i.image);let r=b(i.image,t,!1,u);r=U(i,r);const p=x(r)||s,f=o.convert(i.format,i.encoding);let m,g=o.convert(i.type),v=S(i.internalFormat,f,g,i.encoding,i.isVideoTexture);O(l,i,p);const y=i.mipmaps,k=s&&!0!==i.isVideoTexture,M=void 0===h.__version||!0===c,P=E(i,r,p);if(i.isDepthTexture)v=6402,s?v=i.type===Te?36012:i.type===Pe?33190:i.type===Re?35056:33189:i.type===Te&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===ze&&6402===v&&i.type!==ke&&i.type!==Pe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Pe,g=o.convert(i.type)),i.format===Ne&&6402===v&&(v=34041,i.type!==Re&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Re,g=o.convert(i.type))),M&&(k?n.texStorage2D(3553,1,v,r.width,r.height):n.texImage2D(3553,0,v,r.width,r.height,0,f,g,null));else if(i.isDataTexture)if(y.length>0&&p){k&&M&&n.texStorage2D(3553,P,v,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)m=y[e],k?n.texSubImage2D(3553,e,0,0,m.width,m.height,f,g,m.data):n.texImage2D(3553,e,v,m.width,m.height,0,f,g,m.data);i.generateMipmaps=!1}else k?(M&&n.texStorage2D(3553,P,v,r.width,r.height),n.texSubImage2D(3553,0,0,0,r.width,r.height,f,g,r.data)):n.texImage2D(3553,0,v,r.width,r.height,0,f,g,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){k&&M&&n.texStorage3D(35866,P,v,y[0].width,y[0].height,r.depth);for(let e=0,t=y.length;e<t;e++)m=y[e],i.format!==De?null!==f?k?n.compressedTexSubImage3D(35866,e,0,0,0,m.width,m.height,r.depth,f,m.data,0,0):n.compressedTexImage3D(35866,e,v,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):k?n.texSubImage3D(35866,e,0,0,0,m.width,m.height,r.depth,f,g,m.data):n.texImage3D(35866,e,v,m.width,m.height,r.depth,0,f,g,m.data)}else{k&&M&&n.texStorage2D(3553,P,v,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)m=y[e],i.format!==De?null!==f?k?n.compressedTexSubImage2D(3553,e,0,0,m.width,m.height,f,m.data):n.compressedTexImage2D(3553,e,v,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):k?n.texSubImage2D(3553,e,0,0,m.width,m.height,f,g,m.data):n.texImage2D(3553,e,v,m.width,m.height,0,f,g,m.data)}else if(i.isDataArrayTexture)k?(M&&n.texStorage3D(35866,P,v,r.width,r.height,r.depth),n.texSubImage3D(35866,0,0,0,0,r.width,r.height,r.depth,f,g,r.data)):n.texImage3D(35866,0,v,r.width,r.height,r.depth,0,f,g,r.data);else if(i.isData3DTexture)k?(M&&n.texStorage3D(32879,P,v,r.width,r.height,r.depth),n.texSubImage3D(32879,0,0,0,0,r.width,r.height,r.depth,f,g,r.data)):n.texImage3D(32879,0,v,r.width,r.height,r.depth,0,f,g,r.data);else if(i.isFramebufferTexture){if(M)if(k)n.texStorage2D(3553,P,v,r.width,r.height);else{let e=r.width,t=r.height;for(let r=0;r<P;r++)n.texImage2D(3553,r,v,e,t,0,f,g,null),e>>=1,t>>=1}}else if(y.length>0&&p){k&&M&&n.texStorage2D(3553,P,v,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)m=y[e],k?n.texSubImage2D(3553,e,0,0,f,g,m):n.texImage2D(3553,e,v,f,g,m);i.generateMipmaps=!1}else k?(M&&n.texStorage2D(3553,P,v,r.width,r.height),n.texSubImage2D(3553,0,0,0,f,g,r)):n.texImage2D(3553,0,v,f,g,r);_(i,p)&&w(l),h.__version=d.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function j(t,i,a,s,l){const c=o.convert(a.format,a.encoding),u=o.convert(a.type),d=S(a.internalFormat,c,u,a.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,d,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,d,i.width,i.height,0,c,u,null)),n.bindFramebuffer(36160,t),F(i)?h.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(a).__webglTexture,0,B(i)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,s,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function z(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||F(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Te?i=36012:t.type===Pe&&(i=33190));const r=B(n);F(n)?h.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=B(n);r&&!1===F(n)?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):F(n)?h.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const a=t[i],s=o.convert(a.format,a.encoding),l=o.convert(a.type),c=S(a.internalFormat,s,l,a.encoding),u=B(n);r&&!1===F(n)?e.renderbufferStorageMultisample(36161,u,c,n.width,n.height):F(n)?h.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):e.renderbufferStorage(36161,c,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function N(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),A(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,a=B(i);if(i.depthTexture.format===ze)F(i)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==Ne)throw new Error("Unknown depthTexture format");F(i)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),z(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),z(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function B(e){return Math.min(d,e.samples)}function F(e){const n=r.get(e);return s&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function U(e,n){const r=e.encoding,i=e.format,o=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===vn||r!==Dt&&(r===Lt?!1===s?!0===t.has("EXT_sRGB")&&i===De?(e.format=vn,e.minFilter=ve,e.generateMipmaps=!1):n=Jn.sRGBToLinear(n):i===De&&o===we||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const e=C;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),C+=1,e},this.resetTextureUnits=function(){C=0},this.setTexture2D=A,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):n.bindTexture(35866,i.__webglTexture,33984+t)},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):n.bindTexture(32879,i.__webglTexture,33984+t)},this.setTextureCube=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,i,a){if(6!==i.image.length)return;const l=D(t,i),u=i.source;n.bindTexture(34067,t.__webglTexture,33984+a);const d=r.get(u);if(u.version!==d.__version||!0===l){n.activeTexture(33984+a),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const t=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,h=[];for(let e=0;e<6;e++)h[e]=t||r?r?i.image[e].image:i.image[e]:b(i.image[e],!1,!0,c),h[e]=U(i,h[e]);const p=h[0],f=x(p)||s,m=o.convert(i.format,i.encoding),g=o.convert(i.type),v=S(i.internalFormat,m,g,i.encoding),y=s&&!0!==i.isVideoTexture,k=void 0===d.__version||!0===l;let M,P=E(i,p,f);if(O(34067,i,f),t){y&&k&&n.texStorage2D(34067,P,v,p.width,p.height);for(let e=0;e<6;e++){M=h[e].mipmaps;for(let t=0;t<M.length;t++){const r=M[t];i.format!==De?null!==m?y?n.compressedTexSubImage2D(34069+e,t,0,0,r.width,r.height,m,r.data):n.compressedTexImage2D(34069+e,t,v,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?n.texSubImage2D(34069+e,t,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+e,t,v,r.width,r.height,0,m,g,r.data)}}}else{M=i.mipmaps,y&&k&&(M.length>0&&P++,n.texStorage2D(34067,P,v,h[0].width,h[0].height));for(let e=0;e<6;e++)if(r){y?n.texSubImage2D(34069+e,0,0,0,h[e].width,h[e].height,m,g,h[e].data):n.texImage2D(34069+e,0,v,h[e].width,h[e].height,0,m,g,h[e].data);for(let t=0;t<M.length;t++){const r=M[t].image[e].image;y?n.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+e,t+1,v,r.width,r.height,0,m,g,r.data)}}else{y?n.texSubImage2D(34069+e,0,0,0,m,g,h[e]):n.texImage2D(34069+e,0,v,m,g,h[e]);for(let t=0;t<M.length;t++){const r=M[t];y?n.texSubImage2D(34069+e,t+1,0,0,m,g,r.image[e]):n.texImage2D(34069+e,t+1,v,m,g,r.image[e])}}}_(i,f)&&w(34067),d.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(a,t,i):n.bindTexture(34067,a.__webglTexture,33984+i)},this.rebindTextures=function(e,t,n){const i=r.get(e);void 0!==t&&j(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&N(e)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",P),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,a.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=x(t)||s;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),h)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&t.samples>0&&!1===F(t)){const r=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);const a=o.convert(i.format,i.encoding),s=o.convert(i.type),l=S(i.internalFormat,a,s,i.encoding,!0===t.isXRRenderTarget),u=B(t);e.renderbufferStorageMultisample(36161,u,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),z(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(d){n.bindTexture(34067,u.__webglTexture),O(34067,l,p);for(let e=0;e<6;e++)j(c.__webglFramebuffer[e],t,l,36064,34069+e);_(l,p)&&w(34067),n.unbindTexture()}else if(h){const e=t.texture;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),O(3553,o,p),j(c.__webglFramebuffer,t,o,36064+i,3553),_(o,p)&&w(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(s?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,u.__webglTexture),O(e,l,p),j(c.__webglFramebuffer,t,l,36064,e),_(l,p)&&w(e),n.unbindTexture()}t.depthBuffer&&N(t)},this.updateRenderTargetMipmap=function(e){const t=x(e)||s,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(_(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),w(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(s&&t.samples>0&&!1===F(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=t.width,a=t.height;let s=16384;const l=[],c=t.stencilBuffer?33306:36096,u=r.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<i.length;t++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),t.depthBuffer&&l.push(c);const h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),d){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728),p&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(let t=0;t<i.length;t++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,u.__webglColorRenderbuffer[t]);const o=r.get(i[t]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,o,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=N,this.setupFrameBufferTexture=j,this.useMultisampledRTT=F}function Qs(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=null){let o;if(n===we)return 5121;if(n===Ae)return 32819;if(n===Ie)return 32820;if(n===Se)return 5120;if(n===Ee)return 5122;if(n===ke)return 5123;if(n===Me)return 5124;if(n===Pe)return 5125;if(n===Te)return 5126;if(n===Ce)return r?5131:(o=t.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(n===Oe)return 6406;if(n===De)return 6408;if(n===Le)return 6409;if(n===je)return 6410;if(n===ze)return 6402;if(n===Ne)return 34041;if(n===vn)return o=t.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(n===Be)return 6403;if(n===Fe)return 36244;if(n===Ue)return 33319;if(n===Ve)return 33320;if(n===He)return 36249;if(n===We||n===Ge||n===$e||n===qe)if(i===Lt){if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===We)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ge)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===$e)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===qe)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=t.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===We)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ge)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===$e)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===qe)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Ke||n===Xe||n===Ye||n===Ze){if(o=t.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===Ke)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Xe)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ye)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ze)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Je)return o=t.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Qe||n===et){if(o=t.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===Qe)return i===Lt?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===et)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===tt||n===nt||n===rt||n===it||n===ot||n===at||n===st||n===lt||n===ct||n===ut||n===dt||n===ht||n===pt||n===ft){if(o=t.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===tt)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===nt)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===rt)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===it)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===ot)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===at)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===st)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===lt)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===ct)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ut)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===dt)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===ht)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===pt)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ft)return i===Lt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===mt){if(o=t.get("EXT_texture_compression_bptc"),null===o)return null;if(n===mt)return i===Lt?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===gt||n===vt||n===yt||n===bt){if(o=t.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===mt)return o.COMPRESSED_RED_RGTC1_EXT;if(n===vt)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===yt)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===bt)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Re?r?34042:(o=t.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class el extends vo{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class tl extends hi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const nl={type:"move"};class rl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new tl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new tl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new dr,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new dr),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new tl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new dr,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new dr),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n),i=this._getHandJoint(l,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(nl)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new tl;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class il extends nr{constructor(e,t,n,r,i,o,a,s,l,c){if((c=void 0!==c?c:ze)!==ze&&c!==Ne)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===ze&&(n=Pe),void 0===n&&c===Ne&&(n=Re),super(null,r,i,o,a,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:he,this.minFilter=void 0!==s?s:he,this.flipY=!1,this.generateMipmaps=!1}}class ol extends yn{constructor(e,t){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=1,l=null,c=null,u=null,d=null,h=null,p=null;const f=t.getContextAttributes();let m=null,g=null;const v=[],y=[],b=new Set,x=new Map,_=new vo;_.layers.enable(1),_.viewport=new rr;const w=new vo;w.layers.enable(2),w.viewport=new rr;const S=[_,w],E=new el;E.layers.enable(1),E.layers.enable(2);let k=null,M=null;function P(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=v[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function T(){r.removeEventListener("select",P),r.removeEventListener("selectstart",P),r.removeEventListener("selectend",P),r.removeEventListener("squeeze",P),r.removeEventListener("squeezestart",P),r.removeEventListener("squeezeend",P),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",C);for(let e=0;e<v.length;e++){const t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}k=null,M=null,e.setRenderTarget(m),h=null,d=null,u=null,r=null,g=null,D.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function C(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=y.indexOf(n);r>=0&&(y[r]=null,v[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=y.indexOf(n);if(-1===r){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(n),r=e;break}if(null===y[e]){y[e]=n,r=e;break}}if(-1===r)break}const i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new rl,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new rl,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new rl,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",P),r.addEventListener("selectstart",P),r.addEventListener("selectend",P),r.addEventListener("squeeze",P),r.addEventListener("squeezestart",P),r.addEventListener("squeezeend",P),r.addEventListener("end",T),r.addEventListener("inputsourceschange",C),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),g=new ir(h.framebufferWidth,h.framebufferHeight,{format:De,type:we,encoding:e.outputEncoding,stencilBuffer:f.stencil})}else{let n=null,o=null,a=null;f.depth&&(a=f.stencil?35056:33190,n=f.stencil?Ne:ze,o=f.stencil?Re:Pe);const s={colorFormat:32856,depthFormat:a,scaleFactor:i};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(s),r.updateRenderState({layers:[d]}),g=new ir(d.textureWidth,d.textureHeight,{format:De,type:we,depthTexture:new il(d.textureWidth,d.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(s),l=null,o=await r.requestReferenceSpace(a),D.setContext(r),D.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const A=new dr,I=new dr;function R(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;E.near=w.near=_.near=e.near,E.far=w.far=_.far=e.far,k===E.near&&M===E.far||(r.updateRenderState({depthNear:E.near,depthFar:E.far}),k=E.near,M=E.far);const t=e.parent,n=E.cameras;R(E,t);for(let e=0;e<n.length;e++)R(n[e],t);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),e.matrix.copy(E.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){A.setFromMatrixPosition(t.matrixWorld),I.setFromMatrixPosition(n.matrixWorld);const r=A.distanceTo(I),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(o[8]+1)/o[0],h=a*u,p=a*d,f=r/(-u+d),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+f,v=s+f,y=h-m,b=p+(r-m),x=l*s/v*g,_=c*s/v*g;e.projectionMatrix.makePerspective(y,b,x,_,g,v)}(E,_,w):E.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==d||null!==h)return s},this.setFoveation=function(e){s=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.getPlanes=function(){return b};let O=null;const D=new Co;D.setAnimationLoop((function(t,r){if(c=r.getViewerPose(l||o),p=r,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==h)o=h.getViewport(i);else{const t=u.getViewSubImage(d,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let a=S[r];void 0===a&&(a=new vo,a.layers.enable(r),a.viewport=new rr,S[r]=a),a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&E.matrix.copy(a.matrix),!0===n&&E.cameras.push(a)}}for(let e=0;e<v.length;e++){const t=y[e],n=v[e];null!==t&&void 0!==n&&n.update(t,r,l||o)}if(O&&O(t,r),r.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:r.detectedPlanes});let e=null;for(const t of b)r.detectedPlanes.has(t)||(null===e&&(e=[]),e.push(t));if(null!==e)for(const t of e)b.delete(t),x.delete(t),n.dispatchEvent({type:"planeremoved",data:t});for(const e of r.detectedPlanes)if(b.has(e)){const t=x.get(e);e.lastChangedTime>t&&(x.set(e,e.lastChangedTime),n.dispatchEvent({type:"planechanged",data:e}))}else b.add(e),x.set(e,r.lastChangedTime),n.dispatchEvent({type:"planeadded",data:e})}p=null})),this.setAnimationLoop=function(e){O=e},this.dispose=function(){}}}function al(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===m&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===m&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=t.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}let o,a;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?o=r.map:r.specularMap?o=r.specularMap:r.displacementMap?o=r.displacementMap:r.normalMap?o=r.normalMap:r.bumpMap?o=r.bumpMap:r.roughnessMap?o=r.roughnessMap:r.metalnessMap?o=r.metalnessMap:r.alphaMap?o=r.alphaMap:r.emissiveMap?o=r.emissiveMap:r.clearcoatMap?o=r.clearcoatMap:r.clearcoatNormalMap?o=r.clearcoatNormalMap:r.clearcoatRoughnessMap?o=r.clearcoatRoughnessMap:r.iridescenceMap?o=r.iridescenceMap:r.iridescenceThicknessMap?o=r.iridescenceThicknessMap:r.specularIntensityMap?o=r.specularIntensityMap:r.specularColorMap?o=r.specularColorMap:r.transmissionMap?o=r.transmissionMap:r.thicknessMap?o=r.thicknessMap:r.sheenColorMap?o=r.sheenColorMap:r.sheenRoughnessMap&&(o=r.sheenRoughnessMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uvTransform.value.copy(o.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,po(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,i,o,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===m&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,a)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function sl(e,t,n,r){let i={},o={},a=[];const s=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){const r=e.value;if(void 0===n[t]){if("number"==typeof r)n[t]=r;else{const e=Array.isArray(r)?r:[r],i=[];for(let t=0;t<e.length;t++)i.push(e[t].clone());n[t]=i}return!0}if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=Array.isArray(n[t])?n[t]:[n[t]],i=Array.isArray(r)?r:[r];for(let t=0;t<e.length;t++){const n=e[t];if(!1===n.equals(i[t]))return n.copy(i[t]),!0}}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,d){let h=i[n.id];void 0===h&&(function(e){const t=e.uniforms;let n=0;let r=0;for(let e=0,i=t.length;e<i;e++){const i=t[e],o={boundary:0,storage:0},a=Array.isArray(i.value)?i.value:[i.value];for(let e=0,t=a.length;e<t;e++){const t=c(a[e]);o.boundary+=t.boundary,o.storage+=t.storage}i.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,e>0&&(r=n%16,0!==r&&16-r-o.boundary<0&&(n+=16-r,i.__offset=n)),n+=o.storage}r=n%16,r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,o=t.usage;return e.bindBuffer(35345,r),e.bufferData(35345,i,o),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",u));const p=d.program;r.updateUBOMapping(n,p);const f=t.render.frame;o[n.id]!==f&&(function(t){const n=i[t.id],r=t.uniforms,o=t.__cache;e.bindBuffer(35345,n);for(let t=0,n=r.length;t<n;t++){const n=r[t];if(!0===l(n,t,o)){const t=n.__offset,r=Array.isArray(n.value)?n.value:[n.value];let i=0;for(let o=0;o<r.length;o++){const a=r[o],s=c(a);"number"==typeof a?(n.__data[0]=a,e.bufferSubData(35345,t+i,n.__data)):a.isMatrix3?(n.__data[0]=a.elements[0],n.__data[1]=a.elements[1],n.__data[2]=a.elements[2],n.__data[3]=a.elements[0],n.__data[4]=a.elements[3],n.__data[5]=a.elements[4],n.__data[6]=a.elements[5],n.__data[7]=a.elements[0],n.__data[8]=a.elements[6],n.__data[9]=a.elements[7],n.__data[10]=a.elements[8],n.__data[11]=a.elements[0]):(a.toArray(n.__data,i),i+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,t,n.__data)}}e.bindBuffer(35345,null)}(n),o[n.id]=f)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);a=[],i={},o={}}}}function ll(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=Bn("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let d;d=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let h=null,p=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Dt,this.physicallyCorrectLights=!1,this.toneMapping=Z,this.toneMappingExposure=1;const b=this;let x=!1,_=0,w=0,S=null,E=-1,k=null;const M=new rr,P=new rr;let T=null,C=t.width,A=t.height,I=1,R=null,O=null;const D=new rr(0,0,C,A),L=new rr(0,0,C,A);let j=!1;const z=new To;let N=!1,B=!1,F=null;const U=new Ur,V=new On,H=new dr,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===S?I:1}let $,q,K,X,Y,J,Q,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,de,he,pe,fe,me,ge,ve=n;function ye(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${r}`),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",Ee,!1),t.addEventListener("webglcontextcreationerror",ke,!1),null===ve){const t=["webgl2","webgl","experimental-webgl"];if(!0===b.isWebGL1Renderer&&t.shift(),ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function be(){$=new ra(ve),q=new Bo(ve,$,e),$.init(q),fe=new Qs(ve,$,q),K=new Zs(ve,$,q),X=new aa,Y=new Ls,J=new Js(ve,$,K,Y,q,fe,X),Q=new Uo(b),ee=new na(b),te=new Ao(ve,q),me=new zo(ve,$,te,q),ne=new ia(ve,te,X,me),re=new ua(ve,ne,te,X),de=new ca(ve,q,J),le=new Fo(Y),ie=new Ds(b,Q,ee,$,q,me,le),oe=new al(b,Y),ae=new Bs,se=new Gs($,q),ue=new jo(b,Q,ee,K,re,d,s),ce=new Ys(b,re,q),ge=new sl(ve,X,q,K),he=new No(ve,$,X,q),pe=new oa(ve,$,X,q),X.programs=ie.programs,b.capabilities=q,b.extensions=$,b.properties=Y,b.renderLists=ae,b.shadowMap=ce,b.state=K,b.info=X}be();const _e=new ol(b,ve);function Se(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Ee(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const e=X.autoReset,t=ce.enabled,n=ce.autoUpdate,r=ce.needsUpdate,i=ce.type;be(),X.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=r,ce.type=i}function ke(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Me(e){const t=e.target;t.removeEventListener("dispose",Me),function(e){(function(e){const t=Y.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))})(e),Y.remove(e)}(t)}this.xr=_e,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=$.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=$.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(e){void 0!==e&&(I=e,this.setSize(C,A,!1))},this.getSize=function(e){return e.set(C,A)},this.setSize=function(e,n,r){_e.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(C=e,A=n,t.width=Math.floor(e*I),t.height=Math.floor(n*I),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(C*I,A*I).floor()},this.setDrawingBufferSize=function(e,n,r){C=e,A=n,I=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(M)},this.getViewport=function(e){return e.copy(D)},this.setViewport=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),K.viewport(M.copy(D).multiplyScalar(I).floor())},this.getScissor=function(e){return e.copy(L)},this.setScissor=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),K.scissor(P.copy(L).multiplyScalar(I).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(e){K.setScissorTest(j=e)},this.setOpaqueSort=function(e){R=e},this.setTransparentSort=function(e){O=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),ve.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",Ee,!1),t.removeEventListener("webglcontextcreationerror",ke,!1),ae.dispose(),se.dispose(),Y.dispose(),Q.dispose(),ee.dispose(),re.dispose(),me.dispose(),ge.dispose(),ie.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",Ae),_e.removeEventListener("sessionend",Ie),F&&(F.dispose(),F=null),Re.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=W);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=W),J.resetTextureUnits();const o=t.fog,a=r.isMeshStandardMaterial?t.environment:null,s=null===S?b.outputEncoding:!0===S.isXRRenderTarget?S.texture.encoding:Dt,l=(r.isMeshStandardMaterial?ee:Q).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,m=r.toneMapped?b.toneMapping:Z,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,y=Y.get(r),x=p.state.lights;if(!0===N&&(!0===B||e!==k)){const t=e===k&&r.id===E;le.setState(r,e,t)}let _=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==x.state.version||y.outputEncoding!==s||i.isInstancedMesh&&!1===y.instancing?_=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?_=!0:i.isSkinnedMesh||!0!==y.skinning?y.envMap!==l||!0===r.fog&&y.fog!==o?_=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===le.numPlanes&&y.numIntersection===le.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==u||y.morphTargets!==d||y.morphNormals!==h||y.morphColors!==f||y.toneMapping!==m||!0===q.isWebGL2&&y.morphTargetsCount!==v)&&(_=!0):_=!0:_=!0:_=!0:(_=!0,y.__version=r.version);let w=y.currentProgram;!0===_&&(w=Ne(r,t,i));let M=!1,P=!1,T=!1;const C=w.getUniforms(),R=y.uniforms;if(K.useProgram(w.program)&&(M=!0,P=!0,T=!0),r.id!==E&&(E=r.id,P=!0),M||k!==e){if(C.setValue(ve,"projectionMatrix",e.projectionMatrix),q.logarithmicDepthBuffer&&C.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),k!==e&&(k=e,P=!0,T=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=C.map.cameraPosition;void 0!==t&&t.setValue(ve,H.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&C.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&C.setValue(ve,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){C.setOptional(ve,i,"bindMatrix"),C.setOptional(ve,i,"bindMatrixInverse");const e=i.skeleton;e&&(q.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),C.setValue(ve,"boneTexture",e.boneTexture,J),C.setValue(ve,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const O=n.morphAttributes;var D,L;if((void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===q.isWebGL2)&&de.update(i,n,r,w),(P||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,C.setValue(ve,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),P&&(C.setValue(ve,"toneMappingExposure",b.toneMappingExposure),y.needsLights&&(L=T,(D=R).ambientLightColor.needsUpdate=L,D.lightProbe.needsUpdate=L,D.directionalLights.needsUpdate=L,D.directionalLightShadows.needsUpdate=L,D.pointLights.needsUpdate=L,D.pointLightShadows.needsUpdate=L,D.spotLights.needsUpdate=L,D.spotLightShadows.needsUpdate=L,D.rectAreaLights.needsUpdate=L,D.hemisphereLights.needsUpdate=L),o&&!0===r.fog&&oe.refreshFogUniforms(R,o),oe.refreshMaterialUniforms(R,r,I,A,F),fs.upload(ve,y.uniformsList,R,J)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(fs.upload(ve,y.uniformsList,R,J),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&C.setValue(ve,"center",i.center),C.setValue(ve,"modelViewMatrix",i.modelViewMatrix),C.setValue(ve,"normalMatrix",i.normalMatrix),C.setValue(ve,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(q.isWebGL2){const n=e[t];ge.update(n,w),ge.bind(n,w)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return w}(e,t,n,r,i);K.setMaterial(r,a);let l=n.index,c=1;!0===r.wireframe&&(l=ne.getWireframeAttribute(n),c=2);const u=n.drawRange,d=n.attributes.position;let h=u.start*c,f=(u.start+u.count)*c;null!==o&&(h=Math.max(h,o.start*c),f=Math.min(f,(o.start+o.count)*c)),null!==l?(h=Math.max(h,0),f=Math.min(f,l.count)):null!=d&&(h=Math.max(h,0),f=Math.min(f,d.count));const m=f-h;if(m<0||m===1/0)return;let g;me.setup(i,r,s,n,l);let v=he;if(null!==l&&(g=te.get(l),v=pe,v.setIndex(g)),i.isMesh)!0===r.wireframe?(K.setLineWidth(r.wireframeLinewidth*G()),v.setMode(1)):v.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),K.setLineWidth(e*G()),i.isLineSegments?v.setMode(1):i.isLineLoop?v.setMode(2):v.setMode(3)}else i.isPoints?v.setMode(0):i.isSprite&&v.setMode(4);if(i.isInstancedMesh)v.renderInstances(h,m,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(h,m,t)}else v.render(h,m)},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===g&&!1===e.forceSinglePass?(e.side=m,e.needsUpdate=!0,Ne(e,t,n),e.side=f,e.needsUpdate=!0,Ne(e,t,n),e.side=g):Ne(e,t,n)}p=se.get(e),p.init(),y.push(p),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(p.pushLight(e),e.castShadow&&p.pushShadow(e))})),p.setupLights(b.physicallyCorrectLights),e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++)n(r[i],e,t);else n(r,e,t)})),y.pop(),p=null};let Pe=null;function Ae(){Re.stop()}function Ie(){Re.start()}const Re=new Co;function Oe(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)p.pushLight(e),e.castShadow&&p.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||z.intersectsSprite(e)){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);const t=re.update(e),i=e.material;i.visible&&h.push(e,t,i,n,H.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==X.render.frame&&(e.skeleton.update(),e.skeleton.frame=X.render.frame),!e.frustumCulled||z.intersectsObject(e))){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);const t=re.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(e,t,s,n,H.z,a)}}else i.visible&&h.push(e,t,i,n,H.z,null)}const i=e.children;for(let e=0,o=i.length;e<o;e++)Oe(i[e],t,n,r)}function Le(e,t,n,r){const i=e.opaque,o=e.transmissive,s=e.transparent;p.setupLightsView(n),!0===N&&le.setGlobalState(b.clippingPlanes,n),o.length>0&&function(e,t,n){const r=q.isWebGL2;null===F&&(F=new ir(1,1,{generateMipmaps:!0,type:$.has("EXT_color_buffer_half_float")?Ce:we,minFilter:xe,samples:r&&!0===a?4:0})),b.getDrawingBufferSize(V),r?F.setSize(V.x,V.y):F.setSize(Cn(V.x),Cn(V.y));const i=b.getRenderTarget();b.setRenderTarget(F),b.clear();const o=b.toneMapping;b.toneMapping=Z,je(e,t,n),b.toneMapping=o,J.updateMultisampleRenderTarget(F),J.updateRenderTargetMipmap(F),b.setRenderTarget(i)}(i,t,n),r&&K.viewport(M.copy(r)),i.length>0&&je(i,t,n),o.length>0&&je(o,t,n),s.length>0&&je(s,t,n),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function je(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,l=null===r?o.material:r,c=o.group;a.layers.test(n.layers)&&ze(a,t,n,s,l,c)}}function ze(e,t,n,r,i,o){e.onBeforeRender(b,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(b,t,n,r,e,o),!0===i.transparent&&i.side===g&&!1===i.forceSinglePass?(i.side=m,i.needsUpdate=!0,b.renderBufferDirect(n,t,r,i,e,o),i.side=f,i.needsUpdate=!0,b.renderBufferDirect(n,t,r,i,e,o),i.side=g):b.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(b,t,n,r,i,o)}function Ne(e,t,n){!0!==t.isScene&&(t=W);const r=Y.get(e),i=p.state.lights,o=p.state.shadowsArray,a=i.state.version,s=ie.getParameters(e,i.state,o,t,n),l=ie.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:Q).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",Me),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return Be(e,s),u}else s.uniforms=ie.getUniforms(e),e.onBuild(n,s,b),e.onBeforeCompile(s,b),u=ie.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const d=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=le.uniform),Be(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotLightMatrix.value=i.state.spotLightMatrix,d.spotLightMap.value=i.state.spotLightMap,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);const h=u.getUniforms(),f=fs.seqWithValue(h.seq,d);return r.currentProgram=u,r.uniformsList=f,u}function Be(e,t){const n=Y.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Re.setAnimationLoop((function(e){Pe&&Pe(e)})),"undefined"!=typeof self&&Re.setContext(self),this.setAnimationLoop=function(e){Pe=e,_e.setAnimationLoop(e),null===e?Re.stop():Re.start()},_e.addEventListener("sessionstart",Ae),_e.addEventListener("sessionend",Ie),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===x)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===_e.enabled&&!0===_e.isPresenting&&(!0===_e.cameraAutoUpdate&&_e.updateCamera(t),t=_e.getCamera()),!0===e.isScene&&e.onBeforeRender(b,e,t,S),p=se.get(e,y.length),p.init(),y.push(p),U.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),z.setFromProjectionMatrix(U),B=this.localClippingEnabled,N=le.init(this.clippingPlanes,B),h=ae.get(e,v.length),h.init(),v.push(h),Oe(e,t,0,b.sortObjects),h.finish(),!0===b.sortObjects&&h.sort(R,O),!0===N&&le.beginShadows();const n=p.state.shadowsArray;if(ce.render(n,e,t),!0===N&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(h,e),p.setupLights(b.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Le(h,e,r,r.viewport)}}else Le(h,e,t);null!==S&&(J.updateMultisampleRenderTarget(S),J.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(b,e,t),me.resetDefaultState(),E=-1,k=null,y.pop(),p=y.length>0?y[y.length-1]:null,v.pop(),h=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,n){Y.get(e.texture).__webglTexture=t,Y.get(e.depthTexture).__webglTexture=n;const r=Y.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===$.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=Y.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){S=e,_=t,w=n;let r=!0,i=null,o=!1,a=!1;if(e){const n=Y.get(e);void 0!==n.__useDefaultFramebuffer?(K.bindFramebuffer(36160,null),r=!1):void 0===n.__webglFramebuffer?J.setupRenderTarget(e):n.__hasExternalTextures&&J.rebindTextures(e,Y.get(e.texture).__webglTexture,Y.get(e.depthTexture).__webglTexture);const s=e.texture;(s.isData3DTexture||s.isDataArrayTexture||s.isCompressedArrayTexture)&&(a=!0);const l=Y.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=l[t],o=!0):i=q.isWebGL2&&e.samples>0&&!1===J.useMultisampledRTT(e)?Y.get(e).__webglMultisampledFramebuffer:l,M.copy(e.viewport),P.copy(e.scissor),T=e.scissorTest}else M.copy(D).multiplyScalar(I).floor(),P.copy(L).multiplyScalar(I).floor(),T=j;if(K.bindFramebuffer(36160,i)&&q.drawBuffers&&r&&K.drawBuffers(e,i),K.viewport(M),K.scissor(P),K.setScissorTest(T),o){const r=Y.get(e.texture);ve.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(a){const r=Y.get(e.texture),i=t||0;ve.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}E=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Y.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){K.bindFramebuffer(36160,s);try{const a=e.texture,s=a.format,l=a.type;if(s!==De&&fe.convert(s)!==ve.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Ce&&($.has("EXT_color_buffer_half_float")||q.isWebGL2&&$.has("EXT_color_buffer_float"));if(!(l===we||fe.convert(l)===ve.getParameter(35738)||l===Te&&(q.isWebGL2||$.has("OES_texture_float")||$.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ve.readPixels(t,n,r,i,fe.convert(s),fe.convert(l),o)}finally{const e=null!==S?Y.get(S).__webglFramebuffer:null;K.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);J.setTexture2D(t,0),ve.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,o),K.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,a=fe.convert(n.format),s=fe.convert(n.type);J.setTexture2D(n,0),ve.pixelStorei(37440,n.flipY),ve.pixelStorei(37441,n.premultiplyAlpha),ve.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ve.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?ve.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ve.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&ve.generateMipmap(3553),K.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(b.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,l=fe.convert(r.format),c=fe.convert(r.type);let u;if(r.isData3DTexture)J.setTexture3D(r,0),u=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");J.setTexture2DArray(r,0),u=35866}ve.pixelStorei(37440,r.flipY),ve.pixelStorei(37441,r.premultiplyAlpha),ve.pixelStorei(3317,r.unpackAlignment);const d=ve.getParameter(3314),h=ve.getParameter(32878),p=ve.getParameter(3316),f=ve.getParameter(3315),m=ve.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ve.pixelStorei(3314,g.width),ve.pixelStorei(32878,g.height),ve.pixelStorei(3316,e.min.x),ve.pixelStorei(3315,e.min.y),ve.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?ve.texSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ve.compressedTexSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,g.data)):ve.texSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,c,g),ve.pixelStorei(3314,d),ve.pixelStorei(32878,h),ve.pixelStorei(3316,p),ve.pixelStorei(3315,f),ve.pixelStorei(32877,m),0===i&&r.generateMipmaps&&ve.generateMipmap(u),K.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?J.setTextureCube(e,0):e.isData3DTexture?J.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?J.setTexture2DArray(e,0):J.setTexture2D(e,0),K.unbindTexture()},this.resetState=function(){_=0,w=0,S=null,K.reset(),me.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class cl extends ll{}cl.prototype.isWebGL1Renderer=!0;class ul{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Yn(e),this.density=t}clone(){return new ul(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class dl{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Yn(e),this.near=t,this.far=n}clone(){return new dl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class hl extends hi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class pl{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=an,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Sn()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Sn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Sn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fl=new dr;class ml{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)fl.fromBufferAttribute(this,t),fl.applyMatrix4(e),this.setXYZ(t,fl.x,fl.y,fl.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)fl.fromBufferAttribute(this,t),fl.applyNormalMatrix(e),this.setXYZ(t,fl.x,fl.y,fl.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)fl.fromBufferAttribute(this,t),fl.transformDirection(e),this.setXYZ(t,fl.x,fl.y,fl.z);return this}setX(e,t){return this.normalized&&(t=In(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=In(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=In(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=In(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=An(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=An(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=An(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=An(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=In(t,this.array),n=In(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=In(t,this.array),n=In(n,this.array),r=In(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=In(t,this.array),n=In(n,this.array),r=In(r,this.array),i=In(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Ci(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ml(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class gl extends ki{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Yn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let vl;const yl=new dr,bl=new dr,xl=new dr,_l=new On,wl=new On,Sl=new Ur,El=new dr,kl=new dr,Ml=new dr,Pl=new On,Tl=new On,Cl=new On;class Al extends hi{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===vl){vl=new qi;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new pl(e,5);vl.setIndex([0,1,2,0,2,3]),vl.setAttribute("position",new ml(t,3,0,!1)),vl.setAttribute("uv",new ml(t,2,3,!1))}this.geometry=vl,this.material=void 0!==e?e:new gl,this.center=new On(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),bl.setFromMatrixScale(this.matrixWorld),Sl.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),xl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&bl.multiplyScalar(-xl.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;Il(El.set(-.5,-.5,0),xl,o,bl,r,i),Il(kl.set(.5,-.5,0),xl,o,bl,r,i),Il(Ml.set(.5,.5,0),xl,o,bl,r,i),Pl.set(0,0),Tl.set(1,0),Cl.set(1,1);let a=e.ray.intersectTriangle(El,kl,Ml,!1,yl);if(null===a&&(Il(kl.set(-.5,.5,0),xl,o,bl,r,i),Tl.set(0,1),a=e.ray.intersectTriangle(El,Ml,kl,!1,yl),null===a))return;const s=e.ray.origin.distanceTo(yl);s<e.near||s>e.far||t.push({distance:s,point:yl.clone(),uv:Si.getUV(yl,El,kl,Ml,Pl,Tl,Cl,new On),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Il(e,t,n,r,i,o){_l.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(wl.x=o*_l.x-i*_l.y,wl.y=i*_l.x+o*_l.y):wl.copy(_l),e.copy(t),e.x+=wl.x,e.y+=wl.y,e.applyMatrix4(Sl)}const Rl=new dr,Ol=new dr;class Dl extends hi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance,n.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Rl.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Rl);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Rl.setFromMatrixPosition(e.matrixWorld),Ol.setFromMatrixPosition(this.matrixWorld);const n=Rl.distanceTo(Ol)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(n>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return t}}const Ll=new dr,jl=new rr,zl=new rr,Nl=new dr,Bl=new Ur;class Fl extends so{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ur,this.bindMatrixInverse=new Ur}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new rr,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;jl.fromBufferAttribute(r.attributes.skinIndex,e),zl.fromBufferAttribute(r.attributes.skinWeight,e),Ll.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=zl.getComponent(e);if(0!==r){const i=jl.getComponent(e);Bl.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Nl.copy(Ll).applyMatrix4(Bl),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Ul extends hi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Vl extends nr{constructor(e=null,t=1,n=1,r,i,o,a,s,l=he,c=he,u,d){super(null,o,a,s,l,c,r,i,u,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Hl=new Ur,Wl=new Ur;class Gl{constructor(e=[],t=[]){this.uuid=Sn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Ur)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Ur;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:Wl;Hl.multiplyMatrices(i,t[r]),Hl.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new Gl(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Tn(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Vl(t,e,e,De,Te);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Ul),this.bones.push(i),this.boneInverses.push((new Ur).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}class $l extends Ci{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ql=new Ur,Kl=new Ur,Xl=[],Yl=new Ur,Zl=new so;class Jl extends so{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new $l(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let e=0;e<n;e++)this.setMatrixAt(e,Yl)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Zl.geometry=this.geometry,Zl.material=this.material,void 0!==Zl.material)for(let i=0;i<r;i++){this.getMatrixAt(i,ql),Kl.multiplyMatrices(n,ql),Zl.matrixWorld=Kl,Zl.raycast(e,Xl);for(let e=0,n=Xl.length;e<n;e++){const n=Xl[e];n.instanceId=i,n.object=this,t.push(n)}Xl.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new $l(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ql extends ki{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Yn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ec=new dr,tc=new dr,nc=new Ur,rc=new Fr,ic=new Rr;class oc extends hi{constructor(e=new qi,t=new Ql){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)ec.fromBufferAttribute(t,e-1),tc.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=ec.distanceTo(tc);e.setAttribute("lineDistance",new Ni(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ic.copy(n.boundingSphere),ic.applyMatrix4(r),ic.radius+=i,!1===e.ray.intersectsSphere(ic))return;nc.copy(r).invert(),rc.copy(e.ray).applyMatrix4(nc);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new dr,c=new dr,u=new dr,d=new dr,h=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p)for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=h){const r=p.getX(n),i=p.getX(n+1);if(l.fromBufferAttribute(f,r),c.fromBufferAttribute(f,i),rc.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);const o=e.ray.origin.distanceTo(d);o<e.near||o>e.far||t.push({distance:o,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,o.start),r=Math.min(f.count,o.start+o.count)-1;n<r;n+=h){if(l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1),rc.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const ac=new dr,sc=new dr;class lc extends oc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)ac.fromBufferAttribute(t,e),sc.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+ac.distanceTo(sc);e.setAttribute("lineDistance",new Ni(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class cc extends oc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class uc extends ki{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Yn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const dc=new Ur,hc=new Fr,pc=new Rr,fc=new dr;class mc extends hi{constructor(e=new qi,t=new uc){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),pc.copy(n.boundingSphere),pc.applyMatrix4(r),pc.radius+=i,!1===e.ray.intersectsSphere(pc))return;dc.copy(r).invert(),hc.copy(e.ray).applyMatrix4(dc);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=n.index,c=n.attributes.position;if(null!==l)for(let n=Math.max(0,o.start),i=Math.min(l.count,o.start+o.count);n<i;n++){const i=l.getX(n);fc.fromBufferAttribute(c,i),gc(fc,i,s,r,e,t,this)}else for(let n=Math.max(0,o.start),i=Math.min(c.count,o.start+o.count);n<i;n++)fc.fromBufferAttribute(c,n),gc(fc,n,s,r,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function gc(e,t,n,r,i,o,a){const s=hc.distanceSqToPoint(e);if(s<n){const n=new dr;hc.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}class vc extends nr{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,i,o,a,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:ve,this.magFilter=void 0!==i?i:ve,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class yc extends nr{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=he,this.minFilter=he,this.generateMipmaps=!1,this.needsUpdate=!0}}class bc extends nr{constructor(e,t,n,r,i,o,a,s,l,c,u,d){super(null,o,a,s,l,c,r,i,u,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class xc extends bc{constructor(e,t,n,r,i,o){super(e,t,n,i,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ue}}class _c extends nr{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,i,o,a,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class wc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let a,s=0,l=i-1;for(;s<=l;)if(r=Math.floor(s+(l-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const c=n[r];return(r+(o-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new On:new dr);return s.copy(a).sub(o).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new dr,r=[],i=[],o=[],a=new dr,s=new Ur;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new dr)}i[0]=new dr,o[0]=new dr;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),o[t]=o[t-1].clone(),a.crossVectors(r[t-1],r[t]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(En(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(s.makeRotationAxis(a,e))}o[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(En(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Sc extends wc{constructor(e=0,t=0,n=1,r=1,i=0,o=2*Math.PI,a=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){const n=t||new On,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;s=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Ec extends Sc{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}}function kc(){let e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){let l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;l*=a,c*=a,i(t,n,l,c)},calc:function(i){const o=i*i;return e+t*i+n*o+r*(o*i)}}}const Mc=new dr,Pc=new kc,Tc=new kc,Cc=new kc;class Ac extends wc{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new dr){const n=t,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;let a,s,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?a=r[(l-1)%i]:(Mc.subVectors(r[0],r[1]).add(r[0]),a=Mc);const u=r[l%i],d=r[(l+1)%i];if(this.closed||l+2<i?s=r[(l+2)%i]:(Mc.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=Mc),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(d),e),r=Math.pow(d.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Pc.initNonuniformCatmullRom(a.x,u.x,d.x,s.x,t,n,r),Tc.initNonuniformCatmullRom(a.y,u.y,d.y,s.y,t,n,r),Cc.initNonuniformCatmullRom(a.z,u.z,d.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(Pc.initCatmullRom(a.x,u.x,d.x,s.x,this.tension),Tc.initCatmullRom(a.y,u.y,d.y,s.y,this.tension),Cc.initCatmullRom(a.z,u.z,d.z,s.z,this.tension));return n.set(Pc.calc(c),Tc.calc(c),Cc.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new dr).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Ic(e,t,n,r,i){const o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Rc(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Oc(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class Dc extends wc{constructor(e=new On,t=new On,n=new On,r=new On){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new On){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Oc(e,r.x,i.x,o.x,a.x),Oc(e,r.y,i.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Lc extends wc{constructor(e=new dr,t=new dr,n=new dr,r=new dr){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new dr){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Oc(e,r.x,i.x,o.x,a.x),Oc(e,r.y,i.y,o.y,a.y),Oc(e,r.z,i.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class jc extends wc{constructor(e=new On,t=new On){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new On){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new On;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zc extends wc{constructor(e=new dr,t=new dr){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new dr){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Nc extends wc{constructor(e=new On,t=new On,n=new On){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new On){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(Rc(e,r.x,i.x,o.x),Rc(e,r.y,i.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Bc extends wc{constructor(e=new dr,t=new dr,n=new dr){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new dr){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(Rc(e,r.x,i.x,o.x),Rc(e,r.y,i.y,o.y),Rc(e,r.z,i.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Fc extends wc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new On){const n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],l=r[o],c=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(Ic(a,s.x,l.x,c.x,u.x),Ic(a,s.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new On).fromArray(n))}return this}}var Uc=Object.freeze({__proto__:null,ArcCurve:Ec,CatmullRomCurve3:Ac,CubicBezierCurve:Dc,CubicBezierCurve3:Lc,EllipseCurve:Sc,LineCurve:jc,LineCurve3:zc,QuadraticBezierCurve:Nc,QuadraticBezierCurve3:Bc,SplineCurve:Fc});class Vc extends wc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new jc(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,o=this.curves[i],a=o.getLength(),s=0===a?0:1-e/a;return o.getPointAt(s,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Uc[n.type]).fromJSON(n))}return this}}class Hc extends Vc{constructor(e){super(),this.type="Path",this.currentPoint=new On,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new jc(this.currentPoint.clone(),new On(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new Nc(this.currentPoint.clone(),new On(e,t),new On(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){const a=new Dc(this.currentPoint.clone(),new On(e,t),new On(n,r),new On(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Fc(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,o,a,s),this}absellipse(e,t,n,r,i,o,a,s){const l=new Sc(e,t,n,r,i,o,a,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Wc extends qi{constructor(e=[new On(0,-.5),new On(.5,0),new On(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=En(r,0,2*Math.PI);const i=[],o=[],a=[],s=[],l=[],c=1/t,u=new dr,d=new On,h=new dr,p=new dr,f=new dr;let m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,f.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(f.x,f.y,f.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.x+=f.x,h.y+=f.y,h.z+=f.z,h.normalize(),s.push(h.x,h.y,h.z),f.copy(p)}for(let i=0;i<=t;i++){const h=n+i*c*r,p=Math.sin(h),f=Math.cos(h);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*p,u.y=e[n].y,u.z=e[n].x*f,o.push(u.x,u.y,u.z),d.x=i/t,d.y=n/(e.length-1),a.push(d.x,d.y);const r=s[3*n+0]*p,c=s[3*n+1],h=s[3*n+0]*f;l.push(r,c,h)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,o=r,a=r+e.length,s=r+e.length+1,l=r+1;i.push(o,a,l),i.push(s,l,a)}this.setIndex(i),this.setAttribute("position",new Ni(o,3)),this.setAttribute("uv",new Ni(a,2)),this.setAttribute("normal",new Ni(l,3))}static fromJSON(e){return new Wc(e.points,e.segments,e.phiStart,e.phiLength)}}class Gc extends Wc{constructor(e=1,t=1,n=4,r=8){const i=new Hc;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new Gc(e.radius,e.length,e.capSegments,e.radialSegments)}}class $c extends qi{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],o=[],a=[],s=[],l=new dr,c=new On;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let i=0,u=3;i<=t;i++,u+=3){const d=n+i/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[u]/e+1)/2,c.y=(o[u+1]/e+1)/2,s.push(c.x,c.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new Ni(o,3)),this.setAttribute("normal",new Ni(a,3)),this.setAttribute("uv",new Ni(s,2))}static fromJSON(e){return new $c(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class qc extends qi{constructor(e=1,t=1,n=1,r=32,i=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],d=[],h=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const i=p,o=new On,f=new dr;let v=0;const y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*b,0),d.push(0,b,0),h.push(.5,.5),p++;const x=p;for(let e=0;e<=r;e++){const t=e/r*s+a,n=Math.cos(t),i=Math.sin(t);f.x=y*i,f.y=m*b,f.z=y*n,u.push(f.x,f.y,f.z),d.push(0,b,0),o.x=.5*n+.5,o.y=.5*i*b+.5,h.push(o.x,o.y),p++}for(let e=0;e<r;e++){const t=i+e,r=x+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const o=new dr,v=new dr;let y=0;const b=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+a,l=Math.sin(i),f=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*f,u.push(v.x,v.y,v.z),o.set(l,b,f).normalize(),d.push(o.x,o.y,o.z),h.push(t,1-g),c.push(p++)}f.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=f[t][e],r=f[t+1][e],i=f[t+1][e+1],o=f[t][e+1];c.push(n,r,o),c.push(r,i,o),y+=6}l.addGroup(g,y,0),g+=y}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Ni(u,3)),this.setAttribute("normal",new Ni(d,3)),this.setAttribute("uv",new Ni(h,2))}static fromJSON(e){return new qc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Kc extends qc{constructor(e=1,t=1,n=32,r=1,i=!1,o=0,a=2*Math.PI){super(0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Kc(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Xc extends qi{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],o=[];function a(e,t,n,r){const i=r+1,o=[];for(let r=0;r<=i;r++){o[r]=[];const a=e.clone().lerp(n,r/i),s=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)o[r][e]=0===e&&r===i?a:a.clone().lerp(s,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(s(o[e][n+1]),s(o[e+1][n]),s(o[e][n])):(s(o[e][n+1]),s(o[e+1][n+1]),s(o[e+1][n]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new dr,r=new dr,i=new dr;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)}(r),function(e){const t=new dr;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new dr;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(r,1-a)}var t;(function(){const e=new dr,t=new dr,n=new dr,r=new dr,a=new On,s=new On,l=new On;for(let d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),a.set(o[h+0],o[h+1]),s.set(o[h+2],o[h+3]),l.set(o[h+4],o[h+5]),r.copy(e).add(t).add(n).divideScalar(3);const p=u(r);c(a,h+0,e,p),c(s,h+2,t,p),c(l,h+4,n,p)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Ni(i,3)),this.setAttribute("normal",new Ni(i.slice(),3)),this.setAttribute("uv",new Ni(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new Xc(e.vertices,e.indices,e.radius,e.details)}}class Yc extends Xc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Yc(e.radius,e.detail)}}const Zc=new dr,Jc=new dr,Qc=new dr,eu=new Si;class tu extends qi{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(_n*t),o=e.getIndex(),a=e.getAttribute("position"),s=o?o.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let e=0;e<s;e+=3){o?(l[0]=o.getX(e),l[1]=o.getX(e+1),l[2]=o.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:s}=eu;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),s.fromBufferAttribute(a,l[2]),eu.getNormal(Qc),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,u[2]=`${Math.round(s.x*r)},${Math.round(s.y*r)},${Math.round(s.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],o=eu[c[e]],a=eu[c[t]],s=`${n}_${r}`,p=`${r}_${n}`;p in d&&d[p]?(Qc.dot(d[p].normal)<=i&&(h.push(o.x,o.y,o.z),h.push(a.x,a.y,a.z)),d[p]=null):s in d||(d[s]={index0:l[e],index1:l[t],normal:Qc.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:n}=d[e];Zc.fromBufferAttribute(a,t),Jc.fromBufferAttribute(a,n),h.push(Zc.x,Zc.y,Zc.z),h.push(Jc.x,Jc.y,Jc.z)}this.setAttribute("position",new Ni(h,3))}}}class nu extends Hc{constructor(e){super(e),this.uuid=Sn(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Hc).fromJSON(n))}return this}}function ru(e,t,n,r,i){let o,a;if(i===function(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Eu(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Eu(o,e[o],e[o+1],a);return a&&yu(a,a.next)&&(ku(a),a=a.next),a}function iu(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!yu(r,r.next)&&0!==vu(r.prev,r,r.next))r=r.next;else{if(ku(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function ou(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=pu(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,r);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);let s,l,c=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,o?su(e,r,i,o):au(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),ku(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?ou(e=lu(iu(e),t,n),t,n,r,i,o,2):2===a&&cu(e,t,n,r,i,o):ou(iu(e),t,n,r,i,o,1);break}}function au(e){const t=e.prev,n=e,r=e.next;if(vu(t,n,r)>=0)return!1;const i=t.x,o=n.x,a=r.x,s=t.y,l=n.y,c=r.y,u=i<o?i<a?i:a:o<a?o:a,d=s<l?s<c?s:c:l<c?l:c,h=i>o?i>a?i:a:o>a?o:a,p=s>l?s>c?s:c:l>c?l:c;let f=r.next;for(;f!==t;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&mu(i,s,o,l,a,c,f.x,f.y)&&vu(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function su(e,t,n,r){const i=e.prev,o=e,a=e.next;if(vu(i,o,a)>=0)return!1;const s=i.x,l=o.x,c=a.x,u=i.y,d=o.y,h=a.y,p=s<l?s<c?s:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=s>l?s>c?s:c:l>c?l:c,g=u>d?u>h?u:h:d>h?d:h,v=pu(p,f,t,n,r),y=pu(m,g,t,n,r);let b=e.prevZ,x=e.nextZ;for(;b&&b.z>=v&&x&&x.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==a&&mu(s,u,l,d,c,h,b.x,b.y)&&vu(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==a&&mu(s,u,l,d,c,h,x.x,x.y)&&vu(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==a&&mu(s,u,l,d,c,h,b.x,b.y)&&vu(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=y;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==a&&mu(s,u,l,d,c,h,x.x,x.y)&&vu(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function lu(e,t,n){let r=e;do{const i=r.prev,o=r.next.next;!yu(i,o)&&bu(i,r,r.next,o)&&wu(i,o)&&wu(o,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),ku(r),ku(r.next),r=e=o),r=r.next}while(r!==e);return iu(r)}function cu(e,t,n,r,i,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&gu(a,e)){let s=Su(a,e);return a=iu(a,a.next),s=iu(s,s.next),ou(a,t,n,r,i,o,0),void ou(s,t,n,r,i,o,0)}e=e.next}a=a.next}while(a!==e)}function uu(e,t){return e.x-t.x}function du(e,t){const n=function(e,t){let n,r=t,i=-1/0;const o=e.x,a=e.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){const e=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=o&&e>i&&(i=e,n=r.x<r.next.x?r:r.next,e===o))return n}r=r.next}while(r!==t);if(!n)return null;const s=n,l=n.x,c=n.y;let u,d=1/0;r=n;do{o>=r.x&&r.x>=l&&o!==r.x&&mu(a<c?o:i,a,l,c,a<c?i:o,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(o-r.x),wu(r,e)&&(u<d||u===d&&(r.x>n.x||r.x===n.x&&hu(n,r)))&&(n=r,d=u)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;const r=Su(n,e);return iu(r,r.next),iu(n,n.next)}function hu(e,t){return vu(e.prev,e,t.prev)<0&&vu(t.next,e,e.next)<0}function pu(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function fu(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function mu(e,t,n,r,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function gu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&bu(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(wu(e,t)&&wu(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(vu(e.prev,e,t.prev)||vu(e,t.prev,t))||yu(e,t)&&vu(e.prev,e,e.next)>0&&vu(t.prev,t,t.next)>0)}function vu(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function yu(e,t){return e.x===t.x&&e.y===t.y}function bu(e,t,n,r){const i=_u(vu(e,t,n)),o=_u(vu(e,t,r)),a=_u(vu(n,r,e)),s=_u(vu(n,r,t));return i!==o&&a!==s||!(0!==i||!xu(e,n,t))||!(0!==o||!xu(e,r,t))||!(0!==a||!xu(n,e,r))||!(0!==s||!xu(n,t,r))}function xu(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function _u(e){return e>0?1:e<0?-1:0}function wu(e,t){return vu(e.prev,e,e.next)<0?vu(e,t,e.next)>=0&&vu(e,e.prev,t)>=0:vu(e,t,e.prev)<0||vu(e,e.next,t)<0}function Su(e,t){const n=new Mu(e.i,e.x,e.y),r=new Mu(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Eu(e,t,n,r){const i=new Mu(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ku(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Mu(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Pu{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return Pu.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];Tu(e),Cu(n,e);let o=e.length;t.forEach(Tu);for(let e=0;e<t.length;e++)r.push(o),o+=t[e].length,Cu(n,t[e]);const a=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let o=ru(e,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,d,h,p;if(r&&(o=function(e,t,n,r){const i=[];let o,a,s,l,c;for(o=0,a=t.length;o<a;o++)s=t[o]*r,l=o<a-1?t[o+1]*r:e.length,c=ru(e,s,l,r,!1),c===c.next&&(c.steiner=!0),i.push(fu(c));for(i.sort(uu),o=0;o<i.length;o++)n=du(i[o],n);return n}(e,t,o,n)),e.length>80*n){s=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)d=e[t],h=e[t+1],d<s&&(s=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);p=Math.max(c-s,u-l),p=0!==p?32767/p:0}return ou(o,a,n,s,l,p,0),a}(n,r);for(let e=0;e<a.length;e+=3)i.push(a.slice(e,e+3));return i}}function Tu(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Cu(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Au extends qi{constructor(e=new nu([new On(.5,.5),new On(-.5,.5),new On(-.5,-.5),new On(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++)o(e[t]);function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Iu;let g,v,y,b,x,_=!1;f&&(g=f.getSpacedPoints(s),_=!0,c=!1,v=f.computeFrenetFrames(s,!1),y=new dr,b=new dr,x=new dr),c||(p=0,u=0,d=0,h=0);const w=e.extractPoints(a);let S=w.shape;const E=w.holes;if(!Pu.isClockWise(S)){S=S.reverse();for(let e=0,t=E.length;e<t;e++){const t=E[e];Pu.isClockWise(t)&&(E[e]=t.reverse())}}const k=Pu.triangulateShape(S,E),M=S;for(let e=0,t=E.length;e<t;e++){const t=E[e];S=S.concat(t)}function P(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const T=S.length,C=k.length;function A(e,t,n){let r,i,o;const a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+s*s,d=a*c-s*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),p=t.x-s/d,f=t.y+a/d,m=((n.x-c/h-p)*c-(n.y+l/h-f)*l)/(a*c-s*l);r=p+a*m-e.x,i=f+s*m-e.y;const g=r*r+i*i;if(g<=2)return new On(r,i);o=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(r=-s,i=a,o=Math.sqrt(u)):(r=a,i=s,o=Math.sqrt(u/2))}return new On(r/o,i/o)}const I=[];for(let e=0,t=M.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),I[e]=A(M[e],M[n],M[r]);const R=[];let O,D=I.concat();for(let e=0,t=E.length;e<t;e++){const t=E[e];O=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),O[e]=A(t[e],t[r],t[i]);R.push(O),D=D.concat(O)}for(let e=0;e<p;e++){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=M.length;e<t;e++){const t=P(M[e],I[e],r);z(t.x,t.y,-n)}for(let e=0,t=E.length;e<t;e++){const t=E[e];O=R[e];for(let e=0,i=t.length;e<i;e++){const i=P(t[e],O[e],r);z(i.x,i.y,-n)}}}const L=d+h;for(let e=0;e<T;e++){const t=c?P(S[e],D[e],L):S[e];_?(b.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),x.copy(g[0]).add(b).add(y),z(x.x,x.y,x.z)):z(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<T;t++){const n=c?P(S[t],D[t],L):S[t];_?(b.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),x.copy(g[e]).add(b).add(y),z(x.x,x.y,x.z)):z(n.x,n.y,l/s*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=M.length;e<t;e++){const t=P(M[e],I[e],r);z(t.x,t.y,l+n)}for(let e=0,t=E.length;e<t;e++){const t=E[e];O=R[e];for(let e=0,i=t.length;e<i;e++){const i=P(t[e],O[e],r);_?z(i.x,i.y+g[s-1].y,g[s-1].x+n):z(i.x,i.y,l+n)}}}function j(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*p;e<n;e++){const n=T*e,o=T*(e+1);B(t+r+n,t+i+n,t+i+o,t+r+o)}}}function z(e,t,n){o.push(e),o.push(t),o.push(n)}function N(e,t,i){F(e),F(t),F(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);U(a[0]),U(a[1]),U(a[2])}function B(e,t,i,o){F(e),F(t),F(o),F(t),F(i),F(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);U(s[0]),U(s[1]),U(s[3]),U(s[1]),U(s[2]),U(s[3])}function F(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function U(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=T*e;for(let e=0;e<C;e++){const n=k[e];N(n[2]+t,n[1]+t,n[0]+t)}e=s+2*p,t=T*e;for(let e=0;e<C;e++){const n=k[e];N(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<C;e++){const t=k[e];N(t[2],t[1],t[0])}for(let e=0;e<C;e++){const t=k[e];N(t[0]+T*s,t[1]+T*s,t[2]+T*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;j(M,t),t+=M.length;for(let e=0,n=E.length;e<n;e++){const n=E[e];j(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Ni(r,3)),this.setAttribute("uv",new Ni(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Uc[r.type]).fromJSON(r)),new Au(n,e.options)}}const Iu={generateTopUV:function(e,t,n,r,i){const o=t[3*n],a=t[3*n+1],s=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new On(o,a),new On(s,l),new On(c,u)]},generateSideWallUV:function(e,t,n,r,i,o){const a=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],d=t[3*r+2],h=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-u)<Math.abs(a-c)?[new On(a,1-l),new On(c,1-d),new On(h,1-f),new On(m,1-v)]:[new On(s,1-l),new On(u,1-d),new On(p,1-f),new On(g,1-v)]}};class Ru extends Xc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ru(e.radius,e.detail)}}class Ou extends Xc{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ou(e.radius,e.detail)}}class Du extends qi{constructor(e=.5,t=1,n=32,r=1,i=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n);const a=[],s=[],l=[],c=[];let u=e;const d=(t-e)/(r=Math.max(1,r)),h=new dr,p=new On;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*o;h.x=u*Math.cos(r),h.y=u*Math.sin(r),s.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}u+=d}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,o=r+n+1,s=r+n+2,l=r+1;a.push(i,o,l),a.push(o,s,l)}}this.setIndex(a),this.setAttribute("position",new Ni(s,3)),this.setAttribute("normal",new Ni(l,3)),this.setAttribute("uv",new Ni(c,2))}static fromJSON(e){return new Du(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Lu extends qi{constructor(e=new nu([new On(0,.5),new On(-.5,-.5),new On(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(a,s,t),a+=s,s=0;function l(e){const a=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Pu.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===Pu.isClockWise(t)&&(u[e]=t.reverse())}const d=Pu.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),o.push(t.x,t.y)}for(let e=0,t=d.length;e<t;e++){const t=d[e],r=t[0]+a,i=t[1]+a,o=t[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Ni(r,3)),this.setAttribute("normal",new Ni(i,3)),this.setAttribute("uv",new Ni(o,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new Lu(n,e.curveSegments)}}class ju extends qi{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new dr,d=new dr,h=[],p=[],f=[],m=[];for(let h=0;h<=n;h++){const g=[],v=h/n;let y=0;0==h&&0==o?y=.5/t:h==n&&s==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(r+s*i)*Math.sin(o+v*a),u.y=e*Math.cos(o+v*a),u.z=e*Math.sin(r+s*i)*Math.sin(o+v*a),p.push(u.x,u.y,u.z),d.copy(u).normalize(),f.push(d.x,d.y,d.z),m.push(s+y,1-v),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=c[e][r+1],i=c[e][r],a=c[e+1][r],l=c[e+1][r+1];(0!==e||o>0)&&h.push(t,i,l),(e!==n-1||s<Math.PI)&&h.push(i,a,l)}this.setIndex(h),this.setAttribute("position",new Ni(p,3)),this.setAttribute("normal",new Ni(f,3)),this.setAttribute("uv",new Ni(m,2))}static fromJSON(e){return new ju(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class zu extends Xc{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zu(e.radius,e.detail)}}class Nu extends qi{constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],l=[],c=new dr,u=new dr,d=new dr;for(let o=0;o<=n;o++)for(let h=0;h<=r;h++){const p=h/r*i,f=o/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),a.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),d.subVectors(u,c).normalize(),s.push(d.x,d.y,d.z),l.push(h/r),l.push(o/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,a=(r+1)*(e-1)+t,s=(r+1)*e+t;o.push(n,i,s),o.push(i,a,s)}this.setIndex(o),this.setAttribute("position",new Ni(a,3)),this.setAttribute("normal",new Ni(s,3)),this.setAttribute("uv",new Ni(l,2))}static fromJSON(e){return new Nu(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Bu extends qi{constructor(e=1,t=.4,n=64,r=8,i=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],l=[],c=[],u=new dr,d=new dr,h=new dr,p=new dr,f=new dr,m=new dr,g=new dr;for(let a=0;a<=n;++a){const y=a/n*i*Math.PI*2;v(y,i,o,e,h),v(y+.01,i,o,e,p),m.subVectors(p,h),g.addVectors(p,h),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,o=-t*Math.cos(i),p=t*Math.sin(i);u.x=h.x+(o*g.x+p*f.x),u.y=h.y+(o*g.y+p*f.y),u.z=h.z+(o*g.z+p*f.z),s.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(a/n),c.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,s=(r+1)*(e-1)+t;a.push(n,i,s),a.push(i,o,s)}function v(e,t,n,r,i){const o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Ni(s,3)),this.setAttribute("normal",new Ni(l,3)),this.setAttribute("uv",new Ni(c,2))}static fromJSON(e){return new Bu(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Fu extends qi{constructor(e=new Bc(new dr(-1,-1,0),new dr(-1,1,0),new dr(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new dr,s=new dr,l=new On;let c=new dr;const u=[],d=[],h=[],p=[];function f(i){c=e.getPointAt(i/t,c);const l=o.normals[i],h=o.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),o=-Math.cos(t);s.x=o*l.x+i*h.x,s.y=o*l.y+i*h.y,s.z=o*l.z+i*h.z,s.normalize(),d.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,a=(r+1)*(e-1)+t;p.push(n,i,a),p.push(i,o,a)}}()}(),this.setIndex(p),this.setAttribute("position",new Ni(u,3)),this.setAttribute("normal",new Ni(d,3)),this.setAttribute("uv",new Ni(h,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Fu((new Uc[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Uu extends qi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new dr,i=new dr;if(null!==e.index){const o=e.attributes.position,a=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){const l=s[e],c=l.start;for(let e=c,s=c+l.count;e<s;e+=3)for(let s=0;s<3;s++){const l=a.getX(e+s),c=a.getX(e+(s+1)%3);r.fromBufferAttribute(o,l),i.fromBufferAttribute(o,c),!0===Vu(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const o=e.attributes.position;for(let e=0,a=o.count/3;e<a;e++)for(let a=0;a<3;a++){const s=3*e+a,l=3*e+(a+1)%3;r.fromBufferAttribute(o,s),i.fromBufferAttribute(o,l),!0===Vu(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new Ni(t,3))}}}function Vu(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var Hu=Object.freeze({__proto__:null,BoxGeometry:co,CapsuleGeometry:Gc,CircleGeometry:$c,ConeGeometry:Kc,CylinderGeometry:qc,DodecahedronGeometry:Yc,EdgesGeometry:tu,ExtrudeGeometry:Au,IcosahedronGeometry:Ru,LatheGeometry:Wc,OctahedronGeometry:Ou,PlaneGeometry:Io,PolyhedronGeometry:Xc,RingGeometry:Du,ShapeGeometry:Lu,SphereGeometry:ju,TetrahedronGeometry:zu,TorusGeometry:Nu,TorusKnotGeometry:Bu,TubeGeometry:Fu,WireframeGeometry:Uu});class Wu extends ki{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Yn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Gu extends mo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class $u extends ki{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Yn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nt,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qu extends $u{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new On(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return En(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Yn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Yn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Yn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Ku extends ki{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Yn(16777215),this.specular=new Yn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nt,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=K,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xu extends ki{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Yn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nt,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Yu extends ki{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nt,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Zu extends ki{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Yn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nt,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=K,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ju extends ki{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Yn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nt,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Qu extends Ql{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ed(e,t,n){return nd(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function td(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function nd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function rd(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n}function id(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i}function od(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}var ad=Object.freeze({__proto__:null,arraySlice:ed,convertArray:td,flattenJSON:od,getKeyframeOrder:rd,isTypedArray:nd,makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const a=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===a)continue;let s=0;const l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const d=r.times.length-1;let h;if(o<=r.times[0]){const e=s,t=l-s;h=ed(r.values,e,t)}else if(o>=r.times[d]){const e=d*l+s,t=e+l-s;h=ed(r.values,e,t)}else{const e=r.createInterpolant(),t=s,n=l-s;e.evaluate(o),h=ed(e.resultBuffer,t,n)}"quaternion"===i&&(new ur).fromArray(h).normalize().conjugate().toArray(h);const p=a.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===i)ur.multiplyQuaternionsFlat(a.values,t,h,0,a.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)a.values[t+n]-=h[n]}}}return e.blendMode=At,e},sortedArray:id,subclip:function(e,t,n,r,i=30){const o=e.clone();o.name=t;const a=[];for(let e=0;e<o.tracks.length;++e){const t=o.tracks[e],s=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const o=t.times[e]*i;if(!(o<n||o>=r)){l.push(t.times[e]);for(let n=0;n<s;++n)c.push(t.values[e*s+n])}}0!==l.length&&(t.times=td(l,t.times.constructor),t.values=td(c,t.values.constructor),a.push(t))}o.tracks=a;let s=1/0;for(let e=0;e<o.tracks.length;++e)s>o.tracks[e].times[0]&&(s=o.tracks[e].times[0]);for(let e=0;e<o.tracks.length;++e)o.tracks[e].shift(-1*s);return o.resetDuration(),o}});class sd{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ld extends sd{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Mt,endingEnd:Mt}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Pt:i=e,a=2*t-n;break;case Tt:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Pt:o=e,s=2*n-t;break;case Tt:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-d*m+2*d*f-d*p,v=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*m+(1.5+h)*f+.5*p,b=h*m-h*f;for(let e=0;e!==a;++e)i[e]=g*o[c+e]+v*o[l+e]+y*o[s+e]+b*o[u+e];return i}}class cd extends sd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==a;++e)i[e]=o[l+e]*u+o[s+e]*c;return i}}class ud extends sd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class dd{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=td(t,this.TimeBufferType),this.values=td(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:td(e.times,Array),values:td(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new ud(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ld(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case St:t=this.InterpolantFactoryMethodDiscrete;break;case Et:t=this.InterpolantFactoryMethodLinear;break;case kt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return St;case this.InterpolantFactoryMethodLinear:return Et;case this.InterpolantFactoryMethodSmooth:return kt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=ed(n,i,o),this.values=ed(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,o),e=!1;break}o=r}if(void 0!==r&&nd(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=ed(this.times),t=ed(this.values),n=this.getValueSize(),r=this.getInterpolation()===kt,i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=ed(e,0,o),this.values=ed(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=ed(this.times,0),t=ed(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}dd.prototype.TimeBufferType=Float32Array,dd.prototype.ValueBufferType=Float32Array,dd.prototype.DefaultInterpolation=Et;class hd extends dd{}hd.prototype.ValueTypeName="bool",hd.prototype.ValueBufferType=Array,hd.prototype.DefaultInterpolation=St,hd.prototype.InterpolantFactoryMethodLinear=void 0,hd.prototype.InterpolantFactoryMethodSmooth=void 0;class pd extends dd{}pd.prototype.ValueTypeName="color";class fd extends dd{}fd.prototype.ValueTypeName="number";class md extends sd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let l=e*a;for(let e=l+a;l!==e;l+=4)ur.slerpFlat(i,0,o,l-a,o,l,s);return i}}class gd extends dd{InterpolantFactoryMethodLinear(e){return new md(this.times,this.values,this.getValueSize(),e)}}gd.prototype.ValueTypeName="quaternion",gd.prototype.DefaultInterpolation=Et,gd.prototype.InterpolantFactoryMethodSmooth=void 0;class vd extends dd{}vd.prototype.ValueTypeName="string",vd.prototype.ValueBufferType=Array,vd.prototype.DefaultInterpolation=St,vd.prototype.InterpolantFactoryMethodLinear=void 0,vd.prototype.InterpolantFactoryMethodSmooth=void 0;class yd extends dd{}yd.prototype.ValueTypeName="vector";class bd{constructor(e,t=-1,n,r=Ct){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Sn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(xd(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(dd.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,o=[];for(let e=0;e<i;e++){let a=[],s=[];a.push((e+i-1)%i,e,(e+1)%i),s.push(0,1,0);const l=rd(a);a=id(a,1,l),s=id(s,1,l),r||0!==a[0]||(a.push(i),s.push(s[0])),o.push(new fd(".morphTargetInfluences["+t[e].name+"]",a,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],o=n.name.match(i);if(o&&o.length>1){const e=o[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const o=[];for(const e in r)o.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],a=[];od(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],o=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),o.push(r.morphTarget===n?1:0)}r.push(new fd(".morphTargetInfluence["+n+"]",e,o))}s=e.length*o}else{const o=".bones["+t[e].name+"]";n(yd,o+".position",i,"pos",r),n(gd,o+".quaternion",i,"rot",r),n(yd,o+".scale",i,"scl",r)}}return 0===r.length?null:new this(i,s,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function xd(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return fd;case"vector":case"vector2":case"vector3":case"vector4":return yd;case"color":return pd;case"quaternion":return gd;case"bool":case"boolean":return hd;case"string":return vd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];od(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const _d={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class wd{constructor(e,t,n){const r=this;let i,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==r.onStart&&r.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Sd=new wd;class Ed{constructor(e){this.manager=void 0!==e?e:Sd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const kd={};class Md extends Error{constructor(e,t){super(e),this.response=t}}class Pd extends Ed{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=_d.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==kd[e])return void kd[e].push({onLoad:t,onProgress:n,onError:r});kd[e]=[],kd[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=kd[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),o=i?parseInt(i):0,a=0!==o;let s=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw new Md(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{_d.add(e,t);const n=kd[e];delete kd[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=kd[e];if(void 0===n)throw this.manager.itemError(e),t;delete kd[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Td extends Ed{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Pd(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=bd.parse(e[n]);t.push(r)}return t}}class Cd extends Ed{constructor(e){super(e)}load(e,t,n,r){const i=this,o=[],a=new bc,s=new Pd(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let l=0;function c(c){s.load(e[c],(function(e){const n=i.parse(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=ve),a.image=o,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)c(t);else s.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=ve),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}class Ad extends Ed{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=_d.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a=Bn("img");function s(){c(),_d.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class Id extends Ed{constructor(e){super(e)}load(e,t,n,r){const i=new xo,o=new Ad(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)s(t);return i}}class Rd extends Ed{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Vl,a=new Pd(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ue,o.wrapT=void 0!==n.wrapT?n.wrapT:ue,o.magFilter=void 0!==n.magFilter?n.magFilter:ve,o.minFilter=void 0!==n.minFilter?n.minFilter:ve,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=xe),1===n.mipmapCount&&(o.minFilter=ve),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}class Od extends Ed{constructor(e){super(e)}load(e,t,n,r){const i=new nr,o=new Ad(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class Dd extends hi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Yn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Ld extends Dd{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(hi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Yn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const jd=new Ur,zd=new dr,Nd=new dr;class Bd{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new On(512,512),this.map=null,this.mapPass=null,this.matrix=new Ur,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new To,this._frameExtents=new On(1,1),this._viewportCount=1,this._viewports=[new rr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;zd.setFromMatrixPosition(e.matrixWorld),t.position.copy(zd),Nd.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Nd),t.updateMatrixWorld(),jd.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jd),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(jd)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Fd extends Bd{constructor(){super(new vo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*wn*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Ud extends Dd{constructor(e,t,n=0,r=Math.PI/3,i=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hi.DEFAULT_UP),this.updateMatrix(),this.target=new hi,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new Fd}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Vd=new Ur,Hd=new dr,Wd=new dr;class Gd extends Bd{constructor(){super(new vo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new On(4,2),this._viewportCount=6,this._viewports=[new rr(2,1,1,1),new rr(0,1,1,1),new rr(3,1,1,1),new rr(1,1,1,1),new rr(3,0,1,1),new rr(1,0,1,1)],this._cubeDirections=[new dr(1,0,0),new dr(-1,0,0),new dr(0,0,1),new dr(0,0,-1),new dr(0,1,0),new dr(0,-1,0)],this._cubeUps=[new dr(0,1,0),new dr(0,1,0),new dr(0,1,0),new dr(0,1,0),new dr(0,0,1),new dr(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Hd.setFromMatrixPosition(e.matrixWorld),n.position.copy(Hd),Wd.copy(n.position),Wd.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Wd),n.updateMatrixWorld(),r.makeTranslation(-Hd.x,-Hd.y,-Hd.z),Vd.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Vd)}}class $d extends Dd{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Gd}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class qd extends Bd{constructor(){super(new Vo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Kd extends Dd{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hi.DEFAULT_UP),this.updateMatrix(),this.target=new hi,this.shadow=new qd}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Xd extends Dd{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Yd extends Dd{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Zd{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new dr)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class Jd extends Dd{constructor(e=new Zd,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Qd extends Ed{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,o=new Pd(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=Qd.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new Yn).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new Yn).setHex(i.value);break;case"v2":r.uniforms[t].value=(new On).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new dr).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new rr).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new Dn).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new Ur).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new On).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new On).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:Wu,SpriteMaterial:gl,RawShaderMaterial:Gu,ShaderMaterial:mo,PointsMaterial:uc,MeshPhysicalMaterial:qu,MeshStandardMaterial:$u,MeshPhongMaterial:Ku,MeshToonMaterial:Xu,MeshNormalMaterial:Yu,MeshLambertMaterial:Zu,MeshDepthMaterial:$s,MeshDistanceMaterial:qs,MeshBasicMaterial:Mi,MeshMatcapMaterial:Ju,LineDashedMaterial:Qu,LineBasicMaterial:Ql,Material:ki}[e]}}class eh{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class th extends qi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class nh extends Ed{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Pd(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),a=Nn(i.type,o),s=new pl(a,i.stride);return s.uuid=i.uuid,t[r]=s,s}const i=e.isInstancedBufferGeometry?new th:new qi,o=e.data.index;if(void 0!==o){const e=Nn(o.type,o.array);i.setIndex(new Ci(e,1))}const a=e.data.attributes;for(const t in a){const n=a[t];let o;if(n.isInterleavedBufferAttribute){const t=r(e.data,n.data);o=new ml(t,n.itemSize,n.offset,n.normalized)}else{const e=Nn(n.type,n.array);o=new(n.isInstancedBufferAttribute?$l:Ci)(e,n.itemSize,n.normalized)}void 0!==n.name&&(o.name=n.name),void 0!==n.usage&&o.setUsage(n.usage),void 0!==n.updateRange&&(o.updateRange.offset=n.updateRange.offset,o.updateRange.count=n.updateRange.count),i.setAttribute(t,o)}const s=e.data.morphAttributes;if(s)for(const t in s){const n=s[t],o=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let a;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);a=new ml(t,i.itemSize,i.offset,i.normalized)}else{const e=Nn(i.type,i.array);a=new Ci(e,i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),o.push(a)}i.morphAttributes[t]=o}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new dr;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new Rr(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class rh extends Ed{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===this.path?eh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Pd(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(o,t)}),n,r)}async loadAsync(e,t){const n=""===this.path?eh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new Pd(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),o=JSON.parse(i),a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,s,a,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in o)if(o[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a,o,t),l=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,l),s}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new nu).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new Gl).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new nh;for(let i=0,o=e.length;i<o;i++){let o;const a=e[i];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(a);break;default:a.type in Hu?o=Hu[a.type].fromJSON(a,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${a.type}"`)}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),!0===o.isBufferGeometry&&void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new Qd;i.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=bd.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function o(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Nn(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new wd(t);i=new Ad(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=o(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Vl(n.data,n.width,n.height)))}r[n.uuid]=new Qn(e)}else{const e=o(n.url);r[n.uuid]=new Qn(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"==typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:Nn(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new Ad(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],o=r.url;if(Array.isArray(o)){const e=[];for(let t=0,n=o.length;t<n;t++){const n=o[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new Vl(r.data,r.width,r.height)))}n[r.uuid]=new Qn(e)}else{const e=await i(r.url);n[r.uuid]=new Qn(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,o=e.length;i<o;i++){const o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const a=t[o.image],s=a.data;let l;Array.isArray(s)?(l=new xo,6===s.length&&(l.needsUpdate=!0)):(l=s&&s.data?new Vl:new nr,s&&(l.needsUpdate=!0)),l.source=a,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,ih)),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],oh),l.wrapT=n(o.wrap[1],oh)),void 0!==o.format&&(l.format=o.format),void 0!==o.type&&(l.type=o.type),void 0!==o.encoding&&(l.encoding=o.encoding),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,ah)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,ah)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.generateMipmaps&&(l.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(l.userData=o.userData),r[o.uuid]=l}return r}parseObject(e,t,n,r,i){let o,a,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":o=new hl,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new Yn(e.background):o.background=u(e.background)),void 0!==e.environment&&(o.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new dl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new ul(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(o.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new vo(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Vo(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Xd(e.color,e.intensity);break;case"DirectionalLight":o=new Kd(e.color,e.intensity);break;case"PointLight":o=new $d(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Yd(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Ud(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Ld(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new Jd).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),s=c(e.material),o=new Fl(a,s),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),s=c(e.material),o=new so(a,s);break;case"InstancedMesh":a=l(e.geometry),s=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;o=new Jl(a,s,t),o.instanceMatrix=new $l(new Float32Array(n.array),16),void 0!==r&&(o.instanceColor=new $l(new Float32Array(r.array),r.itemSize));break;case"LOD":o=new Dl;break;case"Line":o=new oc(l(e.geometry),c(e.material));break;case"LineLoop":o=new cc(l(e.geometry),c(e.material));break;case"LineSegments":o=new lc(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new mc(l(e.geometry),c(e.material));break;case"Sprite":o=new Al(c(e.material));break;case"Group":o=new tl;break;case"Bone":o=new Ul;break;default:o=new hi}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)o.add(this.parseObject(a[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];o.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=o.getObjectByProperty("uuid",n.object);void 0!==r&&o.addLevel(r,n.distance,n.hysteresis)}}return o}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}const ih={UVMapping:re,CubeReflectionMapping:ie,CubeRefractionMapping:oe,EquirectangularReflectionMapping:ae,EquirectangularRefractionMapping:se,CubeUVReflectionMapping:le},oh={RepeatWrapping:ce,ClampToEdgeWrapping:ue,MirroredRepeatWrapping:de},ah={NearestFilter:he,NearestMipmapNearestFilter:pe,NearestMipmapLinearFilter:me,LinearFilter:ve,LinearMipmapNearestFilter:ye,LinearMipmapLinearFilter:xe};class sh extends Ed{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=_d.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){_d.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}let lh;class ch{static getContext(){return void 0===lh&&(lh=new(window.AudioContext||window.webkitAudioContext)),lh}static setContext(e){lh=e}}class uh extends Ed{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Pd(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);ch.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}}class dh extends Jd{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const r=(new Yn).set(e),i=(new Yn).set(t),o=new dr(r.r,r.g,r.b),a=new dr(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}}class hh extends Jd{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=(new Yn).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const ph=new Ur,fh=new Ur,mh=new Ur;class gh{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new vo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new vo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,mh.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(_n*t.fov*.5)/t.zoom;let o,a;fh.elements[12]=-n,ph.elements[12]=n,o=-i*t.aspect+r,a=i*t.aspect+r,mh.elements[0]=2*t.near/(a-o),mh.elements[8]=(a+o)/(a-o),this.cameraL.projectionMatrix.copy(mh),o=-i*t.aspect-r,a=i*t.aspect-r,mh.elements[0]=2*t.near/(a-o),mh.elements[8]=(a+o)/(a-o),this.cameraR.projectionMatrix.copy(mh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(fh),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ph)}}class vh{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=yh(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=yh();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function yh(){return("undefined"==typeof performance?Date:performance).now()}const bh=new dr,xh=new ur,_h=new dr,wh=new dr;class Sh extends hi{constructor(){super(),this.type="AudioListener",this.context=ch.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new vh}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(bh,xh,_h),wh.set(0,0,-1).applyQuaternion(xh),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(bh.x,e),t.positionY.linearRampToValueAtTime(bh.y,e),t.positionZ.linearRampToValueAtTime(bh.z,e),t.forwardX.linearRampToValueAtTime(wh.x,e),t.forwardY.linearRampToValueAtTime(wh.y,e),t.forwardZ.linearRampToValueAtTime(wh.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(bh.x,bh.y,bh.z),t.setOrientation(wh.x,wh.y,wh.z,n.x,n.y,n.z)}}class Eh extends hi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const kh=new dr,Mh=new ur,Ph=new dr,Th=new dr;class Ch extends Eh{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(kh,Mh,Ph),Th.set(0,0,1).applyQuaternion(Mh);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(kh.x,e),t.positionY.linearRampToValueAtTime(kh.y,e),t.positionZ.linearRampToValueAtTime(kh.z,e),t.orientationX.linearRampToValueAtTime(Th.x,e),t.orientationY.linearRampToValueAtTime(Th.y,e),t.orientationZ.linearRampToValueAtTime(Th.z,e)}else t.setPosition(kh.x,kh.y,kh.z),t.setOrientation(Th.x,Th.y,Th.z)}}class Ah{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Ih{constructor(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){ur.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const o=this._workIndex*i;ur.multiplyQuaternionsFlat(e,o,e,t,e,n),ur.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]+e[n+o]*r}}}const Rh="\\[\\]\\.:\\/",Oh=new RegExp("["+Rh+"]","g"),Dh="[^"+Rh+"]",Lh="[^"+Rh.replace("\\.","")+"]",jh=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Dh)+/(WCOD+)?/.source.replace("WCOD",Lh)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Dh)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Dh)+"$"),zh=["material","materials","bones","map"];class Nh{constructor(e,t,n){this.path=t,this.parsedPath=n||Nh.parseTrackName(t),this.node=Nh.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Nh.Composite(e,t,n):new Nh(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Oh,"")}static parseTrackName(e){const t=jh.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==zh.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Nh.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nh.Composite=class{constructor(e,t,n){const r=n||Nh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Nh.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Nh.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Nh.prototype.GetterByBindingType=[Nh.prototype._getValue_direct,Nh.prototype._getValue_array,Nh.prototype._getValue_arrayElement,Nh.prototype._getValue_toArray],Nh.prototype.SetterByBindingTypeAndVersioning=[[Nh.prototype._setValue_direct,Nh.prototype._setValue_direct_setNeedsUpdate,Nh.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nh.prototype._setValue_array,Nh.prototype._setValue_array_setNeedsUpdate,Nh.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nh.prototype._setValue_arrayElement,Nh.prototype._setValue_arrayElement_setNeedsUpdate,Nh.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nh.prototype._setValue_fromArray,Nh.prototype._setValue_fromArray_setNeedsUpdate,Nh.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Bh{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Sn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a,s=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],d=u.uuid;let h=t[d];if(void 0===h){h=s++,t[d]=h,e.push(u);for(let e=0,t=o;e!==t;++e)i[e].push(new Nh(u,n[e],r[e]))}else if(h<l){a=e[h];const s=--l,c=e[s];t[c.uuid]=h,e[h]=c,t[d]=s,e[s]=u;for(let e=0,t=o;e!==t;++e){const t=i[e],o=t[s];let a=t[h];t[h]=o,void 0===a&&(a=new Nh(u,n[e],r[e])),t[s]=a}}else e[h]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,l=t[s];if(void 0!==l&&l>=i){const o=i++,c=e[o];t[c.uuid]=l,e[l]=c,t[s]=o,e[o]=a;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[l];t[l]=r,t[o]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=e.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<i){const a=--i,s=e[a],c=--o,u=e[c];t[s.uuid]=l,e[l]=s,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[c];t[l]=r,t[a]=i,t.pop()}}else{const i=--o,a=e[i];i>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(u);for(let n=c,r=s.length;n!==r;++n){const r=s[n];u[n]=new Nh(r,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}class Fh{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,o=i.length,a=new Array(o),s={endingStart:Mt,endingEnd:Mt};for(let e=0;e!==o;++e){const t=i[e].createInterpolant(null);a[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_t,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===At)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=n===wt;if(0===e)return-1===i?r:o&&1==(1&i)?t-r:r;if(n===xt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Pt,r.endingEnd=Pt):(r.endingStart=e?this.zeroSlopeAtStart?Pt:Mt:Tt,r.endingEnd=t?this.zeroSlopeAtEnd?Pt:Mt:Tt)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}const Uh=new Float32Array(1);class Vh extends yn{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let e=0;e!==i;++e){const i=r[e],l=i.name;let u=c[l];if(void 0!==u)++u.referenceCount,o[e]=u;else{if(u=o[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new Ih(Nh.create(n,l,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,l),o[e]=u}a[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new cd(new Float32Array(2),new Float32Array(2),1,Uh),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let o="string"==typeof e?bd.findByName(r,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:Ct),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new Fh(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?bd.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let a=0;a!==n;++a)t[a]._update(r,e,i,o);const a=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)a[e].apply(o);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Hh{constructor(e){this.value=e}clone(){return new Hh(void 0===this.value.clone?this.value:this.value.clone())}}let Wh=0;class Gh extends yn{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Wh++}),this.name="",this.usage=an,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let e=0,n=t.length;e<n;e++)this.uniforms.push(t[e].clone());return this}clone(){return(new this.constructor).copy(this)}}class $h extends pl{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class qh{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Kh{constructor(e,t,n=0,r=1/0){this.ray=new Fr(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Jr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return Yh(e,this,n,t),n.sort(Xh),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)Yh(e[r],this,n,t);return n.sort(Xh),n}}function Xh(e,t){return e.distance-t.distance}function Yh(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)Yh(r[e],t,n,!0)}}class Zh{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(En(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Jh{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const Qh=new On;class ep{constructor(e=new On(1/0,1/0),t=new On(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Qh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Qh.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const tp=new dr,np=new dr;class rp{constructor(e=new dr,t=new dr){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){tp.subVectors(e,this.start),np.subVectors(this.end,this.start);const n=np.dot(np);let r=np.dot(tp)/n;return t&&(r=En(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const ip=new dr;class op extends hi{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new qi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,o=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new Ni(r,3));const i=new Ql({fog:!1,toneMapped:!1});this.cone=new lc(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),ip.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ip),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ap=new dr,sp=new Ur,lp=new Ur;class cp extends lc{constructor(e){const t=up(e),n=new qi,r=[],i=[],o=new Yn(0,0,1),a=new Yn(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Ni(r,3)),n.setAttribute("color",new Ni(i,3)),super(n,new Ql({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");lp.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(sp.multiplyMatrices(lp,i.matrixWorld),ap.setFromMatrixPosition(sp),r.setXYZ(n,ap.x,ap.y,ap.z),sp.multiplyMatrices(lp,i.parent.matrixWorld),ap.setFromMatrixPosition(sp),r.setXYZ(n+1,ap.x,ap.y,ap.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function up(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,up(e.children[n]));return t}class dp extends so{constructor(e,t,n){super(new ju(t,4,2),new Mi({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const hp=new dr,pp=new Yn,fp=new Yn;class mp extends hi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new Ou(t);r.rotateY(.5*Math.PI),this.material=new Mi({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Ci(o,3)),this.add(new so(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");pp.copy(this.light.color),fp.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?pp:fp;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(hp.setFromMatrixPosition(this.light.matrixWorld).negate())}}class gp extends lc{constructor(e=10,t=10,n=4473924,r=8947848){n=new Yn(n),r=new Yn(r);const i=t/2,o=e/t,a=e/2,s=[],l=[];for(let e=0,c=0,u=-a;e<=t;e++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);const t=e===i?n:r;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new qi;c.setAttribute("position",new Ni(s,3)),c.setAttribute("color",new Ni(l,3)),super(c,new Ql({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class vp extends lc{constructor(e=10,t=16,n=8,r=64,i=4473924,o=8947848){i=new Yn(i),o=new Yn(o);const a=[],s=[];if(t>1)for(let n=0;n<t;n++){const r=n/t*(2*Math.PI),l=Math.sin(r)*e,c=Math.cos(r)*e;a.push(0,0,0),a.push(l,0,c);const u=1&n?i:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let t=0;t<n;t++){const l=1&t?i:o,c=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c;a.push(n,0,i),s.push(l.r,l.g,l.b),t=(e+1)/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c,a.push(n,0,i),s.push(l.r,l.g,l.b)}}const l=new qi;l.setAttribute("position",new Ni(a,3)),l.setAttribute("color",new Ni(s,3)),super(l,new Ql({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const yp=new dr,bp=new dr,xp=new dr;class _p extends hi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new qi;r.setAttribute("position",new Ni([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new Ql({fog:!1,toneMapped:!1});this.lightPlane=new oc(r,i),this.add(this.lightPlane),r=new qi,r.setAttribute("position",new Ni([0,0,0,0,0,1],3)),this.targetLine=new oc(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),yp.setFromMatrixPosition(this.light.matrixWorld),bp.setFromMatrixPosition(this.light.target.matrixWorld),xp.subVectors(bp,yp),this.lightPlane.lookAt(bp),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(bp),this.targetLine.scale.z=xp.length()}}const wp=new dr,Sp=new go;class Ep extends lc{constructor(e){const t=new qi,n=new Ql({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={};function a(e,t){s(e),s(t)}function s(e){r.push(0,0,0),i.push(0,0,0),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new Ni(r,3)),t.setAttribute("color",new Ni(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const l=new Yn(16755200),c=new Yn(16711680),u=new Yn(43775),d=new Yn(16777215),h=new Yn(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,n,r,i){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,i.r,i.g,i.b),o.setXYZ(41,i.r,i.g,i.b),o.setXYZ(42,i.r,i.g,i.b),o.setXYZ(43,i.r,i.g,i.b),o.setXYZ(44,i.r,i.g,i.b),o.setXYZ(45,i.r,i.g,i.b),o.setXYZ(46,i.r,i.g,i.b),o.setXYZ(47,i.r,i.g,i.b),o.setXYZ(48,i.r,i.g,i.b),o.setXYZ(49,i.r,i.g,i.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Sp.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),kp("c",t,e,Sp,0,0,-1),kp("t",t,e,Sp,0,0,1),kp("n1",t,e,Sp,-1,-1,-1),kp("n2",t,e,Sp,1,-1,-1),kp("n3",t,e,Sp,-1,1,-1),kp("n4",t,e,Sp,1,1,-1),kp("f1",t,e,Sp,-1,-1,1),kp("f2",t,e,Sp,1,-1,1),kp("f3",t,e,Sp,-1,1,1),kp("f4",t,e,Sp,1,1,1),kp("u1",t,e,Sp,.7,1.1,-1),kp("u2",t,e,Sp,-.7,1.1,-1),kp("u3",t,e,Sp,0,2,-1),kp("cf1",t,e,Sp,-1,0,1),kp("cf2",t,e,Sp,1,0,1),kp("cf3",t,e,Sp,0,-1,1),kp("cf4",t,e,Sp,0,1,1),kp("cn1",t,e,Sp,-1,0,-1),kp("cn2",t,e,Sp,1,0,-1),kp("cn3",t,e,Sp,0,-1,-1),kp("cn4",t,e,Sp,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function kp(e,t,n,r,i,o,a){wp.set(i,o,a).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],wp.x,wp.y,wp.z)}}const Mp=new fr;class Pp extends lc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new qi;i.setIndex(new Ci(n,1)),i.setAttribute("position",new Ci(r,3)),super(i,new Ql({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Mp.setFromObject(this.object),Mp.isEmpty())return;const t=Mp.min,n=Mp.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Tp extends lc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new qi;r.setIndex(new Ci(n,1)),r.setAttribute("position",new Ni([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Ql({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Cp extends oc{constructor(e,t=1,n=16776960){const r=n,i=new qi;i.setAttribute("position",new Ni([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new Ql({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=new qi;o.setAttribute("position",new Ni([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),o.computeBoundingSphere(),this.add(new so(o,new Mi({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Ap=new dr;let Ip,Rp;class Op extends hi{constructor(e=new dr(0,0,1),t=new dr(0,0,0),n=1,r=16776960,i=.2*n,o=.2*i){super(),this.type="ArrowHelper",void 0===Ip&&(Ip=new qi,Ip.setAttribute("position",new Ni([0,0,0,0,1,0],3)),Rp=new qc(0,.5,1,5,1),Rp.translate(0,-.5,0)),this.position.copy(t),this.line=new oc(Ip,new Ql({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new so(Rp,new Mi({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Ap.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Ap,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Dp extends lc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new qi;n.setAttribute("position",new Ni(t,3)),n.setAttribute("color",new Ni([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new Ql({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Yn,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Lp{constructor(){this.type="ShapePath",this.color=new Yn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Hc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=t[i],a=t[o],s=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],s=-s,a=t[i],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const n=Pu.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,o,a;const s=[];if(1===r.length)return o=r[0],a=new nu,a.curves=o.curves,s.push(a),s;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],u=[];let d,h,p=[],f=0;u[f]=void 0,p[f]=[];for(let t=0,a=r.length;t<a;t++)o=r[t],d=o.getPoints(),i=n(d),i=e?!i:i,i?(!l&&u[f]&&f++,u[f]={s:new nu,p:d},u[f].s.curves=o.curves,l&&f++,p[f]=[]):p[f].push({h:o,p:d[0]});if(!u[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new nu;i.curves=r.curves,t.push(i)}return t}(r);if(u.length>1){let e=!1,n=0;for(let e=0,t=u.length;e<t;e++)c[e]=[];for(let r=0,i=u.length;r<i;r++){const i=p[r];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<u.length;i++)t(a.p,u[i].p)&&(r!==i&&n++,s?(s=!1,c[i].push(a)):e=!0);s&&c[r].push(a)}}n>0&&!1===e&&(p=c)}for(let e=0,t=u.length;e<t;e++){a=u[e].s,s.push(a),h=p[e];for(let e=0,t=h.length;e<t;e++)a.holes.push(h[e].h)}return s}}const jp=zp();function zp(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(r[e]=0,r[256|e]=32768,i[e]=24,i[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,i[e]=-t-1,i[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,i[e]=13,i[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,i[e]=24,i[256|e]=24):(r[e]=31744,r[256|e]=64512,i[e]=13,i[256|e]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;0==(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,o[e]=t|n}for(let e=1024;e<2048;++e)o[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)a[e]=e<<23;a[31]=1199570944,a[32]=2147483648;for(let e=33;e<63;++e)a[e]=2147483648+(e-32<<23);a[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(s[e]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:a,offsetTable:s}}var Np=Object.freeze({__proto__:null,fromHalfFloat:function(e){const t=e>>10;return jp.uint32View[0]=jp.mantissaTable[jp.offsetTable[t]+(1023&e)]+jp.exponentTable[t],jp.floatView[0]},toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=En(e,-65504,65504),jp.floatView[0]=e;const t=jp.uint32View[0],n=t>>23&511;return jp.baseTable[n]+((8388607&t)>>jp.shiftTable[n])}});class Bp extends co{constructor(e,t,n,r,i,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,n,r,i,o)}}class Fp extends Gc{constructor(e,t,n,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,n,r)}}class Up extends $c{constructor(e,t,n,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,n,r)}}class Vp extends Kc{constructor(e,t,n,r,i,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,n,r,i,o,a)}}class Hp extends qc{constructor(e,t,n,r,i,o,a,s){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,n,r,i,o,a,s)}}class Wp extends Yc{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class Gp extends Au{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class $p extends Ru{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class qp extends Wc{constructor(e,t,n,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,n,r)}}class Kp extends Ou{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class Xp extends Io{constructor(e,t,n,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,n,r)}}class Yp extends Xc{constructor(e,t,n,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,n,r)}}class Zp extends Du{constructor(e,t,n,r,i,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,n,r,i,o)}}class Jp extends Lu{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class Qp extends ju{constructor(e,t,n,r,i,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,n,r,i,o,a)}}class ef extends zu{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class tf extends Nu{constructor(e,t,n,r,i){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,n,r,i)}}class nf extends Bu{constructor(e,t,n,r,i,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,n,r,i,o)}}class rf extends Fu{constructor(e,t,n,r,i){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,n,r,i)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},365:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MapControls:()=>l,OrbitControls:()=>s});var r=n(477);const i={type:"change"},o={type:"start"},a={type:"end"};class s extends r.EventDispatcher{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:r.MOUSE.ROTATE,MIDDLE:r.MOUSE.DOLLY,RIGHT:r.MOUSE.PAN},this.touches={ONE:r.TOUCH.ROTATE,TWO:r.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",q),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),l=s.NONE},this.update=function(){const t=new r.Vector3,o=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),a=o.clone().invert(),m=new r.Vector3,g=new r.Quaternion,v=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(o),u.setFromVector3(t),n.autoRotate&&l===s.NONE&&P(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(u.theta+=d.theta*n.dampingFactor,u.phi+=d.phi*n.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let r=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(r)&&isFinite(y)&&(r<-Math.PI?r+=v:r>Math.PI&&(r-=v),y<-Math.PI?y+=v:y>Math.PI&&(y-=v),u.theta=r<=y?Math.max(r,Math.min(y,u.theta)):u.theta>(r+y)/2?Math.max(r,u.theta):Math.min(y,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=h,u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),!0===n.enableDamping?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),t.setFromSpherical(u),t.applyQuaternion(a),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),p.set(0,0,0)),h=1,!!(f||m.distanceToSquared(n.object.position)>c||8*(1-g.dot(n.object.quaternion))>c)&&(n.dispatchEvent(i),m.copy(n.object.position),g.copy(n.object.quaternion),f=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",K),n.domElement.removeEventListener("pointerdown",V),n.domElement.removeEventListener("pointercancel",G),n.domElement.removeEventListener("wheel",$),n.domElement.removeEventListener("pointermove",H),n.domElement.removeEventListener("pointerup",W),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",q)};const n=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=s.NONE;const c=1e-6,u=new r.Spherical,d=new r.Spherical;let h=1;const p=new r.Vector3;let f=!1;const m=new r.Vector2,g=new r.Vector2,v=new r.Vector2,y=new r.Vector2,b=new r.Vector2,x=new r.Vector2,_=new r.Vector2,w=new r.Vector2,S=new r.Vector2,E=[],k={};function M(){return Math.pow(.95,n.zoomSpeed)}function P(e){d.theta-=e}function T(e){d.phi-=e}const C=function(){const e=new r.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),p.add(e)}}(),A=function(){const e=new r.Vector3;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),p.add(e)}}(),I=function(){const e=new r.Vector3;return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;e.copy(o).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),C(2*t*a/i.clientHeight,n.object.matrix),A(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(C(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),A(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function R(e){n.object.isPerspectiveCamera?h/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(e){n.object.isPerspectiveCamera?h*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(e){m.set(e.clientX,e.clientY)}function L(e){y.set(e.clientX,e.clientY)}function j(){if(1===E.length)m.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);m.set(e,t)}}function z(){if(1===E.length)y.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);y.set(e,t)}}function N(){const e=E[0].pageX-E[1].pageX,t=E[0].pageY-E[1].pageY,n=Math.sqrt(e*e+t*t);_.set(0,n)}function B(e){if(1==E.length)g.set(e.pageX,e.pageY);else{const t=Z(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);g.set(n,r)}v.subVectors(g,m).multiplyScalar(n.rotateSpeed);const t=n.domElement;P(2*Math.PI*v.x/t.clientHeight),T(2*Math.PI*v.y/t.clientHeight),m.copy(g)}function F(e){if(1===E.length)b.set(e.pageX,e.pageY);else{const t=Z(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);b.set(n,r)}x.subVectors(b,y).multiplyScalar(n.panSpeed),I(x.x,x.y),y.copy(b)}function U(e){const t=Z(e),r=e.pageX-t.x,i=e.pageY-t.y,o=Math.sqrt(r*r+i*i);w.set(0,o),S.set(0,Math.pow(w.y/_.y,n.zoomSpeed)),R(S.y),_.copy(w)}function V(e){!1!==n.enabled&&(0===E.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",H),n.domElement.addEventListener("pointerup",W)),function(e){E.push(e)}(e),"touch"===e.pointerType?function(e){switch(Y(e),E.length){case 1:switch(n.touches.ONE){case r.TOUCH.ROTATE:if(!1===n.enableRotate)return;j(),l=s.TOUCH_ROTATE;break;case r.TOUCH.PAN:if(!1===n.enablePan)return;z(),l=s.TOUCH_PAN;break;default:l=s.NONE}break;case 2:switch(n.touches.TWO){case r.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&N(),n.enablePan&&z(),l=s.TOUCH_DOLLY_PAN;break;case r.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&N(),n.enableRotate&&j(),l=s.TOUCH_DOLLY_ROTATE;break;default:l=s.NONE}break;default:l=s.NONE}l!==s.NONE&&n.dispatchEvent(o)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case r.MOUSE.DOLLY:if(!1===n.enableZoom)return;!function(e){_.set(e.clientX,e.clientY)}(e),l=s.DOLLY;break;case r.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;L(e),l=s.PAN}else{if(!1===n.enableRotate)return;D(e),l=s.ROTATE}break;case r.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;D(e),l=s.ROTATE}else{if(!1===n.enablePan)return;L(e),l=s.PAN}break;default:l=s.NONE}l!==s.NONE&&n.dispatchEvent(o)}(e))}function H(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(Y(e),l){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;B(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;F(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&U(e),n.enablePan&&F(e)}(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&U(e),n.enableRotate&&B(e)}(e),n.update();break;default:l=s.NONE}}(e):function(e){switch(l){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){g.set(e.clientX,e.clientY),v.subVectors(g,m).multiplyScalar(n.rotateSpeed);const t=n.domElement;P(2*Math.PI*v.x/t.clientHeight),T(2*Math.PI*v.y/t.clientHeight),m.copy(g),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){w.set(e.clientX,e.clientY),S.subVectors(w,_),S.y>0?R(M()):S.y<0&&O(M()),_.copy(w),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){b.set(e.clientX,e.clientY),x.subVectors(b,y).multiplyScalar(n.panSpeed),I(x.x,x.y),y.copy(b),n.update()}(e)}}(e))}function W(e){X(e),0===E.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",H),n.domElement.removeEventListener("pointerup",W)),n.dispatchEvent(a),l=s.NONE}function G(e){X(e)}function $(e){!1!==n.enabled&&!1!==n.enableZoom&&l===s.NONE&&(e.preventDefault(),n.dispatchEvent(o),function(e){e.deltaY<0?O(M()):e.deltaY>0&&R(M()),n.update()}(e),n.dispatchEvent(a))}function q(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):I(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):I(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?P(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):I(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?P(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):I(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function K(e){!1!==n.enabled&&e.preventDefault()}function X(e){delete k[e.pointerId];for(let t=0;t<E.length;t++)if(E[t].pointerId==e.pointerId)return void E.splice(t,1)}function Y(e){let t=k[e.pointerId];void 0===t&&(t=new r.Vector2,k[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Z(e){const t=e.pointerId===E[0].pointerId?E[1]:E[0];return k[t.pointerId]}n.domElement.addEventListener("contextmenu",K),n.domElement.addEventListener("pointerdown",V),n.domElement.addEventListener("pointercancel",G),n.domElement.addEventListener("wheel",$,{passive:!1}),this.update()}}class l extends s{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=r.MOUSE.PAN,this.mouseButtons.RIGHT=r.MOUSE.ROTATE,this.touches.ONE=r.TOUCH.PAN,this.touches.TWO=r.TOUCH.DOLLY_ROTATE}}},86:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FBXLoader:()=>N});var r=n(477),i=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};try{URL.revokeObjectURL(i(""))}catch(e){i=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var o=Uint8Array,a=Uint16Array,s=Uint32Array,l=new o([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),c=new o([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u=new o([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=function(e,t){for(var n=new a(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new s(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},h=d(l,2),p=h[0],f=h[1];p[28]=258,f[258]=28;for(var m=d(c,0),g=m[0],v=(m[1],new a(32768)),y=0;y<32768;++y){var b=(43690&y)>>>1|(21845&y)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,v[y]=((65280&b)>>>8|(255&b)<<8)>>>1}var x=function(e,t,n){for(var r=e.length,i=0,o=new a(t);i<r;++i)++o[e[i]-1];var s,l=new a(t);for(i=0;i<t;++i)l[i]=l[i-1]+o[i-1]<<1;if(n){s=new a(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],d=t-e[i],h=l[e[i]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)s[v[h]>>>c]=u}else for(s=new a(r),i=0;i<r;++i)e[i]&&(s[i]=v[l[e[i]-1]++]>>>15-e[i]);return s},_=new o(288);for(y=0;y<144;++y)_[y]=8;for(y=144;y<256;++y)_[y]=9;for(y=256;y<280;++y)_[y]=7;for(y=280;y<288;++y)_[y]=8;var w=new o(32);for(y=0;y<32;++y)w[y]=5;var S=x(_,9,1),E=x(w,5,1),k=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},M=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},P=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},T=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new o(0);var i=!t||n,d=!n||n.i;n||(n={}),t||(t=new o(3*r));var h,f=function(e){var n=t.length;if(e>n){var r=new o(Math.max(2*n,e));r.set(t),t=r}},m=n.f||0,v=n.p||0,y=n.b||0,b=n.l,_=n.d,w=n.m,T=n.n,C=8*r;do{if(!b){n.f=m=M(e,v,1);var A=M(e,v+1,3);if(v+=3,!A){var I=e[(h=v,(V=(h/8|0)+(7&h&&1)+4)-4)]|e[V-3]<<8,R=V+I;if(R>r){if(d)throw"unexpected EOF";break}i&&f(y+I),t.set(e.subarray(V,R),y),n.b=y+=I,n.p=v=8*R;continue}if(1==A)b=S,_=E,w=9,T=5;else{if(2!=A)throw"invalid block type";var O=M(e,v,31)+257,D=M(e,v+10,15)+4,L=O+M(e,v+5,31)+1;v+=14;for(var j=new o(L),z=new o(19),N=0;N<D;++N)z[u[N]]=M(e,v+3*N,7);v+=3*D;var B=k(z),F=(1<<B)-1,U=x(z,B,1);for(N=0;N<L;){var V,H=U[M(e,v,F)];if(v+=15&H,(V=H>>>4)<16)j[N++]=V;else{var W=0,G=0;for(16==V?(G=3+M(e,v,3),v+=2,W=j[N-1]):17==V?(G=3+M(e,v,7),v+=3):18==V&&(G=11+M(e,v,127),v+=7);G--;)j[N++]=W}}var $=j.subarray(0,O),q=j.subarray(O);w=k($),T=k(q),b=x($,w,1),_=x(q,T,1)}if(v>C){if(d)throw"unexpected EOF";break}}i&&f(y+131072);for(var K=(1<<w)-1,X=(1<<T)-1,Y=v;;Y=v){var Z=(W=b[P(e,v)&K])>>>4;if((v+=15&W)>C){if(d)throw"unexpected EOF";break}if(!W)throw"invalid length/literal";if(Z<256)t[y++]=Z;else{if(256==Z){Y=v,b=null;break}var J=Z-254;if(Z>264){var Q=l[N=Z-257];J=M(e,v,(1<<Q)-1)+p[N],v+=Q}var ee=_[P(e,v)&X],te=ee>>>4;if(!ee)throw"invalid distance";if(v+=15&ee,q=g[te],te>3&&(Q=c[te],q+=P(e,v)&(1<<Q)-1,v+=Q),v>C){if(d)throw"unexpected EOF";break}i&&f(y+131072);for(var ne=y+J;y<ne;y+=4)t[y]=t[y-q],t[y+1]=t[y+1-q],t[y+2]=t[y+2-q],t[y+3]=t[y+3-q];y=ne}}n.l=b,n.p=Y,n.b=y,b&&(m=1,n.m=w,n.d=_,n.n=T)}while(!m);return y==t.length?t:function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof a?a:e instanceof s?s:o)(n-t);return r.set(e.subarray(t,n)),r}(t,0,y)},C=new o(0),A=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};var I="undefined"!=typeof TextDecoder&&new TextDecoder;try{I.decode(C,{stream:!0})}catch(e){}function R(e,t,n){const r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;let i=e,o=r,a=Math.floor((i+o)/2);for(;t<n[a]||t>=n[a+1];)t<n[a]?o=a:i=a,a=Math.floor((i+o)/2);return a}function O(e,t){let n=1;for(let t=2;t<=e;++t)n*=t;let r=1;for(let e=2;e<=t;++e)r*=e;for(let n=2;n<=e-t;++n)r*=n;return n/r}class D extends r.Curve{constructor(e,t,n,i,o){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(let e=0;e<n.length;++e){const t=n[e];this.controlPoints[e]=new r.Vector4(t.x,t.y,t.z,t.w)}}getPoint(e,t=new r.Vector3){const n=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=function(e,t,n,i){const o=R(e,i,t),a=function(e,t,n,r){const i=[],o=[],a=[];i[0]=1;for(let s=1;s<=n;++s){o[s]=t-r[e+1-s],a[s]=r[e+s]-t;let n=0;for(let e=0;e<s;++e){const t=a[e+1],r=o[s-e],l=i[e]/(t+r);i[e]=n+t*l,n=r*l}i[s]=n}return i}(o,i,e,t),s=new r.Vector4(0,0,0,0);for(let t=0;t<=e;++t){const r=n[o-e+t],i=a[t],l=r.w*i;s.x+=r.x*l,s.y+=r.y*l,s.z+=r.z*l,s.w+=r.w*i}return s}(this.degree,this.knots,this.controlPoints,i);return 1!==o.w&&o.divideScalar(o.w),n.set(o.x,o.y,o.z)}getTangent(e,t=new r.Vector3){const n=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=function(e,t,n,i,o){const a=function(e,t,n,i,o){const a=o<e?o:e,s=[],l=R(e,i,t),c=function(e,t,n,r,i){const o=[];for(let e=0;e<=n;++e)o[e]=0;const a=[];for(let e=0;e<=r;++e)a[e]=o.slice(0);const s=[];for(let e=0;e<=n;++e)s[e]=o.slice(0);s[0][0]=1;const l=o.slice(0),c=o.slice(0);for(let r=1;r<=n;++r){l[r]=t-i[e+1-r],c[r]=i[e+r]-t;let n=0;for(let e=0;e<r;++e){const t=c[e+1],i=l[r-e];s[r][e]=t+i;const o=s[e][r-1]/s[r][e];s[e][r]=n+t*o,n=i*o}s[r][r]=n}for(let e=0;e<=n;++e)a[0][e]=s[e][n];for(let e=0;e<=n;++e){let t=0,i=1;const l=[];for(let e=0;e<=n;++e)l[e]=o.slice(0);l[0][0]=1;for(let o=1;o<=r;++o){let r=0;const c=e-o,u=n-o;e>=o&&(l[i][0]=l[t][0]/s[u+1][c],r=l[i][0]*s[c][u]);const d=e-1<=u?o-1:n-e;for(let e=c>=-1?1:-c;e<=d;++e)l[i][e]=(l[t][e]-l[t][e-1])/s[u+1][c+e],r+=l[i][e]*s[c+e][u];e<=u&&(l[i][o]=-l[t][o-1]/s[u+1][e],r+=l[i][o]*s[e][u]),a[o][e]=r;const h=t;t=i,i=h}}let u=n;for(let e=1;e<=r;++e){for(let t=0;t<=n;++t)a[e][t]*=u;u*=n-e}return a}(l,i,e,a,t),u=[];for(let e=0;e<n.length;++e){const t=n[e].clone(),r=t.w;t.x*=r,t.y*=r,t.z*=r,u[e]=t}for(let t=0;t<=a;++t){const n=u[l-e].clone().multiplyScalar(c[t][0]);for(let r=1;r<=e;++r)n.add(u[l-e+r].clone().multiplyScalar(c[t][r]));s[t]=n}for(let e=a+1;e<=o+1;++e)s[e]=new r.Vector4(0,0,0);return s}(e,t,n,i,o);return function(e){const t=e.length,n=[],i=[];for(let o=0;o<t;++o){const t=e[o];n[o]=new r.Vector3(t.x,t.y,t.z),i[o]=t.w}const o=[];for(let e=0;e<t;++e){const t=n[e].clone();for(let n=1;n<=e;++n)t.sub(o[e-n].clone().multiplyScalar(O(e,n)*i[n]));o[e]=t.divideScalar(i[0])}return o}(a)}(this.degree,this.knots,this.controlPoints,i,1);return n.copy(o[1]).normalize(),n}}let L,j,z;class N extends r.Loader{constructor(e){super(e)}load(e,t,n,i){const o=this,a=""===o.path?r.LoaderUtils.extractUrlBase(e):o.path,s=new r.FileLoader(this.manager);s.setPath(o.path),s.setResponseType("arraybuffer"),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,(function(n){try{t(o.parse(n,a))}catch(t){i?i(t):console.error(t),o.manager.itemError(e)}}),n,i)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===te(e,0,t.length)}(e))L=(new H).parse(e);else{const t=te(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(t){const r=e[t-1];return e=e.slice(n+t),n++,r}for(let e=0;e<t.length;++e)if(r(1)===t[e])return!1;return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if($(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+$(t));L=(new V).parse(t)}const n=new r.TextureLoader(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new B(n,this.manager).parse(L)}}class B{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){j=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),i=(new F).parse(r);return this.parseScene(r,i,n),z}parseConnections(){const e=new Map;return"Connections"in L&&L.Connections.connections.forEach((function(t){const n=t[0],r=t[1],i=t[2];e.has(n)||e.set(n,{parents:[],children:[]});const o={ID:r,relationship:i};e.get(n).parents.push(o),e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:n,relationship:i};e.get(r).children.push(a)})),e}parseImages(){const e={},t={};if("Video"in L.Objects){const n=L.Objects.Video;for(const r in n){const i=n[r];if(e[parseInt(r)]=i.RelativeFilename||i.Filename,"Content"in i){const e=i.Content instanceof ArrayBuffer&&i.Content.byteLength>0,o="string"==typeof i.Content&&""!==i.Content;if(e||o){const e=this.parseImage(n[r]);t[i.RelativeFilename||i.Filename]=e}}}}for(const n in e){const r=e[n];void 0!==t[r]?e[n]=t[r]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();let i;switch(r){case"bmp":i="image/bmp";break;case"jpg":case"jpeg":i="image/jpeg";break;case"png":i="image/png";break;case"tif":i="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),i="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof t)return"data:"+i+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:i}))}}parseTextures(e){const t=new Map;if("Texture"in L.Objects){const n=L.Objects.Texture;for(const r in n){const i=this.parseTexture(n[r],e);t.set(parseInt(r),i)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const i=e.WrapModeU,o=e.WrapModeV,a=void 0!==i?i.value:0,s=void 0!==o?o.value:0;if(n.wrapS=0===a?r.RepeatWrapping:r.ClampToEdgeWrapping,n.wrapT=0===s?r.RepeatWrapping:r.ClampToEdgeWrapping,"Scaling"in e){const t=e.Scaling.value;n.repeat.x=t[0],n.repeat.y=t[1]}if("Translation"in e){const t=e.Translation.value;n.offset.x=t[0],n.offset.y=t[1]}return n}loadTexture(e,t){let n;const i=this.textureLoader.path,o=j.get(e.id).children;let a;void 0!==o&&o.length>0&&void 0!==t[o[0].ID]&&(n=t[o[0].ID],0!==n.indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));const s=e.FileName.slice(-3).toLowerCase();if("tga"===s){const t=this.manager.getHandler(".tga");null===t?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),a=new r.Texture):(t.setPath(this.textureLoader.path),a=t.load(n))}else"psd"===s?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),a=new r.Texture):a=this.textureLoader.load(n);return this.textureLoader.setPath(i),a}parseMaterials(e){const t=new Map;if("Material"in L.Objects){const n=L.Objects.Material;for(const r in n){const i=this.parseMaterial(n[r],e);null!==i&&t.set(parseInt(r),i)}}return t}parseMaterial(e,t){const n=e.id,i=e.attrName;let o=e.ShadingModel;if("object"==typeof o&&(o=o.value),!j.has(n))return null;const a=this.parseParameters(e,t,n);let s;switch(o.toLowerCase()){case"phong":s=new r.MeshPhongMaterial;break;case"lambert":s=new r.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),s=new r.MeshPhongMaterial}return s.setValues(a),s.name=i,s}parseParameters(e,t,n){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=(new r.Color).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(i.color=(new r.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=(new r.Color).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(i.emissive=(new r.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=(new r.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=(new r.Color).fromArray(e.SpecularColor.value));const o=this;return j.get(n).children.forEach((function(e){const n=e.relationship;switch(n){case"Bump":i.bumpMap=o.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":i.aoMap=o.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=o.getTexture(t,e.ID),void 0!==i.map&&(i.map.encoding=r.sRGBEncoding);break;case"DisplacementColor":i.displacementMap=o.getTexture(t,e.ID);break;case"EmissiveColor":i.emissiveMap=o.getTexture(t,e.ID),void 0!==i.emissiveMap&&(i.emissiveMap.encoding=r.sRGBEncoding);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=o.getTexture(t,e.ID);break;case"ReflectionColor":i.envMap=o.getTexture(t,e.ID),void 0!==i.envMap&&(i.envMap.mapping=r.EquirectangularReflectionMapping,i.envMap.encoding=r.sRGBEncoding);break;case"SpecularColor":i.specularMap=o.getTexture(t,e.ID),void 0!==i.specularMap&&(i.specularMap.encoding=r.sRGBEncoding);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=o.getTexture(t,e.ID),i.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n)}})),i}getTexture(e,t){return"LayeredTexture"in L.Objects&&t in L.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=j.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in L.Objects){const n=L.Objects.Deformer;for(const r in n){const i=n[r],o=j.get(parseInt(r));if("Skin"===i.attrType){const t=this.parseSkeleton(o,n);t.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=o.parents[0].ID,e[r]=t}else if("BlendShape"===i.attrType){const e={id:r};e.rawTargets=this.parseMorphTargets(o,n),e.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach((function(e){const i=t[e.ID];if("Cluster"!==i.attrType)return;const o={ID:e.ID,indices:[],weights:[],transformLink:(new r.Matrix4).fromArray(i.TransformLink.a)};"Indexes"in i&&(o.indices=i.Indexes.a,o.weights=i.Weights.a),n.push(o)})),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let r=0;r<e.children.length;r++){const i=e.children[r],o=t[i.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;a.geoID=j.get(parseInt(i.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(a)}return n}parseScene(e,t,n){z=new r.Group;const i=this.parseModels(e.skeletons,t,n),o=L.Objects.Model,a=this;i.forEach((function(e){const t=o[e.ID];a.setLookAtProperties(e,t),j.get(e.ID).parents.forEach((function(t){const n=i.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&z.add(e)})),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),z.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=J(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const s=(new U).parse();1===z.children.length&&z.children[0].isGroup&&(z.children[0].animations=s,z=z.children[0]),z.animations=s}parseModels(e,t,n){const i=new Map,o=L.Objects.Model;for(const a in o){const s=parseInt(a),l=o[a],c=j.get(s);let u=this.buildSkeleton(c,e,s,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,n);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new r.Bone;break;default:u=new r.Group}u.name=l.attrName?r.PropertyBinding.sanitizeNodeName(l.attrName):"",u.ID=s}this.getTransformData(u,l),i.set(s,u)}return i}buildSkeleton(e,t,n,i){let o=null;return e.parents.forEach((function(e){for(const a in t){const s=t[a];s.rawBones.forEach((function(t,a){if(t.ID===e.ID){const e=o;o=new r.Bone,o.matrixWorld.copy(t.transformLink),o.name=i?r.PropertyBinding.sanitizeNodeName(i):"",o.ID=n,s.bones[a]=o,null!==e&&o.add(e)}}))}})),o}createCamera(e){let t,n;if(e.children.forEach((function(e){const t=L.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new r.Object3D;else{let e=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(e=1);let i=1;void 0!==n.NearPlane&&(i=n.NearPlane.value/1e3);let o=1e3;void 0!==n.FarPlane&&(o=n.FarPlane.value/1e3);let a=window.innerWidth,s=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(a=n.AspectWidth.value,s=n.AspectHeight.value);const l=a/s;let c=45;void 0!==n.FieldOfView&&(c=n.FieldOfView.value);const u=n.FocalLength?n.FocalLength.value:null;switch(e){case 0:t=new r.PerspectiveCamera(c,l,i,o),null!==u&&t.setFocalLength(u);break;case 1:t=new r.OrthographicCamera(-a/2,a/2,s/2,-s/2,i,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new r.Object3D}}return t}createLight(e){let t,n;if(e.children.forEach((function(e){const t=L.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new r.Object3D;else{let e;e=void 0===n.LightType?0:n.LightType.value;let i=16777215;void 0!==n.Color&&(i=(new r.Color).fromArray(n.Color.value));let o=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(o=0);let a=0;void 0!==n.FarAttenuationEnd&&(a=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);const s=1;switch(e){case 0:t=new r.PointLight(i,o,a,s);break;case 1:t=new r.DirectionalLight(i,o);break;case 2:let e=Math.PI/3;void 0!==n.InnerAngle&&(e=r.MathUtils.degToRad(n.InnerAngle.value));let l=0;void 0!==n.OuterAngle&&(l=r.MathUtils.degToRad(n.OuterAngle.value),l=Math.max(l,1)),t=new r.SpotLight(i,o,a,e,l,s);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new r.PointLight(i,o)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,n){let i,o=null,a=null;const s=[];return e.children.forEach((function(e){t.has(e.ID)&&(o=t.get(e.ID)),n.has(e.ID)&&s.push(n.get(e.ID))})),s.length>1?a=s:s.length>0?a=s[0]:(a=new r.MeshPhongMaterial({color:13421772}),s.push(a)),"color"in o.attributes&&s.forEach((function(e){e.vertexColors=!0})),o.FBX_Deformer?(i=new r.SkinnedMesh(o,a),i.normalizeSkinWeights()):i=new r.Mesh(o,a),i}createCurve(e,t){const n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),i=new r.LineBasicMaterial({color:3342591,linewidth:1});return new r.Line(n,i)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?Q(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&j.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const n=L.Objects.Model[t.ID];if("Lcl_Translation"in n){const t=n.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),z.add(e.target)):e.lookAt((new r.Vector3).fromArray(t))}}}))}bindSkeleton(e,t,n){const i=this.parsePoseNodes();for(const o in e){const a=e[o];j.get(parseInt(a.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;j.get(t).parents.forEach((function(e){n.has(e.ID)&&n.get(e.ID).bind(new r.Skeleton(a.bones),i[e.ID])}))}}))}}parsePoseNodes(){const e={};if("Pose"in L.Objects){const t=L.Objects.Pose;for(const n in t)if("BindPose"===t[n].attrType&&t[n].NbPoseNodes>0){const i=t[n].PoseNode;Array.isArray(i)?i.forEach((function(t){e[t.Node]=(new r.Matrix4).fromArray(t.Matrix.a)})):e[i.Node]=(new r.Matrix4).fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in L&&"AmbientColor"in L.GlobalSettings){const e=L.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],i=e[2];if(0!==t||0!==n||0!==i){const e=new r.Color(t,n,i);z.add(new r.AmbientLight(e,1))}}}}class F{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in L.Objects){const n=L.Objects.Geometry;for(const r in n){const i=j.get(parseInt(r)),o=this.parseGeometry(i,n[r],e);t.set(parseInt(r),o)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const r=n.skeletons,i=[],o=e.parents.map((function(e){return L.Objects.Model[e.ID]}));if(0===o.length)return;const a=e.children.reduce((function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e}),null);e.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&i.push(n.morphTargets[e.ID])}));const s=o[0],l={};"RotationOrder"in s&&(l.eulerOrder=Q(s.RotationOrder.value)),"InheritType"in s&&(l.inheritType=parseInt(s.InheritType.value)),"GeometricTranslation"in s&&(l.translation=s.GeometricTranslation.value),"GeometricRotation"in s&&(l.rotation=s.GeometricRotation.value),"GeometricScaling"in s&&(l.scale=s.GeometricScaling.value);const c=J(l);return this.genGeometry(t,a,i,c)}genGeometry(e,t,n,i){const o=new r.BufferGeometry;e.attrName&&(o.name=e.attrName);const a=this.parseGeoNode(e,t),s=this.genBuffers(a),l=new r.Float32BufferAttribute(s.vertex,3);if(l.applyMatrix4(i),o.setAttribute("position",l),s.colors.length>0&&o.setAttribute("color",new r.Float32BufferAttribute(s.colors,3)),t&&(o.setAttribute("skinIndex",new r.Uint16BufferAttribute(s.weightsIndices,4)),o.setAttribute("skinWeight",new r.Float32BufferAttribute(s.vertexWeights,4)),o.FBX_Deformer=t),s.normal.length>0){const e=(new r.Matrix3).getNormalMatrix(i),t=new r.Float32BufferAttribute(s.normal,3);t.applyNormalMatrix(e),o.setAttribute("normal",t)}if(s.uvs.forEach((function(e,t){let n="uv"+(t+1).toString();0===t&&(n="uv"),o.setAttribute(n,new r.Float32BufferAttribute(s.uvs[t],2))})),a.material&&"AllSame"!==a.material.mappingType){let e=s.materialIndex[0],t=0;if(s.materialIndex.forEach((function(n,r){n!==e&&(o.addGroup(t,r-t,e),e=n,t=r)})),o.groups.length>0){const t=o.groups[o.groups.length-1],n=t.start+t.count;n!==s.materialIndex.length&&o.addGroup(n,s.materialIndex.length-n,e)}0===o.groups.length&&o.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(o,e,n,i),o}parseGeoNode(e,t){const n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})}))}))),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,r=0,i=!1,o=[],a=[],s=[],l=[],c=[],u=[];const d=this;return e.vertexIndices.forEach((function(h,p){let f,m=!1;h<0&&(h^=-1,m=!0);let g=[],v=[];if(o.push(3*h,3*h+1,3*h+2),e.color){const t=X(p,n,h,e.color);s.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[h]&&e.weightTable[h].forEach((function(e){v.push(e.weight),g.push(e.id)})),v.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);const e=[0,0,0,0],t=[0,0,0,0];v.forEach((function(n,r){let i=n,o=g[r];t.forEach((function(t,n,r){if(i>t){r[n]=i,i=t;const a=e[n];e[n]=o,o=a}}))})),g=e,v=t}for(;v.length<4;)v.push(0),g.push(0);for(let e=0;e<4;++e)c.push(v[e]),u.push(g[e])}if(e.normal){const t=X(p,n,h,e.normal);a.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(f=X(p,n,h,e.material)[0],f<0&&(d.negativeMaterialIndices=!0,f=0)),e.uv&&e.uv.forEach((function(e,t){const r=X(p,n,h,e);void 0===l[t]&&(l[t]=[]),l[t].push(r[0]),l[t].push(r[1])})),r++,m&&(r>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),d.genFace(t,e,o,f,a,s,l,c,u,r),n++,r=0,o=[],a=[],s=[],l=[],c=[],u=[])})),t}genFace(e,t,n,r,i,o,a,s,l,c){for(let u=2;u<c;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(u-1)]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+2]]),e.vertex.push(t.vertexPositions[n[3*u]]),e.vertex.push(t.vertexPositions[n[3*u+1]]),e.vertex.push(t.vertexPositions[n[3*u+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(u-1)]),e.vertexWeights.push(s[4*(u-1)+1]),e.vertexWeights.push(s[4*(u-1)+2]),e.vertexWeights.push(s[4*(u-1)+3]),e.vertexWeights.push(s[4*u]),e.vertexWeights.push(s[4*u+1]),e.vertexWeights.push(s[4*u+2]),e.vertexWeights.push(s[4*u+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(u-1)]),e.weightsIndices.push(l[4*(u-1)+1]),e.weightsIndices.push(l[4*(u-1)+2]),e.weightsIndices.push(l[4*(u-1)+3]),e.weightsIndices.push(l[4*u]),e.weightsIndices.push(l[4*u+1]),e.weightsIndices.push(l[4*u+2]),e.weightsIndices.push(l[4*u+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(u-1)]),e.colors.push(o[3*(u-1)+1]),e.colors.push(o[3*(u-1)+2]),e.colors.push(o[3*u]),e.colors.push(o[3*u+1]),e.colors.push(o[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(u-1)]),e.normal.push(i[3*(u-1)+1]),e.normal.push(i[3*(u-1)+2]),e.normal.push(i[3*u]),e.normal.push(i[3*u+1]),e.normal.push(i[3*u+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(a[n][0]),e.uvs[n].push(a[n][1]),e.uvs[n].push(a[n][2*(u-1)]),e.uvs[n].push(a[n][2*(u-1)+1]),e.uvs[n].push(a[n][2*u]),e.uvs[n].push(a[n][2*u+1])}))}addMorphTargets(e,t,n,r){if(0===n.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const i=this;n.forEach((function(n){n.rawTargets.forEach((function(n){const o=L.Objects.Geometry[n.geoID];void 0!==o&&i.genMorphGeometry(e,t,o,r,n.name)}))}))}genMorphGeometry(e,t,n,i,o){const a=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==n.Vertices?n.Vertices.a:[],l=void 0!==n.Indexes?n.Indexes.a:[],c=3*e.attributes.position.count,u=new Float32Array(c);for(let e=0;e<l.length;e++){const t=3*l[e];u[t]=s[3*e],u[t+1]=s[3*e+1],u[t+2]=s[3*e+2]}const d={vertexIndices:a,vertexPositions:u},h=this.genBuffers(d),p=new r.Float32BufferAttribute(h.vertex,3);p.name=o||n.attrName,p.applyMatrix4(i),e.morphAttributes.position.push(p)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a;let i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a;let i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a;let i=[];return"IndexToDirect"===n&&(i=e.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const r=e.Materials.a,i=[];for(let e=0;e<r.length;++e)i.push(e);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new r.BufferGeometry;const n=t-1,i=e.KnotVector.a,o=[],a=e.Points.a;for(let e=0,t=a.length;e<t;e+=4)o.push((new r.Vector4).fromArray(a,e));let s,l;if("Closed"===e.Form)o.push(o[0]);else if("Periodic"===e.Form){s=n,l=i.length-1-s;for(let e=0;e<n;++e)o.push(o[e])}const c=new D(n,i,o,s,l).getPoints(12*o.length);return(new r.BufferGeometry).setFromPoints(c)}}class U{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const n in t){const r=t[n],i=this.addClip(r);e.push(i)}return e}parseClips(){if(void 0===L.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=L.Objects.AnimationCurveNode,t=new Map;for(const n in e){const r=e[n];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){const e={id:r.id,attr:r.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=L.Objects.AnimationCurve;for(const n in t){const r={id:t[n].id,times:t[n].KeyTime.a.map(q),values:t[n].KeyValueFloat.a},i=j.get(r.id);if(void 0!==i){const t=i.parents[0].ID,n=i.parents[0].relationship;n.match(/X/)?e.get(t).curves.x=r:n.match(/Y/)?e.get(t).curves.y=r:n.match(/Z/)?e.get(t).curves.z=r:n.match(/d|DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=r)}}}parseAnimationLayers(e){const t=L.Objects.AnimationLayer,n=new Map;for(const i in t){const t=[],o=j.get(parseInt(i));void 0!==o&&(o.children.forEach((function(n,i){if(e.has(n.ID)){const o=e.get(n.ID);if(void 0!==o.curves.x||void 0!==o.curves.y||void 0!==o.curves.z){if(void 0===t[i]){const e=j.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const o=L.Objects.Model[e.toString()];if(void 0===o)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",n);const a={modelName:o.attrName?r.PropertyBinding.sanitizeNodeName(o.attrName):"",ID:o.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};z.traverse((function(e){e.ID===o.id&&(a.transform=e.matrix,e.userData.transformData&&(a.eulerOrder=e.userData.transformData.eulerOrder))})),a.transform||(a.transform=new r.Matrix4),"PreRotation"in o&&(a.preRotation=o.PreRotation.value),"PostRotation"in o&&(a.postRotation=o.PostRotation.value),t[i]=a}}t[i]&&(t[i][o.attr]=o)}else if(void 0!==o.curves.morph){if(void 0===t[i]){const e=j.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,o=j.get(e).parents[0].ID,a=j.get(o).parents[0].ID,s=j.get(a).parents[0].ID,l=L.Objects.Model[s],c={modelName:l.attrName?r.PropertyBinding.sanitizeNodeName(l.attrName):"",morphName:L.Objects.Deformer[e].attrName};t[i]=c}t[i][o.attr]=o}}})),n.set(parseInt(i),t))}return n}parseAnimStacks(e){const t=L.Objects.AnimationStack,n={};for(const r in t){const i=j.get(parseInt(r)).children;i.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(i[0].ID);n[r]={name:t[r].attrName,layer:o}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new r.AnimationClip(e.name,-1,t)}generateTracks(e){const t=[];let n=new r.Vector3,i=new r.Quaternion,o=new r.Vector3;if(e.transform&&e.transform.decompose(n,i,o),n=n.toArray(),i=(new r.Euler).setFromQuaternion(i,e.eulerOrder).toArray(),o=o.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const r=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==r&&t.push(r)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const n=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);void 0!==n&&t.push(n)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.S.curves,o,"scale");void 0!==n&&t.push(n)}if(void 0!==e.DeformPercent){const n=this.generateMorphTrack(e);void 0!==n&&t.push(n)}return t}generateVectorTrack(e,t,n,i){const o=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(o,t,n);return new r.VectorKeyframeTrack(e+"."+i,o,a)}generateRotationTrack(e,t,n,i,o,a){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(r.MathUtils.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(r.MathUtils.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(r.MathUtils.degToRad));const s=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(s,t,n);void 0!==i&&((i=i.map(r.MathUtils.degToRad)).push(a),i=(new r.Euler).fromArray(i),i=(new r.Quaternion).setFromEuler(i)),void 0!==o&&((o=o.map(r.MathUtils.degToRad)).push(a),o=(new r.Euler).fromArray(o),o=(new r.Quaternion).setFromEuler(o).invert());const c=new r.Quaternion,u=new r.Euler,d=[];for(let e=0;e<l.length;e+=3)u.set(l[e],l[e+1],l[e+2],a),c.setFromEuler(u),void 0!==i&&c.premultiply(i),void 0!==o&&c.multiply(o),c.toArray(d,e/3*4);return new r.QuaternionKeyframeTrack(e+".quaternion",s,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map((function(e){return e/100})),i=z.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new r.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+i+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,n=t[0];for(let r=1;r<t.length;r++){const i=t[r];i!==n&&(t[e]=i,n=i,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,n){const r=n,i=[];let o=-1,a=-1,s=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){const e=t.x.values[o];i.push(e),r[0]=e}else i.push(r[0]);if(-1!==a){const e=t.y.values[a];i.push(e),r[1]=e}else i.push(r[1]);if(-1!==s){const e=t.z.values[s];i.push(e),r[2]=e}else i.push(r[2])})),i}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],r=e.values[t]-n,i=Math.abs(r);if(i>=180){const o=i/180,a=r/o;let s=n+a;const l=e.times[t-1],c=(e.times[t]-l)/o;let u=l+c;const d=[],h=[];for(;u<e.times[t];)d.push(u),u+=c,h.push(s),s+=a;e.times=ne(e.times,t,d),e.values=ne(e.values,t,h)}}}}class V{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new G,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){const i=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(i||o)return;const a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,n[++r]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in a?("PoseNode"===n?a.PoseNode.push(i):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==o.id&&(a[n][o.id]=i)):"number"==typeof o.id?(a[n]={},a[n][o.id]=i):"Properties70"!==n&&(a[n]="PoseNode"===n?[i]:i),"number"==typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}parseNodeProperty(e,t,n){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){const e=i.split(",").slice(1),t=parseInt(e[0]),n=parseInt(e[1]);let a=i.split(",").slice(3);a=a.map((function(e){return e.trim().replace(/^"/,"")})),r="connections",i=[t,n],function(e,t){for(let n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}(i,a),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=i),r in o&&Array.isArray(o[r])?o[r].push(i):"a"!==r?o[r]=i:o.a=i,this.setCurrentProp(o,r),"a"===r&&","!==i.slice(-1)&&(o.a=ee(i))}else this.parseNodeSpecialProperty(e,r,i)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=ee(t.a))}parseNodeSpecialProperty(e,t,n){const r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],o=r[1],a=r[2],s=r[3];let l=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=ee(l)}this.getPrevNode()[i]={type:o,type2:a,flag:s,value:l},this.setCurrentProp(this.getPrevNode(),i)}}class H{parse(e){const t=new W(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const r=new G;for(;!this.endOfContent(t);){const e=this.parseNode(t,n);null!==e&&r.add(e.name,e)}return r}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(0===r)return null;const s=[];for(let t=0;t<i;t++)s.push(this.parseProperty(e));const l=s.length>0?s[0]:"",c=s.length>1?s[1]:"",u=s.length>2?s[2]:"";for(n.singleProperty=1===i&&e.getOffset()===r;r>e.getOffset();){const r=this.parseNode(e,t);null!==r&&this.parseSubNode(a,n,r)}return n.propertyList=s,"number"==typeof l&&(n.id=l),""!==c&&(n.attrName=c),""!==u&&(n.attrType=u),""!==a&&(n.name=a),n}parseSubNode(e,t,n){if(!0===n.singleProperty){const e=n.propertyList[0];Array.isArray(e)?(t[n.name]=n,n.a=e):t[n.name]=e}else if("Connections"===e&&"C"===n.name){const e=[];n.propertyList.forEach((function(t,n){0!==n&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===n.name)Object.keys(n).forEach((function(e){t[e]=n[e]}));else if("Properties70"===e&&"P"===n.name){let e=n.propertyList[0],r=n.propertyList[1];const i=n.propertyList[2],o=n.propertyList[3];let a;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===r.indexOf("Lcl ")&&(r=r.replace("Lcl ","Lcl_")),a="Color"===r||"ColorRGB"===r||"Vector"===r||"Vector3D"===r||0===r.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[e]={type:r,type2:i,flag:o,value:a}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),i=e.getUint32(),o=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const a=function(e,t){return T((A(e),e.subarray(2,-4)),t)}(new Uint8Array(e.getArrayBuffer(o))),s=new W(a.buffer);switch(t){case"b":case"c":return s.getBooleanArray(r);case"d":return s.getFloat64Array(r);case"f":return s.getFloat32Array(r);case"i":return s.getInt32Array(r);case"l":return s.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class W{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1==(1&this.getUint8())}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let n=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const r=n.indexOf(0);return r>=0&&(n=new Uint8Array(this.dv.buffer,t,r)),this._textDecoder.decode(n)}}class G{add(e,t){this[e]=t}}function $(e){const t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function q(e){return e/46186158e3}const K=[];function X(e,t,n,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);const o=i*r.dataSize,a=o+r.dataSize;return function(e,t,n,r){for(let i=n,o=0;i<r;i++,o++)e[o]=t[i];return e}(K,r.buffer,o,a)}const Y=new r.Euler,Z=new r.Vector3;function J(e){const t=new r.Matrix4,n=new r.Matrix4,i=new r.Matrix4,o=new r.Matrix4,a=new r.Matrix4,s=new r.Matrix4,l=new r.Matrix4,c=new r.Matrix4,u=new r.Matrix4,d=new r.Matrix4,h=new r.Matrix4,p=new r.Matrix4,f=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(Z.fromArray(e.translation)),e.preRotation){const t=e.preRotation.map(r.MathUtils.degToRad);t.push(e.eulerOrder||r.Euler.DEFAULT_ORDER),n.makeRotationFromEuler(Y.fromArray(t))}if(e.rotation){const t=e.rotation.map(r.MathUtils.degToRad);t.push(e.eulerOrder||r.Euler.DEFAULT_ORDER),i.makeRotationFromEuler(Y.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(r.MathUtils.degToRad);t.push(e.eulerOrder||r.Euler.DEFAULT_ORDER),o.makeRotationFromEuler(Y.fromArray(t)),o.invert()}e.scale&&a.scale(Z.fromArray(e.scale)),e.scalingOffset&&l.setPosition(Z.fromArray(e.scalingOffset)),e.scalingPivot&&s.setPosition(Z.fromArray(e.scalingPivot)),e.rotationOffset&&c.setPosition(Z.fromArray(e.rotationOffset)),e.rotationPivot&&u.setPosition(Z.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(h.copy(e.parentMatrix),d.copy(e.parentMatrixWorld));const m=n.clone().multiply(i).multiply(o),g=new r.Matrix4;g.extractRotation(d);const v=new r.Matrix4;v.copyPosition(d);const y=v.clone().invert().multiply(d),b=g.clone().invert().multiply(y),x=a,_=new r.Matrix4;if(0===f)_.copy(g).multiply(m).multiply(b).multiply(x);else if(1===f)_.copy(g).multiply(b).multiply(m).multiply(x);else{const e=(new r.Matrix4).scale((new r.Vector3).setFromMatrixScale(h)).clone().invert(),t=b.clone().multiply(e);_.copy(g).multiply(m).multiply(t).multiply(x)}const w=u.clone().invert(),S=s.clone().invert();let E=t.clone().multiply(c).multiply(u).multiply(n).multiply(i).multiply(o).multiply(w).multiply(l).multiply(s).multiply(a).multiply(S);const k=(new r.Matrix4).copyPosition(E),M=d.clone().multiply(k);return p.copyPosition(M),E=p.clone().multiply(_),E.premultiply(d.invert()),E}function Q(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function ee(e){return e.split(",").map((function(e){return parseFloat(e)}))}function te(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),(new TextDecoder).decode(new Uint8Array(e,t,n))}function ne(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}},23:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MTLLoader:()=>i});var r=n(477);class i extends r.Loader{constructor(e){super(e)}load(e,t,n,i){const o=this,a=""===this.path?r.LoaderUtils.extractUrlBase(e):this.path,s=new r.FileLoader(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{t(o.parse(n,a))}catch(t){i?i(t):console.error(t),o.manager.itemError(e)}}),n,i)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const n=e.split("\n");let r={};const i=/\s+/,a={};for(let e=0;e<n.length;e++){let t=n[e];if(t=t.trim(),0===t.length||"#"===t.charAt(0))continue;const o=t.indexOf(" ");let s=o>=0?t.substring(0,o):t;s=s.toLowerCase();let l=o>=0?t.substring(o+1):"";if(l=l.trim(),"newmtl"===s)r={name:l},a[l]=r;else if("ka"===s||"kd"===s||"ks"===s||"ke"===s){const e=l.split(i,3);r[s]=[parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2])]}else r[s]=l}const s=new o(this.resourcePath||t,this.materialOptions);return s.setCrossOrigin(this.crossOrigin),s.setManager(this.manager),s.setMaterials(a),s}}class o{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:r.FrontSide,this.wrap=void 0!==this.options.wrap?this.options.wrap:r.RepeatWrapping}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const n in e){const r=e[n],i={};t[n]=i;for(const e in r){let t=!0,n=r[e];const o=e.toLowerCase();switch(o){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(n=[n[0]/255,n[1]/255,n[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===n[0]&&0===n[1]&&0===n[2]&&(t=!1)}t&&(i[o]=n)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,n=this.materialsInfo[e],i={name:e,side:this.side};function o(e,n){if(i[e])return;const o=t.getTextureParams(n,i),a=t.loadTexture((s=t.baseUrl,"string"!=typeof(l=o.url)||""===l?"":/^https?:\/\//i.test(l)?l:s+l));var s,l;a.repeat.copy(o.scale),a.offset.copy(o.offset),a.wrapS=t.wrap,a.wrapT=t.wrap,"map"!==e&&"emissiveMap"!==e||(a.encoding=r.sRGBEncoding),i[e]=a}for(const e in n){const t=n[e];let a;if(""!==t)switch(e.toLowerCase()){case"kd":i.color=(new r.Color).fromArray(t).convertSRGBToLinear();break;case"ks":i.specular=(new r.Color).fromArray(t).convertSRGBToLinear();break;case"ke":i.emissive=(new r.Color).fromArray(t).convertSRGBToLinear();break;case"map_kd":o("map",t);break;case"map_ks":o("specularMap",t);break;case"map_ke":o("emissiveMap",t);break;case"norm":o("normalMap",t);break;case"map_bump":case"bump":o("bumpMap",t);break;case"map_d":o("alphaMap",t),i.transparent=!0;break;case"ns":i.shininess=parseFloat(t);break;case"d":a=parseFloat(t),a<1&&(i.opacity=a,i.transparent=!0);break;case"tr":a=parseFloat(t),this.options&&this.options.invertTrProperty&&(a=1-a),a>0&&(i.opacity=1-a,i.transparent=!0)}}return this.materials[e]=new r.MeshPhongMaterial(i),this.materials[e]}getTextureParams(e,t){const n={scale:new r.Vector2(1,1),offset:new r.Vector2(0,0)},i=e.split(/\s+/);let o;return o=i.indexOf("-bm"),o>=0&&(t.bumpScale=parseFloat(i[o+1]),i.splice(o,2)),o=i.indexOf("-s"),o>=0&&(n.scale.set(parseFloat(i[o+1]),parseFloat(i[o+2])),i.splice(o,4)),o=i.indexOf("-o"),o>=0&&(n.offset.set(parseFloat(i[o+1]),parseFloat(i[o+2])),i.splice(o,4)),n.url=i.join(" ").trim(),n}loadTexture(e,t,n,i,o){const a=void 0!==this.manager?this.manager:r.DefaultLoadingManager;let s=a.getHandler(e);null===s&&(s=new r.TextureLoader(a)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin);const l=s.load(e,n,i,o);return void 0!==t&&(l.mapping=t),l}}},11:(e,t,n)=>{"use strict";n.r(t),n.d(t,{OBJLoader:()=>g});var r=n(477);const i=/^[og]\s*(.+)?/,o=/^mtllib /,a=/^usemtl /,s=/^usemap /,l=/\s+/,c=new r.Vector3,u=new r.Vector3,d=new r.Vector3,h=new r.Vector3,p=new r.Vector3,f=new r.Color;function m(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let e=this.materials.length-1;e>=0;e--)this.materials[e].groupCount<=0&&this.materials.splice(e,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){const e=n.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){const r=this.vertices,i=this.object.geometry.normals;c.fromArray(r,e),u.fromArray(r,t),d.fromArray(r,n),p.subVectors(d,u),h.subVectors(c,u),p.cross(h),p.normalize(),i.push(p.x,p.y,p.z),i.push(p.x,p.y,p.z),i.push(p.x,p.y,p.z)},addColor:function(e,t,n){const r=this.colors,i=this.object.geometry.colors;void 0!==r[e]&&i.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&i.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){const r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,i,o,a,s,l){const c=this.vertices.length;let u=this.parseVertexIndex(e,c),d=this.parseVertexIndex(t,c),h=this.parseVertexIndex(n,c);if(this.addVertex(u,d,h),this.addColor(u,d,h),void 0!==a&&""!==a){const e=this.normals.length;u=this.parseNormalIndex(a,e),d=this.parseNormalIndex(s,e),h=this.parseNormalIndex(l,e),this.addNormal(u,d,h)}else this.addFaceNormal(u,d,h);if(void 0!==r&&""!==r){const e=this.uvs.length;u=this.parseUVIndex(r,e),d=this.parseUVIndex(i,e),h=this.parseUVIndex(o,e),this.addUV(u,d,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const r=this.parseVertexIndex(e[n],t);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let t=0,r=e.length;t<r;t++)this.addVertexLine(this.parseVertexIndex(e[t],n));for(let e=0,n=t.length;e<n;e++)this.addUVLine(this.parseUVIndex(t[e],r))}};return e.startObject("",!1),e}class g extends r.Loader{constructor(e){super(e),this.materials=null}load(e,t,n,i){const o=this,a=new r.FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(o.parse(n))}catch(t){i?i(t):console.error(t),o.manager.itemError(e)}}),n,i)}setMaterials(e){return this.materials=e,this}parse(e){const t=new m;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let c=[];for(let e=0,r=n.length;e<r;e++){const r=n[e].trimStart();if(0===r.length)continue;const u=r.charAt(0);if("#"!==u)if("v"===u){const e=r.split(l);switch(e[0]){case"v":t.vertices.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),e.length>=7?(f.setRGB(parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6])).convertSRGBToLinear(),t.colors.push(f.r,f.g,f.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));break;case"vt":t.uvs.push(parseFloat(e[1]),parseFloat(e[2]))}}else if("f"===u){const e=r.slice(1).trim().split(l),n=[];for(let t=0,r=e.length;t<r;t++){const r=e[t];if(r.length>0){const e=r.split("/");n.push(e)}}const i=n[0];for(let e=1,r=n.length-1;e<r;e++){const r=n[e],o=n[e+1];t.addFace(i[0],r[0],o[0],i[1],r[1],o[1],i[2],r[2],o[2])}}else if("l"===u){const e=r.substring(1).trim().split(" ");let n=[];const i=[];if(-1===r.indexOf("/"))n=e;else for(let t=0,r=e.length;t<r;t++){const r=e[t].split("/");""!==r[0]&&n.push(r[0]),""!==r[1]&&i.push(r[1])}t.addLineGeometry(n,i)}else if("p"===u){const e=r.slice(1).trim().split(" ");t.addPointGeometry(e)}else if(null!==(c=i.exec(r))){const e=(" "+c[0].slice(1).trim()).slice(1);t.startObject(e)}else if(a.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(o.test(r))t.materialLibraries.push(r.substring(7).trim());else if(s.test(r))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(c=r.split(" "),c.length>1){const e=c[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const e=t.object.currentMaterial();e&&(e.smooth=t.object.smooth)}else{if("\0"===r)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+r+'"')}}t.finalize();const u=new r.Group;if(u.materialLibraries=[].concat(t.materialLibraries),!0==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let e=0,n=t.objects.length;e<n;e++){const n=t.objects[e],i=n.geometry,o=n.materials,a="Line"===i.type,s="Points"===i.type;let l=!1;if(0===i.vertices.length)continue;const c=new r.BufferGeometry;c.setAttribute("position",new r.Float32BufferAttribute(i.vertices,3)),i.normals.length>0&&c.setAttribute("normal",new r.Float32BufferAttribute(i.normals,3)),i.colors.length>0&&(l=!0,c.setAttribute("color",new r.Float32BufferAttribute(i.colors,3))),!0===i.hasUVIndices&&c.setAttribute("uv",new r.Float32BufferAttribute(i.uvs,2));const d=[];for(let e=0,n=o.length;e<n;e++){const n=o[e],i=n.name+"_"+n.smooth+"_"+l;let c=t.materials[i];if(null!==this.materials)if(c=this.materials.create(n.name),!a||!c||c instanceof r.LineBasicMaterial){if(s&&c&&!(c instanceof r.PointsMaterial)){const e=new r.PointsMaterial({size:10,sizeAttenuation:!1});r.Material.prototype.copy.call(e,c),e.color.copy(c.color),e.map=c.map,c=e}}else{const e=new r.LineBasicMaterial;r.Material.prototype.copy.call(e,c),e.color.copy(c.color),c=e}void 0===c&&(c=a?new r.LineBasicMaterial:s?new r.PointsMaterial({size:1,sizeAttenuation:!1}):new r.MeshPhongMaterial,c.name=n.name,c.flatShading=!n.smooth,c.vertexColors=l,t.materials[i]=c),d.push(c)}let h;if(d.length>1){for(let e=0,t=o.length;e<t;e++){const t=o[e];c.addGroup(t.groupStart,t.groupCount,e)}h=a?new r.LineSegments(c,d):s?new r.Points(c,d):new r.Mesh(c,d)}else h=a?new r.LineSegments(c,d[0]):s?new r.Points(c,d[0]):new r.Mesh(c,d[0]);h.name=n.name,u.add(h)}else if(t.vertices.length>0){const e=new r.PointsMaterial({size:1,sizeAttenuation:!1}),n=new r.BufferGeometry;n.setAttribute("position",new r.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(n.setAttribute("color",new r.Float32BufferAttribute(t.colors,3)),e.vertexColors=!0);const i=new r.Points(n,e);u.add(i)}return u}}},108:(e,t,n)=>{"use strict";n.r(t),n.d(t,{EffectComposer:()=>c});var r=n(477),i=n(154),o=n(304);class a extends o.w{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof r.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=r.UniformsUtils.clone(e.uniforms),this.material=new r.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new o.T(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class s extends o.w{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),i=e.state;let o,a;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(a),i.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class l extends o.w{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class c{constructor(e,t){if(this.renderer=e,void 0===t){const n=e.getSize(new r.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=n.width,this._height=n.height,(t=new r.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new a(i.C),this.clock=new r.Clock}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let t=0,r=this.passes.length;t<r;t++){const r=this.passes[t];if(!1!==r.enabled){if(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(t),r.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),r.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==s&&(r instanceof s?n=!0:r instanceof l&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new r.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let e=0;e<this.passes.length;e++)this.passes[e].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}},304:(e,t,n)=>{"use strict";n.d(t,{T:()=>s,w:()=>i});var r=n(477);class i{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const o=new r.OrthographicCamera(-1,1,1,-1,0,1),a=new r.BufferGeometry;a.setAttribute("position",new r.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),a.setAttribute("uv",new r.Float32BufferAttribute([0,2,0,0,2,0],2));class s{constructor(e){this._mesh=new r.Mesh(a,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,o)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}},458:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RenderPass:()=>o});var r=n(477),i=n(304);class o extends i.w{constructor(e,t,n,i,o){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new r.Color}render(e,t,n){const r=e.autoClear;let i,o;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=r}}},484:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UnrealBloomPass:()=>s});var r=n(477),i=n(304),o=n(154);const a={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new r.Color(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class s extends i.w{constructor(e,t,n,s){super(),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=s,this.resolution=void 0!==e?new r.Vector2(e.x,e.y):new r.Vector2(256,256),this.clearColor=new r.Color(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let l=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2);this.renderTargetBright=new r.WebGLRenderTarget(l,c),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let e=0;e<this.nMips;e++){const t=new r.WebGLRenderTarget(l,c);t.texture.name="UnrealBloomPass.h"+e,t.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(t);const n=new r.WebGLRenderTarget(l,c);n.texture.name="UnrealBloomPass.v"+e,n.texture.generateMipmaps=!1,this.renderTargetsVertical.push(n),l=Math.round(l/2),c=Math.round(c/2)}const u=a;this.highPassUniforms=r.UniformsUtils.clone(u.uniforms),this.highPassUniforms.luminosityThreshold.value=s,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new r.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const d=[3,5,7,9,11];l=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2);for(let e=0;e<this.nMips;e++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(d[e])),this.separableBlurMaterials[e].uniforms.texSize.value=new r.Vector2(l,c),l=Math.round(l/2),c=Math.round(c/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0,this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new r.Vector3(1,1,1),new r.Vector3(1,1,1),new r.Vector3(1,1,1),new r.Vector3(1,1,1),new r.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const h=o.C;this.copyUniforms=r.UniformsUtils.clone(h.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new r.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,blending:r.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new r.Color,this.oldClearAlpha=1,this.basic=new r.MeshBasicMaterial,this.fsQuad=new i.T(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.materialCopy.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,t){let n=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(n,i);for(let e=0;e<this.nMips;e++)this.renderTargetsHorizontal[e].setSize(n,i),this.renderTargetsVertical[e].setSize(n,i),this.separableBlurMaterials[e].uniforms.texSize.value=new r.Vector2(n,i),n=Math.round(n/2),i=Math.round(i/2)}render(e,t,n,r,i){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),i&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let t=0;t<this.nMips;t++)this.fsQuad.material=this.separableBlurMaterials[t],this.separableBlurMaterials[t].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[t].uniforms.direction.value=s.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[t]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[t].uniforms.colorTexture.value=this.renderTargetsHorizontal[t].texture,this.separableBlurMaterials[t].uniforms.direction.value=s.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[t]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[t];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}getSeperableBlurMaterial(e){return new r.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new r.Vector2(.5,.5)},direction:{value:new r.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat fSigma = float(SIGMA);\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(e){return new r.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}s.BlurDirectionX=new r.Vector2(1,0),s.BlurDirectionY=new r.Vector2(0,1)},154:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});const r={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r](o,o.exports,n),o.loaded=!0,o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e,t=n(477),r=n(365),i=n(23),o=n(11),a=n(86),s=n(458),l=n(108),c=n(484),u=n(381);n(654).default.initialize();var d=u.getProject("Main");e=d.sheet("Scene");var h=new t.Scene,p=new t.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e5);p.position.x=142.75045088038718,p.position.y=131.92094293881487,p.position.z=209.76686235092527;var f=new t.LoadingManager;f.onStart=function(e,t,n){console.log("Started loading: ".concat(e))},f.onProgress=function(e,t,n){console.log("Loading: ".concat(e))},f.onLoad=function(){console.log("Finish loading")},f.onError=function(e){console.log("Error loading:  ".concat(e))};var m=new t.WebGLRenderer({antialias:!0,alpha:!0});h.background=new t.Color(0),m.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(m.domElement);var g=new r.OrbitControls(p,m.domElement);g.enableDamping=!0,g.dampingFactor=.25,g.enableZoom=!0;var v=new t.DirectionalLight(new t.Color("hsl(30, 100%, 75%)"),1);v.position.set(-100,0,100);var y=new t.DirectionalLight(new t.Color("hsl(240, 100%, 75%)"),.75);y.position.set(100,0,100);var b=new t.DirectionalLight(16777215,1);b.position.set(100,0,-100).normalize(),h.add(v),h.add(y),h.add(b),new i.MTLLoader(f).setPath("models/");var x,_=new o.OBJLoader;_.setPath("models/"),(new a.FBXLoader).setPath("models/"),_.load("Coffe.obj",(function(t){t.traverse((function(e){e.isMesh&&(e.material.color.set(65535),e.material.wireframe=!0,e.material.opacity=.7,e.material.transparent=!0,e.material.emissive.set(65535),console.log(e.material))})),t.scale.set(100,100,100),h.add(t),t.position.y-=60,x=t,e.object("Coffe",{position:{x:0,y:-60,z:0},rotation:{x:0,y:-60,z:0}}).onValuesChange((function(e){x.rotation.x=e.rotation.x,x.rotation.y=e.rotation.y,x.rotation.z=e.rotation.z,x.position.x=e.position.x,x.position.y=e.position.y,x.position.z=e.position.z}))}));var w=new s.RenderPass(h,p),S=new l.EffectComposer(m);S.addPass(w);var E=new c.UnrealBloomPass(new t.Vector2(window.innerWidth,window.innerHeight),.3,.1,.1);S.addPass(E);var k=function(){requestAnimationFrame(k),g.update(),S.render(),null!=x&&(x.rotation.y+=.003)};k()})()})();